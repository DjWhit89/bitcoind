<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="en-US">
  <compounddef id="classminiscript_1_1_type" kind="class" language="C++" prot="public">
    <compoundname>miniscript::Type</compoundname>
    <includes refid="miniscript_8h" local="no">miniscript.h</includes>
    <sectiondef kind="private-attrib">
      <memberdef kind="variable" id="classminiscript_1_1_type_1af1942661f0661ce44cb8e6f4af7df19a" prot="private" static="no" mutable="no">
        <type>uint32_t</type>
        <definition>uint32_t m_flags</definition>
        <argsstring></argsstring>
        <name>m_flags</name>
        <qualifiedname>miniscript::Type::m_flags</qualifiedname>
        <briefdescription>
<para>Internal bitmap of properties (see &quot;&quot;_mst operator for details). </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/script/miniscript.h" line="128" column="14" bodyfile="src/script/miniscript.h" bodystart="128" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-func">
      <memberdef kind="function" id="classminiscript_1_1_type_1a710430c67f56ecf54c30fdeb0502bb52" prot="private" static="no" constexpr="yes" const="no" explicit="yes" inline="yes" virt="non-virtual">
        <type>constexpr</type>
        <definition>Type</definition>
        <argsstring>(uint32_t flags)</argsstring>
        <name>Type</name>
        <qualifiedname>miniscript::Type::Type</qualifiedname>
        <param>
          <type>uint32_t</type>
          <declname>flags</declname>
        </param>
        <briefdescription>
<para>Internal constructor used by the &quot;&quot;_mst operator. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/script/miniscript.h" line="131" column="24" bodyfile="src/script/miniscript.h" bodystart="131" bodyend="131"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="friend">
      <memberdef kind="friend" id="classminiscript_1_1_type_1aa18c69f8bbcd4b37faa9d96250ffad7f" prot="public" static="no" consteval="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Type</type>
        <definition>Type operator&quot;&quot;_mst</definition>
        <argsstring>(const char *c, size_t l)</argsstring>
        <name>operator&quot;&quot;_mst</name>
        <qualifiedname>miniscript::Type::operator&quot;&quot;_mst</qualifiedname>
        <param>
          <type>const char *</type>
          <declname>c</declname>
        </param>
        <param>
          <type>size_t</type>
          <declname>l</declname>
        </param>
        <briefdescription>
<para>The only way to publicly construct a <ref refid="classminiscript_1_1_type" kindref="compound">Type</ref> is using this literal operator. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/script/miniscript.h" line="135" column="27" bodyfile="src/script/miniscript.h" bodystart="157" bodyend="187"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-func">
      <memberdef kind="function" id="classminiscript_1_1_type_1aa58345ef655940616bd03f35d4c79b6b" prot="public" static="no" constexpr="yes" const="yes" explicit="no" inline="yes" virt="non-virtual">
        <type>Type</type>
        <definition>Type operator|</definition>
        <argsstring>(Type x) const</argsstring>
        <name>operator|</name>
        <qualifiedname>miniscript::Type::operator|</qualifiedname>
        <param>
          <type>Type</type>
          <declname>x</declname>
        </param>
        <briefdescription>
<para>Compute the type with the union of properties. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/script/miniscript.h" line="138" column="20" bodyfile="src/script/miniscript.h" bodystart="138" bodyend="138"/>
      </memberdef>
      <memberdef kind="function" id="classminiscript_1_1_type_1ac509dfc3e180f1d2aa512af53908c969" prot="public" static="no" constexpr="yes" const="yes" explicit="no" inline="yes" virt="non-virtual">
        <type>Type</type>
        <definition>Type operator&amp;</definition>
        <argsstring>(Type x) const</argsstring>
        <name>operator&amp;</name>
        <qualifiedname>miniscript::Type::operator&amp;</qualifiedname>
        <param>
          <type>Type</type>
          <declname>x</declname>
        </param>
        <briefdescription>
<para>Compute the type with the intersection of properties. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/script/miniscript.h" line="141" column="20" bodyfile="src/script/miniscript.h" bodystart="141" bodyend="141"/>
      </memberdef>
      <memberdef kind="function" id="classminiscript_1_1_type_1a5fee719ce71eb863297aae67217ac617" prot="public" static="no" constexpr="yes" const="yes" explicit="no" inline="yes" virt="non-virtual">
        <type>bool</type>
        <definition>bool operator&lt;&lt;</definition>
        <argsstring>(Type x) const</argsstring>
        <name>operator&lt;&lt;</name>
        <qualifiedname>miniscript::Type::operator&lt;&lt;</qualifiedname>
        <param>
          <type>Type</type>
          <declname>x</declname>
        </param>
        <briefdescription>
<para>Check whether the left hand&apos;s properties are superset of the right&apos;s (= left is a subtype of right). </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/script/miniscript.h" line="144" column="15" bodyfile="src/script/miniscript.h" bodystart="144" bodyend="144"/>
      </memberdef>
      <memberdef kind="function" id="classminiscript_1_1_type_1a2bce9880c3beb4640853608a0ef156f6" prot="public" static="no" constexpr="yes" const="yes" explicit="no" inline="yes" virt="non-virtual">
        <type>bool</type>
        <definition>bool operator&lt;</definition>
        <argsstring>(Type x) const</argsstring>
        <name>operator&lt;</name>
        <qualifiedname>miniscript::Type::operator&lt;</qualifiedname>
        <param>
          <type>Type</type>
          <declname>x</declname>
        </param>
        <briefdescription>
<para>Comparison operator to enable use in sets/maps (total ordering incompatible with &lt;&lt;). </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/script/miniscript.h" line="147" column="15" bodyfile="src/script/miniscript.h" bodystart="147" bodyend="147"/>
      </memberdef>
      <memberdef kind="function" id="classminiscript_1_1_type_1a3a1d5901e2080b0e618344205105437f" prot="public" static="no" constexpr="yes" const="yes" explicit="no" inline="yes" virt="non-virtual">
        <type>bool</type>
        <definition>bool operator==</definition>
        <argsstring>(Type x) const</argsstring>
        <name>operator==</name>
        <qualifiedname>miniscript::Type::operator==</qualifiedname>
        <param>
          <type>Type</type>
          <declname>x</declname>
        </param>
        <briefdescription>
<para>Equality operator. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/script/miniscript.h" line="150" column="20" bodyfile="src/script/miniscript.h" bodystart="150" bodyend="150"/>
      </memberdef>
      <memberdef kind="function" id="classminiscript_1_1_type_1ae263399c804447fedd628d3b3698b858" prot="public" static="no" constexpr="yes" const="yes" explicit="no" inline="yes" virt="non-virtual">
        <type>Type</type>
        <definition>Type If</definition>
        <argsstring>(bool x) const</argsstring>
        <name>If</name>
        <qualifiedname>miniscript::Type::If</qualifiedname>
        <param>
          <type>bool</type>
          <declname>x</declname>
        </param>
        <briefdescription>
<para>The empty type if x is false, itself otherwise. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/script/miniscript.h" line="153" column="20" bodyfile="src/script/miniscript.h" bodystart="153" bodyend="153"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>This type encapsulates the miniscript type system properties.</para>
<para>Every miniscript expression is one of 4 basic types, and additionally has a number of boolean type properties.</para>
<para>The basic types are:<itemizedlist>
<listitem><para>&quot;B&quot; <ref refid="class_base" kindref="compound">Base</ref>:<itemizedlist>
<listitem><para>Takes its inputs from the top of the stack.</para>
</listitem><listitem><para>When satisfied, pushes a nonzero value of up to 4 bytes onto the stack.</para>
</listitem><listitem><para>When dissatisfied, pushes a 0 onto the stack.</para>
</listitem><listitem><para>This is used for most expressions, and required for the top level one.</para>
</listitem><listitem><para>For example: older(n) = &lt;n&gt; OP_CHECKSEQUENCEVERIFY.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para>&quot;V&quot; Verify:<itemizedlist>
<listitem><para>Takes its inputs from the top of the stack.</para>
</listitem><listitem><para>When satisfied, pushes nothing.</para>
</listitem><listitem><para>Cannot be dissatisfied.</para>
</listitem><listitem><para>This can be obtained by adding an OP_VERIFY to a B, modifying the last opcode of a B to its -VERIFY version (only for OP_CHECKSIG, OP_CHECKSIGVERIFY, OP_NUMEQUAL and OP_EQUAL), or by combining a V fragment under some conditions.</para>
</listitem><listitem><para>For example vc:pk_k(key) = &lt;key&gt; OP_CHECKSIGVERIFY</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para>&quot;K&quot; Key:<itemizedlist>
<listitem><para>Takes its inputs from the top of the stack.</para>
</listitem><listitem><para>Becomes a B when followed by OP_CHECKSIG.</para>
</listitem><listitem><para>Always pushes a public key onto the stack, for which a signature is to be provided to satisfy the expression.</para>
</listitem><listitem><para>For example pk_h(key) = OP_DUP OP_HASH160 &lt;Hash160(key)&gt; OP_EQUALVERIFY</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para>&quot;W&quot; Wrapped:<itemizedlist>
<listitem><para>Takes its input from one below the top of the stack.</para>
</listitem><listitem><para>When satisfied, pushes a nonzero value (like B) on top of the stack, or one below.</para>
</listitem><listitem><para>When dissatisfied, pushes 0 op top of the stack or one below.</para>
</listitem><listitem><para>Is always &quot;OP_SWAP [B]&quot; or &quot;OP_TOALTSTACK [B] OP_FROMALTSTACK&quot;.</para>
</listitem><listitem><para>For example sc:pk_k(key) = OP_SWAP &lt;key&gt; OP_CHECKSIG</para>
</listitem></itemizedlist>
</para>
</listitem></itemizedlist>
</para>
<para>There are type properties that help reasoning about correctness:<itemizedlist>
<listitem><para>&quot;z&quot; Zero-arg:<itemizedlist>
<listitem><para>Is known to always consume exactly 0 stack elements.</para>
</listitem><listitem><para>For example after(n) = &lt;n&gt; OP_CHECKLOCKTIMEVERIFY</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para>&quot;o&quot; One-arg:<itemizedlist>
<listitem><para>Is known to always consume exactly 1 stack element.</para>
</listitem><listitem><para>Conflicts with property &apos;z&apos;</para>
</listitem><listitem><para>For example <ref refid="namespacesha256" kindref="compound">sha256(hash)</ref> = OP_SIZE 32 OP_EQUALVERIFY OP_SHA256 &lt;hash&gt; OP_EQUAL</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para>&quot;n&quot; Nonzero:<itemizedlist>
<listitem><para>For every way this expression can be satisfied, a satisfaction exists that never needs a zero top stack element.</para>
</listitem><listitem><para>Conflicts with property &apos;z&apos; and with type &apos;W&apos;.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para>&quot;d&quot; Dissatisfiable:<itemizedlist>
<listitem><para>There is an easy way to construct a dissatisfaction for this expression.</para>
</listitem><listitem><para>Conflicts with type &apos;V&apos;.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para>&quot;u&quot; Unit:<itemizedlist>
<listitem><para>In case of satisfaction, an exact 1 is put on the stack (rather than just nonzero).</para>
</listitem><listitem><para>Conflicts with type &apos;V&apos;.</para>
</listitem></itemizedlist>
</para>
</listitem></itemizedlist>
</para>
<para>Additional type properties help reasoning about nonmalleability:<itemizedlist>
<listitem><para>&quot;e&quot; Expression:<itemizedlist>
<listitem><para>This implies property &apos;d&apos;, but the dissatisfaction is nonmalleable.</para>
</listitem><listitem><para>This generally requires &apos;e&apos; for all subexpressions which are invoked for that dissatisfaction, and property &apos;f&apos; for the unexecuted subexpressions in that case.</para>
</listitem><listitem><para>Conflicts with type &apos;V&apos;.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para>&quot;f&quot; Forced:<itemizedlist>
<listitem><para>Dissatisfactions (if any) for this expression always involve at least one signature.</para>
</listitem><listitem><para>Is always true for type &apos;V&apos;.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para>&quot;s&quot; Safe:<itemizedlist>
<listitem><para>Satisfactions for this expression always involve at least one signature.</para>
</listitem></itemizedlist>
</para>
</listitem><listitem><para>&quot;m&quot; Nonmalleable:<itemizedlist>
<listitem><para>For every way this expression can be satisfied (which may be none), a nonmalleable satisfaction exists.</para>
</listitem><listitem><para>This generally requires &apos;m&apos; for all subexpressions, and &apos;e&apos; for all subexpressions which are dissatisfied when satisfying the parent.</para>
</listitem></itemizedlist>
</para>
</listitem></itemizedlist>
</para>
<para>One type property is an implementation detail:<itemizedlist>
<listitem><para>&quot;x&quot; Expensive verify:<itemizedlist>
<listitem><para>Expressions with this property have a script whose last opcode is not EQUAL, CHECKSIG, or CHECKMULTISIG.</para>
</listitem><listitem><para>Not having this property means that it can be converted to a V at no cost (by switching to the -VERIFY version of the last opcode).</para>
</listitem></itemizedlist>
</para>
</listitem></itemizedlist>
</para>
<para>Five more type properties for representing timelock information. Spend paths in miniscripts containing conflicting timelocks and heightlocks cannot be spent together. This helps users detect if miniscript does not match the semantic behaviour the user expects.<itemizedlist>
<listitem><para>&quot;g&quot; Whether the branch contains a relative time timelock</para>
</listitem><listitem><para>&quot;h&quot; Whether the branch contains a relative height timelock</para>
</listitem><listitem><para>&quot;i&quot; Whether the branch contains an absolute time timelock</para>
</listitem><listitem><para>&quot;j&quot; Whether the branch contains an absolute height timelock</para>
</listitem><listitem><para>&quot;k&quot;<itemizedlist>
<listitem><para>Whether all satisfactions of this expression don&apos;t contain a mix of heightlock and timelock of the same type.</para>
</listitem><listitem><para>If the miniscript does not have the &quot;k&quot; property, the miniscript template will not match the user expectation of the corresponding spending policy. For each of these properties the subset rule holds: an expression with properties X, Y, and Z, is also valid in places where an X, a Y, a Z, an XY, ... is expected. </para>
</listitem></itemizedlist>
</para>
</listitem></itemizedlist>
</para>
    </detaileddescription>
    <location file="src/script/miniscript.h" line="126" column="1" bodyfile="src/script/miniscript.h" bodystart="126" bodyend="154"/>
    <listofallmembers>
      <member refid="classminiscript_1_1_type_1ae263399c804447fedd628d3b3698b858" prot="public" virt="non-virtual"><scope>miniscript::Type</scope><name>If</name></member>
      <member refid="classminiscript_1_1_type_1af1942661f0661ce44cb8e6f4af7df19a" prot="private" virt="non-virtual"><scope>miniscript::Type</scope><name>m_flags</name></member>
      <member refid="classminiscript_1_1_type_1aa18c69f8bbcd4b37faa9d96250ffad7f" prot="public" virt="non-virtual"><scope>miniscript::Type</scope><name>operator&quot;&quot;_mst</name></member>
      <member refid="classminiscript_1_1_type_1ac509dfc3e180f1d2aa512af53908c969" prot="public" virt="non-virtual"><scope>miniscript::Type</scope><name>operator&amp;</name></member>
      <member refid="classminiscript_1_1_type_1a2bce9880c3beb4640853608a0ef156f6" prot="public" virt="non-virtual"><scope>miniscript::Type</scope><name>operator&lt;</name></member>
      <member refid="classminiscript_1_1_type_1a5fee719ce71eb863297aae67217ac617" prot="public" virt="non-virtual"><scope>miniscript::Type</scope><name>operator&lt;&lt;</name></member>
      <member refid="classminiscript_1_1_type_1a3a1d5901e2080b0e618344205105437f" prot="public" virt="non-virtual"><scope>miniscript::Type</scope><name>operator==</name></member>
      <member refid="classminiscript_1_1_type_1aa58345ef655940616bd03f35d4c79b6b" prot="public" virt="non-virtual"><scope>miniscript::Type</scope><name>operator|</name></member>
      <member refid="classminiscript_1_1_type_1a710430c67f56ecf54c30fdeb0502bb52" prot="private" virt="non-virtual"><scope>miniscript::Type</scope><name>Type</name></member>
    </listofallmembers>
  </compounddef>
</doxygen>
