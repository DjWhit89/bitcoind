<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="en-US">
  <compounddef id="class_transport" kind="class" language="C++" prot="public" abstract="yes">
    <compoundname>Transport</compoundname>
    <derivedcompoundref refid="class_v1_transport" prot="public" virt="non-virtual">V1Transport</derivedcompoundref>
    <derivedcompoundref refid="class_v2_transport" prot="public" virt="non-virtual">V2Transport</derivedcompoundref>
    <includes refid="net_8h" local="no">net.h</includes>
    <innerclass refid="struct_transport_1_1_info" prot="public">Transport::Info</innerclass>
    <sectiondef kind="public-type">
      <memberdef kind="typedef" id="class_transport_1af6ca4dbfbf45f9bd26bc6bf4a6adfb9f" prot="public" static="no">
        <type>std::tuple&lt; std::span&lt; const uint8_t &gt;, bool, const std::string &amp; &gt;</type>
        <definition>using BytesToSend =  std::tuple&lt;
        std::span&lt;const uint8_t&gt; ,
        bool ,
        const std::string&amp; 
    &gt;</definition>
        <argsstring></argsstring>
        <name>BytesToSend</name>
        <qualifiedname>Transport::BytesToSend</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Return type for GetBytesToSend, consisting of:<itemizedlist>
<listitem><para>std::span&lt;const uint8_t&gt; to_send: span of bytes to be sent over the wire (possibly empty).</para>
</listitem><listitem><para>bool more: whether there will be more bytes to be sent after the ones in to_send are all sent (as signaled by <ref refid="class_transport_1a915249a31c6d363883f933cbbd07d22f" kindref="member">MarkBytesSent()</ref>).</para>
</listitem><listitem><para>const std::string&amp; m_type: message type on behalf of which this is being sent (&quot;&quot; for bytes that are not on behalf of any message). </para>
</listitem></itemizedlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/net.h" line="310" column="5" bodyfile="src/net.h" bodystart="310" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-func">
      <memberdef kind="function" id="class_transport_1a9c4cb2756aafdbaa8e42942407e42e6c" prot="public" static="no" const="no" explicit="no" inline="no" virt="virtual">
        <type></type>
        <definition>virtual ~Transport</definition>
        <argsstring>()=default</argsstring>
        <name>~Transport</name>
        <qualifiedname>Transport::~Transport</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/net.h" line="259" column="13"/>
      </memberdef>
      <memberdef kind="function" id="class_transport_1a48296f31d432a8809164b3f97bbc1e4a" prot="public" static="no" const="yes" explicit="no" inline="no" noexcept="yes" virt="pure-virtual">
        <type><ref refid="struct_transport_1_1_info" kindref="compound">Info</ref></type>
        <definition>virtual Info GetInfo</definition>
        <argsstring>() const noexcept=0</argsstring>
        <name>GetInfo</name>
        <qualifiedname>Transport::GetInfo</qualifiedname>
        <reimplementedby refid="class_v1_transport_1a58bd1ab368e66f029f6029a004871f34">GetInfo</reimplementedby>
        <reimplementedby refid="class_v2_transport_1a52d0c2171a477c4f78137f806a4871f0">GetInfo</reimplementedby>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retrieve information about this transport. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/net.h" line="268" column="18"/>
      </memberdef>
      <memberdef kind="function" id="class_transport_1ad72f1df14e7c2b557c3f780d25361073" prot="public" static="no" const="yes" explicit="no" inline="no" virt="pure-virtual">
        <type>bool</type>
        <definition>virtual bool ReceivedMessageComplete</definition>
        <argsstring>() const =0</argsstring>
        <name>ReceivedMessageComplete</name>
        <qualifiedname>Transport::ReceivedMessageComplete</qualifiedname>
        <reimplementedby refid="class_v1_transport_1a8d29e67c1f1ec0f0bc1e0adcdb458c0d">ReceivedMessageComplete</reimplementedby>
        <reimplementedby refid="class_v2_transport_1a4f36f118f8160d80099867d6649af983">ReceivedMessageComplete</reimplementedby>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns true if the current message is complete (so GetReceivedMessage can be called). </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/net.h" line="274" column="18"/>
      </memberdef>
      <memberdef kind="function" id="class_transport_1af5340b2062e8681b6fb7d8f5a724102d" prot="public" static="no" const="no" explicit="no" inline="no" virt="pure-virtual">
        <type>bool</type>
        <definition>virtual bool ReceivedBytes</definition>
        <argsstring>(std::span&lt; const uint8_t &gt; &amp;msg_bytes)=0</argsstring>
        <name>ReceivedBytes</name>
        <qualifiedname>Transport::ReceivedBytes</qualifiedname>
        <reimplementedby refid="class_v1_transport_1a7b1c80d6eaf17aa27556eb6ed47315c0">ReceivedBytes</reimplementedby>
        <reimplementedby refid="class_v2_transport_1a5691fd1213bde99a8f6b51b0db49c799">ReceivedBytes</reimplementedby>
        <param>
          <type>std::span&lt; const uint8_t &gt; &amp;</type>
          <declname>msg_bytes</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Feed wire bytes to the transport.</para>
<para><simplesect kind="return"><para>false if some bytes were invalid, in which case the transport can&apos;t be used anymore.</para>
</simplesect>
Consumed bytes are chopped off the front of msg_bytes. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/net.h" line="282" column="18"/>
      </memberdef>
      <memberdef kind="function" id="class_transport_1a65899c32e93818026372178488912881" prot="public" static="no" const="no" explicit="no" inline="no" virt="pure-virtual">
        <type><ref refid="class_c_net_message" kindref="compound">CNetMessage</ref></type>
        <definition>virtual CNetMessage GetReceivedMessage</definition>
        <argsstring>(std::chrono::microseconds time, bool &amp;reject_message)=0</argsstring>
        <name>GetReceivedMessage</name>
        <qualifiedname>Transport::GetReceivedMessage</qualifiedname>
        <reimplementedby refid="class_v1_transport_1ada4775fac2b99d16d44d7e811cc8d5ef">GetReceivedMessage</reimplementedby>
        <reimplementedby refid="class_v2_transport_1a12316f223ad2873017e085b2aacaa6ec">GetReceivedMessage</reimplementedby>
        <param>
          <type>std::chrono::microseconds</type>
          <declname>time</declname>
        </param>
        <param>
          <type>bool &amp;</type>
          <declname>reject_message</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retrieve a completed message from transport.</para>
<para>This can only be called when <ref refid="class_transport_1ad72f1df14e7c2b557c3f780d25361073" kindref="member">ReceivedMessageComplete()</ref> is true.</para>
<para>If reject_message=true is returned the message itself is invalid, but (other than false returned by ReceivedBytes) the transport is not in an inconsistent state. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/net.h" line="291" column="25"/>
      </memberdef>
      <memberdef kind="function" id="class_transport_1a7f7875e9c9bf5903f84dba2123309c01" prot="public" static="no" const="no" explicit="no" inline="no" noexcept="yes" virt="pure-virtual">
        <type>bool</type>
        <definition>virtual bool SetMessageToSend</definition>
        <argsstring>(CSerializedNetMsg &amp;msg) noexcept=0</argsstring>
        <name>SetMessageToSend</name>
        <qualifiedname>Transport::SetMessageToSend</qualifiedname>
        <reimplementedby refid="class_v1_transport_1ae61bb32e8ff51cb3802156ab3eb10556">SetMessageToSend</reimplementedby>
        <reimplementedby refid="class_v2_transport_1ae61bb32e8ff51cb3802156ab3eb10556">SetMessageToSend</reimplementedby>
        <param>
          <type><ref refid="struct_c_serialized_net_msg" kindref="compound">CSerializedNetMsg</ref> &amp;</type>
          <declname>msg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Set the next message to send.</para>
<para>If no message can currently be set (perhaps because the previous one is not yet done being sent), returns false, and msg will be unmodified. Otherwise msg is enqueued (and possibly moved-from) and true is returned. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/net.h" line="301" column="18"/>
      </memberdef>
      <memberdef kind="function" id="class_transport_1afe903c5a52b321e189d97c6edbb64e95" prot="public" static="no" const="yes" explicit="no" inline="no" noexcept="yes" virt="pure-virtual">
        <type><ref refid="class_transport_1af6ca4dbfbf45f9bd26bc6bf4a6adfb9f" kindref="member">BytesToSend</ref></type>
        <definition>virtual BytesToSend GetBytesToSend</definition>
        <argsstring>(bool have_next_message) const noexcept=0</argsstring>
        <name>GetBytesToSend</name>
        <qualifiedname>Transport::GetBytesToSend</qualifiedname>
        <reimplementedby refid="class_v1_transport_1a39dcf7de09089dc617df00c6850647b3">GetBytesToSend</reimplementedby>
        <reimplementedby refid="class_v2_transport_1a39dcf7de09089dc617df00c6850647b3">GetBytesToSend</reimplementedby>
        <param>
          <type>bool</type>
          <declname>have_next_message</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get bytes to send on the wire, if any, along with other information about it.</para>
<para>As a const function, it does not modify the transport&apos;s observable state, and is thus safe to be called multiple times.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">have_next_message</parametername>
</parameternamelist>
<parameterdescription>
<para>If true, the &quot;more&quot; return value reports whether more will be sendable after a SetMessageToSend call. It is set by the caller when they know they have another message ready to send, and only care about what happens after that. The have_next_message argument only affects this &quot;more&quot; return value and nothing else.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
Effectively, there are three possible outcomes about whether there are more bytes to send:<itemizedlist>
<listitem><para>Yes: the transport itself has more bytes to send later. For example, for <ref refid="class_v1_transport" kindref="compound">V1Transport</ref> this happens during the sending of the header of a message, when there is a non-empty payload that follows.</para>
</listitem><listitem><para>No: the transport itself has no more bytes to send, but will have bytes to send if handed a message through SetMessageToSend. In <ref refid="class_v1_transport" kindref="compound">V1Transport</ref> this happens when sending the payload of a message.</para>
</listitem><listitem><para>Blocked: the transport itself has no more bytes to send, and is also incapable of sending anything more at all now, if it were handed another message to send. This occurs in <ref refid="class_v2_transport" kindref="compound">V2Transport</ref> before the handshake is complete, as the encryption ciphers are not set up for sending messages before that point.</para>
</listitem></itemizedlist>
</para>
<para>The boolean &apos;more&apos; is true for Yes, false for Blocked, and have_next_message controls what is returned for No.</para>
<para><simplesect kind="return"><para>a <ref refid="class_transport_1af6ca4dbfbf45f9bd26bc6bf4a6adfb9f" kindref="member">BytesToSend</ref> object. The to_send member returned acts as a stream which is only ever appended to. This means that with the exception of MarkBytesSent (which pops bytes off the front of later to_sends), operations on the transport can only append to what is being returned. Also note that m_type and to_send refer to data that is internal to the transport, and calling any non-const function on this object may invalidate them. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/net.h" line="351" column="25"/>
      </memberdef>
      <memberdef kind="function" id="class_transport_1a915249a31c6d363883f933cbbd07d22f" prot="public" static="no" const="no" explicit="no" inline="no" noexcept="yes" virt="pure-virtual">
        <type>void</type>
        <definition>virtual void MarkBytesSent</definition>
        <argsstring>(size_t bytes_sent) noexcept=0</argsstring>
        <name>MarkBytesSent</name>
        <qualifiedname>Transport::MarkBytesSent</qualifiedname>
        <reimplementedby refid="class_v1_transport_1ac69707799060ee90f662f6139bf01505">MarkBytesSent</reimplementedby>
        <reimplementedby refid="class_v2_transport_1ac69707799060ee90f662f6139bf01505">MarkBytesSent</reimplementedby>
        <param>
          <type>size_t</type>
          <declname>bytes_sent</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Report how many bytes returned by the last <ref refid="class_transport_1afe903c5a52b321e189d97c6edbb64e95" kindref="member">GetBytesToSend()</ref> have been sent.</para>
<para>bytes_sent cannot exceed to_send.size() of the last <ref refid="class_transport_1afe903c5a52b321e189d97c6edbb64e95" kindref="member">GetBytesToSend()</ref> result.</para>
<para>If bytes_sent=0, this call has no effect. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/net.h" line="359" column="18"/>
      </memberdef>
      <memberdef kind="function" id="class_transport_1a091196a6bab12cd2fe571129015bba8b" prot="public" static="no" const="yes" explicit="no" inline="no" noexcept="yes" virt="pure-virtual">
        <type>size_t</type>
        <definition>virtual size_t GetSendMemoryUsage</definition>
        <argsstring>() const noexcept=0</argsstring>
        <name>GetSendMemoryUsage</name>
        <qualifiedname>Transport::GetSendMemoryUsage</qualifiedname>
        <reimplementedby refid="class_v1_transport_1a6064b63ffba8cdc3f48a4217f75e3f93">GetSendMemoryUsage</reimplementedby>
        <reimplementedby refid="class_v2_transport_1a6064b63ffba8cdc3f48a4217f75e3f93">GetSendMemoryUsage</reimplementedby>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Return the memory usage of this transport attributable to buffered data to send. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/net.h" line="362" column="20"/>
      </memberdef>
      <memberdef kind="function" id="class_transport_1ab8e03c4ee651c248fe3c67c55844681c" prot="public" static="no" const="yes" explicit="no" inline="no" noexcept="yes" virt="pure-virtual">
        <type>bool</type>
        <definition>virtual bool ShouldReconnectV1</definition>
        <argsstring>() const noexcept=0</argsstring>
        <name>ShouldReconnectV1</name>
        <qualifiedname>Transport::ShouldReconnectV1</qualifiedname>
        <reimplementedby refid="class_v1_transport_1a52b4f178e8f2d4477668b401ed7ea8e1">ShouldReconnectV1</reimplementedby>
        <reimplementedby refid="class_v2_transport_1ab392835ec6771ddb918c7322a2bf1826">ShouldReconnectV1</reimplementedby>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Whether upon disconnections, a reconnect with V1 is warranted. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/net.h" line="367" column="18"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>The <ref refid="class_transport" kindref="compound">Transport</ref> converts one connection&apos;s sent messages to wire bytes, and received bytes back. </para>
    </detaileddescription>
    <inheritancegraph>
      <node id="1">
        <label>Transport</label>
        <link refid="class_transport"/>
      </node>
      <node id="2">
        <label>V1Transport</label>
        <link refid="class_v1_transport"/>
        <childnode refid="1" relation="public-inheritance">
        </childnode>
      </node>
      <node id="3">
        <label>V2Transport</label>
        <link refid="class_v2_transport"/>
        <childnode refid="1" relation="public-inheritance">
        </childnode>
      </node>
    </inheritancegraph>
    <location file="src/net.h" line="257" column="1" bodyfile="src/net.h" bodystart="257" bodyend="368"/>
    <listofallmembers>
      <member refid="class_transport_1af6ca4dbfbf45f9bd26bc6bf4a6adfb9f" prot="public" virt="non-virtual"><scope>Transport</scope><name>BytesToSend</name></member>
      <member refid="class_transport_1afe903c5a52b321e189d97c6edbb64e95" prot="public" virt="pure-virtual"><scope>Transport</scope><name>GetBytesToSend</name></member>
      <member refid="class_transport_1a48296f31d432a8809164b3f97bbc1e4a" prot="public" virt="pure-virtual"><scope>Transport</scope><name>GetInfo</name></member>
      <member refid="class_transport_1a65899c32e93818026372178488912881" prot="public" virt="pure-virtual"><scope>Transport</scope><name>GetReceivedMessage</name></member>
      <member refid="class_transport_1a091196a6bab12cd2fe571129015bba8b" prot="public" virt="pure-virtual"><scope>Transport</scope><name>GetSendMemoryUsage</name></member>
      <member refid="class_transport_1a915249a31c6d363883f933cbbd07d22f" prot="public" virt="pure-virtual"><scope>Transport</scope><name>MarkBytesSent</name></member>
      <member refid="class_transport_1af5340b2062e8681b6fb7d8f5a724102d" prot="public" virt="pure-virtual"><scope>Transport</scope><name>ReceivedBytes</name></member>
      <member refid="class_transport_1ad72f1df14e7c2b557c3f780d25361073" prot="public" virt="pure-virtual"><scope>Transport</scope><name>ReceivedMessageComplete</name></member>
      <member refid="class_transport_1a7f7875e9c9bf5903f84dba2123309c01" prot="public" virt="pure-virtual"><scope>Transport</scope><name>SetMessageToSend</name></member>
      <member refid="class_transport_1ab8e03c4ee651c248fe3c67c55844681c" prot="public" virt="pure-virtual"><scope>Transport</scope><name>ShouldReconnectV1</name></member>
      <member refid="class_transport_1a9c4cb2756aafdbaa8e42942407e42e6c" prot="public" virt="virtual"><scope>Transport</scope><name>~Transport</name></member>
    </listofallmembers>
  </compounddef>
</doxygen>
