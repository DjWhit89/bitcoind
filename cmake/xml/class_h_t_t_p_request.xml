<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="en-US">
  <compounddef id="class_h_t_t_p_request" kind="class" language="C++" prot="public">
    <compoundname>HTTPRequest</compoundname>
    <includes refid="httpserver_8h" local="no">httpserver.h</includes>
    <sectiondef kind="public-type">
      <memberdef kind="enum" id="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1" prot="public" static="no" strong="no">
        <type></type>
        <name>RequestMethod</name>
        <qualifiedname>HTTPRequest::RequestMethod</qualifiedname>
        <enumvalue id="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1a6ce26a62afab55d7606ad4e92428b30c" prot="public">
          <name>UNKNOWN</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1a12a8dcf59c16b5aadfda3a08ba67d529" prot="public">
          <name>GET</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1a368c5bc07109370b819193871352b926" prot="public">
          <name>POST</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1a0b0955668575b21eb0ab2272aef49f76" prot="public">
          <name>HEAD</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1afec39d40e8bc9e12afa614df5ddb9fa9" prot="public">
          <name>PUT</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="81" column="5" bodyfile="src/httpserver.h" bodystart="81" bodyend="87"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-attrib">
      <memberdef kind="variable" id="class_h_t_t_p_request_1a27a6cc58bd947852de09feaa5a40f768" prot="private" static="no" mutable="no">
        <type>struct evhttp_request *</type>
        <definition>struct evhttp_request* req</definition>
        <argsstring></argsstring>
        <name>req</name>
        <qualifiedname>HTTPRequest::req</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="73" column="26" bodyfile="src/httpserver.h" bodystart="73" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_h_t_t_p_request_1a2163d8ef789c585b196a3ec7f468244b" prot="private" static="no" mutable="no">
        <type>const <ref refid="classutil_1_1_signal_interrupt" kindref="compound">util::SignalInterrupt</ref> &amp;</type>
        <definition>const util::SignalInterrupt&amp; m_interrupt</definition>
        <argsstring></argsstring>
        <name>m_interrupt</name>
        <qualifiedname>HTTPRequest::m_interrupt</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="74" column="33" bodyfile="src/httpserver.h" bodystart="74" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_h_t_t_p_request_1add64bdaedfba88b6ec35853363037c6d" prot="private" static="no" mutable="no">
        <type>bool</type>
        <definition>bool replySent</definition>
        <argsstring></argsstring>
        <name>replySent</name>
        <qualifiedname>HTTPRequest::replySent</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="75" column="10" bodyfile="src/httpserver.h" bodystart="75" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-func">
      <memberdef kind="function" id="class_h_t_t_p_request_1a695d4e0bd48770aed385799a1d3a43b0" prot="public" static="no" const="no" explicit="yes" inline="no" virt="non-virtual">
        <type></type>
        <definition>HTTPRequest</definition>
        <argsstring>(struct evhttp_request *req, const util::SignalInterrupt &amp;interrupt, bool replySent=false)</argsstring>
        <name>HTTPRequest</name>
        <qualifiedname>HTTPRequest::HTTPRequest</qualifiedname>
        <param>
          <type>struct evhttp_request *</type>
          <declname>req</declname>
        </param>
        <param>
          <type>const <ref refid="classutil_1_1_signal_interrupt" kindref="compound">util::SignalInterrupt</ref> &amp;</type>
          <declname>interrupt</declname>
        </param>
        <param>
          <type>bool</type>
          <declname>replySent</declname>
          <defval>false</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="78" column="14" bodyfile="src/httpserver.cpp" bodystart="594" bodyend="597"/>
      </memberdef>
      <memberdef kind="function" id="class_h_t_t_p_request_1a2267d5cb0d2d7249ec706fab1039f515" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>~HTTPRequest</definition>
        <argsstring>()</argsstring>
        <name>~HTTPRequest</name>
        <qualifiedname>HTTPRequest::~HTTPRequest</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="79" column="5" bodyfile="src/httpserver.cpp" bodystart="599" bodyend="607"/>
      </memberdef>
      <memberdef kind="function" id="class_h_t_t_p_request_1a0e9ec0f515c6ada8362483c99ffccc50" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type>std::string</type>
        <definition>std::string GetURI</definition>
        <argsstring>() const</argsstring>
        <name>GetURI</name>
        <qualifiedname>HTTPRequest::GetURI</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get requested URI. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="91" column="17" bodyfile="src/httpserver.cpp" bodystart="702" bodyend="705"/>
      </memberdef>
      <memberdef kind="function" id="class_h_t_t_p_request_1a53e93f86754005bcf0b38aab4705cf33" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="class_c_service" kindref="compound">CService</ref></type>
        <definition>CService GetPeer</definition>
        <argsstring>() const</argsstring>
        <name>GetPeer</name>
        <qualifiedname>HTTPRequest::GetPeer</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get <ref refid="class_c_service" kindref="compound">CService</ref> (address:ip) for the origin of the http request. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="95" column="14" bodyfile="src/httpserver.cpp" bodystart="682" bodyend="700"/>
      </memberdef>
      <memberdef kind="function" id="class_h_t_t_p_request_1a4fd1a07ea7c4b01bf9f36ff4fef3a013" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1" kindref="member">RequestMethod</ref></type>
        <definition>HTTPRequest::RequestMethod GetRequestMethod</definition>
        <argsstring>() const</argsstring>
        <name>GetRequestMethod</name>
        <qualifiedname>HTTPRequest::GetRequestMethod</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get request method. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="99" column="19" bodyfile="src/httpserver.cpp" bodystart="707" bodyend="721"/>
      </memberdef>
      <memberdef kind="function" id="class_h_t_t_p_request_1a4c8d3ca82089f916e360d1d06cf09dbf" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type>std::optional&lt; std::string &gt;</type>
        <definition>std::optional&lt; std::string &gt; GetQueryParameter</definition>
        <argsstring>(const std::string &amp;key) const</argsstring>
        <name>GetQueryParameter</name>
        <qualifiedname>HTTPRequest::GetQueryParameter</qualifiedname>
        <param>
          <type>const std::string &amp;</type>
          <declname>key</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get the query parameter value from request uri for a specified key, or std::nullopt if the key is not found.</para>
<para>If the query string contains duplicate keys, the first value is returned. Many web frameworks would instead parse this as an array of values, but this is not (yet) implemented as it is currently not needed in any of the endpoints.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">key</parametername>
</parameternamelist>
<parameterdescription>
<para>represents the query parameter of which the value is returned </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="110" column="19" bodyfile="src/httpserver.cpp" bodystart="723" bodyend="728"/>
      </memberdef>
      <memberdef kind="function" id="class_h_t_t_p_request_1a9e1943c284613b342fb3e95d8f6358f9" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type>std::pair&lt; bool, std::string &gt;</type>
        <definition>std::pair&lt; bool, std::string &gt; GetHeader</definition>
        <argsstring>(const std::string &amp;hdr) const</argsstring>
        <name>GetHeader</name>
        <qualifiedname>HTTPRequest::GetHeader</qualifiedname>
        <param>
          <type>const std::string &amp;</type>
          <declname>hdr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get the request header specified by hdr, or an empty string. Return a pair (isPresent,string). </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="116" column="15" bodyfile="src/httpserver.cpp" bodystart="609" bodyend="618"/>
      </memberdef>
      <memberdef kind="function" id="class_h_t_t_p_request_1a9af24083ca63a8466df045fef1450fd4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>std::string</type>
        <definition>std::string ReadBody</definition>
        <argsstring>()</argsstring>
        <name>ReadBody</name>
        <qualifiedname>HTTPRequest::ReadBody</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Read request body.</para>
<para><simplesect kind="note"><para>As this consumes the underlying buffer, call this only once. Repeated calls will return an empty string. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
<para>Trivial implementation: if this is ever a performance bottleneck, internal copying can be avoided in multi-segment buffers by using evbuffer_peek and an awkward loop. Though in that case, it&apos;d be even better to not copy into an intermediate string but use a stream abstraction to consume the evbuffer on the fly in the parsing algorithm.</para>
        </inbodydescription>
        <location file="src/httpserver.h" line="124" column="17" bodyfile="src/httpserver.cpp" bodystart="620" bodyend="638"/>
      </memberdef>
      <memberdef kind="function" id="class_h_t_t_p_request_1a5b0ce9b581c5594a105dc778d7e0d12e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void WriteHeader</definition>
        <argsstring>(const std::string &amp;hdr, const std::string &amp;value)</argsstring>
        <name>WriteHeader</name>
        <qualifiedname>HTTPRequest::WriteHeader</qualifiedname>
        <param>
          <type>const std::string &amp;</type>
          <declname>hdr</declname>
        </param>
        <param>
          <type>const std::string &amp;</type>
          <declname>value</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Write output header.</para>
<para><simplesect kind="note"><para>call this before calling WriteErrorReply or Reply. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="131" column="10" bodyfile="src/httpserver.cpp" bodystart="640" bodyend="645"/>
      </memberdef>
      <memberdef kind="function" id="class_h_t_t_p_request_1a4f1b66cf11060b823e7a3efa913ea89c" prot="public" static="no" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type>void</type>
        <definition>void WriteReply</definition>
        <argsstring>(int nStatus, std::string_view reply=&quot;&quot;)</argsstring>
        <name>WriteReply</name>
        <qualifiedname>HTTPRequest::WriteReply</qualifiedname>
        <param>
          <type>int</type>
          <declname>nStatus</declname>
        </param>
        <param>
          <type>std::string_view</type>
          <declname>reply</declname>
          <defval>&quot;&quot;</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Write HTTP reply. nStatus is the HTTP status code to send. reply is the body of the reply. Keep it empty to send a standard message.</para>
<para><simplesect kind="note"><para>Can be called only once. As this will give the request back to the main thread, do not call any other <ref refid="class_h_t_t_p_request" kindref="compound">HTTPRequest</ref> methods after calling this. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="141" column="10" bodyfile="src/httpserver.h" bodystart="141" bodyend="144"/>
      </memberdef>
      <memberdef kind="function" id="class_h_t_t_p_request_1aabcaac8e6d5b9da3d0ba39532ebd4f0e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void WriteReply</definition>
        <argsstring>(int nStatus, std::span&lt; const std::byte &gt; reply)</argsstring>
        <name>WriteReply</name>
        <qualifiedname>HTTPRequest::WriteReply</qualifiedname>
        <param>
          <type>int</type>
          <declname>nStatus</declname>
        </param>
        <param>
          <type>std::span&lt; const std::byte &gt;</type>
          <declname>reply</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Closure sent to main thread to request a reply to be sent to a HTTP request. Replies must be sent in the main loop in the main http thread, this cannot be done from worker threads. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/httpserver.h" line="145" column="10" bodyfile="src/httpserver.cpp" bodystart="652" bodyend="680"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>In-flight HTTP request. Thin C++ wrapper around evhttp_request. </para>
    </detaileddescription>
    <location file="src/httpserver.h" line="70" column="1" bodyfile="src/httpserver.h" bodystart="71" bodyend="146"/>
    <listofallmembers>
      <member refid="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1a12a8dcf59c16b5aadfda3a08ba67d529" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>GET</name></member>
      <member refid="class_h_t_t_p_request_1a9e1943c284613b342fb3e95d8f6358f9" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>GetHeader</name></member>
      <member refid="class_h_t_t_p_request_1a53e93f86754005bcf0b38aab4705cf33" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>GetPeer</name></member>
      <member refid="class_h_t_t_p_request_1a4c8d3ca82089f916e360d1d06cf09dbf" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>GetQueryParameter</name></member>
      <member refid="class_h_t_t_p_request_1a4fd1a07ea7c4b01bf9f36ff4fef3a013" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>GetRequestMethod</name></member>
      <member refid="class_h_t_t_p_request_1a0e9ec0f515c6ada8362483c99ffccc50" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>GetURI</name></member>
      <member refid="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1a0b0955668575b21eb0ab2272aef49f76" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>HEAD</name></member>
      <member refid="class_h_t_t_p_request_1a695d4e0bd48770aed385799a1d3a43b0" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>HTTPRequest</name></member>
      <member refid="class_h_t_t_p_request_1a2163d8ef789c585b196a3ec7f468244b" prot="private" virt="non-virtual"><scope>HTTPRequest</scope><name>m_interrupt</name></member>
      <member refid="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1a368c5bc07109370b819193871352b926" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>POST</name></member>
      <member refid="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1afec39d40e8bc9e12afa614df5ddb9fa9" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>PUT</name></member>
      <member refid="class_h_t_t_p_request_1a9af24083ca63a8466df045fef1450fd4" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>ReadBody</name></member>
      <member refid="class_h_t_t_p_request_1add64bdaedfba88b6ec35853363037c6d" prot="private" virt="non-virtual"><scope>HTTPRequest</scope><name>replySent</name></member>
      <member refid="class_h_t_t_p_request_1a27a6cc58bd947852de09feaa5a40f768" prot="private" virt="non-virtual"><scope>HTTPRequest</scope><name>req</name></member>
      <member refid="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>RequestMethod</name></member>
      <member refid="class_h_t_t_p_request_1a667255974fbff6d39bc2e840d46f47e1a6ce26a62afab55d7606ad4e92428b30c" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>UNKNOWN</name></member>
      <member refid="class_h_t_t_p_request_1a5b0ce9b581c5594a105dc778d7e0d12e" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>WriteHeader</name></member>
      <member refid="class_h_t_t_p_request_1a4f1b66cf11060b823e7a3efa913ea89c" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>WriteReply</name></member>
      <member refid="class_h_t_t_p_request_1aabcaac8e6d5b9da3d0ba39532ebd4f0e" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>WriteReply</name></member>
      <member refid="class_h_t_t_p_request_1a2267d5cb0d2d7249ec706fab1039f515" prot="public" virt="non-virtual"><scope>HTTPRequest</scope><name>~HTTPRequest</name></member>
    </listofallmembers>
  </compounddef>
</doxygen>
