<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="en-US">
  <compounddef id="class_b_c_log_1_1_log_rate_limiter" kind="class" language="C++" prot="public">
    <compoundname>BCLog::LogRateLimiter</compoundname>
    <includes refid="logging_8h" local="no">logging.h</includes>
    <innerclass refid="struct_b_c_log_1_1_log_rate_limiter_1_1_stats" prot="public">BCLog::LogRateLimiter::Stats</innerclass>
    <sectiondef kind="public-type">
      <memberdef kind="enum" id="class_b_c_log_1_1_log_rate_limiter_1a67a0db04d321a74b7e7fcfd3f1a3f70b" prot="public" static="no" strong="yes">
        <type></type>
        <name>Status</name>
        <qualifiedname>BCLog::LogRateLimiter::Status</qualifiedname>
        <enumvalue id="class_b_c_log_1_1_log_rate_limiter_1a67a0db04d321a74b7e7fcfd3f1a3f70bad2b37b1f0c2fa4e393aa53170cb09835" prot="public">
          <name>UNSUPPRESSED</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="class_b_c_log_1_1_log_rate_limiter_1a67a0db04d321a74b7e7fcfd3f1a3f70baa79081b2824ca028d8686997f32a5281" prot="public">
          <name>NEWLY_SUPPRESSED</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <enumvalue id="class_b_c_log_1_1_log_rate_limiter_1a67a0db04d321a74b7e7fcfd3f1a3f70ba665a40e3d4111b540e033f979102b34c" prot="public">
          <name>STILL_SUPPRESSED</name>
          <briefdescription>
          </briefdescription>
          <detaileddescription>
          </detaileddescription>
        </enumvalue>
        <briefdescription>
<para>Suppression status of a source log location. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="178" column="9" bodyfile="src/logging.h" bodystart="178" bodyend="182"/>
      </memberdef>
      <memberdef kind="typedef" id="class_b_c_log_1_1_log_rate_limiter_1aada8e48f4cc9da700f435315c1cf8850" prot="public" static="no">
        <type>std::function&lt; void(std::function&lt; void()&gt;, std::chrono::milliseconds)&gt;</type>
        <definition>using SchedulerFunction =  std::function&lt;void(std::function&lt;void()&gt;, std::chrono::milliseconds)&gt;</definition>
        <argsstring></argsstring>
        <name>SchedulerFunction</name>
        <qualifiedname>BCLog::LogRateLimiter::SchedulerFunction</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="160" column="9" bodyfile="src/logging.h" bodystart="160" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-attrib">
      <memberdef kind="variable" id="class_b_c_log_1_1_log_rate_limiter_1aacdde33bbd2ffa4b922481da93e673a5" prot="private" static="no" mutable="yes">
        <type><ref refid="class_std_mutex" kindref="compound">StdMutex</ref></type>
        <definition>StdMutex m_mutex</definition>
        <argsstring></argsstring>
        <name>m_mutex</name>
        <qualifiedname>BCLog::LogRateLimiter::m_mutex</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="151" column="26" bodyfile="src/logging.h" bodystart="151" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_b_c_log_1_1_log_rate_limiter_1a87025a6ca2784f5808de6c6e40851e26" prot="private" static="no" mutable="no">
        <type>std::atomic&lt; bool &gt;</type>
        <definition>std::atomic&lt;bool&gt; m_suppression_active</definition>
        <argsstring></argsstring>
        <name>m_suppression_active</name>
        <qualifiedname>BCLog::LogRateLimiter::m_suppression_active</qualifiedname>
        <initializer>{false}</initializer>
        <briefdescription>
<para>Whether any log locations are suppressed. Cached view on m_source_locations for performance reasons. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="156" column="21" bodyfile="src/logging.h" bodystart="156" bodyend="156"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-attrib">
      <memberdef kind="variable" id="class_b_c_log_1_1_log_rate_limiter_1a16d210262f6c408dc91218eaada044c4" prot="public" static="no" mutable="no">
        <type>const uint64_t</type>
        <definition>const uint64_t m_max_bytes</definition>
        <argsstring></argsstring>
        <name>m_max_bytes</name>
        <qualifiedname>BCLog::LogRateLimiter::m_max_bytes</qualifiedname>
        <briefdescription>
<para>Maximum number of bytes logged per location per window. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="174" column="24" bodyfile="src/logging.h" bodystart="174" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_b_c_log_1_1_log_rate_limiter_1abaa0e85f664eef7101ba16f584460588" prot="public" static="no" mutable="no">
        <type>const std::chrono::seconds</type>
        <definition>const std::chrono::seconds m_reset_window</definition>
        <argsstring></argsstring>
        <name>m_reset_window</name>
        <qualifiedname>BCLog::LogRateLimiter::m_reset_window</qualifiedname>
        <briefdescription>
<para>Interval after which the window is reset. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="176" column="36" bodyfile="src/logging.h" bodystart="176" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-func">
      <memberdef kind="function" id="class_b_c_log_1_1_log_rate_limiter_1a395c96ec41f29f32e1a922e3fe64f1df" prot="private" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>std::unordered_map&lt; <ref refid="class_source_location" kindref="compound">SourceLocation</ref>, <ref refid="struct_b_c_log_1_1_log_rate_limiter_1_1_stats" kindref="compound">Stats</ref>, <ref refid="struct_source_location_hasher" kindref="compound">SourceLocationHasher</ref>, <ref refid="struct_source_location_equal" kindref="compound">SourceLocationEqual</ref> &gt; m_source_locations</type>
        <definition>std::unordered_map&lt; SourceLocation, Stats, SourceLocationHasher, SourceLocationEqual &gt; m_source_locations GUARDED_BY</definition>
        <argsstring>(m_mutex)</argsstring>
        <name>GUARDED_BY</name>
        <qualifiedname>BCLog::LogRateLimiter::GUARDED_BY</qualifiedname>
        <param>
          <type>m_mutex</type>
        </param>
        <briefdescription>
<para><ref refid="struct_b_c_log_1_1_log_rate_limiter_1_1_stats" kindref="compound">Stats</ref> for each source location that has attempted to log something. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="154" column="47"/>
      </memberdef>
      <memberdef kind="function" id="class_b_c_log_1_1_log_rate_limiter_1a8f8f442f481f0608a491034cf1f5a278" prot="private" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>LogRateLimiter</definition>
        <argsstring>(uint64_t max_bytes, std::chrono::seconds reset_window)</argsstring>
        <name>LogRateLimiter</name>
        <qualifiedname>BCLog::LogRateLimiter::LogRateLimiter</qualifiedname>
        <param>
          <type>uint64_t</type>
          <declname>max_bytes</declname>
        </param>
        <param>
          <type>std::chrono::seconds</type>
          <declname>reset_window</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="157" column="9" bodyfile="src/logging.cpp" bodystart="375" bodyend="376"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-static-func">
      <memberdef kind="function" id="class_b_c_log_1_1_log_rate_limiter_1a55fcaa8e1e77f26828e4a5bb3f38dad9" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>std::shared_ptr&lt; LogRateLimiter &gt;</type>
        <definition>std::shared_ptr&lt; BCLog::LogRateLimiter &gt; Create</definition>
        <argsstring>(SchedulerFunction &amp;&amp;scheduler_func, uint64_t max_bytes, std::chrono::seconds reset_window)</argsstring>
        <name>Create</name>
        <qualifiedname>BCLog::LogRateLimiter::Create</qualifiedname>
        <param>
          <type><ref refid="class_b_c_log_1_1_log_rate_limiter_1aada8e48f4cc9da700f435315c1cf8850" kindref="member">SchedulerFunction</ref> &amp;&amp;</type>
          <declname>scheduler_func</declname>
        </param>
        <param>
          <type>uint64_t</type>
          <declname>max_bytes</declname>
        </param>
        <param>
          <type>std::chrono::seconds</type>
          <declname>reset_window</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>scheduler_func</parametername>
</parameternamelist>
<parameterdescription>
<para>Callable object used to schedule resetting the window. The first parameter is the function to be executed, and the second is the reset_window interval. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>max_bytes</parametername>
</parameternamelist>
<parameterdescription>
<para>Maximum number of bytes that can be logged for each source location. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>reset_window</parametername>
</parameternamelist>
<parameterdescription>
<para>Time window after which the stats are reset. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="169" column="32" bodyfile="src/logging.cpp" bodystart="378" bodyend="388"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-func">
      <memberdef kind="function" id="class_b_c_log_1_1_log_rate_limiter_1a7bd85dd858830ad5b1d7676db3729bd7" prot="public" static="no" nodiscard="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="class_b_c_log_1_1_log_rate_limiter_1a67a0db04d321a74b7e7fcfd3f1a3f70b" kindref="member">Status</ref><ref refid="class_status" kindref="compound">Status</ref></type>
        <definition>BCLog::LogRateLimiter::Status Consume</definition>
        <argsstring>(const SourceLocation &amp;source_loc, const std::string &amp;str) EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)</argsstring>
        <name>Consume</name>
        <qualifiedname>BCLog::LogRateLimiter::Consume</qualifiedname>
        <param>
          <type>const <ref refid="class_source_location" kindref="compound">SourceLocation</ref> &amp;</type>
          <declname>source_loc</declname>
        </param>
        <param>
          <type>const std::string &amp;</type>
          <declname>str</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Consumes <computeroutput>source_loc</computeroutput>&apos;s available bytes corresponding to the size of the (formatted) <computeroutput>str</computeroutput> and returns its status. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="185" column="17" bodyfile="src/logging.cpp" bodystart="390" bodyend="404"/>
      </memberdef>
      <memberdef kind="function" id="class_b_c_log_1_1_log_rate_limiter_1aa0eb6c627e5f2ec722ee3b4a08622ec7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void Reset</definition>
        <argsstring>() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)</argsstring>
        <name>Reset</name>
        <qualifiedname>BCLog::LogRateLimiter::Reset</qualifiedname>
        <briefdescription>
<para>Resets all usage to zero. Called periodically by the scheduler. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="189" column="14" bodyfile="src/logging.cpp" bodystart="554" bodyend="570"/>
      </memberdef>
      <memberdef kind="function" id="class_b_c_log_1_1_log_rate_limiter_1aee1e0ad3b74c3f3b97e4e0ec7f321786" prot="public" static="no" const="yes" explicit="no" inline="yes" virt="non-virtual">
        <type>bool</type>
        <definition>bool SuppressionsActive</definition>
        <argsstring>() const</argsstring>
        <name>SuppressionsActive</name>
        <qualifiedname>BCLog::LogRateLimiter::SuppressionsActive</qualifiedname>
        <briefdescription>
<para>Returns true if any log locations are currently being suppressed. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/logging.h" line="191" column="14" bodyfile="src/logging.h" bodystart="191" bodyend="191"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
<para>Fixed window rate limiter for logging. </para>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <location file="src/logging.h" line="135" column="5" bodyfile="src/logging.h" bodystart="136" bodyend="192"/>
    <listofallmembers>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1a7bd85dd858830ad5b1d7676db3729bd7" prot="public" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>Consume</name></member>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1a55fcaa8e1e77f26828e4a5bb3f38dad9" prot="public" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>Create</name></member>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1a395c96ec41f29f32e1a922e3fe64f1df" prot="private" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>GUARDED_BY</name></member>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1a8f8f442f481f0608a491034cf1f5a278" prot="private" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>LogRateLimiter</name></member>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1a16d210262f6c408dc91218eaada044c4" prot="public" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>m_max_bytes</name></member>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1aacdde33bbd2ffa4b922481da93e673a5" prot="private" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>m_mutex</name></member>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1abaa0e85f664eef7101ba16f584460588" prot="public" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>m_reset_window</name></member>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1a87025a6ca2784f5808de6c6e40851e26" prot="private" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>m_suppression_active</name></member>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1aa0eb6c627e5f2ec722ee3b4a08622ec7" prot="public" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>Reset</name></member>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1aada8e48f4cc9da700f435315c1cf8850" prot="public" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>SchedulerFunction</name></member>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1a67a0db04d321a74b7e7fcfd3f1a3f70b" prot="public" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>Status</name></member>
      <member refid="class_b_c_log_1_1_log_rate_limiter_1aee1e0ad3b74c3f3b97e4e0ec7f321786" prot="public" virt="non-virtual"><scope>BCLog::LogRateLimiter</scope><name>SuppressionsActive</name></member>
    </listofallmembers>
  </compounddef>
</doxygen>
