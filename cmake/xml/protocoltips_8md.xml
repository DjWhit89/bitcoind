<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="en-US">
  <compounddef id="protocoltips_8md" kind="file" language="Markdown">
    <compoundname>protocoltips.md</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline><highlight class="normal">#<sp/>Tips<sp/>for<sp/>designing<sp/>protocols<sp/>using<sp/>`libminisketch`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Sending<sp/>a<sp/>sketch<sp/>is<sp/>less<sp/>efficient<sp/>than<sp/>just<sp/>sending<sp/>your<sp/>whole<sp/>set<sp/>with<sp/>efficient<sp/>entropy<sp/>coding<sp/>if<sp/>the<sp/>number<sp/>of<sp/>differences<sp/>is<sp/>larger<sp/>than<sp/>*log&lt;sub&gt;2&lt;/sub&gt;(<sp/>2&lt;sup&gt;b&lt;/sup&gt;<sp/>choose<sp/>set_size<sp/>)<sp/>/<sp/>b*.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">In<sp/>most<sp/>applications<sp/>your<sp/>set<sp/>can<sp/>be<sp/>hashed<sp/>to<sp/>entries<sp/>just<sp/>large<sp/>enough<sp/>to<sp/>make<sp/>the<sp/>probability<sp/>of<sp/>collision<sp/>negligible.<sp/>This<sp/>can<sp/>be<sp/>a<sp/>considerable<sp/>speedup<sp/>and<sp/>bandwidth<sp/>savings.<sp/><sp/>Short<sp/>hashes<sp/>(&lt;128<sp/>bits)<sp/>should<sp/>be<sp/>salted<sp/>with<sp/>an<sp/>unpredictable<sp/>value<sp/>to<sp/>prevent<sp/>malicious<sp/>inputs<sp/>from<sp/>intentionally<sp/>causing<sp/>collisions.<sp/>Salting<sp/>also<sp/>allows<sp/>an<sp/>entry<sp/>missed<sp/>due<sp/>to<sp/>a<sp/>collision<sp/>to<sp/>be<sp/>reconciled<sp/>on<sp/>a<sp/>later<sp/>run<sp/>with<sp/>a<sp/>different<sp/>salt.<sp/>Pre-hashing<sp/>may<sp/>not<sp/>be<sp/>possible<sp/>in<sp/>some<sp/>applications,<sp/>such<sp/>as<sp/>where<sp/>there<sp/>is<sp/>only<sp/>one-way<sp/>communication,<sp/>where<sp/>the<sp/>confidentiality<sp/>of<sp/>entry<sp/>origin<sp/>matters,<sp/>or<sp/>where<sp/>security<sp/>depends<sp/>on<sp/>the<sp/>total<sp/>absence<sp/>of<sp/>collisions.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Some<sp/>element<sp/>sizes<sp/>are<sp/>faster<sp/>to<sp/>decode<sp/>than<sp/>others;<sp/>see<sp/>the<sp/>benchmarks<sp/>in<sp/>the<sp/>readme.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Almost<sp/>all<sp/>the<sp/>computational<sp/>burden<sp/>of<sp/>reconciliation<sp/>is<sp/>in<sp/>minisketch_decode().<sp/>Denial-of-service<sp/>attacks<sp/>can<sp/>be<sp/>mitigated<sp/>by<sp/>arranging<sp/>protocol<sp/>flow<sp/>so<sp/>that<sp/>a<sp/>party<sp/>requests<sp/>a<sp/>sketch<sp/>and<sp/>decodes<sp/>it<sp/>rather<sp/>than<sp/>a<sp/>construction<sp/>where<sp/>the<sp/>participants<sp/>will<sp/>decode<sp/>unsolicited<sp/>sketches.<sp/>Decode<sp/>times<sp/>can<sp/>be<sp/>constrained<sp/>by<sp/>limiting<sp/>sketch<sp/>capacity<sp/>or<sp/>via<sp/>the<sp/>max_count<sp/>argument<sp/>to<sp/>minisketch_decode().</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">In<sp/>most<sp/>cases<sp/>you<sp/>don&apos;t<sp/>actually<sp/>know<sp/>the<sp/>size<sp/>of<sp/>the<sp/>set<sp/>difference<sp/>in<sp/>advance,<sp/>but<sp/>often<sp/>you<sp/>know<sp/>a<sp/>lower<sp/>bound<sp/>on<sp/>it<sp/>(the<sp/>difference<sp/>in<sp/>set<sp/>sizes).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>There<sp/>are<sp/>difference<sp/>size<sp/>estimation<sp/>techniques<sp/>such<sp/>as<sp/>min-wise<sp/>hashing&lt;sup&gt;[[1]](#myfootnote1)&lt;/sup&gt;<sp/>or<sp/>random<sp/>projections&lt;sup&gt;[[2]](#myfootnote2)&lt;/sup&gt;,<sp/>but<sp/>complex<sp/>estimators<sp/>can<sp/>end<sp/>up<sp/>using<sp/>more<sp/>bandwidth<sp/>than<sp/>they<sp/>save.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>It<sp/>may<sp/>be<sp/>useful<sp/>to<sp/>always<sp/>overestimate<sp/>the<sp/>sketch<sp/>size<sp/>needed<sp/>to<sp/>amortize<sp/>communications<sp/>overheads<sp/>(*e.g.*<sp/>packet<sp/>headers,<sp/>round<sp/>trip<sp/>delays).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>If<sp/>the<sp/>total<sp/>data<sp/>sent<sp/>would<sp/>end<sp/>up<sp/>leaving<sp/>you<sp/>better<sp/>off<sp/>having<sp/>just<sp/>sent<sp/>the<sp/>whole<sp/>set,<sp/>per<sp/>above,<sp/>then<sp/>you<sp/>can<sp/>send<sp/>the<sp/>set<sp/>in<sp/>response<sp/>to<sp/>a<sp/>failure<sp/>but<sp/>leave<sp/>out<sp/>as<sp/>many<sp/>elements<sp/>as<sp/>the<sp/>size<sp/>of<sp/>the<sp/>previously<sp/>sent<sp/>sketch.<sp/>The<sp/>receiver<sp/>can<sp/>decode<sp/>the<sp/>partial<sp/>set<sp/>and<sp/>use<sp/>the<sp/>data<sp/>they<sp/>already<sp/>have<sp/>to<sp/>complete<sp/>it,<sp/>reducing<sp/>bandwidth<sp/>waste.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Additional<sp/>elements<sp/>can<sp/>be<sp/>sent<sp/>for<sp/>a<sp/>sketch<sp/>as<sp/>few<sp/>as<sp/>one<sp/>at<sp/>a<sp/>time<sp/>with<sp/>little<sp/>decode<sp/>cost<sp/>until<sp/>enough<sp/>data<sp/>is<sp/>received<sp/>to<sp/>decode.<sp/><sp/>This<sp/>is<sp/>most<sp/>easily<sp/>implemented<sp/>by<sp/>always<sp/>computing<sp/>the<sp/>largest<sp/>sketch<sp/>size<sp/>and<sp/>sending<sp/>it<sp/>incrementally<sp/>as<sp/>needed.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Because<sp/>sketches<sp/>are<sp/>linear<sp/>you<sp/>can<sp/>adaptively<sp/>subdivide<sp/>to<sp/>decode<sp/>an<sp/>overfull<sp/>set.<sp/>The<sp/>sender<sp/>uses<sp/>a<sp/>hash<sp/>function<sp/>to<sp/>select<sp/>approximately<sp/>half<sp/>their<sp/>set<sp/>members<sp/>and<sp/>sends<sp/>a<sp/>sketch<sp/>of<sp/>those<sp/>members.<sp/>The<sp/>receiver<sp/>can<sp/>do<sp/>the<sp/>same<sp/>and<sp/>combine<sp/>the<sp/>result<sp/>with<sp/>the<sp/>initially<sp/>sent<sp/>sketch<sp/>to<sp/>get<sp/>two<sp/>sketches<sp/>with<sp/>roughly<sp/>half<sp/>the<sp/>number<sp/>of<sp/>members<sp/>and<sp/>attempt<sp/>to<sp/>decode<sp/>them.<sp/>Repeat<sp/>recursively<sp/>on<sp/>failure.<sp/>This<sp/>adaptive<sp/>subdivision<sp/>procedure<sp/>makes<sp/>decode<sp/>time<sp/>essentially<sp/>linear<sp/>at<sp/>the<sp/>cost<sp/>of<sp/>communications<sp/>inefficiency.<sp/><sp/>Minisketches<sp/>can<sp/>also<sp/>be<sp/>used<sp/>as<sp/>the<sp/>cells<sp/>in<sp/>an<sp/>IBLT<sp/>for<sp/>similar<sp/>reasons.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Less<sp/>efficient<sp/>reconciliation<sp/>techniques<sp/>like<sp/>IBLT<sp/>or<sp/>adaptive<sp/>subdivision,<sp/>or<sp/>overheads<sp/>like<sp/>complex<sp/>estimators<sp/>effectively<sp/>lower<sp/>the<sp/>threshold<sp/>where<sp/>sending<sp/>the<sp/>whole<sp/>set<sp/>efficiently<sp/>would<sp/>use<sp/>less<sp/>bandwidth.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">When<sp/>the<sp/>number<sp/>of<sp/>differences<sp/>is<sp/>more<sp/>than<sp/>2&lt;sup&gt;b/2-1&lt;/sup&gt;<sp/>an<sp/>alternative<sp/>sketch<sp/>encoding<sp/>is<sp/>possible<sp/>that<sp/>is<sp/>somewhat<sp/>smaller,<sp/>but<sp/>requires<sp/>a<sp/>table<sp/>of<sp/>size<sp/>2&lt;sup&gt;b&lt;/sup&gt;;<sp/>contact<sp/>the<sp/>authors<sp/>if<sp/>you<sp/>have<sp/>an<sp/>application<sp/>where<sp/>that<sp/>might<sp/>be<sp/>useful.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>References</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>&lt;a<sp/>name=&quot;myfootnote1&quot;&gt;[1]&lt;/a&gt;<sp/>Broder,<sp/>A.<sp/>*On<sp/>the<sp/>Resemblance<sp/>and<sp/>Containment<sp/>of<sp/>Documents*<sp/>Proceedings<sp/>of<sp/>the<sp/>Compression<sp/>and<sp/>Complexity<sp/>of<sp/>Sequences<sp/>1997<sp/>[[PDF]](https://www.cs.princeton.edu/courses/archive/spring13/cos598C/broder97resemblance.pdf)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>&lt;a<sp/>name=&quot;myfootnote2&quot;&gt;[2]&lt;/a&gt;<sp/>Feigenbaum,<sp/>Joan<sp/>and<sp/>Kannan,<sp/>Sampath<sp/>and<sp/>Strauss,<sp/>Martin<sp/>J.<sp/>and<sp/>Viswanathan,<sp/>Mahesh.<sp/>*An<sp/>Approximate<sp/>L1-Difference<sp/>Algorithm<sp/>for<sp/><sp/>Massive<sp/>Data<sp/>Streams*<sp/>SIAM<sp/>J.<sp/>Comput.<sp/>2003<sp/>[[PDF]](http://www.cs.yale.edu/homes/jf/FKSV1.pdf)</highlight></codeline>
    </programlisting>
    <location file="src/minisketch/doc/protocoltips.md"/>
  </compounddef>
</doxygen>
