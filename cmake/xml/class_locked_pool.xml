<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="en-US">
  <compounddef id="class_locked_pool" kind="class" language="C++" prot="public">
    <compoundname>LockedPool</compoundname>
    <derivedcompoundref refid="class_locked_pool_manager" prot="public" virt="non-virtual">LockedPoolManager</derivedcompoundref>
    <includes refid="lockedpool_8h" local="no">lockedpool.h</includes>
    <innerclass refid="struct_locked_pool_1_1_stats" prot="public">LockedPool::Stats</innerclass>
    <innerclass refid="class_locked_pool_1_1_locked_page_arena" prot="private">LockedPool::LockedPageArena</innerclass>
    <sectiondef kind="public-type">
      <memberdef kind="typedef" id="class_locked_pool_1a0a363c0e967bd7d2361e59e69f42cc1c" prot="public" static="no">
        <type>bool(*</type>
        <definition>typedef bool(* LockingFailed_Callback) ()</definition>
        <argsstring>)()</argsstring>
        <name>LockingFailed_Callback</name>
        <qualifiedname>LockedPool::LockingFailed_Callback</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Callback when allocation succeeds but locking fails. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="142" column="13" bodyfile="src/support/lockedpool.h" bodystart="142" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-static-attrib">
      <memberdef kind="variable" id="class_locked_pool_1ae57b6b68ba3adf557404e02034ab2b48" prot="public" static="yes" mutable="no">
        <type>const size_t</type>
        <definition>const size_t ARENA_SIZE</definition>
        <argsstring></argsstring>
        <name>ARENA_SIZE</name>
        <qualifiedname>LockedPool::ARENA_SIZE</qualifiedname>
        <initializer>= 256*1024</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Size of one arena of locked memory. This is a compromise. Do not set this too low, as managing many arenas will increase allocation and deallocation overhead. Setting it too high allocates more locked memory from the OS than strictly necessary. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="134" column="25" bodyfile="src/support/lockedpool.h" bodystart="134" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_locked_pool_1a8f01c0574ee8207fdf147a2c6d34a51e" prot="public" static="yes" mutable="no">
        <type>const size_t</type>
        <definition>const size_t ARENA_ALIGN</definition>
        <argsstring></argsstring>
        <name>ARENA_ALIGN</name>
        <qualifiedname>LockedPool::ARENA_ALIGN</qualifiedname>
        <initializer>= 16</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Chunk alignment. Another compromise. Setting this too high will waste memory, setting it too low will facilitate fragmentation. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="138" column="25" bodyfile="src/support/lockedpool.h" bodystart="138" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-attrib">
      <memberdef kind="variable" id="class_locked_pool_1aa0aff5912b8172644551eb1c5549232f" prot="private" static="no" mutable="no">
        <type>std::unique_ptr&lt; <ref refid="class_locked_page_allocator" kindref="compound">LockedPageAllocator</ref> &gt;</type>
        <definition>std::unique_ptr&lt;LockedPageAllocator&gt; allocator</definition>
        <argsstring></argsstring>
        <name>allocator</name>
        <qualifiedname>LockedPool::allocator</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="183" column="21" bodyfile="src/support/lockedpool.h" bodystart="183" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_locked_pool_1ac7e57ec88971e1b9030bdbf19efaa920" prot="private" static="no" mutable="no">
        <type>std::list&lt; LockedPageArena &gt;</type>
        <definition>std::list&lt;LockedPageArena&gt; arenas</definition>
        <argsstring></argsstring>
        <name>arenas</name>
        <qualifiedname>LockedPool::arenas</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="199" column="15" bodyfile="src/support/lockedpool.h" bodystart="199" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_locked_pool_1a8e7d9ba2c17bf0237ed698fb0e372c87" prot="private" static="no" mutable="no">
        <type><ref refid="class_locked_pool_1a0a363c0e967bd7d2361e59e69f42cc1c" kindref="member">LockingFailed_Callback</ref></type>
        <definition>LockingFailed_Callback lf_cb</definition>
        <argsstring></argsstring>
        <name>lf_cb</name>
        <qualifiedname>LockedPool::lf_cb</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="200" column="28" bodyfile="src/support/lockedpool.h" bodystart="200" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_locked_pool_1a78cfe7020d5fc4de4b483c5110bef3b3" prot="private" static="no" mutable="no">
        <type>size_t</type>
        <definition>size_t cumulative_bytes_locked</definition>
        <argsstring></argsstring>
        <name>cumulative_bytes_locked</name>
        <qualifiedname>LockedPool::cumulative_bytes_locked</qualifiedname>
        <initializer>{0}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="201" column="12" bodyfile="src/support/lockedpool.h" bodystart="201" bodyend="201"/>
      </memberdef>
      <memberdef kind="variable" id="class_locked_pool_1a1be3f7fa26e4521098de5f1ec0f865f3" prot="private" static="no" mutable="yes">
        <type>std::mutex</type>
        <definition>std::mutex mutex</definition>
        <argsstring></argsstring>
        <name>mutex</name>
        <qualifiedname>LockedPool::mutex</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><ref refid="sync_8h_1a326d1d46ce05b5316d8ebe2694a10a6e" kindref="member">Mutex</ref> protects access to this pool&apos;s data structures, including arenas. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="204" column="24" bodyfile="src/support/lockedpool.h" bodystart="204" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-func">
      <memberdef kind="function" id="class_locked_pool_1a8f257d90bc4769394c59f5b09b58e218" prot="public" static="no" const="no" explicit="yes" inline="no" virt="non-virtual">
        <type></type>
        <definition>LockedPool</definition>
        <argsstring>(std::unique_ptr&lt; LockedPageAllocator &gt; allocator, LockingFailed_Callback lf_cb_in=nullptr)</argsstring>
        <name>LockedPool</name>
        <qualifiedname>LockedPool::LockedPool</qualifiedname>
        <param>
          <type>std::unique_ptr&lt; <ref refid="class_locked_page_allocator" kindref="compound">LockedPageAllocator</ref> &gt;</type>
          <declname>allocator</declname>
        </param>
        <param>
          <type><ref refid="class_locked_pool_1a0a363c0e967bd7d2361e59e69f42cc1c" kindref="member">LockingFailed_Callback</ref></type>
          <declname>lf_cb_in</declname>
          <defval>nullptr</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Create a new <ref refid="class_locked_pool" kindref="compound">LockedPool</ref>. This takes ownership of the MemoryPageLocker, you can only instantiate this with <ref refid="class_locked_pool" kindref="compound">LockedPool(std::move(...))</ref>.</para>
<para>The second argument is an optional callback when locking a newly allocated arena failed. If this callback is provided and returns false, the allocation fails (hard fail), if it returns true the allocation proceeds, but it could warn. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="162" column="14" bodyfile="src/support/lockedpool.cpp" bodystart="277" bodyend="280"/>
      </memberdef>
      <memberdef kind="function" id="class_locked_pool_1ac675de71591052255b109b0044aab17d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>~LockedPool</definition>
        <argsstring>()</argsstring>
        <name>~LockedPool</name>
        <qualifiedname>LockedPool::~LockedPool</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="163" column="5"/>
      </memberdef>
      <memberdef kind="function" id="class_locked_pool_1a2bc444d05ebbb08095ff58bf0ea49963" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>LockedPool</definition>
        <argsstring>(const LockedPool &amp;other)=delete</argsstring>
        <name>LockedPool</name>
        <qualifiedname>LockedPool::LockedPool</qualifiedname>
        <param>
          <type>const <ref refid="class_locked_pool" kindref="compound">LockedPool</ref> &amp;</type>
          <declname>other</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="165" column="5"/>
      </memberdef>
      <memberdef kind="function" id="class_locked_pool_1a3481ac7f538386f75a79e3e055cf9285" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="class_locked_pool" kindref="compound">LockedPool</ref> &amp;</type>
        <definition>LockedPool &amp; operator=</definition>
        <argsstring>(const LockedPool &amp;)=delete</argsstring>
        <name>operator=</name>
        <qualifiedname>LockedPool::operator=</qualifiedname>
        <param>
          <type>const <ref refid="class_locked_pool" kindref="compound">LockedPool</ref> &amp;</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="166" column="16"/>
      </memberdef>
      <memberdef kind="function" id="class_locked_pool_1a0997a6135a02d99f2efb706b1f654586" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void *</type>
        <definition>void * alloc</definition>
        <argsstring>(size_t size)</argsstring>
        <name>alloc</name>
        <qualifiedname>LockedPool::alloc</qualifiedname>
        <param>
          <type>size_t</type>
          <declname>size</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Allocate size bytes from this arena. Returns pointer on success, or 0 if memory is full or the application tried to allocate 0 bytes. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="172" column="10" bodyfile="src/support/lockedpool.cpp" bodystart="284" bodyend="304"/>
      </memberdef>
      <memberdef kind="function" id="class_locked_pool_1afbedc913aa4651b3c3b4b3aecd9b4711" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void free</definition>
        <argsstring>(void *ptr)</argsstring>
        <name>free</name>
        <qualifiedname>LockedPool::free</qualifiedname>
        <param>
          <type>void *</type>
          <declname>ptr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Free a previously allocated chunk of memory. Freeing the zero pointer has no effect. Raises std::runtime_error in case of error. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="178" column="10" bodyfile="src/support/lockedpool.cpp" bodystart="306" bodyend="318"/>
      </memberdef>
      <memberdef kind="function" id="class_locked_pool_1aab51b3c20c7110b582259ad406fbb546" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="struct_locked_pool_1_1_stats" kindref="compound">Stats</ref></type>
        <definition>LockedPool::Stats stats</definition>
        <argsstring>() const</argsstring>
        <name>stats</name>
        <qualifiedname>LockedPool::stats</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get pool usage statistics </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="181" column="11" bodyfile="src/support/lockedpool.cpp" bodystart="320" bodyend="333"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-func">
      <memberdef kind="function" id="class_locked_pool_1a022cc6f07d8ec5429c8f9fb7074467c7" prot="private" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>bool new_arena</definition>
        <argsstring>(size_t size, size_t align)</argsstring>
        <name>new_arena</name>
        <qualifiedname>LockedPool::new_arena</qualifiedname>
        <param>
          <type>size_t</type>
          <declname>size</declname>
        </param>
        <param>
          <type>size_t</type>
          <declname>align</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/support/lockedpool.h" line="197" column="10" bodyfile="src/support/lockedpool.cpp" bodystart="335" bodyend="362"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>Pool for locked memory chunks.</para>
<para>To avoid sensitive key data from being swapped to disk, the memory in this pool is locked/pinned.</para>
<para>An arena manages a contiguous region of memory. The pool starts out with one arena but can grow to multiple arenas if the need arises.</para>
<para>Unlike a normal C heap, the administrative structures are separate from the managed memory. This has been done as the sizes and bases of objects are not in themselves sensitive information, as to conserve precious locked memory. In some operating systems the amount of memory that can be locked is small. </para>
    </detaileddescription>
    <inheritancegraph>
      <node id="1">
        <label>LockedPool</label>
        <link refid="class_locked_pool"/>
      </node>
      <node id="2">
        <label>LockedPoolManager</label>
        <link refid="class_locked_pool_manager"/>
        <childnode refid="1" relation="public-inheritance">
        </childnode>
      </node>
    </inheritancegraph>
    <location file="src/support/lockedpool.h" line="126" column="1" bodyfile="src/support/lockedpool.h" bodystart="127" bodyend="205"/>
    <listofallmembers>
      <member refid="class_locked_pool_1a0997a6135a02d99f2efb706b1f654586" prot="public" virt="non-virtual"><scope>LockedPool</scope><name>alloc</name></member>
      <member refid="class_locked_pool_1aa0aff5912b8172644551eb1c5549232f" prot="private" virt="non-virtual"><scope>LockedPool</scope><name>allocator</name></member>
      <member refid="class_locked_pool_1a8f01c0574ee8207fdf147a2c6d34a51e" prot="public" virt="non-virtual"><scope>LockedPool</scope><name>ARENA_ALIGN</name></member>
      <member refid="class_locked_pool_1ae57b6b68ba3adf557404e02034ab2b48" prot="public" virt="non-virtual"><scope>LockedPool</scope><name>ARENA_SIZE</name></member>
      <member refid="class_locked_pool_1ac7e57ec88971e1b9030bdbf19efaa920" prot="private" virt="non-virtual"><scope>LockedPool</scope><name>arenas</name></member>
      <member refid="class_locked_pool_1a78cfe7020d5fc4de4b483c5110bef3b3" prot="private" virt="non-virtual"><scope>LockedPool</scope><name>cumulative_bytes_locked</name></member>
      <member refid="class_locked_pool_1afbedc913aa4651b3c3b4b3aecd9b4711" prot="public" virt="non-virtual"><scope>LockedPool</scope><name>free</name></member>
      <member refid="class_locked_pool_1a8e7d9ba2c17bf0237ed698fb0e372c87" prot="private" virt="non-virtual"><scope>LockedPool</scope><name>lf_cb</name></member>
      <member refid="class_locked_pool_1a8f257d90bc4769394c59f5b09b58e218" prot="public" virt="non-virtual"><scope>LockedPool</scope><name>LockedPool</name></member>
      <member refid="class_locked_pool_1a2bc444d05ebbb08095ff58bf0ea49963" prot="public" virt="non-virtual"><scope>LockedPool</scope><name>LockedPool</name></member>
      <member refid="class_locked_pool_1a0a363c0e967bd7d2361e59e69f42cc1c" prot="public" virt="non-virtual"><scope>LockedPool</scope><name>LockingFailed_Callback</name></member>
      <member refid="class_locked_pool_1a1be3f7fa26e4521098de5f1ec0f865f3" prot="private" virt="non-virtual"><scope>LockedPool</scope><name>mutex</name></member>
      <member refid="class_locked_pool_1a022cc6f07d8ec5429c8f9fb7074467c7" prot="private" virt="non-virtual"><scope>LockedPool</scope><name>new_arena</name></member>
      <member refid="class_locked_pool_1a3481ac7f538386f75a79e3e055cf9285" prot="public" virt="non-virtual"><scope>LockedPool</scope><name>operator=</name></member>
      <member refid="class_locked_pool_1aab51b3c20c7110b582259ad406fbb546" prot="public" virt="non-virtual"><scope>LockedPool</scope><name>stats</name></member>
      <member refid="class_locked_pool_1ac675de71591052255b109b0044aab17d" prot="public" virt="non-virtual"><scope>LockedPool</scope><name>~LockedPool</name></member>
    </listofallmembers>
  </compounddef>
</doxygen>
