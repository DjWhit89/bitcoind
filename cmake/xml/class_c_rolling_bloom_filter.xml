<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="en-US">
  <compounddef id="class_c_rolling_bloom_filter" kind="class" language="C++" prot="public">
    <compoundname>CRollingBloomFilter</compoundname>
    <includes refid="bloom_8h" local="no">bloom.h</includes>
    <sectiondef kind="private-attrib">
      <memberdef kind="variable" id="class_c_rolling_bloom_filter_1a1de43b9d6c598f1e91cd568f1085e156" prot="private" static="no" mutable="no">
        <type>int</type>
        <definition>int nEntriesPerGeneration</definition>
        <argsstring></argsstring>
        <name>nEntriesPerGeneration</name>
        <qualifiedname>CRollingBloomFilter::nEntriesPerGeneration</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="119" column="9" bodyfile="src/common/bloom.h" bodystart="119" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_c_rolling_bloom_filter_1a785a4adaad61d2dcc6d9684fc7657625" prot="private" static="no" mutable="no">
        <type>int</type>
        <definition>int nEntriesThisGeneration</definition>
        <argsstring></argsstring>
        <name>nEntriesThisGeneration</name>
        <qualifiedname>CRollingBloomFilter::nEntriesThisGeneration</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="120" column="9" bodyfile="src/common/bloom.h" bodystart="120" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_c_rolling_bloom_filter_1a9c6cfdc8c8a18a566b335512094cb175" prot="private" static="no" mutable="no">
        <type>int</type>
        <definition>int nGeneration</definition>
        <argsstring></argsstring>
        <name>nGeneration</name>
        <qualifiedname>CRollingBloomFilter::nGeneration</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="121" column="9" bodyfile="src/common/bloom.h" bodystart="121" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_c_rolling_bloom_filter_1ac0bf9d283c24f8cc8279bd7db0694983" prot="private" static="no" mutable="no">
        <type>std::vector&lt; uint64_t &gt;</type>
        <definition>std::vector&lt;uint64_t&gt; data</definition>
        <argsstring></argsstring>
        <name>data</name>
        <qualifiedname>CRollingBloomFilter::data</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="122" column="17" bodyfile="src/common/bloom.h" bodystart="122" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_c_rolling_bloom_filter_1ac5192de8c78c9ab06fbf20dff75ca674" prot="private" static="no" mutable="no">
        <type>unsigned int</type>
        <definition>unsigned int nTweak</definition>
        <argsstring></argsstring>
        <name>nTweak</name>
        <qualifiedname>CRollingBloomFilter::nTweak</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="123" column="18" bodyfile="src/common/bloom.h" bodystart="123" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_c_rolling_bloom_filter_1a8e43e0afbdeb30e50bcbecc687bac1e8" prot="private" static="no" mutable="no">
        <type>int</type>
        <definition>int nHashFuncs</definition>
        <argsstring></argsstring>
        <name>nHashFuncs</name>
        <qualifiedname>CRollingBloomFilter::nHashFuncs</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="124" column="9" bodyfile="src/common/bloom.h" bodystart="124" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-func">
      <memberdef kind="function" id="class_c_rolling_bloom_filter_1a7d7092efd9e788f90b4dea90eea36d19" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>CRollingBloomFilter</definition>
        <argsstring>(const unsigned int nElements, const double nFPRate)</argsstring>
        <name>CRollingBloomFilter</name>
        <qualifiedname>CRollingBloomFilter::CRollingBloomFilter</qualifiedname>
        <param>
          <type>const unsigned int</type>
          <declname>nElements</declname>
        </param>
        <param>
          <type>const double</type>
          <declname>nFPRate</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="111" column="5" bodyfile="src/common/bloom.cpp" bodystart="162" bodyend="187"/>
      </memberdef>
      <memberdef kind="function" id="class_c_rolling_bloom_filter_1a0ffa34ea13dcfd2604c6611a1910ec94" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void insert</definition>
        <argsstring>(std::span&lt; const unsigned char &gt; vKey)</argsstring>
        <name>insert</name>
        <qualifiedname>CRollingBloomFilter::insert</qualifiedname>
        <param>
          <type>std::span&lt; const unsigned char &gt;</type>
          <declname>vKey</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="113" column="10" bodyfile="src/common/bloom.cpp" bodystart="195" bodyend="224"/>
      </memberdef>
      <memberdef kind="function" id="class_c_rolling_bloom_filter_1a4aa5df3f0e22486ae74c274897b2fe33" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>bool contains</definition>
        <argsstring>(std::span&lt; const unsigned char &gt; vKey) const</argsstring>
        <name>contains</name>
        <qualifiedname>CRollingBloomFilter::contains</qualifiedname>
        <param>
          <type>std::span&lt; const unsigned char &gt;</type>
          <declname>vKey</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="114" column="10" bodyfile="src/common/bloom.cpp" bodystart="226" bodyend="238"/>
      </memberdef>
      <memberdef kind="function" id="class_c_rolling_bloom_filter_1ad20897c5c8bd47f5d4005989bead0e55" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void reset</definition>
        <argsstring>()</argsstring>
        <name>reset</name>
        <qualifiedname>CRollingBloomFilter::reset</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="116" column="10" bodyfile="src/common/bloom.cpp" bodystart="240" bodyend="246"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>RollingBloomFilter is a probabilistic &quot;keep track of most recently inserted&quot; set. Construct it with the number of items to keep track of, and a false-positive rate. Unlike <ref refid="class_c_bloom_filter" kindref="compound">CBloomFilter</ref>, by default nTweak is set to a cryptographically secure random value for you. Similarly rather than <ref refid="uint256__tests_8cpp_1a4f5d99a6821ae59423c189b1f657369c" kindref="member">clear()</ref> the method <ref refid="class_c_rolling_bloom_filter_1ad20897c5c8bd47f5d4005989bead0e55" kindref="member">reset()</ref> is provided, which also changes nTweak to decrease the impact of false-positives.</para>
<para>contains(item) will always return true if item was one of the last N to 1.5*N <ref refid="class_c_rolling_bloom_filter_1a0ffa34ea13dcfd2604c6611a1910ec94" kindref="member">insert()</ref>&apos;ed ... but may also return true for items that were not inserted.</para>
<para>It needs around 1.8 bytes per element per factor 0.1 of false positive rate. For example, if we want 1000 elements, we&apos;d need:<itemizedlist>
<listitem><para>~1800 bytes for a false positive rate of 0.1</para>
</listitem><listitem><para>~3600 bytes for a false positive rate of 0.01</para>
</listitem><listitem><para>~5400 bytes for a false positive rate of 0.001</para>
</listitem></itemizedlist>
</para>
<para>If we make these simplifying assumptions:<itemizedlist>
<listitem><para>logFpRate / log(0.5) doesn&apos;t get rounded or clamped in the nHashFuncs calculation</para>
</listitem><listitem><para>nElements is even, so that nEntriesPerGeneration == nElements / 2</para>
</listitem></itemizedlist>
</para>
<para>Then we get a more accurate estimate for filter bytes: <verbatim>3/(log(256)*log(2)) * log(1/fpRate) * nElements
</verbatim> </para>
    </detaileddescription>
    <location file="src/common/bloom.h" line="108" column="1" bodyfile="src/common/bloom.h" bodystart="109" bodyend="125"/>
    <listofallmembers>
      <member refid="class_c_rolling_bloom_filter_1a4aa5df3f0e22486ae74c274897b2fe33" prot="public" virt="non-virtual"><scope>CRollingBloomFilter</scope><name>contains</name></member>
      <member refid="class_c_rolling_bloom_filter_1a7d7092efd9e788f90b4dea90eea36d19" prot="public" virt="non-virtual"><scope>CRollingBloomFilter</scope><name>CRollingBloomFilter</name></member>
      <member refid="class_c_rolling_bloom_filter_1ac0bf9d283c24f8cc8279bd7db0694983" prot="private" virt="non-virtual"><scope>CRollingBloomFilter</scope><name>data</name></member>
      <member refid="class_c_rolling_bloom_filter_1a0ffa34ea13dcfd2604c6611a1910ec94" prot="public" virt="non-virtual"><scope>CRollingBloomFilter</scope><name>insert</name></member>
      <member refid="class_c_rolling_bloom_filter_1a1de43b9d6c598f1e91cd568f1085e156" prot="private" virt="non-virtual"><scope>CRollingBloomFilter</scope><name>nEntriesPerGeneration</name></member>
      <member refid="class_c_rolling_bloom_filter_1a785a4adaad61d2dcc6d9684fc7657625" prot="private" virt="non-virtual"><scope>CRollingBloomFilter</scope><name>nEntriesThisGeneration</name></member>
      <member refid="class_c_rolling_bloom_filter_1a9c6cfdc8c8a18a566b335512094cb175" prot="private" virt="non-virtual"><scope>CRollingBloomFilter</scope><name>nGeneration</name></member>
      <member refid="class_c_rolling_bloom_filter_1a8e43e0afbdeb30e50bcbecc687bac1e8" prot="private" virt="non-virtual"><scope>CRollingBloomFilter</scope><name>nHashFuncs</name></member>
      <member refid="class_c_rolling_bloom_filter_1ac5192de8c78c9ab06fbf20dff75ca674" prot="private" virt="non-virtual"><scope>CRollingBloomFilter</scope><name>nTweak</name></member>
      <member refid="class_c_rolling_bloom_filter_1ad20897c5c8bd47f5d4005989bead0e55" prot="public" virt="non-virtual"><scope>CRollingBloomFilter</scope><name>reset</name></member>
    </listofallmembers>
  </compounddef>
</doxygen>
