<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="en-US">
  <compounddef id="request_8cpp" kind="file" language="C++">
    <compoundname>request.cpp</compoundname>
    <includes refid="request_8h" local="no">rpc/request.h</includes>
    <includes refid="args_8h" local="no">common/args.h</includes>
    <includes local="no">logging.h</includes>
    <includes local="no">random.h</includes>
    <includes refid="rpc_2protocol_8h" local="no">rpc/protocol.h</includes>
    <includes refid="fs_8h" local="no">util/fs.h</includes>
    <includes refid="fs__helpers_8h" local="no">util/fs_helpers.h</includes>
    <includes refid="strencodings_8h" local="no">util/strencodings.h</includes>
    <includes local="no">fstream</includes>
    <includes local="no">stdexcept</includes>
    <includes local="no">string</includes>
    <includes local="no">vector</includes>
    <incdepgraph>
      <node id="20">
        <label>attributes.h</label>
        <link refid="attributes_8h"/>
      </node>
      <node id="36">
        <label>common/args.h</label>
        <link refid="args_8h"/>
        <childnode refid="37" relation="include">
        </childnode>
        <childnode refid="38" relation="include">
        </childnode>
        <childnode refid="51" relation="include">
        </childnode>
        <childnode refid="57" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="58" relation="include">
        </childnode>
        <childnode refid="59" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="60" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="61" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
      </node>
      <node id="37">
        <label>common/settings.h</label>
        <link refid="common_2settings_8h"/>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
      </node>
      <node id="38">
        <label>compat/compat.h</label>
        <link refid="compat_8h"/>
        <childnode refid="39" relation="include">
        </childnode>
        <childnode refid="40" relation="include">
        </childnode>
        <childnode refid="41" relation="include">
        </childnode>
        <childnode refid="42" relation="include">
        </childnode>
        <childnode refid="43" relation="include">
        </childnode>
        <childnode refid="44" relation="include">
        </childnode>
        <childnode refid="45" relation="include">
        </childnode>
        <childnode refid="46" relation="include">
        </childnode>
        <childnode refid="47" relation="include">
        </childnode>
        <childnode refid="48" relation="include">
        </childnode>
        <childnode refid="49" relation="include">
        </childnode>
        <childnode refid="50" relation="include">
        </childnode>
      </node>
      <node id="68">
        <label>crypto/hex_base.h</label>
        <link refid="hex__base_8h"/>
        <childnode refid="24" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="26" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="64">
        <label>rpc/protocol.h</label>
        <link refid="rpc_2protocol_8h"/>
      </node>
      <node id="1">
        <label>src/rpc/request.cpp</label>
        <link refid="request_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="36" relation="include">
        </childnode>
        <childnode refid="62" relation="include">
        </childnode>
        <childnode refid="63" relation="include">
        </childnode>
        <childnode refid="64" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="65" relation="include">
        </childnode>
        <childnode refid="67" relation="include">
        </childnode>
        <childnode refid="70" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>rpc/request.h</label>
        <link refid="request_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
      </node>
      <node id="24">
        <label>span.h</label>
        <link refid="span_8h"/>
        <childnode refid="25" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="26" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
      </node>
      <node id="51">
        <label>sync.h</label>
        <link refid="sync_8h"/>
        <childnode refid="52" relation="include">
        </childnode>
        <childnode refid="54" relation="include">
        </childnode>
        <childnode refid="25" relation="include">
        </childnode>
        <childnode refid="55" relation="include">
        </childnode>
        <childnode refid="53" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="56" relation="include">
        </childnode>
      </node>
      <node id="52">
        <label>threadsafety.h</label>
        <link refid="threadsafety_8h"/>
        <childnode refid="53" relation="include">
        </childnode>
      </node>
      <node id="18">
        <label>tinyformat.h</label>
        <link refid="tinyformat_8h"/>
        <childnode refid="19" relation="include">
        </childnode>
        <childnode refid="20" relation="include">
        </childnode>
        <childnode refid="21" relation="include">
        </childnode>
        <childnode refid="22" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="23" relation="include">
        </childnode>
        <childnode refid="25" relation="include">
        </childnode>
      </node>
      <node id="6">
        <label>univalue.h</label>
        <link refid="univalue_8h"/>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
      </node>
      <node id="57">
        <label>util/chaintype.h</label>
        <link refid="chaintype_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="17">
        <label>util/fs.h</label>
        <link refid="fs_8h"/>
        <childnode refid="18" relation="include">
        </childnode>
        <childnode refid="30" relation="include">
        </childnode>
        <childnode refid="31" relation="include">
        </childnode>
        <childnode refid="32" relation="include">
        </childnode>
        <childnode refid="33" relation="include">
        </childnode>
        <childnode refid="34" relation="include">
        </childnode>
        <childnode refid="35" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
      </node>
      <node id="65">
        <label>util/fs_helpers.h</label>
        <link refid="fs__helpers_8h"/>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="30" relation="include">
        </childnode>
        <childnode refid="58" relation="include">
        </childnode>
        <childnode refid="66" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="54">
        <label>util/macros.h</label>
        <link refid="macros_8h"/>
      </node>
      <node id="67">
        <label>util/strencodings.h</label>
        <link refid="strencodings_8h"/>
        <childnode refid="68" relation="include">
        </childnode>
        <childnode refid="24" relation="include">
        </childnode>
        <childnode refid="23" relation="include">
        </childnode>
        <childnode refid="27" relation="include">
        </childnode>
        <childnode refid="69" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="66" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
      </node>
      <node id="23">
        <label>util/string.h</label>
        <link refid="string_8h"/>
        <childnode refid="24" relation="include">
        </childnode>
        <childnode refid="27" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="28" relation="include">
        </childnode>
        <childnode refid="29" relation="include">
        </childnode>
        <childnode refid="22" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
      </node>
      <node id="19">
        <label>algorithm</label>
      </node>
      <node id="3">
        <label>any</label>
      </node>
      <node id="39">
        <label>arpa/inet.h</label>
      </node>
      <node id="27">
        <label>array</label>
      </node>
      <node id="69">
        <label>bit</label>
      </node>
      <node id="25">
        <label>cassert</label>
      </node>
      <node id="50">
        <label>cerrno</label>
      </node>
      <node id="7">
        <label>charconv</label>
      </node>
      <node id="55">
        <label>condition_variable</label>
      </node>
      <node id="8">
        <label>cstddef</label>
      </node>
      <node id="9">
        <label>cstdint</label>
      </node>
      <node id="30">
        <label>cstdio</label>
      </node>
      <node id="28">
        <label>cstring</label>
      </node>
      <node id="40">
        <label>fcntl.h</label>
      </node>
      <node id="31">
        <label>filesystem</label>
      </node>
      <node id="70">
        <label>fstream</label>
      </node>
      <node id="32">
        <label>functional</label>
      </node>
      <node id="33">
        <label>iomanip</label>
      </node>
      <node id="34">
        <label>ios</label>
      </node>
      <node id="58">
        <label>iosfwd</label>
      </node>
      <node id="21">
        <label>iostream</label>
      </node>
      <node id="66">
        <label>limits</label>
      </node>
      <node id="59">
        <label>list</label>
      </node>
      <node id="29">
        <label>locale</label>
      </node>
      <node id="62">
        <label>logging.h</label>
      </node>
      <node id="10">
        <label>map</label>
      </node>
      <node id="53">
        <label>mutex</label>
      </node>
      <node id="41">
        <label>net/if.h</label>
      </node>
      <node id="42">
        <label>netdb.h</label>
      </node>
      <node id="43">
        <label>netinet/in.h</label>
      </node>
      <node id="44">
        <label>netinet/tcp.h</label>
      </node>
      <node id="4">
        <label>optional</label>
      </node>
      <node id="35">
        <label>ostream</label>
      </node>
      <node id="63">
        <label>random.h</label>
      </node>
      <node id="60">
        <label>set</label>
      </node>
      <node id="26">
        <label>span</label>
      </node>
      <node id="22">
        <label>sstream</label>
      </node>
      <node id="11">
        <label>stdexcept</label>
      </node>
      <node id="5">
        <label>string</label>
      </node>
      <node id="12">
        <label>string_view</label>
      </node>
      <node id="45">
        <label>sys/mman.h</label>
      </node>
      <node id="46">
        <label>sys/select.h</label>
      </node>
      <node id="47">
        <label>sys/socket.h</label>
      </node>
      <node id="48">
        <label>sys/types.h</label>
      </node>
      <node id="13">
        <label>system_error</label>
      </node>
      <node id="56">
        <label>thread</label>
      </node>
      <node id="14">
        <label>type_traits</label>
      </node>
      <node id="49">
        <label>unistd.h</label>
      </node>
      <node id="15">
        <label>utility</label>
      </node>
      <node id="61">
        <label>variant</label>
      </node>
      <node id="16">
        <label>vector</label>
      </node>
    </incdepgraph>
    <sectiondef kind="var">
      <memberdef kind="variable" id="request_8cpp_1aefb20e620a9883ec151225fd88e5217d" prot="public" static="yes" mutable="no">
        <type>const std::string</type>
        <definition>const std::string COOKIEAUTH_USER</definition>
        <argsstring></argsstring>
        <name>COOKIEAUTH_USER</name>
        <initializer>= &quot;__cookie__&quot;</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Username used when cookie authentication is in use (arbitrary, only for recognizability in debugging/logging purposes) </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/rpc/request.cpp" line="81" column="26" bodyfile="src/rpc/request.cpp" bodystart="81" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="request_8cpp_1a41dba3b992b44ddb6b52b1d95441310f" prot="public" static="yes" mutable="no">
        <type>const char *const</type>
        <definition>const char* const COOKIEAUTH_FILE</definition>
        <argsstring></argsstring>
        <name>COOKIEAUTH_FILE</name>
        <initializer>= &quot;.cookie&quot;</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Default name for auth cookie file </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/rpc/request.cpp" line="83" column="25" bodyfile="src/rpc/request.cpp" bodystart="83" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="request_8cpp_1af66259a4998aa692e27dda59eba031cf" prot="public" static="yes" mutable="no">
        <type>bool</type>
        <definition>bool g_generated_cookie</definition>
        <argsstring></argsstring>
        <name>g_generated_cookie</name>
        <initializer>= false</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/rpc/request.cpp" line="98" column="13" bodyfile="src/rpc/request.cpp" bodystart="98" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <memberdef kind="function" id="request_8cpp_1a3adfee54547442fb913d3bd8269a0a49" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="class_uni_value" kindref="compound">UniValue</ref></type>
        <definition>UniValue JSONRPCRequestObj</definition>
        <argsstring>(const std::string &amp;strMethod, const UniValue &amp;params, const UniValue &amp;id)</argsstring>
        <name>JSONRPCRequestObj</name>
        <param>
          <type>const std::string &amp;</type>
          <declname>strMethod</declname>
        </param>
        <param>
          <type>const <ref refid="class_uni_value" kindref="compound">UniValue</ref> &amp;</type>
          <declname>params</declname>
        </param>
        <param>
          <type>const <ref refid="class_uni_value" kindref="compound">UniValue</ref> &amp;</type>
          <declname>id</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>JSON-RPC protocol. Bitcoin speaks version 1.0 for maximum compatibility, but uses JSON-RPC 1.1/2.0 standards for parts of the 1.0 standard that were unspecified (HTTP errors and contents of &apos;error&apos;).</para>
<para>1.0 spec: <ulink url="https://www.jsonrpc.org/specification_v1">https://www.jsonrpc.org/specification_v1</ulink> 1.2 spec: <ulink url="https://jsonrpc.org/historical/json-rpc-over-http.html">https://jsonrpc.org/historical/json-rpc-over-http.html</ulink></para>
<para>If the server receives a request with the JSON-RPC 2.0 marker <computeroutput>{"jsonrpc": "2.0"}</computeroutput> then Bitcoin will respond with a strictly specified response. It will only return an HTTP error code if an actual HTTP error is encountered such as the endpoint is not found (404) or the request is not formatted correctly (500). Otherwise the HTTP code is always OK (200) and RPC errors will be included in the response body.</para>
<para>2.0 spec: <ulink url="https://www.jsonrpc.org/specification">https://www.jsonrpc.org/specification</ulink></para>
<para>Also see <ulink url="https://www.simple-is-better.org/rpc/#differences-between-1-0-and-2-0">https://www.simple-is-better.org/rpc/#differences-between-1-0-and-2-0</ulink> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/rpc/request.cpp" line="41" column="10" bodyfile="src/rpc/request.cpp" bodystart="41" bodyend="49"/>
      </memberdef>
      <memberdef kind="function" id="request_8cpp_1a7a5efbb94e314c4adebd44863536c016" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="class_uni_value" kindref="compound">UniValue</ref></type>
        <definition>UniValue JSONRPCReplyObj</definition>
        <argsstring>(UniValue result, UniValue error, std::optional&lt; UniValue &gt; id, JSONRPCVersion jsonrpc_version)</argsstring>
        <name>JSONRPCReplyObj</name>
        <param>
          <type><ref refid="class_uni_value" kindref="compound">UniValue</ref></type>
          <declname>result</declname>
        </param>
        <param>
          <type><ref refid="class_uni_value" kindref="compound">UniValue</ref></type>
          <declname>error</declname>
        </param>
        <param>
          <type>std::optional&lt; <ref refid="class_uni_value" kindref="compound">UniValue</ref> &gt;</type>
          <declname>id</declname>
        </param>
        <param>
          <type><ref refid="request_8h_1a5c457685541892ee16efcc5fa9cf0bd4" kindref="member">JSONRPCVersion</ref></type>
          <declname>jsonrpc_version</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/rpc/request.cpp" line="51" column="10" bodyfile="src/rpc/request.cpp" bodystart="51" bodyend="68"/>
      </memberdef>
      <memberdef kind="function" id="request_8cpp_1a40b75d3d265c4a2e1d5fe3e129743884" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="class_uni_value" kindref="compound">UniValue</ref></type>
        <definition>UniValue JSONRPCError</definition>
        <argsstring>(int code, const std::string &amp;message)</argsstring>
        <name>JSONRPCError</name>
        <param>
          <type>int</type>
          <declname>code</declname>
        </param>
        <param>
          <type>const std::string &amp;</type>
          <declname>message</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/rpc/request.cpp" line="70" column="10" bodyfile="src/rpc/request.cpp" bodystart="70" bodyend="76"/>
      </memberdef>
      <memberdef kind="function" id="request_8cpp_1a02d08d01d5c4b07c1a7e6d5331600234" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="classfs_1_1path" kindref="compound">fs::path</ref></type>
        <definition>static fs::path GetAuthCookieFile</definition>
        <argsstring>(bool temp=false)</argsstring>
        <name>GetAuthCookieFile</name>
        <param>
          <type>bool</type>
          <declname>temp</declname>
          <defval>false</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get name of RPC authentication cookie file </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/rpc/request.cpp" line="86" column="17" bodyfile="src/rpc/request.cpp" bodystart="86" bodyend="96"/>
      </memberdef>
      <memberdef kind="function" id="request_8cpp_1a005251add6b8b37a1935dfea3967aa76" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="request_8h_1a6eb6b7c13b727f5a5b3b535313661517" kindref="member">GenerateAuthCookieResult</ref></type>
        <definition>GenerateAuthCookieResult GenerateAuthCookie</definition>
        <argsstring>(const std::optional&lt; fs::perms &gt; &amp;cookie_perms, std::string &amp;user, std::string &amp;pass)</argsstring>
        <name>GenerateAuthCookie</name>
        <param>
          <type>const std::optional&lt; fs::perms &gt; &amp;</type>
          <declname>cookie_perms</declname>
        </param>
        <param>
          <type>std::string &amp;</type>
          <declname>user</declname>
        </param>
        <param>
          <type>std::string &amp;</type>
          <declname>pass</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Generate a new RPC authentication cookie and write it to disk <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">cookie_perms</parametername>
</parameternamelist>
<parameterdescription>
<para>Filesystem permissions to use for the cookie file. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">user</parametername>
</parameternamelist>
<parameterdescription>
<para>Generated username, only set if <computeroutput>OK</computeroutput> is returned. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">pass</parametername>
</parameternamelist>
<parameterdescription>
<para>Generated password, only set if <computeroutput>OK</computeroutput> is returned. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername><ref refid="request_8h_1a6eb6b7c13b727f5a5b3b535313661517a055c1a591abb0e8cd86dc969727bcc0b" kindref="member">GenerateAuthCookieResult::DISABLED</ref></parametername>
</parameternamelist>
<parameterdescription>
<para>Authentication via cookie is disabled. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>GenerateAuthCookieResult::ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>Error occurred, auth data could not be saved to disk. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername><ref refid="request_8h_1a6eb6b7c13b727f5a5b3b535313661517ae0aa021e21dddbd6d8cecec71e9cf564" kindref="member">GenerateAuthCookieResult::OK</ref></parametername>
</parameternamelist>
<parameterdescription>
<para>Auth data was generated, saved to disk and in <computeroutput>user</computeroutput> and <computeroutput>pass</computeroutput>. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
<para>the umask determines what permissions are used to create this file - these are set to 0077 in <ref refid="common_2system_8cpp" kindref="compound">common/system.cpp</ref>.</para>
        </inbodydescription>
        <location file="src/rpc/request.cpp" line="100" column="26" bodyfile="src/rpc/request.cpp" bodystart="100" bodyend="146"/>
      </memberdef>
      <memberdef kind="function" id="request_8cpp_1a25c502e3691e714e8a130c2325d40d63" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>bool GetAuthCookie</definition>
        <argsstring>(std::string *cookie_out)</argsstring>
        <name>GetAuthCookie</name>
        <param>
          <type>std::string *</type>
          <declname>cookie_out</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Read the RPC authentication cookie from disk </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/rpc/request.cpp" line="148" column="6" bodyfile="src/rpc/request.cpp" bodystart="148" bodyend="165"/>
      </memberdef>
      <memberdef kind="function" id="request_8cpp_1a9807259ee7b7c4f5445cf54fd23589cb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void DeleteAuthCookie</definition>
        <argsstring>()</argsstring>
        <name>DeleteAuthCookie</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Delete RPC authentication cookie from disk </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/rpc/request.cpp" line="167" column="6" bodyfile="src/rpc/request.cpp" bodystart="167" bodyend="177"/>
      </memberdef>
      <memberdef kind="function" id="request_8cpp_1a05724b070606ec86736bdae1d2de7b3d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>std::vector&lt; <ref refid="class_uni_value" kindref="compound">UniValue</ref> &gt;</type>
        <definition>std::vector&lt; UniValue &gt; JSONRPCProcessBatchReply</definition>
        <argsstring>(const UniValue &amp;in)</argsstring>
        <name>JSONRPCProcessBatchReply</name>
        <param>
          <type>const <ref refid="class_uni_value" kindref="compound">UniValue</ref> &amp;</type>
          <declname>in</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Parse JSON-RPC batch reply into a vector </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/rpc/request.cpp" line="179" column="13" bodyfile="src/rpc/request.cpp" bodystart="179" bodyend="197"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">//<sp/>Copyright<sp/>(c)<sp/>2010<sp/>Satoshi<sp/>Nakamoto</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Copyright<sp/>(c)<sp/>2009-present<sp/>The<sp/>Bitcoin<sp/>Core<sp/>developers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Distributed<sp/>under<sp/>the<sp/>MIT<sp/>software<sp/>license,<sp/>see<sp/>the<sp/>accompanying</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">//<sp/>file<sp/>COPYING<sp/>or<sp/>http://www.opensource.org/licenses/mit-license.php.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="request_8h" kindref="compound">rpc/request.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="args_8h" kindref="compound">common/args.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;logging.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;random.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="rpc_2protocol_8h" kindref="compound">rpc/protocol.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="fs_8h" kindref="compound">util/fs.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="fs__helpers_8h" kindref="compound">util/fs_helpers.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="strencodings_8h" kindref="compound">util/strencodings.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;fstream&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdexcept&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;vector&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><ref refid="class_uni_value" kindref="compound">UniValue</ref><sp/><ref refid="request_8cpp_1a3adfee54547442fb913d3bd8269a0a49" kindref="member">JSONRPCRequestObj</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string&amp;<sp/>strMethod,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_uni_value" kindref="compound">UniValue</ref>&amp;<sp/>params,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_uni_value" kindref="compound">UniValue</ref>&amp;<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="42"><highlight class="normal">{</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_uni_value" kindref="compound">UniValue</ref><sp/>request(<ref refid="class_uni_value_1a28a778aedb7441c6b9755e1882b58dc9a9410c3fb08f24f5786a122ab7a6c418b" kindref="member">UniValue::VOBJ</ref>);</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/>request.pushKV(</highlight><highlight class="stringliteral">&quot;method&quot;</highlight><highlight class="normal">,<sp/>strMethod);</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>request.pushKV(</highlight><highlight class="stringliteral">&quot;params&quot;</highlight><highlight class="normal">,<sp/>params);</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/>request.pushKV(</highlight><highlight class="stringliteral">&quot;id&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/>request.pushKV(</highlight><highlight class="stringliteral">&quot;jsonrpc&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;2.0&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>request;</highlight></codeline>
<codeline lineno="49"><highlight class="normal">}</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><ref refid="class_uni_value" kindref="compound">UniValue</ref><sp/><ref refid="request_8cpp_1a7a5efbb94e314c4adebd44863536c016" kindref="member">JSONRPCReplyObj</ref>(<ref refid="class_uni_value" kindref="compound">UniValue</ref><sp/>result,<sp/><ref refid="class_uni_value" kindref="compound">UniValue</ref><sp/>error,<sp/>std::optional&lt;UniValue&gt;<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,<sp/><ref refid="request_8h_1a5c457685541892ee16efcc5fa9cf0bd4" kindref="member">JSONRPCVersion</ref><sp/>jsonrpc_version)</highlight></codeline>
<codeline lineno="52"><highlight class="normal">{</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_uni_value" kindref="compound">UniValue</ref><sp/>reply(<ref refid="class_uni_value_1a28a778aedb7441c6b9755e1882b58dc9a9410c3fb08f24f5786a122ab7a6c418b" kindref="member">UniValue::VOBJ</ref>);</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Add<sp/>JSON-RPC<sp/>version<sp/>number<sp/>field<sp/>in<sp/>v2<sp/>only.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(jsonrpc_version<sp/>==<sp/><ref refid="request_8h_1a5c457685541892ee16efcc5fa9cf0bd4aec765f1adc3b4253f2d3b131a4a8618f" kindref="member">JSONRPCVersion::V2</ref>)<sp/>reply.pushKV(</highlight><highlight class="stringliteral">&quot;jsonrpc&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;2.0&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Add<sp/>both<sp/>result<sp/>and<sp/>error<sp/>fields<sp/>in<sp/>v1,<sp/>even<sp/>though<sp/>one<sp/>will<sp/>be<sp/>null.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Omit<sp/>the<sp/>null<sp/>field<sp/>in<sp/>v2.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(error.<ref refid="class_uni_value_1abada6dfb33f4cbafe1e443a5cf8dc8d0" kindref="member">isNull</ref>())<sp/>{</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reply.pushKV(</highlight><highlight class="stringliteral">&quot;result&quot;</highlight><highlight class="normal">,<sp/>std::move(result));</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(jsonrpc_version<sp/>==<sp/><ref refid="request_8h_1a5c457685541892ee16efcc5fa9cf0bd4af8dc624c2118544584ae6c68dcfd3ca2" kindref="member">JSONRPCVersion::V1_LEGACY</ref>)<sp/>reply.pushKV(</highlight><highlight class="stringliteral">&quot;error&quot;</highlight><highlight class="normal">,<sp/><ref refid="univalue_8h_1ab1cbd3b775dba07c37095e995b57e91e" kindref="member">NullUniValue</ref>);</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(jsonrpc_version<sp/>==<sp/><ref refid="request_8h_1a5c457685541892ee16efcc5fa9cf0bd4af8dc624c2118544584ae6c68dcfd3ca2" kindref="member">JSONRPCVersion::V1_LEGACY</ref>)<sp/>reply.pushKV(</highlight><highlight class="stringliteral">&quot;result&quot;</highlight><highlight class="normal">,<sp/><ref refid="univalue_8h_1ab1cbd3b775dba07c37095e995b57e91e" kindref="member">NullUniValue</ref>);</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reply.pushKV(</highlight><highlight class="stringliteral">&quot;error&quot;</highlight><highlight class="normal">,<sp/>std::move(error));</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">.has_value())<sp/>reply.pushKV(</highlight><highlight class="stringliteral">&quot;id&quot;</highlight><highlight class="normal">,<sp/>std::move(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">.value()));</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>reply;</highlight></codeline>
<codeline lineno="68"><highlight class="normal">}</highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><ref refid="class_uni_value" kindref="compound">UniValue</ref><sp/><ref refid="request_8cpp_1a40b75d3d265c4a2e1d5fe3e129743884" kindref="member">JSONRPCError</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>code,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string&amp;<sp/>message)</highlight></codeline>
<codeline lineno="71"><highlight class="normal">{</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_uni_value" kindref="compound">UniValue</ref><sp/>error(<ref refid="class_uni_value_1a28a778aedb7441c6b9755e1882b58dc9a9410c3fb08f24f5786a122ab7a6c418b" kindref="member">UniValue::VOBJ</ref>);</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>error.<ref refid="class_uni_value_1abef1c17c55e9357f507a18e9f69c45d6" kindref="member">pushKV</ref>(</highlight><highlight class="stringliteral">&quot;code&quot;</highlight><highlight class="normal">,<sp/>code);</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/>error.<ref refid="class_uni_value_1abef1c17c55e9357f507a18e9f69c45d6" kindref="member">pushKV</ref>(</highlight><highlight class="stringliteral">&quot;message&quot;</highlight><highlight class="normal">,<sp/>message);</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>error;</highlight></codeline>
<codeline lineno="76"><highlight class="normal">}</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string<sp/>COOKIEAUTH_USER<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;__cookie__&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>COOKIEAUTH_FILE<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;.cookie&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>fs::path<sp/>GetAuthCookieFile(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>temp=</highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="87"><highlight class="normal">{</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>fs::path<sp/>arg<sp/>=<sp/><ref refid="args_8cpp_1a934b7735a5308149ab1bf3ca9fc4d694" kindref="member">gArgs</ref>.GetPathArg(</highlight><highlight class="stringliteral">&quot;-rpccookiefile&quot;</highlight><highlight class="normal">,<sp/>COOKIEAUTH_FILE);</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(arg.empty())<sp/>{</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>{};<sp/></highlight><highlight class="comment">//<sp/>-norpccookiefile<sp/>was<sp/>specified</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(temp)<sp/>{</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arg<sp/>+=<sp/></highlight><highlight class="stringliteral">&quot;.tmp&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="args_8h_1a6f84123dc7a5beb44428149800b45850" kindref="member">AbsPathForConfigVal</ref>(<ref refid="args_8cpp_1a934b7735a5308149ab1bf3ca9fc4d694" kindref="member">gArgs</ref>,<sp/>arg);</highlight></codeline>
<codeline lineno="96"><highlight class="normal">}</highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>g_generated_cookie<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><ref refid="request_8h_1a6eb6b7c13b727f5a5b3b535313661517" kindref="member">GenerateAuthCookieResult</ref><sp/><ref refid="request_8cpp_1a005251add6b8b37a1935dfea3967aa76" kindref="member">GenerateAuthCookie</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::optional&lt;fs::perms&gt;&amp;<sp/>cookie_perms,</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::string&amp;<sp/>user,</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::string&amp;<sp/>pass)</highlight></codeline>
<codeline lineno="103"><highlight class="normal">{</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>COOKIE_SIZE<sp/>=<sp/>32;</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>rand_pwd[COOKIE_SIZE];</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="random_8cpp_1ab12e884f2063117fd7ae32b213b83175" kindref="member">GetRandBytes</ref>(rand_pwd);</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string<sp/>rand_pwd_hex{<ref refid="hex__base_8cpp_1ac2c88b156e9e245fa3d0a66105ecd371" kindref="member">HexStr</ref>(rand_pwd)};</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/>std::ofstream<sp/>file;</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/>fs::path<sp/>filepath_tmp<sp/>=<sp/>GetAuthCookieFile(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(filepath_tmp.empty())<sp/>{</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="request_8h_1a6eb6b7c13b727f5a5b3b535313661517a055c1a591abb0e8cd86dc969727bcc0b" kindref="member">GenerateAuthCookieResult::DISABLED</ref>;<sp/></highlight><highlight class="comment">//<sp/>-norpccookiefile</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>file.open(filepath_tmp.std_path());</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!file.is_open())<sp/>{</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="logging_8h_1a2c6c3e9c356e14fb4a7139acf4fa7b18" kindref="member">LogWarning</ref>(</highlight><highlight class="stringliteral">&quot;Unable<sp/>to<sp/>open<sp/>cookie<sp/>authentication<sp/>file<sp/>%s<sp/>for<sp/>writing&quot;</highlight><highlight class="normal">,<sp/>fs::PathToString(filepath_tmp));</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="request_8h_1a6eb6b7c13b727f5a5b3b535313661517acd22bad976363fdd1bfbf6759fede482" kindref="member">GenerateAuthCookieResult::ERR</ref>;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/>file<sp/>&lt;&lt;<sp/>COOKIEAUTH_USER<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;:&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>rand_pwd_hex;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>file.close();</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/>fs::path<sp/>filepath<sp/>=<sp/>GetAuthCookieFile(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="fs__helpers_8cpp_1a579657da2b55b131ecd453bf1b0d2314" kindref="member">RenameOver</ref>(filepath_tmp,<sp/>filepath))<sp/>{</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="logging_8h_1a2c6c3e9c356e14fb4a7139acf4fa7b18" kindref="member">LogWarning</ref>(</highlight><highlight class="stringliteral">&quot;Unable<sp/>to<sp/>rename<sp/>cookie<sp/>authentication<sp/>file<sp/>%s<sp/>to<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>fs::PathToString(filepath_tmp),<sp/>fs::PathToString(filepath));</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="request_8h_1a6eb6b7c13b727f5a5b3b535313661517acd22bad976363fdd1bfbf6759fede482" kindref="member">GenerateAuthCookieResult::ERR</ref>;</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cookie_perms)<sp/>{</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>std::error_code<sp/>code;</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fs::permissions(filepath,<sp/>cookie_perms.value(),<sp/>fs::perm_options::replace,<sp/>code);</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(code)<sp/>{</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="logging_8h_1a2c6c3e9c356e14fb4a7139acf4fa7b18" kindref="member">LogWarning</ref>(</highlight><highlight class="stringliteral">&quot;Unable<sp/>to<sp/>set<sp/>permissions<sp/>on<sp/>cookie<sp/>authentication<sp/>file<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>fs::PathToString(filepath));</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="request_8h_1a6eb6b7c13b727f5a5b3b535313661517acd22bad976363fdd1bfbf6759fede482" kindref="member">GenerateAuthCookieResult::ERR</ref>;</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/>g_generated_cookie<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="logging_8h_1a57eb3ffc98e6ad1bdbed0a980a54c484" kindref="member">LogInfo</ref>(</highlight><highlight class="stringliteral">&quot;Generated<sp/>RPC<sp/>authentication<sp/>cookie<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>fs::PathToString(filepath));</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="logging_8h_1a57eb3ffc98e6ad1bdbed0a980a54c484" kindref="member">LogInfo</ref>(</highlight><highlight class="stringliteral">&quot;Permissions<sp/>used<sp/>for<sp/>cookie:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/><ref refid="fs__helpers_8cpp_1ae34526a9ca0bc46252b39f5f7bde63db" kindref="member">PermsToSymbolicString</ref>(fs::status(filepath).permissions()));</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/>user<sp/>=<sp/>COOKIEAUTH_USER;</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/>pass<sp/>=<sp/>rand_pwd_hex;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="request_8h_1a6eb6b7c13b727f5a5b3b535313661517ae0aa021e21dddbd6d8cecec71e9cf564" kindref="member">GenerateAuthCookieResult::OK</ref>;</highlight></codeline>
<codeline lineno="146"><highlight class="normal">}</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="request_8cpp_1a25c502e3691e714e8a130c2325d40d63" kindref="member">GetAuthCookie</ref>(std::string<sp/>*cookie_out)</highlight></codeline>
<codeline lineno="149"><highlight class="normal">{</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/>std::ifstream<sp/>file;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>std::string<sp/>cookie;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/>fs::path<sp/>filepath<sp/>=<sp/>GetAuthCookieFile();</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(filepath.empty())<sp/>{</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>-norpccookiefile</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/>file.open(filepath.std_path());</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!file.is_open())</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>std::getline(file,<sp/>cookie);</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/>file.close();</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cookie_out)</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cookie_out<sp/>=<sp/>cookie;</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="165"><highlight class="normal">}</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="request_8cpp_1a9807259ee7b7c4f5445cf54fd23589cb" kindref="member">DeleteAuthCookie</ref>()</highlight></codeline>
<codeline lineno="168"><highlight class="normal">{</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(g_generated_cookie)<sp/>{</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Delete<sp/>the<sp/>cookie<sp/>file<sp/>if<sp/>it<sp/>was<sp/>generated<sp/>by<sp/>this<sp/>process</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fs::remove(GetAuthCookieFile());</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">catch</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>fs::filesystem_error&amp;<sp/>e)<sp/>{</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="logging_8h_1a2c6c3e9c356e14fb4a7139acf4fa7b18" kindref="member">LogWarning</ref>(</highlight><highlight class="stringliteral">&quot;Unable<sp/>to<sp/>remove<sp/>random<sp/>auth<sp/>cookie<sp/>file<sp/>%s:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>fs::PathToString(e.path1()),<sp/>e.code().message());</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="177"><highlight class="normal">}</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal">std::vector&lt;UniValue&gt;<sp/><ref refid="request_8cpp_1a05724b070606ec86736bdae1d2de7b3d" kindref="member">JSONRPCProcessBatchReply</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_uni_value" kindref="compound">UniValue</ref>&amp;<sp/>in)</highlight></codeline>
<codeline lineno="180"><highlight class="normal">{</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!in.<ref refid="class_uni_value_1aefe7cc24045c3560d7550ba662375ce4" kindref="member">isArray</ref>())<sp/>{</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/>std::runtime_error(</highlight><highlight class="stringliteral">&quot;Batch<sp/>must<sp/>be<sp/>an<sp/>array&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>num<sp/>{in.<ref refid="class_uni_value_1a259cb5a711406a8c3e5d937eb9350cca" kindref="member">size</ref>()};</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/>std::vector&lt;UniValue&gt;<sp/>batch(num);</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_uni_value" kindref="compound">UniValue</ref>&amp;<sp/>rec<sp/>:<sp/>in.<ref refid="class_uni_value_1a8c4705289e0968ed5189dd31f06420a1" kindref="member">getValues</ref>())<sp/>{</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!rec.isObject())<sp/>{</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/>std::runtime_error(</highlight><highlight class="stringliteral">&quot;Batch<sp/>member<sp/>must<sp/>be<sp/>an<sp/>object&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/>rec[</highlight><highlight class="stringliteral">&quot;id&quot;</highlight><highlight class="normal">].getInt&lt;</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">&gt;();</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>&gt;=<sp/>num)<sp/>{</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/>std::runtime_error(</highlight><highlight class="stringliteral">&quot;Batch<sp/>member<sp/>id<sp/>is<sp/>larger<sp/>than<sp/>batch<sp/>size&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>batch[id]<sp/>=<sp/>rec;</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>batch;</highlight></codeline>
<codeline lineno="197"><highlight class="normal">}</highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_j_s_o_n_r_p_c_request_1a0d784de37fca5d4ddad501ffbaa44250" kindref="member">JSONRPCRequest::parse</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_uni_value" kindref="compound">UniValue</ref>&amp;<sp/>valRequest)</highlight></codeline>
<codeline lineno="200"><highlight class="normal">{</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Parse<sp/>request</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!valRequest.<ref refid="class_uni_value_1a13b605b2c9876ab317e21637b8646def" kindref="member">isObject</ref>())</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/><ref refid="request_8h_1a40b75d3d265c4a2e1d5fe3e129743884" kindref="member">JSONRPCError</ref>(<ref refid="rpc_2protocol_8h_1af867221d51315471f28ed8cdac85deadaf8310a778a7a84d76adde337d695fd0d" kindref="member">RPC_INVALID_REQUEST</ref>,<sp/></highlight><highlight class="stringliteral">&quot;Invalid<sp/>Request<sp/>object&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>UniValue&amp;<sp/>request<sp/>=<sp/>valRequest.<ref refid="class_uni_value_1a9a4198cab72f671078cbffd52215e1ba" kindref="member">get_obj</ref>();</highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Parse<sp/>id<sp/>now<sp/>so<sp/>errors<sp/>from<sp/>here<sp/>on<sp/>will<sp/>have<sp/>the<sp/>id</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request.<ref refid="class_uni_value_1a8dfd1ed511ab4c2a5aa822e763549938" kindref="member">exists</ref>(</highlight><highlight class="stringliteral">&quot;id&quot;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/>request.<ref refid="class_uni_value_1a114b0094e06e6108ae88bfda54019f35" kindref="member">find_value</ref>(</highlight><highlight class="stringliteral">&quot;id&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/>std::nullopt;</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>for<sp/>JSON-RPC<sp/>2.0<sp/>(default<sp/>1.1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_j_s_o_n_r_p_c_request_1a302419b427a886a18f6efee6b5cb7b6b" kindref="member">m_json_version</ref><sp/>=<sp/><ref refid="request_8h_1a5c457685541892ee16efcc5fa9cf0bd4af8dc624c2118544584ae6c68dcfd3ca2" kindref="member">JSONRPCVersion::V1_LEGACY</ref>;</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>UniValue&amp;<sp/>jsonrpc_version<sp/>=<sp/>request.<ref refid="class_uni_value_1a114b0094e06e6108ae88bfda54019f35" kindref="member">find_value</ref>(</highlight><highlight class="stringliteral">&quot;jsonrpc&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!jsonrpc_version.<ref refid="class_uni_value_1abada6dfb33f4cbafe1e443a5cf8dc8d0" kindref="member">isNull</ref>())<sp/>{</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!jsonrpc_version.<ref refid="class_uni_value_1a2715f4acf3c5b99224c224e5a7aaa08f" kindref="member">isStr</ref>())<sp/>{</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/><ref refid="request_8h_1a40b75d3d265c4a2e1d5fe3e129743884" kindref="member">JSONRPCError</ref>(<ref refid="rpc_2protocol_8h_1af867221d51315471f28ed8cdac85deadaf8310a778a7a84d76adde337d695fd0d" kindref="member">RPC_INVALID_REQUEST</ref>,<sp/></highlight><highlight class="stringliteral">&quot;jsonrpc<sp/>field<sp/>must<sp/>be<sp/>a<sp/>string&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>&quot;jsonrpc&quot;<sp/>key<sp/>was<sp/>added<sp/>in<sp/>the<sp/>2.0<sp/>spec,<sp/>but<sp/>some<sp/>older<sp/>documentation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>incorrectly<sp/>included<sp/>{&quot;jsonrpc&quot;:&quot;1.0&quot;}<sp/>in<sp/>a<sp/>request<sp/>object,<sp/>so<sp/>we</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>maintain<sp/>that<sp/>for<sp/>backwards<sp/>compatibility.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(jsonrpc_version.<ref refid="class_uni_value_1ad5ca0afe094d6526a99c6fcdfec1356b" kindref="member">get_str</ref>()<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;1.0&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_j_s_o_n_r_p_c_request_1a302419b427a886a18f6efee6b5cb7b6b" kindref="member">m_json_version</ref><sp/>=<sp/><ref refid="request_8h_1a5c457685541892ee16efcc5fa9cf0bd4af8dc624c2118544584ae6c68dcfd3ca2" kindref="member">JSONRPCVersion::V1_LEGACY</ref>;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(jsonrpc_version.<ref refid="class_uni_value_1ad5ca0afe094d6526a99c6fcdfec1356b" kindref="member">get_str</ref>()<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;2.0&quot;</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_j_s_o_n_r_p_c_request_1a302419b427a886a18f6efee6b5cb7b6b" kindref="member">m_json_version</ref><sp/>=<sp/><ref refid="request_8h_1a5c457685541892ee16efcc5fa9cf0bd4aec765f1adc3b4253f2d3b131a4a8618f" kindref="member">JSONRPCVersion::V2</ref>;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/><ref refid="request_8h_1a40b75d3d265c4a2e1d5fe3e129743884" kindref="member">JSONRPCError</ref>(<ref refid="rpc_2protocol_8h_1af867221d51315471f28ed8cdac85deadaf8310a778a7a84d76adde337d695fd0d" kindref="member">RPC_INVALID_REQUEST</ref>,<sp/></highlight><highlight class="stringliteral">&quot;JSON-RPC<sp/>version<sp/>not<sp/>supported&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Parse<sp/>method</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>UniValue&amp;<sp/>valMethod{request.<ref refid="class_uni_value_1a114b0094e06e6108ae88bfda54019f35" kindref="member">find_value</ref>(</highlight><highlight class="stringliteral">&quot;method&quot;</highlight><highlight class="normal">)};</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(valMethod.<ref refid="class_uni_value_1abada6dfb33f4cbafe1e443a5cf8dc8d0" kindref="member">isNull</ref>())</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/><ref refid="request_8h_1a40b75d3d265c4a2e1d5fe3e129743884" kindref="member">JSONRPCError</ref>(<ref refid="rpc_2protocol_8h_1af867221d51315471f28ed8cdac85deadaf8310a778a7a84d76adde337d695fd0d" kindref="member">RPC_INVALID_REQUEST</ref>,<sp/></highlight><highlight class="stringliteral">&quot;Missing<sp/>method&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!valMethod.<ref refid="class_uni_value_1a2715f4acf3c5b99224c224e5a7aaa08f" kindref="member">isStr</ref>())</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/><ref refid="request_8h_1a40b75d3d265c4a2e1d5fe3e129743884" kindref="member">JSONRPCError</ref>(<ref refid="rpc_2protocol_8h_1af867221d51315471f28ed8cdac85deadaf8310a778a7a84d76adde337d695fd0d" kindref="member">RPC_INVALID_REQUEST</ref>,<sp/></highlight><highlight class="stringliteral">&quot;Method<sp/>must<sp/>be<sp/>a<sp/>string&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_j_s_o_n_r_p_c_request_1a44445b0da0b7202d2f7d57b3a89b5588" kindref="member">strMethod</ref><sp/>=<sp/>valMethod.<ref refid="class_uni_value_1ad5ca0afe094d6526a99c6fcdfec1356b" kindref="member">get_str</ref>();</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="logging_8cpp_1a8e02420c2f7c53579ccb90acf301ae75" kindref="member">fLogIPs</ref>)</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="logging_8h_1adeb58140a1c97947ad5d0c641415f1fc" kindref="member">LogDebug</ref>(<ref refid="namespace_b_c_log_1a2731eb4660a2a1b8dfab2a4f94ae7395a7f7e32ed10aea1dd73b80e96c70e8abf" kindref="member">BCLog::RPC</ref>,<sp/></highlight><highlight class="stringliteral">&quot;ThreadRPCServer<sp/>method=%s<sp/>user=%s<sp/>peeraddr=%s\n&quot;</highlight><highlight class="normal">,<sp/><ref refid="util_2strencodings_8cpp_1af661610872e92731fc31facae4d42361" kindref="member">SanitizeString</ref>(<ref refid="class_j_s_o_n_r_p_c_request_1a44445b0da0b7202d2f7d57b3a89b5588" kindref="member">strMethod</ref>),</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;<ref refid="class_j_s_o_n_r_p_c_request_1a2cbbaa137112798d6faca457d5870a9b" kindref="member">authUser</ref>,<sp/>this-&gt;<ref refid="class_j_s_o_n_r_p_c_request_1a043e3c63a780d5501a0ada58b94a4880" kindref="member">peerAddr</ref>);</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="logging_8h_1adeb58140a1c97947ad5d0c641415f1fc" kindref="member">LogDebug</ref>(<ref refid="namespace_b_c_log_1a2731eb4660a2a1b8dfab2a4f94ae7395a7f7e32ed10aea1dd73b80e96c70e8abf" kindref="member">BCLog::RPC</ref>,<sp/></highlight><highlight class="stringliteral">&quot;ThreadRPCServer<sp/>method=%s<sp/>user=%s\n&quot;</highlight><highlight class="normal">,<sp/><ref refid="util_2strencodings_8cpp_1af661610872e92731fc31facae4d42361" kindref="member">SanitizeString</ref>(<ref refid="class_j_s_o_n_r_p_c_request_1a44445b0da0b7202d2f7d57b3a89b5588" kindref="member">strMethod</ref>),<sp/>this-&gt;<ref refid="class_j_s_o_n_r_p_c_request_1a2cbbaa137112798d6faca457d5870a9b" kindref="member">authUser</ref>);</highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Parse<sp/>params</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>UniValue&amp;<sp/>valParams{request.<ref refid="class_uni_value_1a114b0094e06e6108ae88bfda54019f35" kindref="member">find_value</ref>(</highlight><highlight class="stringliteral">&quot;params&quot;</highlight><highlight class="normal">)};</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(valParams.<ref refid="class_uni_value_1aefe7cc24045c3560d7550ba662375ce4" kindref="member">isArray</ref>()<sp/>||<sp/>valParams.<ref refid="class_uni_value_1a13b605b2c9876ab317e21637b8646def" kindref="member">isObject</ref>())</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_j_s_o_n_r_p_c_request_1acbf981849ab2aac587d78747561c51c6" kindref="member">params</ref><sp/>=<sp/>valParams;</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(valParams.<ref refid="class_uni_value_1abada6dfb33f4cbafe1e443a5cf8dc8d0" kindref="member">isNull</ref>())</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_j_s_o_n_r_p_c_request_1acbf981849ab2aac587d78747561c51c6" kindref="member">params</ref><sp/>=<sp/>UniValue(<ref refid="class_uni_value_1a28a778aedb7441c6b9755e1882b58dc9a29e09364a716e7f1500adfc15d206e78" kindref="member">UniValue::VARR</ref>);</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/><ref refid="request_8h_1a40b75d3d265c4a2e1d5fe3e129743884" kindref="member">JSONRPCError</ref>(<ref refid="rpc_2protocol_8h_1af867221d51315471f28ed8cdac85deadaf8310a778a7a84d76adde337d695fd0d" kindref="member">RPC_INVALID_REQUEST</ref>,<sp/></highlight><highlight class="stringliteral">&quot;Params<sp/>must<sp/>be<sp/>an<sp/>array<sp/>or<sp/>object&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="253"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="src/rpc/request.cpp"/>
  </compounddef>
</doxygen>
