<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="en-US">
  <compounddef id="class_disconnected_block_transactions" kind="class" language="C++" prot="public">
    <compoundname>DisconnectedBlockTransactions</compoundname>
    <includes refid="disconnected__transactions_8h" local="no">disconnected_transactions.h</includes>
    <sectiondef kind="private-type">
      <memberdef kind="typedef" id="class_disconnected_block_transactions_1a742c4de255e41e1734027eee6b5d139e" prot="private" static="no">
        <type>decltype(queuedTx)</type>
        <definition>using TxList =  decltype(queuedTx)</definition>
        <argsstring></argsstring>
        <name>TxList</name>
        <qualifiedname>DisconnectedBlockTransactions::TxList</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="43" column="5" bodyfile="src/kernel/disconnected_transactions.h" bodystart="43" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-attrib">
      <memberdef kind="variable" id="class_disconnected_block_transactions_1aaa1c21fb545475aef7568d1c2600e97c" prot="private" static="no" mutable="no">
        <type>uint64_t</type>
        <definition>uint64_t cachedInnerUsage</definition>
        <argsstring></argsstring>
        <name>cachedInnerUsage</name>
        <qualifiedname>DisconnectedBlockTransactions::cachedInnerUsage</qualifiedname>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Cached dynamic memory usage for the <computeroutput><ref refid="primitives_2transaction_8h_1ae462b4b8f07705a82bf11cf361959b97" kindref="member">CTransactionRef</ref></computeroutput>s </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="40" column="14" bodyfile="src/kernel/disconnected_transactions.h" bodystart="40" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_disconnected_block_transactions_1adce0399f20fcec63fec02a546f3163f4" prot="private" static="no" mutable="no">
        <type>const size_t</type>
        <definition>const size_t m_max_mem_usage</definition>
        <argsstring></argsstring>
        <name>m_max_mem_usage</name>
        <qualifiedname>DisconnectedBlockTransactions::m_max_mem_usage</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="41" column="18" bodyfile="src/kernel/disconnected_transactions.h" bodystart="41" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_disconnected_block_transactions_1a436beefdf36f5b185e0d8adbaaf76886" prot="private" static="no" mutable="no">
        <type>std::list&lt; <ref refid="primitives_2transaction_8h_1ae462b4b8f07705a82bf11cf361959b97" kindref="member">CTransactionRef</ref> &gt;</type>
        <definition>std::list&lt;CTransactionRef&gt; queuedTx</definition>
        <argsstring></argsstring>
        <name>queuedTx</name>
        <qualifiedname>DisconnectedBlockTransactions::queuedTx</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="42" column="15" bodyfile="src/kernel/disconnected_transactions.h" bodystart="42" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_disconnected_block_transactions_1a5fcfaf407479e9002e37705f1f1f832c" prot="private" static="no" mutable="no">
        <type>std::unordered_map&lt; <ref refid="transaction__identifier_8h_1ac4bb3c35b94889843d632be4de4b223c" kindref="member">Txid</ref>, TxList::iterator, <ref refid="class_salted_txid_hasher" kindref="compound">SaltedTxidHasher</ref> &gt;</type>
        <definition>std::unordered_map&lt;Txid, TxList::iterator, SaltedTxidHasher&gt; iters_by_txid</definition>
        <argsstring></argsstring>
        <name>iters_by_txid</name>
        <qualifiedname>DisconnectedBlockTransactions::iters_by_txid</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="44" column="24" bodyfile="src/kernel/disconnected_transactions.h" bodystart="44" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-func">
      <memberdef kind="function" id="class_disconnected_block_transactions_1af80e6421a228ac1d0cca879360075d12" prot="private" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>std::vector&lt; <ref refid="primitives_2transaction_8h_1ae462b4b8f07705a82bf11cf361959b97" kindref="member">CTransactionRef</ref> &gt;</type>
        <definition>std::vector&lt; CTransactionRef &gt; LimitMemoryUsage</definition>
        <argsstring>()</argsstring>
        <name>LimitMemoryUsage</name>
        <qualifiedname>DisconnectedBlockTransactions::LimitMemoryUsage</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Trim the earliest-added entries until we are within memory bounds. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="47" column="17" bodyfile="src/kernel/disconnected_transactions.cpp" bodystart="31" bodyend="42"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-func">
      <memberdef kind="function" id="class_disconnected_block_transactions_1a13817160d490deb50d7e0a8e0471b5bc" prot="public" static="no" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type></type>
        <definition>DisconnectedBlockTransactions</definition>
        <argsstring>(size_t max_mem_usage)</argsstring>
        <name>DisconnectedBlockTransactions</name>
        <qualifiedname>DisconnectedBlockTransactions::DisconnectedBlockTransactions</qualifiedname>
        <param>
          <type>size_t</type>
          <declname>max_mem_usage</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="50" column="5" bodyfile="src/kernel/disconnected_transactions.h" bodystart="50" bodyend="51"/>
      </memberdef>
      <memberdef kind="function" id="class_disconnected_block_transactions_1a1711b70ebe3e390d39f38cb7a99cb45e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>~DisconnectedBlockTransactions</definition>
        <argsstring>()</argsstring>
        <name>~DisconnectedBlockTransactions</name>
        <qualifiedname>DisconnectedBlockTransactions::~DisconnectedBlockTransactions</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="53" column="5" bodyfile="src/kernel/disconnected_transactions.cpp" bodystart="24" bodyend="29"/>
      </memberdef>
      <memberdef kind="function" id="class_disconnected_block_transactions_1afcc22204abc15aeefd5d1f7396e909a4" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type>size_t</type>
        <definition>size_t DynamicMemoryUsage</definition>
        <argsstring>() const</argsstring>
        <name>DynamicMemoryUsage</name>
        <qualifiedname>DisconnectedBlockTransactions::DynamicMemoryUsage</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="55" column="12" bodyfile="src/kernel/disconnected_transactions.cpp" bodystart="44" bodyend="47"/>
      </memberdef>
      <memberdef kind="function" id="class_disconnected_block_transactions_1a00c7a433e2c25308bca9255e5cf4b0eb" prot="public" static="no" nodiscard="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>std::vector&lt; <ref refid="primitives_2transaction_8h_1ae462b4b8f07705a82bf11cf361959b97" kindref="member">CTransactionRef</ref> &gt;</type>
        <definition>std::vector&lt; CTransactionRef &gt; AddTransactionsFromBlock</definition>
        <argsstring>(const std::vector&lt; CTransactionRef &gt; &amp;vtx)</argsstring>
        <name>AddTransactionsFromBlock</name>
        <qualifiedname>DisconnectedBlockTransactions::AddTransactionsFromBlock</qualifiedname>
        <param>
          <type>const std::vector&lt; <ref refid="primitives_2transaction_8h_1ae462b4b8f07705a82bf11cf361959b97" kindref="member">CTransactionRef</ref> &gt; &amp;</type>
          <declname>vtx</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Add transactions from the block, iterating through vtx in reverse order. Callers should call this function for blocks in descending order by block height. We assume that callers never pass multiple transactions with the same txid, otherwise things can go very wrong in removeForBlock due to queuedTx containing an item without a corresponding entry in iters_by_txid. <simplesect kind="return"><para>vector of transactions that were evicted for size-limiting. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="64" column="18" bodyfile="src/kernel/disconnected_transactions.cpp" bodystart="49" bodyend="59"/>
      </memberdef>
      <memberdef kind="function" id="class_disconnected_block_transactions_1a27f308ba123752de7162c1fb47613227" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void removeForBlock</definition>
        <argsstring>(const std::vector&lt; CTransactionRef &gt; &amp;vtx)</argsstring>
        <name>removeForBlock</name>
        <qualifiedname>DisconnectedBlockTransactions::removeForBlock</qualifiedname>
        <param>
          <type>const std::vector&lt; <ref refid="primitives_2transaction_8h_1ae462b4b8f07705a82bf11cf361959b97" kindref="member">CTransactionRef</ref> &gt; &amp;</type>
          <declname>vtx</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Remove any entries that are in this block. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="67" column="10" bodyfile="src/kernel/disconnected_transactions.cpp" bodystart="61" bodyend="76"/>
      </memberdef>
      <memberdef kind="function" id="class_disconnected_block_transactions_1a259cb5a711406a8c3e5d937eb9350cca" prot="public" static="no" const="yes" explicit="no" inline="yes" virt="non-virtual">
        <type>size_t</type>
        <definition>size_t size</definition>
        <argsstring>() const</argsstring>
        <name>size</name>
        <qualifiedname>DisconnectedBlockTransactions::size</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="69" column="12" bodyfile="src/kernel/disconnected_transactions.h" bodystart="69" bodyend="69"/>
      </memberdef>
      <memberdef kind="function" id="class_disconnected_block_transactions_1ac8bb3912a3ce86b15842e79d0b421204" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void clear</definition>
        <argsstring>()</argsstring>
        <name>clear</name>
        <qualifiedname>DisconnectedBlockTransactions::clear</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="71" column="10" bodyfile="src/kernel/disconnected_transactions.cpp" bodystart="78" bodyend="83"/>
      </memberdef>
      <memberdef kind="function" id="class_disconnected_block_transactions_1a4c515d69876e67351a7cdbb6d261dc21" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>std::list&lt; <ref refid="primitives_2transaction_8h_1ae462b4b8f07705a82bf11cf361959b97" kindref="member">CTransactionRef</ref> &gt;</type>
        <definition>std::list&lt; CTransactionRef &gt; take</definition>
        <argsstring>()</argsstring>
        <name>take</name>
        <qualifiedname>DisconnectedBlockTransactions::take</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Clear all data structures and return the list of transactions. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/kernel/disconnected_transactions.h" line="74" column="15" bodyfile="src/kernel/disconnected_transactions.cpp" bodystart="85" bodyend="90"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para><ref refid="class_disconnected_block_transactions" kindref="compound">DisconnectedBlockTransactions</ref></para>
<para>During the reorg, it&apos;s desirable to re-add previously confirmed transactions to the mempool, so that anything not re-confirmed in the new chain is available to be mined. However, it&apos;s more efficient to wait until the reorg is complete and process all still-unconfirmed transactions at that time, since we expect most confirmed transactions to (typically) still be confirmed in the new chain, and re-accepting to the memory pool is expensive (and therefore better to not do in the middle of reorg-processing). Instead, store the disconnected transactions (in order!) as we go, remove any that are included in blocks in the new chain, and then process the remaining still-unconfirmed transactions at the end.</para>
<para>Order of queuedTx: The front of the list should be the most recently-confirmed transactions (transactions at the end of vtx of blocks closer to the tip). If memory usage grows too large, we trim from the front of the list. After trimming, transactions can be re-added to the mempool from the back of the list to the front without running into missing inputs. </para>
    </detaileddescription>
    <location file="src/kernel/disconnected_transactions.h" line="37" column="1" bodyfile="src/kernel/disconnected_transactions.h" bodystart="37" bodyend="75"/>
    <listofallmembers>
      <member refid="class_disconnected_block_transactions_1a00c7a433e2c25308bca9255e5cf4b0eb" prot="public" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>AddTransactionsFromBlock</name></member>
      <member refid="class_disconnected_block_transactions_1aaa1c21fb545475aef7568d1c2600e97c" prot="private" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>cachedInnerUsage</name></member>
      <member refid="class_disconnected_block_transactions_1ac8bb3912a3ce86b15842e79d0b421204" prot="public" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>clear</name></member>
      <member refid="class_disconnected_block_transactions_1a13817160d490deb50d7e0a8e0471b5bc" prot="public" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>DisconnectedBlockTransactions</name></member>
      <member refid="class_disconnected_block_transactions_1afcc22204abc15aeefd5d1f7396e909a4" prot="public" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>DynamicMemoryUsage</name></member>
      <member refid="class_disconnected_block_transactions_1a5fcfaf407479e9002e37705f1f1f832c" prot="private" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>iters_by_txid</name></member>
      <member refid="class_disconnected_block_transactions_1af80e6421a228ac1d0cca879360075d12" prot="private" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>LimitMemoryUsage</name></member>
      <member refid="class_disconnected_block_transactions_1adce0399f20fcec63fec02a546f3163f4" prot="private" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>m_max_mem_usage</name></member>
      <member refid="class_disconnected_block_transactions_1a436beefdf36f5b185e0d8adbaaf76886" prot="private" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>queuedTx</name></member>
      <member refid="class_disconnected_block_transactions_1a27f308ba123752de7162c1fb47613227" prot="public" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>removeForBlock</name></member>
      <member refid="class_disconnected_block_transactions_1a259cb5a711406a8c3e5d937eb9350cca" prot="public" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>size</name></member>
      <member refid="class_disconnected_block_transactions_1a4c515d69876e67351a7cdbb6d261dc21" prot="public" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>take</name></member>
      <member refid="class_disconnected_block_transactions_1a742c4de255e41e1734027eee6b5d139e" prot="private" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>TxList</name></member>
      <member refid="class_disconnected_block_transactions_1a1711b70ebe3e390d39f38cb7a99cb45e" prot="public" virt="non-virtual"><scope>DisconnectedBlockTransactions</scope><name>~DisconnectedBlockTransactions</name></member>
    </listofallmembers>
  </compounddef>
</doxygen>
