<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="en-US">
  <compounddef id="class_c_bloom_filter" kind="class" language="C++" prot="public">
    <compoundname>CBloomFilter</compoundname>
    <includes refid="bloom_8h" local="no">bloom.h</includes>
    <sectiondef kind="private-attrib">
      <memberdef kind="variable" id="class_c_bloom_filter_1ac4cb51a374c88754855185893a6a4eb0" prot="private" static="no" mutable="no">
        <type>std::vector&lt; unsigned char &gt;</type>
        <definition>std::vector&lt;unsigned char&gt; vData</definition>
        <argsstring></argsstring>
        <name>vData</name>
        <qualifiedname>CBloomFilter::vData</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="47" column="17" bodyfile="src/common/bloom.h" bodystart="47" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_c_bloom_filter_1a1348414eabf46f25bfb42f8a11c5e42c" prot="private" static="no" mutable="no">
        <type>unsigned int</type>
        <definition>unsigned int nHashFuncs</definition>
        <argsstring></argsstring>
        <name>nHashFuncs</name>
        <qualifiedname>CBloomFilter::nHashFuncs</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="48" column="18" bodyfile="src/common/bloom.h" bodystart="48" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_c_bloom_filter_1ac5192de8c78c9ab06fbf20dff75ca674" prot="private" static="no" mutable="no">
        <type>unsigned int</type>
        <definition>unsigned int nTweak</definition>
        <argsstring></argsstring>
        <name>nTweak</name>
        <qualifiedname>CBloomFilter::nTweak</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="49" column="18" bodyfile="src/common/bloom.h" bodystart="49" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="class_c_bloom_filter_1affdacecc7b5ff4dd0b1f5276fd8e73ce" prot="private" static="no" mutable="no">
        <type>unsigned char</type>
        <definition>unsigned char nFlags</definition>
        <argsstring></argsstring>
        <name>nFlags</name>
        <qualifiedname>CBloomFilter::nFlags</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="50" column="19" bodyfile="src/common/bloom.h" bodystart="50" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="private-func">
      <memberdef kind="function" id="class_c_bloom_filter_1a7c14d815be0ffc16aedbe0ceac6fdcc7" prot="private" static="no" const="yes" explicit="no" inline="yes" virt="non-virtual">
        <type>unsigned int</type>
        <definition>unsigned int Hash</definition>
        <argsstring>(unsigned int nHashNum, std::span&lt; const unsigned char &gt; vDataToHash) const</argsstring>
        <name>Hash</name>
        <qualifiedname>CBloomFilter::Hash</qualifiedname>
        <param>
          <type>unsigned int</type>
          <declname>nHashNum</declname>
        </param>
        <param>
          <type>std::span&lt; const unsigned char &gt;</type>
          <declname>vDataToHash</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="52" column="18" bodyfile="src/common/bloom.cpp" bodystart="43" bodyend="47"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="public-func">
      <memberdef kind="function" id="class_c_bloom_filter_1a000b9fe9d99838e83f63577d1678d5d8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>CBloomFilter</definition>
        <argsstring>(const unsigned int nElements, const double nFPRate, const unsigned int nTweak, unsigned char nFlagsIn)</argsstring>
        <name>CBloomFilter</name>
        <qualifiedname>CBloomFilter::CBloomFilter</qualifiedname>
        <param>
          <type>const unsigned int</type>
          <declname>nElements</declname>
        </param>
        <param>
          <type>const double</type>
          <declname>nFPRate</declname>
        </param>
        <param>
          <type>const unsigned int</type>
          <declname>nTweak</declname>
          <defname>nTweakIn</defname>
        </param>
        <param>
          <type>unsigned char</type>
          <declname>nFlagsIn</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Creates a new bloom filter which will provide the given fp rate when filled with the given number of elements Note that if the given parameters will result in a filter outside the bounds of the protocol limits, the filter created will be as close to the given parameters as possible within the protocol limits. This will apply if nFPRate is very low or nElements is unreasonably high. nTweak is a constant which is added to the seed value passed to the hash function It should generally always be a random value (and is largely only exposed for unit testing) nFlags should be one of the BLOOM_UPDATE_* enums (not _MASK)</para>
<para>The ideal size for a bloom filter with a given number of elements and false positive rate is:<itemizedlist>
<listitem><para>nElements * log(fp rate) / ln(2)^2 We ignore filter parameters which will create a bloom filter larger than the protocol limits The ideal number of hash functions is filter size * ln(2) / number of elements Again, we ignore filter parameters which will create a bloom filter with more hash functions than the protocol limits See <ulink url="https://en.wikipedia.org/wiki/Bloom_filter">https://en.wikipedia.org/wiki/Bloom_filter</ulink> for an explanation of these formulas </para>
</listitem></itemizedlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="64" column="5" bodyfile="src/common/bloom.cpp" bodystart="25" bodyend="41"/>
      </memberdef>
      <memberdef kind="function" id="class_c_bloom_filter_1aa8d373580a2542fcc34b21dd5da55208" prot="public" static="no" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type></type>
        <definition>CBloomFilter</definition>
        <argsstring>()</argsstring>
        <name>CBloomFilter</name>
        <qualifiedname>CBloomFilter::CBloomFilter</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="65" column="5" bodyfile="src/common/bloom.h" bodystart="65" bodyend="65"/>
      </memberdef>
      <memberdef kind="function" id="class_c_bloom_filter_1aa3f0843287a290781fdc506a2996b643" prot="public" static="no" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type></type>
        <definition>SERIALIZE_METHODS</definition>
        <argsstring>(CBloomFilter, obj)</argsstring>
        <name>SERIALIZE_METHODS</name>
        <qualifiedname>CBloomFilter::SERIALIZE_METHODS</qualifiedname>
        <param>
          <type><ref refid="class_c_bloom_filter" kindref="compound">CBloomFilter</ref></type>
        </param>
        <param>
          <type>obj</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="67" column="5" bodyfile="src/common/bloom.h" bodystart="67" bodyend="67"/>
      </memberdef>
      <memberdef kind="function" id="class_c_bloom_filter_1a0ffa34ea13dcfd2604c6611a1910ec94" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void insert</definition>
        <argsstring>(std::span&lt; const unsigned char &gt; vKey)</argsstring>
        <name>insert</name>
        <qualifiedname>CBloomFilter::insert</qualifiedname>
        <param>
          <type>std::span&lt; const unsigned char &gt;</type>
          <declname>vKey</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="69" column="10" bodyfile="src/common/bloom.cpp" bodystart="49" bodyend="59"/>
      </memberdef>
      <memberdef kind="function" id="class_c_bloom_filter_1a0619ff80281a65c8d6f21912e745e1f5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void insert</definition>
        <argsstring>(const COutPoint &amp;outpoint)</argsstring>
        <name>insert</name>
        <qualifiedname>CBloomFilter::insert</qualifiedname>
        <param>
          <type>const <ref refid="class_c_out_point" kindref="compound">COutPoint</ref> &amp;</type>
          <declname>outpoint</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="70" column="10" bodyfile="src/common/bloom.cpp" bodystart="61" bodyend="66"/>
      </memberdef>
      <memberdef kind="function" id="class_c_bloom_filter_1a4aa5df3f0e22486ae74c274897b2fe33" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>bool contains</definition>
        <argsstring>(std::span&lt; const unsigned char &gt; vKey) const</argsstring>
        <name>contains</name>
        <qualifiedname>CBloomFilter::contains</qualifiedname>
        <param>
          <type>std::span&lt; const unsigned char &gt;</type>
          <declname>vKey</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="72" column="10" bodyfile="src/common/bloom.cpp" bodystart="68" bodyend="80"/>
      </memberdef>
      <memberdef kind="function" id="class_c_bloom_filter_1aec6b92490797d24c0c67868334b16b09" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>bool contains</definition>
        <argsstring>(const COutPoint &amp;outpoint) const</argsstring>
        <name>contains</name>
        <qualifiedname>CBloomFilter::contains</qualifiedname>
        <param>
          <type>const <ref refid="class_c_out_point" kindref="compound">COutPoint</ref> &amp;</type>
          <declname>outpoint</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="73" column="10" bodyfile="src/common/bloom.cpp" bodystart="82" bodyend="87"/>
      </memberdef>
      <memberdef kind="function" id="class_c_bloom_filter_1af20392e863cea130e5e00d3222d40a80" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>bool IsWithinSizeConstraints</definition>
        <argsstring>() const</argsstring>
        <name>IsWithinSizeConstraints</name>
        <qualifiedname>CBloomFilter::IsWithinSizeConstraints</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>True if the size is &lt;= MAX_BLOOM_FILTER_SIZE and the number of hash functions is &lt;= MAX_HASH_FUNCS (catch a filter which was just deserialized which was too big) </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="77" column="10" bodyfile="src/common/bloom.cpp" bodystart="89" bodyend="92"/>
      </memberdef>
      <memberdef kind="function" id="class_c_bloom_filter_1ad7d892ab0badaca2d4c937b5c74513a2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>bool IsRelevantAndUpdate</definition>
        <argsstring>(const CTransaction &amp;tx)</argsstring>
        <name>IsRelevantAndUpdate</name>
        <qualifiedname>CBloomFilter::IsRelevantAndUpdate</qualifiedname>
        <param>
          <type>const <ref refid="class_c_transaction" kindref="compound">CTransaction</ref> &amp;</type>
          <declname>tx</declname>
        </param>
        <briefdescription>
<para>Also adds any outputs which match the filter to the filter (to match their spending txes). </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/common/bloom.h" line="80" column="10" bodyfile="src/common/bloom.cpp" bodystart="94" bodyend="160"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>BloomFilter is a probabilistic filter which SPV clients provide so that we can filter the transactions we send them.</para>
<para>This allows for significantly more efficient transaction and block downloads.</para>
<para>Because bloom filters are probabilistic, a SPV node can increase the false- positive rate, making us send it transactions which aren&apos;t actually its, allowing clients to trade more bandwidth for more privacy by obfuscating which keys are controlled by them. </para>
    </detaileddescription>
    <location file="src/common/bloom.h" line="44" column="1" bodyfile="src/common/bloom.h" bodystart="45" bodyend="81"/>
    <listofallmembers>
      <member refid="class_c_bloom_filter_1a000b9fe9d99838e83f63577d1678d5d8" prot="public" virt="non-virtual"><scope>CBloomFilter</scope><name>CBloomFilter</name></member>
      <member refid="class_c_bloom_filter_1aa8d373580a2542fcc34b21dd5da55208" prot="public" virt="non-virtual"><scope>CBloomFilter</scope><name>CBloomFilter</name></member>
      <member refid="class_c_bloom_filter_1a4aa5df3f0e22486ae74c274897b2fe33" prot="public" virt="non-virtual"><scope>CBloomFilter</scope><name>contains</name></member>
      <member refid="class_c_bloom_filter_1aec6b92490797d24c0c67868334b16b09" prot="public" virt="non-virtual"><scope>CBloomFilter</scope><name>contains</name></member>
      <member refid="class_c_bloom_filter_1a7c14d815be0ffc16aedbe0ceac6fdcc7" prot="private" virt="non-virtual"><scope>CBloomFilter</scope><name>Hash</name></member>
      <member refid="class_c_bloom_filter_1a0ffa34ea13dcfd2604c6611a1910ec94" prot="public" virt="non-virtual"><scope>CBloomFilter</scope><name>insert</name></member>
      <member refid="class_c_bloom_filter_1a0619ff80281a65c8d6f21912e745e1f5" prot="public" virt="non-virtual"><scope>CBloomFilter</scope><name>insert</name></member>
      <member refid="class_c_bloom_filter_1ad7d892ab0badaca2d4c937b5c74513a2" prot="public" virt="non-virtual"><scope>CBloomFilter</scope><name>IsRelevantAndUpdate</name></member>
      <member refid="class_c_bloom_filter_1af20392e863cea130e5e00d3222d40a80" prot="public" virt="non-virtual"><scope>CBloomFilter</scope><name>IsWithinSizeConstraints</name></member>
      <member refid="class_c_bloom_filter_1affdacecc7b5ff4dd0b1f5276fd8e73ce" prot="private" virt="non-virtual"><scope>CBloomFilter</scope><name>nFlags</name></member>
      <member refid="class_c_bloom_filter_1a1348414eabf46f25bfb42f8a11c5e42c" prot="private" virt="non-virtual"><scope>CBloomFilter</scope><name>nHashFuncs</name></member>
      <member refid="class_c_bloom_filter_1ac5192de8c78c9ab06fbf20dff75ca674" prot="private" virt="non-virtual"><scope>CBloomFilter</scope><name>nTweak</name></member>
      <member refid="class_c_bloom_filter_1aa3f0843287a290781fdc506a2996b643" prot="public" virt="non-virtual"><scope>CBloomFilter</scope><name>SERIALIZE_METHODS</name></member>
      <member refid="class_c_bloom_filter_1ac4cb51a374c88754855185893a6a4eb0" prot="private" virt="non-virtual"><scope>CBloomFilter</scope><name>vData</name></member>
    </listofallmembers>
  </compounddef>
</doxygen>
