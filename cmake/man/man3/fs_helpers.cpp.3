.TH "src/util/fs_helpers.cpp" 3 "Version 2.8" "bitcoind" \" -*- nroff -*-
.ad l
.nh
.SH NAME
src/util/fs_helpers.cpp
.SH SYNOPSIS
.br
.PP
\fR#include <util/fs_helpers\&.h>\fP
.br
\fR#include <bitcoin\-build\-config\&.h>\fP
.br
\fR#include <logging\&.h>\fP
.br
\fR#include <sync\&.h>\fP
.br
\fR#include <util/fs\&.h>\fP
.br
\fR#include <util/syserror\&.h>\fP
.br
\fR#include <cerrno>\fP
.br
\fR#include <fstream>\fP
.br
\fR#include <map>\fP
.br
\fR#include <memory>\fP
.br
\fR#include <optional>\fP
.br
\fR#include <string>\fP
.br
\fR#include <system_error>\fP
.br
\fR#include <utility>\fP
.br
\fR#include <fcntl\&.h>\fP
.br
\fR#include <sys/resource\&.h>\fP
.br
\fR#include <unistd\&.h>\fP
.br

.SS "Namespaces"

.in +1c
.ti -1c
.RI "namespace \fButil\fP"
.br
.in -1c
.SS "Functions"

.in +1c
.ti -1c
.RI "\fBLockResult\fP \fBLockDirectory\fP (const \fBfs::path\fP &directory, const \fBfs::path\fP &lockfile_name, bool probe_only)"
.br
.ti -1c
.RI "void \fBUnlockDirectory\fP (const \fBfs::path\fP &directory, const \fBfs::path\fP &lockfile_name)"
.br
.ti -1c
.RI "void \fBReleaseDirectoryLocks\fP ()"
.br
.ti -1c
.RI "bool \fBCheckDiskSpace\fP (const \fBfs::path\fP &dir, uint64_t additional_bytes)"
.br
.ti -1c
.RI "std::streampos \fBGetFileSize\fP (const char *path, std::streamsize max)"
.br
.ti -1c
.RI "bool \fBFileCommit\fP (FILE *file)"
.br
.ti -1c
.RI "void \fBDirectoryCommit\fP (const \fBfs::path\fP &dirname)"
.br
.ti -1c
.RI "bool \fBTruncateFile\fP (FILE *file, unsigned int length)"
.br
.ti -1c
.RI "int \fBRaiseFileDescriptorLimit\fP (int nMinFD)"
.br
.ti -1c
.RI "void \fBAllocateFileRange\fP (FILE *file, unsigned int offset, unsigned int length)"
.br
.ti -1c
.RI "bool \fBRenameOver\fP (\fBfs::path\fP src, \fBfs::path\fP dest)"
.br
.ti -1c
.RI "bool \fBTryCreateDirectories\fP (const \fBfs::path\fP &p)"
.br
.ti -1c
.RI "std::string \fBPermsToSymbolicString\fP (fs::perms p)"
.br
.ti -1c
.RI "std::optional< fs::perms > \fBInterpretPermString\fP (const std::string &s)"
.br
.in -1c
.SH "Function Documentation"
.PP 
.SS "void AllocateFileRange (FILE * file, unsigned int offset, unsigned int length)"
this function tries to make a particular range of a file allocated (corresponding to disk space) it is advisory, and the range specified in the arguments will never contain live data 
.SS "bool CheckDiskSpace (const \fBfs::path\fP & dir, uint64_t additional_bytes)"

.SS "void DirectoryCommit (const \fBfs::path\fP & dirname)"
Sync directory contents\&. This is required on some environments to ensure that newly created files are committed to disk\&. 
.SS "bool FileCommit (FILE * file)"
Ensure file contents are fully committed to disk, using a platform-specific feature analogous to fsync()\&. 
.SS "std::streampos GetFileSize (const char * path, std::streamsize max = \fRstd::numeric_limits< std::streamsize >::max()\fP)"
Get the size of a file by scanning it\&.

.PP
\fBParameters\fP
.RS 4
\fIpath\fP The file path 
.br
\fImax\fP Stop seeking beyond this limit 
.RE
.PP
\fBReturns\fP
.RS 4
The file size or max 
.RE
.PP

.SS "std::optional< fs::perms > InterpretPermString (const std::string & s)"
Interpret a custom permissions level string as fs::perms

.PP
\fBParameters\fP
.RS 4
\fIs\fP Permission level string 
.RE
.PP
\fBReturns\fP
.RS 4
Permissions as fs::perms 
.RE
.PP

.SS "std::string PermsToSymbolicString (fs::perms p)"
Convert fs::perms to symbolic string of the form 'rwxrwxrwx'

.PP
\fBParameters\fP
.RS 4
\fIp\fP the perms to be converted 
.RE
.PP
\fBReturns\fP
.RS 4
Symbolic permissions string 
.RE
.PP

.SS "int RaiseFileDescriptorLimit (int nMinFD)"
this function tries to raise the file descriptor limit to the requested number\&. It returns the actual file descriptor limit (which may be more or less than nMinFD) 
.SS "void ReleaseDirectoryLocks ()"
Release all directory locks\&. This is used for unit testing only, at runtime the global destructor will take care of the locks\&. 
.SS "bool RenameOver (\fBfs::path\fP src, \fBfs::path\fP dest)\fR [nodiscard]\fP"
Rename src to dest\&. 
.PP
\fBReturns\fP
.RS 4
true if the rename was successful\&. 
.RE
.PP

.SS "bool TruncateFile (FILE * file, unsigned int length)"

.SS "bool TryCreateDirectories (const \fBfs::path\fP & p)"
Ignores exceptions thrown by create_directories if the requested directory exists\&. Specifically handles case where path p exists, but it wasn't possible for the user to write to the parent directory\&. 
.SS "void UnlockDirectory (const \fBfs::path\fP & directory, const \fBfs::path\fP & lockfile_name)"

.SH "Author"
.PP 
Generated automatically by Doxygen for bitcoind from the source code\&.
