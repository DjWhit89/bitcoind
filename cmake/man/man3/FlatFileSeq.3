.TH "FlatFileSeq" 3 "Version 2.8" "bitcoind" \" -*- nroff -*-
.ad l
.nh
.SH NAME
FlatFileSeq
.SH SYNOPSIS
.br
.PP
.PP
\fR#include <flatfile\&.h>\fP
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBFlatFileSeq\fP (\fBfs::path\fP dir, const char *\fBprefix\fP, size_t chunk_size)"
.br
.ti -1c
.RI "\fBfs::path\fP \fBFileName\fP (const \fBFlatFilePos\fP &pos) const"
.br
.ti -1c
.RI "FILE * \fBOpen\fP (const \fBFlatFilePos\fP &pos, bool read_only=false) const"
.br
.ti -1c
.RI "size_t \fBAllocate\fP (const \fBFlatFilePos\fP &pos, size_t add_size, bool &out_of_space) const"
.br
.ti -1c
.RI "bool \fBFlush\fP (const \fBFlatFilePos\fP &pos, bool finalize=false) const"
.br
.in -1c
.SH "Detailed Description"
.PP 
\fBFlatFileSeq\fP represents a sequence of numbered files storing raw data\&. This class facilitates access to and efficient management of these files\&. 
.SH "Constructor & Destructor Documentation"
.PP 
.SS "\fBFlatFileSeq\fP (\fBfs::path\fP dir, const char * prefix, size_t chunk_size)"
Constructor

.PP
\fBParameters\fP
.RS 4
\fIdir\fP The base directory that all files live in\&. 
.br
\fIprefix\fP A short prefix given to all file names\&. 
.br
\fIchunk_size\fP Disk space is pre-allocated in multiples of this amount\&. 
.RE
.PP

.SH "Member Function Documentation"
.PP 
.SS "size_t Allocate (const \fBFlatFilePos\fP & pos, size_t add_size, bool & out_of_space) const"
Allocate additional space in a file after the given starting position\&. The amount allocated will be the minimum multiple of the sequence chunk size greater than add_size\&.

.PP
\fBParameters\fP
.RS 4
\fIpos\fP The starting position that bytes will be allocated after\&. 
.br
\fIadd_size\fP The minimum number of bytes to be allocated\&. 
.br
\fIout_of_space\fP Whether the allocation failed due to insufficient disk space\&. 
.RE
.PP
\fBReturns\fP
.RS 4
The number of bytes successfully allocated\&. 
.RE
.PP

.SS "\fBfs::path\fP FileName (const \fBFlatFilePos\fP & pos) const"
Get the name of the file at the given position\&. 
.SS "bool Flush (const \fBFlatFilePos\fP & pos, bool finalize = \fRfalse\fP) const"
Commit a file to disk, and optionally truncate off extra pre-allocated bytes if final\&.

.PP
\fBParameters\fP
.RS 4
\fIpos\fP The first unwritten position in the file to be flushed\&. 
.br
\fIfinalize\fP True if no more data will be written to this file\&. 
.RE
.PP
\fBReturns\fP
.RS 4
true on success, false on failure\&. 
.RE
.PP

.SS "FILE * Open (const \fBFlatFilePos\fP & pos, bool read_only = \fRfalse\fP) const"
Open a handle to the file at the given position\&. 

.SH "Author"
.PP 
Generated automatically by Doxygen for bitcoind from the source code\&.
