.TH "src/policy/packages.cpp" 3 "Version 2.8" "bitcoind" \" -*- nroff -*-
.ad l
.nh
.SH NAME
src/policy/packages.cpp
.SH SYNOPSIS
.br
.PP
\fR#include <policy/packages\&.h>\fP
.br
\fR#include <policy/policy\&.h>\fP
.br
\fR#include <primitives/transaction\&.h>\fP
.br
\fR#include <uint256\&.h>\fP
.br
\fR#include <util/check\&.h>\fP
.br
\fR#include <algorithm>\fP
.br
\fR#include <cassert>\fP
.br
\fR#include <iterator>\fP
.br
\fR#include <memory>\fP
.br
\fR#include <numeric>\fP
.br

.SS "Functions"

.in +1c
.ti -1c
.RI "bool \fBIsTopoSortedPackage\fP (const \fBPackage\fP &txns, std::unordered_set< \fBTxid\fP, \fBSaltedTxidHasher\fP > &later_txids)"
.br
.ti -1c
.RI "bool \fBIsTopoSortedPackage\fP (const \fBPackage\fP &txns)"
.br
.ti -1c
.RI "bool \fBIsConsistentPackage\fP (const \fBPackage\fP &txns)"
.br
.ti -1c
.RI "bool \fBIsWellFormedPackage\fP (const \fBPackage\fP &txns, \fBPackageValidationState\fP &state, bool require_sorted)"
.br
.ti -1c
.RI "bool \fBIsChildWithParents\fP (const \fBPackage\fP &package)"
.br
.ti -1c
.RI "bool \fBIsChildWithParentsTree\fP (const \fBPackage\fP &package)"
.br
.ti -1c
.RI "\fBuint256\fP \fBGetPackageHash\fP (const std::vector< \fBCTransactionRef\fP > &transactions)"
.br
.in -1c
.SH "Function Documentation"
.PP 
.SS "\fBuint256\fP GetPackageHash (const std::vector< \fBCTransactionRef\fP > & transactions)"
Get the hash of the concatenated wtxids of transactions, with wtxids treated as a little-endian numbers and sorted in ascending numeric order\&. 
.SS "bool IsChildWithParents (const \fBPackage\fP & package)"
Context-free check that a package is exactly one child and its parents; not all parents need to be present, but the package must not contain any transactions that are not the child's parents\&. It is expected to be sorted, which means the last transaction must be the child\&. 
.SS "bool IsChildWithParentsTree (const \fBPackage\fP & package)"
Context-free check that a package \fBIsChildWithParents()\fP and none of the parents depend on each other (the package is a "tree")\&. 
.SS "bool IsConsistentPackage (const \fBPackage\fP & txns)"
Checks that these transactions don't conflict, i\&.e\&., spend the same prevout\&. This includes checking that there are no duplicate transactions\&. Since these checks require looking at the inputs of a transaction, returns false immediately if any transactions have empty vin\&.

.PP
Does not check consistency of a transaction with oneself; does not check if a transaction spends the same prevout multiple times (see bad-txns-inputs-duplicate in \fBCheckTransaction()\fP)\&.

.PP
\fBReturns\fP
.RS 4
true if there are no conflicts\&. False if any two transactions spend the same prevout\&. 
.RE
.PP

.SS "bool IsTopoSortedPackage (const \fBPackage\fP & txns)"
If any direct dependencies exist between transactions (i\&.e\&. a child spending the output of a parent), checks that all parents appear somewhere in the list before their respective children\&. No other ordering is enforced\&. This function cannot detect indirect dependencies (e\&.g\&. a transaction's grandparent if its parent is not present)\&. 
.PP
\fBReturns\fP
.RS 4
true if sorted\&. False if any tx spends the output of a tx that appears later in txns\&. 
.RE
.PP

.SS "bool IsTopoSortedPackage (const \fBPackage\fP & txns, std::unordered_set< \fBTxid\fP, \fBSaltedTxidHasher\fP > & later_txids)"
IsTopoSortedPackage where a set of txids has been pre-populated\&. The set is assumed to be correct and is mutated within this function (even if return value is false)\&. 
.SS "bool IsWellFormedPackage (const \fBPackage\fP & txns, \fBPackageValidationState\fP & state, bool require_sorted)"
Context-free package policy checks:
.IP "1." 4
The number of transactions cannot exceed MAX_PACKAGE_COUNT\&.
.IP "2." 4
The total weight cannot exceed MAX_PACKAGE_WEIGHT\&.
.IP "3." 4
If any dependencies exist between transactions, parents must appear before children\&.
.IP "4." 4
Transactions cannot conflict, i\&.e\&., spend the same inputs\&. 
.PP

.SH "Author"
.PP 
Generated automatically by Doxygen for bitcoind from the source code\&.
