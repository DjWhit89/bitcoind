.TH "ExternalSignerScriptPubKeyMan" 3 "Version 2.8" "bitcoind" \" -*- nroff -*-
.ad l
.nh
.SH NAME
ExternalSignerScriptPubKeyMan
.SH SYNOPSIS
.br
.PP
.PP
\fR#include <external_signer_scriptpubkeyman\&.h>\fP
.PP
Inherits \fBDescriptorScriptPubKeyMan\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBExternalSignerScriptPubKeyMan\fP (\fBWalletStorage\fP &storage, \fBWalletDescriptor\fP &descriptor, int64_t keypool_size)"
.br
.ti -1c
.RI "\fBExternalSignerScriptPubKeyMan\fP (\fBWalletStorage\fP &storage, int64_t keypool_size)"
.br
.ti -1c
.RI "bool \fBSetupDescriptor\fP (\fBWalletBatch\fP &batch, std::unique_ptr< \fBDescriptor\fP >desc)"
.br
.ti -1c
.RI "\fButil::Result\fP< void > \fBDisplayAddress\fP (const \fBCTxDestination\fP &dest, const \fBExternalSigner\fP &\fBsigner\fP) const"
.br
.ti -1c
.RI "std::optional< \fBcommon::PSBTError\fP > \fBFillPSBT\fP (\fBPartiallySignedTransaction\fP &psbt, const \fBPrecomputedTransactionData\fP &txdata, std::optional< int > sighash_type=std::nullopt, bool sign=true, bool bip32derivs=false, int *n_signed=nullptr, bool finalize=true) const override"
.br
.in -1c

Public Member Functions inherited from \fBDescriptorScriptPubKeyMan\fP
.in +1c
.ti -1c
.RI "\fBDescriptorScriptPubKeyMan\fP (\fBWalletStorage\fP &storage, \fBWalletDescriptor\fP &descriptor, int64_t keypool_size)"
.br
.ti -1c
.RI "\fBDescriptorScriptPubKeyMan\fP (\fBWalletStorage\fP &storage, int64_t keypool_size)"
.br
.ti -1c
.RI "\fButil::Result\fP< \fBCTxDestination\fP > \fBGetNewDestination\fP (const \fBOutputType\fP type) override"
.br
.ti -1c
.RI "bool \fBIsMine\fP (const \fBCScript\fP &\fBscript\fP) const override"
.br
.ti -1c
.RI "bool \fBCheckDecryptionKey\fP (const \fBCKeyingMaterial\fP &master_key) override"
.br
.RI "Check that the given decryption key is valid for this \fBScriptPubKeyMan\fP, i\&.e\&. it decrypts all of the keys handled by it\&. "
.ti -1c
.RI "bool \fBEncrypt\fP (const \fBCKeyingMaterial\fP &master_key, \fBWalletBatch\fP *batch) override"
.br
.ti -1c
.RI "\fButil::Result\fP< \fBCTxDestination\fP > \fBGetReservedDestination\fP (const \fBOutputType\fP type, bool internal, int64_t &index) override"
.br
.ti -1c
.RI "void \fBReturnDestination\fP (int64_t index, bool internal, const \fBCTxDestination\fP &addr) override"
.br
.ti -1c
.RI "bool \fBTopUp\fP (unsigned int size=0) override"
.br
.ti -1c
.RI "std::vector< \fBWalletDestination\fP > \fBMarkUnusedAddresses\fP (const \fBCScript\fP &\fBscript\fP) override"
.br
.ti -1c
.RI "bool \fBIsHDEnabled\fP () const override"
.br
.ti -1c
.RI "bool \fBSetupDescriptorGeneration\fP (\fBWalletBatch\fP &batch, const \fBCExtKey\fP &master_key, \fBOutputType\fP addr_type, bool internal)"
.br
.RI "Setup descriptors based on the given CExtkey\&. "
.ti -1c
.RI "bool \fBHavePrivateKeys\fP () const override"
.br
.ti -1c
.RI "bool \fBHasPrivKey\fP (const \fBCKeyID\fP &keyid) const \fBEXCLUSIVE_LOCKS_REQUIRED\fP(\fBcs_desc_man\fP)"
.br
.ti -1c
.RI "std::optional< \fBCKey\fP > \fBGetKey\fP (const \fBCKeyID\fP &keyid) const \fBEXCLUSIVE_LOCKS_REQUIRED\fP(\fBcs_desc_man\fP)"
.br
.RI "Retrieve the particular key if it is available\&. Returns nullopt if the key is not in the wallet, or if the wallet is locked\&. "
.ti -1c
.RI "bool \fBHaveCryptedKeys\fP () const override"
.br
.ti -1c
.RI "unsigned int \fBGetKeyPoolSize\fP () const override"
.br
.ti -1c
.RI "int64_t \fBGetTimeFirstKey\fP () const override"
.br
.ti -1c
.RI "std::unique_ptr< \fBCKeyMetadata\fP > \fBGetMetadata\fP (const \fBCTxDestination\fP &dest) const override"
.br
.ti -1c
.RI "bool \fBCanGetAddresses\fP (bool internal=false) const override"
.br
.ti -1c
.RI "std::unique_ptr< \fBSigningProvider\fP > \fBGetSolvingProvider\fP (const \fBCScript\fP &\fBscript\fP) const override"
.br
.ti -1c
.RI "bool \fBCanProvide\fP (const \fBCScript\fP &\fBscript\fP, \fBSignatureData\fP &sigdata) override"
.br
.ti -1c
.RI "std::unique_ptr< \fBFlatSigningProvider\fP > \fBGetSigningProvider\fP (const \fBCPubKey\fP &pubkey) const"
.br
.ti -1c
.RI "bool \fBSignTransaction\fP (\fBCMutableTransaction\fP &tx, const std::map< \fBCOutPoint\fP, \fBCoin\fP > &coins, int sighash, std::map< int, \fBbilingual_str\fP > &input_errors) const override"
.br
.ti -1c
.RI "\fBSigningResult\fP \fBSignMessage\fP (const std::string &message, const \fBPKHash\fP &pkhash, std::string &str_sig) const override"
.br
.ti -1c
.RI "\fBuint256\fP \fBGetID\fP () const override"
.br
.ti -1c
.RI "void \fBSetCache\fP (const \fBDescriptorCache\fP &cache)"
.br
.ti -1c
.RI "bool \fBAddKey\fP (const \fBCKeyID\fP &key_id, const \fBCKey\fP &key)"
.br
.ti -1c
.RI "bool \fBAddCryptedKey\fP (const \fBCKeyID\fP &key_id, const \fBCPubKey\fP &pubkey, const std::vector< unsigned char > &crypted_key)"
.br
.ti -1c
.RI "bool \fBHasWalletDescriptor\fP (const \fBWalletDescriptor\fP &desc) const"
.br
.ti -1c
.RI "\fButil::Result\fP< void > \fBUpdateWalletDescriptor\fP (\fBWalletDescriptor\fP &descriptor)"
.br
.ti -1c
.RI "bool \fBCanUpdateToWalletDescriptor\fP (const \fBWalletDescriptor\fP &descriptor, std::string &error)"
.br
.ti -1c
.RI "void \fBAddDescriptorKey\fP (const \fBCKey\fP &key, const \fBCPubKey\fP &pubkey)"
.br
.ti -1c
.RI "void \fBWriteDescriptor\fP ()"
.br
.ti -1c
.RI "\fBWalletDescriptor\fP \fBGetWalletDescriptor\fP () const \fBEXCLUSIVE_LOCKS_REQUIRED\fP(\fBcs_desc_man\fP)"
.br
.ti -1c
.RI "std::unordered_set< \fBCScript\fP, \fBSaltedSipHasher\fP > \fBGetScriptPubKeys\fP () const override"
.br
.ti -1c
.RI "std::unordered_set< \fBCScript\fP, \fBSaltedSipHasher\fP > \fBGetScriptPubKeys\fP (int32_t minimum_index) const"
.br
.ti -1c
.RI "int32_t \fBGetEndRange\fP () const"
.br
.ti -1c
.RI "bool \fBGetDescriptorString\fP (std::string &out, const bool priv) const"
.br
.ti -1c
.RI "void \fBUpgradeDescriptorCache\fP ()"
.br
.in -1c

Public Member Functions inherited from \fBScriptPubKeyMan\fP
.in +1c
.ti -1c
.RI "\fBScriptPubKeyMan\fP (\fBWalletStorage\fP &storage)"
.br
.ti -1c
.RI "virtual \fB~ScriptPubKeyMan\fP ()=default"
.br
.ti -1c
.RI "virtual void \fBKeepDestination\fP (int64_t index, const \fBOutputType\fP &type)"
.br
.ti -1c
.RI "virtual void \fBRewriteDB\fP ()"
.br
.RI "The action to do when the \fBDB\fP needs rewrite\&. "
.ti -1c
.RI "template<typename\&.\&.\&. Params> void \fBWalletLogPrintf\fP (\fButil::ConstevalFormatString\fP< sizeof\&.\&.\&.(\fBParams\fP)> wallet_fmt, const \fBParams\fP &\&.\&.\&. params) const"
.br
.in -1c
.SS "Static Public Member Functions"

.in +1c
.ti -1c
.RI "static \fButil::Result\fP< \fBExternalSigner\fP > \fBGetExternalSigner\fP ()"
.br
.in -1c
.SS "Additional Inherited Members"


Data Fields inherited from \fBDescriptorScriptPubKeyMan\fP
.in +1c
.ti -1c
.RI "\fBRecursiveMutex\fP \fBcs_desc_man\fP"
.br
.in -1c

Data Fields inherited from \fBScriptPubKeyMan\fP
.in +1c
.ti -1c
.RI "boost::signals2::signal< void()> \fBNotifyCanGetAddressesChanged\fP"
.br
.ti -1c
.RI "boost::signals2::signal< void(const \fBScriptPubKeyMan\fP *spkm, int64_t new_birth_time)> \fBNotifyFirstKeyTimeChanged\fP"
.br
.in -1c

Protected Member Functions inherited from \fBDescriptorScriptPubKeyMan\fP
.in +1c
.ti -1c
.RI "\fBWalletDescriptor\fP m_wallet_descriptor \fBGUARDED_BY\fP (\fBcs_desc_man\fP)"
.br
.ti -1c
.RI "bool \fBTopUpWithDB\fP (\fBWalletBatch\fP &batch, unsigned int size=0)"
.br
.RI "Same as 'TopUp' but designed for use within a batch transaction context\&. "
.in -1c

Protected Attributes inherited from \fBScriptPubKeyMan\fP
.in +1c
.ti -1c
.RI "\fBWalletStorage\fP & \fBm_storage\fP"
.br
.in -1c
.SH "Constructor & Destructor Documentation"
.PP 
.SS "ExternalSignerScriptPubKeyMan (\fBWalletStorage\fP & storage, \fBWalletDescriptor\fP & descriptor, int64_t keypool_size)\fR [inline]\fP"

.SS "ExternalSignerScriptPubKeyMan (\fBWalletStorage\fP & storage, int64_t keypool_size)\fR [inline]\fP"

.SH "Member Function Documentation"
.PP 
.SS "\fButil::Result\fP< void > DisplayAddress (const \fBCTxDestination\fP & dest, const \fBExternalSigner\fP & signer) const"
Display address on the device and verify that the returned value matches\&. 
.PP
\fBReturns\fP
.RS 4
nothing or an error message 
.RE
.PP

.SS "std::optional< \fBPSBTError\fP > FillPSBT (\fBPartiallySignedTransaction\fP & psbt, const \fBPrecomputedTransactionData\fP & txdata, std::optional< int > sighash_type = \fRstd::nullopt\fP, bool sign = \fRtrue\fP, bool bip32derivs = \fRfalse\fP, int * n_signed = \fRnullptr\fP, bool finalize = \fRtrue\fP) const\fR [override]\fP, \fR [virtual]\fP"
Adds script and derivation path information to a PSBT, and optionally signs it\&. 
.PP
Reimplemented from \fBDescriptorScriptPubKeyMan\fP\&.
.SS "\fButil::Result\fP< \fBExternalSigner\fP > GetExternalSigner ()\fR [static]\fP"

.SS "bool SetupDescriptor (\fBWalletBatch\fP & batch, std::unique_ptr< \fBDescriptor\fP > desc)"
Provide a descriptor at setup time Returns false if already setup or setup fails, true if setup is successful 

.SH "Author"
.PP 
Generated automatically by Doxygen for bitcoind from the source code\&.
