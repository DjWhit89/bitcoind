.TH "Epoch" 3 "Version 2.8" "bitcoind" \" -*- nroff -*-
.ad l
.nh
.SH NAME
Epoch
.SH SYNOPSIS
.br
.PP
.PP
\fR#include <epochguard\&.h>\fP
.SS "Data Structures"

.in +1c
.ti -1c
.RI "class \fBMarker\fP"
.br
.ti -1c
.RI "class \fBGuard\fP"
.br
.in -1c
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBEpoch\fP ()=default"
.br
.ti -1c
.RI "\fBEpoch\fP (const \fBEpoch\fP &)=delete"
.br
.ti -1c
.RI "\fBEpoch\fP & \fBoperator=\fP (const \fBEpoch\fP &)=delete"
.br
.ti -1c
.RI "\fBEpoch\fP (\fBEpoch\fP &&)=delete"
.br
.ti -1c
.RI "\fBEpoch\fP & \fBoperator=\fP (\fBEpoch\fP &&)=delete"
.br
.ti -1c
.RI "\fB~Epoch\fP ()=default"
.br
.ti -1c
.RI "bool \fBguarded\fP () const"
.br
.ti -1c
.RI "bool \fBvisited\fP (\fBMarker\fP &marker) const \fBEXCLUSIVE_LOCKS_REQUIRED\fP(*this)"
.br
.in -1c
.SH "Detailed Description"
.PP 
\fBEpoch\fP: RAII-style guard for using epoch-based graph traversal algorithms\&. When walking ancestors or descendants, we generally want to avoid visiting the same transactions twice\&. Some traversal algorithms use std::set (or setEntries) to deduplicate the transaction we visit\&. However, use of std::set is algorithmically undesirable because it both adds an asymptotic factor of O(log n) to traversals cost and triggers O(n) more dynamic memory allocations\&. In many algorithms we can replace std::set with an internal mempool counter to track the time (or, "epoch") that we began a traversal, and check + update a per-transaction epoch for each transaction we look at to determine if that transaction has not yet been visited during the current traversal's epoch\&. Algorithms using std::set can be replaced on a one by one basis\&. Both techniques are not fundamentally incompatible across the codebase\&. Generally speaking, however, the remaining use of std::set for mempool traversal should be viewed as a TODO for replacement with an epoch based traversal, rather than a preference for std::set over epochs in that algorithm\&. 
.SH "Constructor & Destructor Documentation"
.PP 
.SS "\fBEpoch\fP ()\fR [default]\fP"

.SS "\fBEpoch\fP (const \fBEpoch\fP & )\fR [delete]\fP"

.SS "\fBEpoch\fP (\fBEpoch\fP && )\fR [delete]\fP"

.SS "~\fBEpoch\fP ()\fR [default]\fP"

.SH "Member Function Documentation"
.PP 
.SS "bool guarded () const\fR [inline]\fP"

.SS "\fBEpoch\fP & operator= (const \fBEpoch\fP & )\fR [delete]\fP"

.SS "\fBEpoch\fP & operator= (\fBEpoch\fP && )\fR [delete]\fP"

.SS "bool visited (\fBMarker\fP & marker) const\fR [inline]\fP"


.SH "Author"
.PP 
Generated automatically by Doxygen for bitcoind from the source code\&.
