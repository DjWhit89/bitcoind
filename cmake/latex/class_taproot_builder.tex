\doxysection{Taproot\+Builder Class Reference}
\label{class_taproot_builder}\index{TaprootBuilder@{TaprootBuilder}}


{\ttfamily \#include $<$signingprovider.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Taproot\+Builder} \& \textbf{ Add} (int depth, std\+::span$<$ const unsigned char $>$ \textbf{ script}, int leaf\+\_\+version, bool track=true)
\item 
\textbf{ Taproot\+Builder} \& \textbf{ Add\+Omitted} (int depth, const \textbf{ uint256} \&hash)
\item 
\textbf{ Taproot\+Builder} \& \textbf{ Finalize} (const \textbf{ XOnly\+Pub\+Key} \&internal\+\_\+key)
\item 
bool \textbf{ Is\+Valid} () const
\item 
bool \textbf{ Is\+Complete} () const
\item 
\textbf{ Witness\+V1\+Taproot} \textbf{ Get\+Output} ()
\item 
\textbf{ Taproot\+Spend\+Data} \textbf{ Get\+Spend\+Data} () const
\item 
std\+::vector$<$ std\+::tuple$<$ uint8\+\_\+t, uint8\+\_\+t, std\+::vector$<$ unsigned char $>$ $>$ $>$ \textbf{ Get\+Tree\+Tuples} () const
\item 
bool \textbf{ Has\+Scripts} () const
\item 
bool \textbf{ operator==} (const \textbf{ Taproot\+Builder} \&other) const
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static bool \textbf{ Valid\+Depths} (const std\+::vector$<$ int $>$ \&depths)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Utility class to construct Taproot outputs from internal key and script tree. 

\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{TaprootBuilder@{TaprootBuilder}!Add@{Add}}
\index{Add@{Add}!TaprootBuilder@{TaprootBuilder}}
\doxysubsubsection{Add()}
{\footnotesize\ttfamily \label{class_taproot_builder_ab6a1b07f2b850eb59b5ac8c44bd13ed2} 
\textbf{ Taproot\+Builder} \& Add (\begin{DoxyParamCaption}\item[{int}]{depth}{, }\item[{std\+::span$<$ const unsigned char $>$}]{script}{, }\item[{int}]{leaf\+\_\+version}{, }\item[{bool}]{track}{ = {\ttfamily true}}\end{DoxyParamCaption})}

Add a new script at a certain depth in the tree. \doxyref{Add()}{p.}{class_taproot_builder_ab6a1b07f2b850eb59b5ac8c44bd13ed2} operations must be called in depth-\/first traversal order of binary tree. If track is true, it will be included in the \doxyref{Get\+Spend\+Data()}{p.}{class_taproot_builder_a699c66a0ba28809a5e92eeaff8ff60e6} output. \index{TaprootBuilder@{TaprootBuilder}!AddOmitted@{AddOmitted}}
\index{AddOmitted@{AddOmitted}!TaprootBuilder@{TaprootBuilder}}
\doxysubsubsection{AddOmitted()}
{\footnotesize\ttfamily \label{class_taproot_builder_a57d2c764bb6ff03e3a569e06125b55d0} 
\textbf{ Taproot\+Builder} \& Add\+Omitted (\begin{DoxyParamCaption}\item[{int}]{depth}{, }\item[{const \textbf{ uint256} \&}]{hash}{}\end{DoxyParamCaption})}

Like \doxyref{Add()}{p.}{class_taproot_builder_ab6a1b07f2b850eb59b5ac8c44bd13ed2}, but for a Merkle node with a given hash to the tree. \index{TaprootBuilder@{TaprootBuilder}!Finalize@{Finalize}}
\index{Finalize@{Finalize}!TaprootBuilder@{TaprootBuilder}}
\doxysubsubsection{Finalize()}
{\footnotesize\ttfamily \label{class_taproot_builder_ab8b83511ea72001bc26cbb24176e08cd} 
\textbf{ Taproot\+Builder} \& Finalize (\begin{DoxyParamCaption}\item[{const \textbf{ XOnly\+Pub\+Key} \&}]{internal\+\_\+key}{}\end{DoxyParamCaption})}

Finalize the construction. Can only be called when \doxyref{Is\+Complete()}{p.}{class_taproot_builder_a2dcfd43994bb6ea7a391ced3f53b71df} is true. internal\+\_\+key.\+Is\+Fully\+Valid() must be true. \index{TaprootBuilder@{TaprootBuilder}!GetOutput@{GetOutput}}
\index{GetOutput@{GetOutput}!TaprootBuilder@{TaprootBuilder}}
\doxysubsubsection{GetOutput()}
{\footnotesize\ttfamily \label{class_taproot_builder_a43d5b75ae85829eaf0aab5747e42f7f1} 
\textbf{ Witness\+V1\+Taproot} Get\+Output (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Compute script\+Pub\+Key (after \doxyref{Finalize()}{p.}{class_taproot_builder_ab8b83511ea72001bc26cbb24176e08cd}). \index{TaprootBuilder@{TaprootBuilder}!GetSpendData@{GetSpendData}}
\index{GetSpendData@{GetSpendData}!TaprootBuilder@{TaprootBuilder}}
\doxysubsubsection{GetSpendData()}
{\footnotesize\ttfamily \label{class_taproot_builder_a699c66a0ba28809a5e92eeaff8ff60e6} 
\textbf{ Taproot\+Spend\+Data} Get\+Spend\+Data (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Compute spending data (after \doxyref{Finalize()}{p.}{class_taproot_builder_ab8b83511ea72001bc26cbb24176e08cd}). \index{TaprootBuilder@{TaprootBuilder}!GetTreeTuples@{GetTreeTuples}}
\index{GetTreeTuples@{GetTreeTuples}!TaprootBuilder@{TaprootBuilder}}
\doxysubsubsection{GetTreeTuples()}
{\footnotesize\ttfamily \label{class_taproot_builder_a86b77ebebc24f51df0783a7db10d522b} 
std\+::vector$<$ std\+::tuple$<$ uint8\+\_\+t, uint8\+\_\+t, std\+::vector$<$ unsigned char $>$ $>$ $>$ Get\+Tree\+Tuples (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Returns a vector of tuples representing the depth, leaf version, and script \index{TaprootBuilder@{TaprootBuilder}!HasScripts@{HasScripts}}
\index{HasScripts@{HasScripts}!TaprootBuilder@{TaprootBuilder}}
\doxysubsubsection{HasScripts()}
{\footnotesize\ttfamily \label{class_taproot_builder_ae5ca94077fef6c5e5b9c54fe55dfa1a9} 
bool Has\+Scripts (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Returns true if there are any tapscripts \index{TaprootBuilder@{TaprootBuilder}!IsComplete@{IsComplete}}
\index{IsComplete@{IsComplete}!TaprootBuilder@{TaprootBuilder}}
\doxysubsubsection{IsComplete()}
{\footnotesize\ttfamily \label{class_taproot_builder_a2dcfd43994bb6ea7a391ced3f53b71df} 
bool Is\+Complete (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Return whether there were either no leaves, or the leaves form a Huffman tree. \index{TaprootBuilder@{TaprootBuilder}!IsValid@{IsValid}}
\index{IsValid@{IsValid}!TaprootBuilder@{TaprootBuilder}}
\doxysubsubsection{IsValid()}
{\footnotesize\ttfamily \label{class_taproot_builder_ac532c4b500b1a85ea22217f2c65a70ed} 
bool Is\+Valid (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Return true if so far all input was valid. \index{TaprootBuilder@{TaprootBuilder}!operator==@{operator==}}
\index{operator==@{operator==}!TaprootBuilder@{TaprootBuilder}}
\doxysubsubsection{operator==()}
{\footnotesize\ttfamily \label{class_taproot_builder_a21c159ff5921d7724e65983a5ccda35e} 
bool operator== (\begin{DoxyParamCaption}\item[{const \textbf{ Taproot\+Builder} \&}]{other}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\index{TaprootBuilder@{TaprootBuilder}!ValidDepths@{ValidDepths}}
\index{ValidDepths@{ValidDepths}!TaprootBuilder@{TaprootBuilder}}
\doxysubsubsection{ValidDepths()}
{\footnotesize\ttfamily \label{class_taproot_builder_afccc56922add6cfd21f81df748e2288c} 
bool Valid\+Depths (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ int $>$ \&}]{depths}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Check if a list of depths is legal (will lead to \doxyref{Is\+Complete()}{p.}{class_taproot_builder_a2dcfd43994bb6ea7a391ced3f53b71df}). 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/script/\textbf{ signingprovider.\+h}\item 
src/script/\textbf{ signingprovider.\+cpp}\end{DoxyCompactItemize}
