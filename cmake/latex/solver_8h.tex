\doxysection{src/script/solver.h File Reference}
\label{solver_8h}\index{src/script/solver.h@{src/script/solver.h}}
{\ttfamily \#include $<$attributes.\+h$>$}\newline
{\ttfamily \#include $<$script/script.\+h$>$}\newline
{\ttfamily \#include $<$span.\+h$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$optional$>$}\newline
{\ttfamily \#include $<$utility$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum class \textbf{ Txout\+Type} \{ \newline
\textbf{ NONSTANDARD}
, \textbf{ ANCHOR}
, \textbf{ PUBKEY}
, \textbf{ PUBKEYHASH}
, \newline
\textbf{ SCRIPTHASH}
, \textbf{ MULTISIG}
, \textbf{ NULL\+\_\+\+DATA}
, \textbf{ WITNESS\+\_\+\+V0\+\_\+\+SCRIPTHASH}
, \newline
\textbf{ WITNESS\+\_\+\+V0\+\_\+\+KEYHASH}
, \textbf{ WITNESS\+\_\+\+V1\+\_\+\+TAPROOT}
, \textbf{ WITNESS\+\_\+\+UNKNOWN}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
std\+::string \textbf{ Get\+Txn\+Output\+Type} (\textbf{ Txout\+Type} t)
\item 
constexpr bool \textbf{ Is\+Pushdata\+Op} (\textbf{ opcodetype} opcode)
\item 
\textbf{ Txout\+Type} \textbf{ Solver} (const \textbf{ CScript} \&script\+Pub\+Key, std\+::vector$<$ std\+::vector$<$ unsigned char $>$ $>$ \&v\+Solutions\+Ret)
\item 
\textbf{ CScript} \textbf{ Get\+Script\+For\+Raw\+Pub\+Key} (const \textbf{ CPub\+Key} \&pubkey)
\item 
std\+::optional$<$ std\+::pair$<$ int, std\+::vector$<$ std\+::span$<$ const unsigned char $>$ $>$ $>$ $>$ \textbf{ Match\+MultiA} (const \textbf{ CScript} \&\textbf{ script} \textbf{ LIFETIMEBOUND})
\item 
\textbf{ CScript} \textbf{ Get\+Script\+For\+Multisig} (int n\+Required, const std\+::vector$<$ \textbf{ CPub\+Key} $>$ \&keys)
\end{DoxyCompactItemize}


\label{doc-enum-members}
\doxysubsection{Enumeration Type Documentation}
\index{solver.h@{solver.h}!TxoutType@{TxoutType}}
\index{TxoutType@{TxoutType}!solver.h@{solver.h}}
\doxysubsubsection{TxoutType}
{\footnotesize\ttfamily \label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8f} 
enum class \textbf{ Txout\+Type}\hspace{0.3cm}{\ttfamily [strong]}}

\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{NONSTANDARD@{NONSTANDARD}!solver.h@{solver.h}}\index{solver.h@{solver.h}!NONSTANDARD@{NONSTANDARD}}}\label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8fab4c03417b9e4221f084c33e152c3535f} 
NONSTANDARD&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{ANCHOR@{ANCHOR}!solver.h@{solver.h}}\index{solver.h@{solver.h}!ANCHOR@{ANCHOR}}}\label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8fa1d0d6d35c52e907b5e0af4a7f5a81a9f} 
ANCHOR&anyone can spend script \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{PUBKEY@{PUBKEY}!solver.h@{solver.h}}\index{solver.h@{solver.h}!PUBKEY@{PUBKEY}}}\label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8faef44d07ca186ab3d0e8f7b211aaa9dab} 
PUBKEY&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{PUBKEYHASH@{PUBKEYHASH}!solver.h@{solver.h}}\index{solver.h@{solver.h}!PUBKEYHASH@{PUBKEYHASH}}}\label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8fa6f659c5c6a9ef703f9bf764627c38a98} 
PUBKEYHASH&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{SCRIPTHASH@{SCRIPTHASH}!solver.h@{solver.h}}\index{solver.h@{solver.h}!SCRIPTHASH@{SCRIPTHASH}}}\label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8fa27f02ca8bff408e6f6bfa149474cc28e} 
SCRIPTHASH&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{MULTISIG@{MULTISIG}!solver.h@{solver.h}}\index{solver.h@{solver.h}!MULTISIG@{MULTISIG}}}\label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8fae50f553ee62b9fcbec1b8c8120c29050} 
MULTISIG&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{NULL\_DATA@{NULL\_DATA}!solver.h@{solver.h}}\index{solver.h@{solver.h}!NULL\_DATA@{NULL\_DATA}}}\label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8faacefa22e15602129aa782e5495bc496f} 
NULL\+\_\+\+DATA&unspendable OP\+\_\+\+RETURN script that carries data \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{WITNESS\_V0\_SCRIPTHASH@{WITNESS\_V0\_SCRIPTHASH}!solver.h@{solver.h}}\index{solver.h@{solver.h}!WITNESS\_V0\_SCRIPTHASH@{WITNESS\_V0\_SCRIPTHASH}}}\label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8fa264ed4d13f767aab3553a6144d64b226} 
WITNESS\+\_\+\+V0\+\_\+\+SCRIPTHASH&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{WITNESS\_V0\_KEYHASH@{WITNESS\_V0\_KEYHASH}!solver.h@{solver.h}}\index{solver.h@{solver.h}!WITNESS\_V0\_KEYHASH@{WITNESS\_V0\_KEYHASH}}}\label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8fae7992ec297aa2c0cb081815c6a671668} 
WITNESS\+\_\+\+V0\+\_\+\+KEYHASH&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{WITNESS\_V1\_TAPROOT@{WITNESS\_V1\_TAPROOT}!solver.h@{solver.h}}\index{solver.h@{solver.h}!WITNESS\_V1\_TAPROOT@{WITNESS\_V1\_TAPROOT}}}\label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8fa049dd79ed8ccf583d838427d6fc30d9f} 
WITNESS\+\_\+\+V1\+\_\+\+TAPROOT&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{WITNESS\_UNKNOWN@{WITNESS\_UNKNOWN}!solver.h@{solver.h}}\index{solver.h@{solver.h}!WITNESS\_UNKNOWN@{WITNESS\_UNKNOWN}}}\label{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8fa0a72348992c8c18c766d8b4040e48065} 
WITNESS\+\_\+\+UNKNOWN&Only for Witness versions not already defined above. \\
\hline

\end{DoxyEnumFields}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{solver.h@{solver.h}!GetScriptForMultisig@{GetScriptForMultisig}}
\index{GetScriptForMultisig@{GetScriptForMultisig}!solver.h@{solver.h}}
\doxysubsubsection{GetScriptForMultisig()}
{\footnotesize\ttfamily \label{solver_8h_a7030aee2e7c653ebc11b77dab70b09f1} 
\textbf{ CScript} Get\+Script\+For\+Multisig (\begin{DoxyParamCaption}\item[{int}]{n\+Required}{, }\item[{const std\+::vector$<$ \textbf{ CPub\+Key} $>$ \&}]{keys}{}\end{DoxyParamCaption})}

Generate a multisig script. \index{solver.h@{solver.h}!GetScriptForRawPubKey@{GetScriptForRawPubKey}}
\index{GetScriptForRawPubKey@{GetScriptForRawPubKey}!solver.h@{solver.h}}
\doxysubsubsection{GetScriptForRawPubKey()}
{\footnotesize\ttfamily \label{solver_8h_a918dcaa16c3228c31ca9878bed066c65} 
\textbf{ CScript} Get\+Script\+For\+Raw\+Pub\+Key (\begin{DoxyParamCaption}\item[{const \textbf{ CPub\+Key} \&}]{pubkey}{}\end{DoxyParamCaption})}

Generate a P2\+PK script for the given pubkey. \index{solver.h@{solver.h}!GetTxnOutputType@{GetTxnOutputType}}
\index{GetTxnOutputType@{GetTxnOutputType}!solver.h@{solver.h}}
\doxysubsubsection{GetTxnOutputType()}
{\footnotesize\ttfamily \label{solver_8h_a9f2b93de157eeaad761764eeee39a8b9} 
std\+::string Get\+Txn\+Output\+Type (\begin{DoxyParamCaption}\item[{\textbf{ Txout\+Type}}]{t}{}\end{DoxyParamCaption})}

Get the name of a \doxyref{Txout\+Type}{p.}{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8f} as a string \index{solver.h@{solver.h}!IsPushdataOp@{IsPushdataOp}}
\index{IsPushdataOp@{IsPushdataOp}!solver.h@{solver.h}}
\doxysubsubsection{IsPushdataOp()}
{\footnotesize\ttfamily \label{solver_8h_a02a3ed710d86f689fc1a495d3735871b} 
bool Is\+Pushdata\+Op (\begin{DoxyParamCaption}\item[{\textbf{ opcodetype}}]{opcode}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}

\index{solver.h@{solver.h}!MatchMultiA@{MatchMultiA}}
\index{MatchMultiA@{MatchMultiA}!solver.h@{solver.h}}
\doxysubsubsection{MatchMultiA()}
{\footnotesize\ttfamily \label{solver_8h_ae3d98f256db6ed313c4f28cd2601b9e2} 
std\+::optional$<$ std\+::pair$<$ int, std\+::vector$<$ std\+::span$<$ const unsigned char $>$ $>$ $>$ $>$ Match\+MultiA (\begin{DoxyParamCaption}\item[{const \textbf{ CScript} \&\textbf{ script}}]{LIFETIMEBOUND}{}\end{DoxyParamCaption})}

Determine if script is a "{}multi\+\_\+a"{} script. Returns (threshold, keyspans) if so, and nullopt otherwise. The keyspans refer to bytes in the passed script. \index{solver.h@{solver.h}!Solver@{Solver}}
\index{Solver@{Solver}!solver.h@{solver.h}}
\doxysubsubsection{Solver()}
{\footnotesize\ttfamily \label{solver_8h_a0664b19198e4496f7cc0365a46a25020} 
\textbf{ Txout\+Type} Solver (\begin{DoxyParamCaption}\item[{const \textbf{ CScript} \&}]{script\+Pub\+Key}{, }\item[{std\+::vector$<$ std\+::vector$<$ unsigned char $>$ $>$ \&}]{v\+Solutions\+Ret}{}\end{DoxyParamCaption})}

Parse a script\+Pub\+Key and identify script type for standard scripts. If successful, returns script type and parsed pubkeys or hashes, depending on the type. For example, for a P2\+SH script, v\+Solutions\+Ret will contain the script hash, for P2\+PKH it will contain the key hash, etc.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em script\+Pub\+Key} & Script to parse \\
\hline
\mbox{\texttt{out}}  & {\em v\+Solutions\+Ret} & Vector of parsed pubkeys and hashes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The script type. \doxyref{Txout\+Type\+::\+NONSTANDARD}{p.}{solver_8h_ac908d0e5a62eac70931dae97c6fd3c8fab4c03417b9e4221f084c33e152c3535f} represents a failed solve. 
\end{DoxyReturn}
