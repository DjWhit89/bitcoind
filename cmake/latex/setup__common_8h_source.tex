\doxysection{setup\+\_\+common.\+h}
\label{setup__common_8h_source}\index{src/test/util/setup\_common.h@{src/test/util/setup\_common.h}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2015-\/present\ The\ Bitcoin\ Core\ developers}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Distributed\ under\ the\ MIT\ software\ license,\ see\ the\ accompanying}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ file\ COPYING\ or\ http://www.opensource.org/licenses/mit-\/license.php.}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#ifndef\ BITCOIN\_TEST\_UTIL\_SETUP\_COMMON\_H}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#define\ BITCOIN\_TEST\_UTIL\_SETUP\_COMMON\_H}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <common/args.h>}\ \textcolor{comment}{//\ IWYU\ pragma:\ export}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <kernel/caches.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <kernel/context.h>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <key.h>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <node/caches.h>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <node/context.h>}\ \textcolor{comment}{//\ IWYU\ pragma:\ export}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <optional>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <ostream>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <primitives/transaction.h>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <pubkey.h>}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <stdexcept>}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <test/util/random.h>}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <util/chaintype.h>}\ \textcolor{comment}{//\ IWYU\ pragma:\ export}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <util/check.h>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <util/fs.h>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <util/signalinterrupt.h>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <util/string.h>}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <util/vector.h>}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{class\ }arith\_uint256;}
\DoxyCodeLine{00032\ \textcolor{keyword}{class\ }CFeeRate;}
\DoxyCodeLine{00033\ \textcolor{keyword}{class\ }Chainstate;}
\DoxyCodeLine{00034\ \textcolor{keyword}{class\ }FastRandomContext;}
\DoxyCodeLine{00035\ \textcolor{keyword}{class\ }uint160;}
\DoxyCodeLine{00036\ \textcolor{keyword}{class\ }uint256;}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{extern}\ \textcolor{keyword}{const}\ std::function<void(\textcolor{keyword}{const}\ std::string\&)>\ G\_TEST\_LOG\_FUN;}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{extern}\ \textcolor{keyword}{const}\ std::function<std::vector<const\ char*>()>\ G\_TEST\_COMMAND\_LINE\_ARGUMENTS;}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{extern}\ \textcolor{keyword}{const}\ std::function<std::string()>\ G\_TEST\_GET\_FULL\_NAME;}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ CAmount\ CENT\{1000000\};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00050\ \textcolor{keywordtype}{void}\ SetupCommonTestArgs(ArgsManager\&\ argsman);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{keyword}{struct\ }TestOpts\ \{}
\DoxyCodeLine{00053\ \ \ \ \ std::vector<const\ char*>\ extra\_args\{\};}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{bool}\ coins\_db\_in\_memory\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{bool}\ block\_tree\_db\_in\_memory\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{bool}\ setup\_net\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{bool}\ setup\_validation\_interface\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{bool}\ min\_validation\_cache\{\textcolor{keyword}{false}\};\ \textcolor{comment}{//\ Equivalent\ of\ -\/maxsigcachebytes=0}}
\DoxyCodeLine{00059\ \};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00064\ \textcolor{keyword}{struct\ }BasicTestingSetup\ \{}
\DoxyCodeLine{00065\ \ \ \ \ util::SignalInterrupt\ m\_interrupt;}
\DoxyCodeLine{00066\ \ \ \ \ node::NodeContext\ m\_node;\ \textcolor{comment}{//\ keep\ as\ first\ member\ to\ be\ destructed\ last}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ FastRandomContext\ m\_rng;}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordtype}{void}\ SeedRandomForTest(SeedRand\ seed)}
\DoxyCodeLine{00071\ \ \ \ \ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ SeedRandomStateForTest(seed);}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ m\_rng.Reseed(GetRandHash());}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{explicit}\ BasicTestingSetup(\textcolor{keyword}{const}\ ChainType\ chainType\ =\ ChainType::MAIN,\ TestOpts\ =\ \{\});}
\DoxyCodeLine{00077\ \ \ \ \ \string~BasicTestingSetup();}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ fs::path\ m\_path\_root;}
\DoxyCodeLine{00080\ \ \ \ \ fs::path\ m\_path\_lock;}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_has\_custom\_datadir\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{00099\ \ \ \ \ ArgsManager\ m\_args;}
\DoxyCodeLine{00100\ \};}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00106\ \textcolor{keyword}{struct\ }ChainTestingSetup\ :\ \textcolor{keyword}{public}\ BasicTestingSetup\ \{}
\DoxyCodeLine{00107\ \ \ \ \ kernel::CacheSizes\ m\_kernel\_cache\_sizes\{node::CalculateCacheSizes(m\_args).kernel\};}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_coins\_db\_in\_memory\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_block\_tree\_db\_in\_memory\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00110\ \ \ \ \ std::function<void()>\ m\_make\_chainman\{\};}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{explicit}\ ChainTestingSetup(\textcolor{keyword}{const}\ ChainType\ chainType\ =\ ChainType::MAIN,\ TestOpts\ =\ \{\});}
\DoxyCodeLine{00113\ \ \ \ \ \string~ChainTestingSetup();}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{comment}{//\ Supplies\ a\ chainstate,\ if\ one\ is\ needed}}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordtype}{void}\ LoadVerifyActivateChainstate();}
\DoxyCodeLine{00117\ \};}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00121\ \textcolor{keyword}{struct\ }TestingSetup\ :\ \textcolor{keyword}{public}\ ChainTestingSetup\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keyword}{explicit}\ TestingSetup(}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ ChainType\ chainType\ =\ ChainType::MAIN,}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ TestOpts\ =\ \{\});}
\DoxyCodeLine{00125\ \};}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00128\ \textcolor{keyword}{struct\ }RegTestingSetup\ :\ \textcolor{keyword}{public}\ TestingSetup\ \{}
\DoxyCodeLine{00129\ \ \ \ \ RegTestingSetup()}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ :\ TestingSetup\{ChainType::REGTEST\}\ \{\}}
\DoxyCodeLine{00131\ \};}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00134\ \textcolor{keyword}{struct\ }Testnet4Setup\ :\ \textcolor{keyword}{public}\ TestingSetup\ \{}
\DoxyCodeLine{00135\ \ \ \ \ Testnet4Setup()}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ :\ TestingSetup\{ChainType::TESTNET4\}\ \{\}}
\DoxyCodeLine{00137\ \};}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \textcolor{keyword}{class\ }CBlock;}
\DoxyCodeLine{00140\ \textcolor{keyword}{struct\ }CMutableTransaction;}
\DoxyCodeLine{00141\ \textcolor{keyword}{class\ }CScript;}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00146\ \textcolor{keyword}{struct\ }TestChain100Setup\ :\ \textcolor{keyword}{public}\ TestingSetup\ \{}
\DoxyCodeLine{00147\ \ \ \ \ TestChain100Setup(}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ ChainType\ chain\_type\ =\ ChainType::REGTEST,}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ TestOpts\ =\ \{\});}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00156\ \ \ \ \ CBlock\ CreateAndProcessBlock(\textcolor{keyword}{const}\ std::vector<CMutableTransaction>\&\ txns,}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ CScript\&\ scriptPubKey,}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Chainstate*\ chainstate\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00164\ \ \ \ \ CBlock\ CreateBlock(}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<CMutableTransaction>\&\ txns,}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ CScript\&\ scriptPubKey,}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ Chainstate\&\ chainstate);}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keywordtype}{void}\ mineBlocks(\textcolor{keywordtype}{int}\ num\_blocks);}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00185\ \ \ \ \ std::pair<CMutableTransaction,\ CAmount>\ CreateValidTransaction(\textcolor{keyword}{const}\ std::vector<CTransactionRef>\&\ input\_transactions,}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<COutPoint>\&\ inputs,}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_height,}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<CKey>\&\ input\_signing\_keys,}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<CTxOut>\&\ outputs,}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::optional<CFeeRate>\&\ feerate,}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::optional<uint32\_t>\&\ fee\_output);}
\DoxyCodeLine{00202\ \ \ \ \ CMutableTransaction\ CreateValidMempoolTransaction(\textcolor{keyword}{const}\ std::vector<CTransactionRef>\&\ input\_transactions,}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<COutPoint>\&\ inputs,}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_height,}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<CKey>\&\ input\_signing\_keys,}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<CTxOut>\&\ outputs,}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ submit\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00220\ \ \ \ \ CMutableTransaction\ CreateValidMempoolTransaction(CTransactionRef\ input\_transaction,}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ input\_vout,}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_height,}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CKey\ input\_signing\_key,}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CScript\ output\_destination,}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CAmount\ output\_amount\ =\ CAmount(1\ *\ COIN),}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ submit\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00239\ \ \ \ \ std::vector<CTransactionRef>\ PopulateMempool(FastRandomContext\&\ det\_rand,\ \textcolor{keywordtype}{size\_t}\ num\_transactions,\ \textcolor{keywordtype}{bool}\ submit);}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ std::vector<CTransactionRef>\ m\_coinbase\_txns;\ \textcolor{comment}{//\ For\ convenience,\ coinbase\ transactions}}
\DoxyCodeLine{00242\ \ \ \ \ CKey\ coinbaseKey;\ \textcolor{comment}{//\ private/public\ key\ needed\ to\ spend\ coinbase\ transactions}}
\DoxyCodeLine{00243\ \};}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00249\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T\ =\ const\ BasicTestingSetup>}
\DoxyCodeLine{00250\ std::unique\_ptr<T>\ MakeNoLogFileContext(\textcolor{keyword}{const}\ ChainType\ chain\_type\ =\ ChainType::REGTEST,\ TestOpts\ opts\ =\ \{\})}
\DoxyCodeLine{00251\ \{}
\DoxyCodeLine{00252\ \ \ \ \ opts.extra\_args\ =\ Cat(}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/nodebuglogfile"{}},}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/nodebug"{}},}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ opts.extra\_args);}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keywordflow}{return}\ std::make\_unique<T>(chain\_type,\ opts);}
\DoxyCodeLine{00260\ \}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ CBlock\ getBlock13b8a();}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \textcolor{comment}{//\ Make\ types\ usable\ in\ BOOST\_CHECK\_*\ @\{}}
\DoxyCodeLine{00265\ \textcolor{keyword}{namespace\ }std\ \{}
\DoxyCodeLine{00266\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>\ \textcolor{keyword}{requires}\ std::is\_enum\_v<T>}
\DoxyCodeLine{00267\ \textcolor{keyword}{inline}\ std::ostream\&\ operator<<(std::ostream\&\ os,\ \textcolor{keyword}{const}\ T\&\ e)}
\DoxyCodeLine{00268\ \{}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordflow}{return}\ os\ <<\ static\_cast<std::underlying\_type\_t<T>>(e);}
\DoxyCodeLine{00270\ \}}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00273\ \textcolor{keyword}{inline}\ std::ostream\&\ operator<<(std::ostream\&\ os,\ \textcolor{keyword}{const}\ std::optional<T>\&\ v)}
\DoxyCodeLine{00274\ \{}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordflow}{return}\ v\ ?\ os\ <<\ *v}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ os\ <<\ \textcolor{stringliteral}{"{}std::nullopt"{}};}
\DoxyCodeLine{00277\ \}}
\DoxyCodeLine{00278\ \}\ \textcolor{comment}{//\ namespace\ std}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ std::ostream\&\ operator<<(std::ostream\&\ os,\ \textcolor{keyword}{const}\ arith\_uint256\&\ num);}
\DoxyCodeLine{00281\ std::ostream\&\ operator<<(std::ostream\&\ os,\ \textcolor{keyword}{const}\ uint160\&\ num);}
\DoxyCodeLine{00282\ std::ostream\&\ operator<<(std::ostream\&\ os,\ \textcolor{keyword}{const}\ uint256\&\ num);}
\DoxyCodeLine{00283\ std::ostream\&\ operator<<(std::ostream\&\ os,\ \textcolor{keyword}{const}\ Txid\&\ txid);}
\DoxyCodeLine{00284\ std::ostream\&\ operator<<(std::ostream\&\ os,\ \textcolor{keyword}{const}\ Wtxid\&\ wtxid);}
\DoxyCodeLine{00285\ \textcolor{comment}{//\ @\}}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00292\ \textcolor{keyword}{class\ }HasReason}
\DoxyCodeLine{00293\ \{}
\DoxyCodeLine{00294\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{keyword}{explicit}\ HasReason(std::string\_view\ reason)\ :\ m\_reason(reason)\ \{\}}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator()(std::string\_view\ s)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ s.find(m\_reason)\ !=\ std::string\_view::npos;\ \}}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator()(\textcolor{keyword}{const}\ std::exception\&\ e)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ (*\textcolor{keyword}{this})(e.what());\ \}}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ m\_reason;}
\DoxyCodeLine{00301\ \};}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ BITCOIN\_TEST\_UTIL\_SETUP\_COMMON\_H}}

\end{DoxyCode}
