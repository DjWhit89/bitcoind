\doxysection{Erase\+Parallel\+Test Struct Reference}
\label{struct_erase_parallel_test}\index{EraseParallelTest@{EraseParallelTest}}
Inheritance diagram for Erase\+Parallel\+Test\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{struct_erase_parallel_test}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename \textbf{ Cache}$>$ }\\void \textbf{ test\+\_\+cache\+\_\+erase\+\_\+parallel} (size\+\_\+t megabytes)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ Basic\+Testing\+Setup}}
\begin{DoxyCompactItemize}
\item 
void \textbf{ Seed\+Random\+For\+Test} (\textbf{ Seed\+Rand} seed)
\item 
\textbf{ Basic\+Testing\+Setup} (const \textbf{ Chain\+Type} chain\+Type=\textbf{ Chain\+Type\+::\+MAIN}, \textbf{ Test\+Opts}=\{\})
\item 
\textbf{ $\sim$\+Basic\+Testing\+Setup} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Data Fields inherited from \textbf{ Basic\+Testing\+Setup}}
\begin{DoxyCompactItemize}
\item 
\textbf{ util\+::\+Signal\+Interrupt} \textbf{ m\+\_\+interrupt}
\item 
\textbf{ node\+::\+Node\+Context} \textbf{ m\+\_\+node}
\item 
\textbf{ Fast\+Random\+Context} \textbf{ m\+\_\+rng}
\item 
\textbf{ fs\+::path} \textbf{ m\+\_\+path\+\_\+root}
\item 
\textbf{ fs\+::path} \textbf{ m\+\_\+path\+\_\+lock}
\item 
bool \textbf{ m\+\_\+has\+\_\+custom\+\_\+datadir} \{false\}
\item 
\textbf{ Args\+Manager} \textbf{ m\+\_\+args}
\begin{DoxyCompactList}\small\item\em Test-\/specific arguments and settings. \end{DoxyCompactList}\end{DoxyCompactItemize}


\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{EraseParallelTest@{EraseParallelTest}!test\_cache\_erase\_parallel@{test\_cache\_erase\_parallel}}
\index{test\_cache\_erase\_parallel@{test\_cache\_erase\_parallel}!EraseParallelTest@{EraseParallelTest}}
\doxysubsubsection{test\_cache\_erase\_parallel()}
{\footnotesize\ttfamily \label{struct_erase_parallel_test_a6c25ae21337349d3598b2fa96f7685fe} 
template$<$typename \textbf{ Cache}$>$ \\
void test\+\_\+cache\+\_\+erase\+\_\+parallel (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{megabytes}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

We make a copy of the hashes because future optimizations of the cuckoocache may overwrite the inserted element, so the test is "{}future proofed"{}.

Grab lock to make sure we release inserts

Insert the first half

Spin up 3 threads to run contains with erase.

Erase the first quarter

Each thread is emplaced with x copy-\/by-\/value

Wait for all threads to finish

Grab lock to make sure we observe erases

Insert the second half

elements that we marked erased but that are still there

elements that we did not erase but are older

elements that were most recently inserted

The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/test/\textbf{ cuckoocache\+\_\+tests.\+cpp}\end{DoxyCompactItemize}
