\doxysection{src/httpserver.h File Reference}
\label{httpserver_8h}\index{src/httpserver.h@{src/httpserver.h}}
{\ttfamily \#include $<$functional$>$}\newline
{\ttfamily \#include $<$optional$>$}\newline
{\ttfamily \#include $<$span$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
class \textbf{ HTTPRequest}
\item 
class \textbf{ HTTPClosure}
\item 
class \textbf{ HTTPEvent}
\end{DoxyCompactItemize}
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \textbf{ util}
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef std\+::function$<$ bool(\textbf{ HTTPRequest} $\ast$req, const std\+::string \&)$>$ \textbf{ HTTPRequest\+Handler}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \textbf{ Init\+HTTPServer} (const \textbf{ util\+::\+Signal\+Interrupt} \&interrupt)
\item 
void \textbf{ Start\+HTTPServer} ()
\item 
void \textbf{ Interrupt\+HTTPServer} ()
\item 
void \textbf{ Stop\+HTTPServer} ()
\item 
void \textbf{ Update\+HTTPServer\+Logging} (bool enable)
\item 
void \textbf{ Register\+HTTPHandler} (const std\+::string \&\textbf{ prefix}, bool exact\+Match, const \textbf{ HTTPRequest\+Handler} \&\textbf{ handler})
\item 
void \textbf{ Unregister\+HTTPHandler} (const std\+::string \&\textbf{ prefix}, bool exact\+Match)
\item 
struct event\+\_\+base $\ast$ \textbf{ Event\+Base} ()
\item 
std\+::optional$<$ std\+::string $>$ \textbf{ Get\+Query\+Parameter\+From\+Uri} (const char $\ast$uri, const std\+::string \&key)
\end{DoxyCompactItemize}


\label{doc-typedef-members}
\doxysubsection{Typedef Documentation}
\index{httpserver.h@{httpserver.h}!HTTPRequestHandler@{HTTPRequestHandler}}
\index{HTTPRequestHandler@{HTTPRequestHandler}!httpserver.h@{httpserver.h}}
\doxysubsubsection{HTTPRequestHandler}
{\footnotesize\ttfamily \label{httpserver_8h_ac21c51cfc9edce52ebe847dee0571a0a} 
typedef std\+::function$<$bool(\textbf{ HTTPRequest}$\ast$ req, const std\+::string \&)$>$ \textbf{ HTTPRequest\+Handler}}

\doxyref{Handler}{p.}{class_handler} for requests to a certain HTTP path 

\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{httpserver.h@{httpserver.h}!EventBase@{EventBase}}
\index{EventBase@{EventBase}!httpserver.h@{httpserver.h}}
\doxysubsubsection{EventBase()}
{\footnotesize\ttfamily \label{httpserver_8h_a678938523347079b4dd5fabc47efdbbc} 
struct event\+\_\+base $\ast$ Event\+Base (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Return evhttp event base. This can be used by submodules to queue timers or custom events. \index{httpserver.h@{httpserver.h}!GetQueryParameterFromUri@{GetQueryParameterFromUri}}
\index{GetQueryParameterFromUri@{GetQueryParameterFromUri}!httpserver.h@{httpserver.h}}
\doxysubsubsection{GetQueryParameterFromUri()}
{\footnotesize\ttfamily \label{httpserver_8h_a4b96025548083ad61a3b0847621c7a74} 
std\+::optional$<$ std\+::string $>$ Get\+Query\+Parameter\+From\+Uri (\begin{DoxyParamCaption}\item[{const char $\ast$}]{uri}{, }\item[{const std\+::string \&}]{key}{}\end{DoxyParamCaption})}

Get the query parameter value from request uri for a specified key, or std\+::nullopt if the key is not found.

If the query string contains duplicate keys, the first value is returned. Many web frameworks would instead parse this as an array of values, but this is not (yet) implemented as it is currently not needed in any of the endpoints.

Helper function for \doxyref{HTTPRequest\+::\+Get\+Query\+Parameter}{p.}{class_h_t_t_p_request_a4c8d3ca82089f916e360d1d06cf09dbf}.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em uri} & is the entire request uri \\
\hline
\mbox{\texttt{in}}  & {\em key} & represents the query parameter of which the value is returned \\
\hline
\end{DoxyParams}
\index{httpserver.h@{httpserver.h}!InitHTTPServer@{InitHTTPServer}}
\index{InitHTTPServer@{InitHTTPServer}!httpserver.h@{httpserver.h}}
\doxysubsubsection{InitHTTPServer()}
{\footnotesize\ttfamily \label{httpserver_8h_aa5183260b12c1ce706dad5b454a44cec} 
bool Init\+HTTPServer (\begin{DoxyParamCaption}\item[{const \textbf{ util\+::\+Signal\+Interrupt} \&}]{interrupt}{}\end{DoxyParamCaption})}

Initialize HTTP server. Call this before Register\+HTTPHandler or \doxyref{Event\+Base()}{p.}{httpserver_8h_a678938523347079b4dd5fabc47efdbbc}. \index{httpserver.h@{httpserver.h}!InterruptHTTPServer@{InterruptHTTPServer}}
\index{InterruptHTTPServer@{InterruptHTTPServer}!httpserver.h@{httpserver.h}}
\doxysubsubsection{InterruptHTTPServer()}
{\footnotesize\ttfamily \label{httpserver_8h_a0a02b6576090c9fde2eed21b9aa7dc0c} 
void Interrupt\+HTTPServer (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Interrupt HTTP server threads \index{httpserver.h@{httpserver.h}!RegisterHTTPHandler@{RegisterHTTPHandler}}
\index{RegisterHTTPHandler@{RegisterHTTPHandler}!httpserver.h@{httpserver.h}}
\doxysubsubsection{RegisterHTTPHandler()}
{\footnotesize\ttfamily \label{httpserver_8h_a43a4c24762a6af819e364b55820323ed} 
void Register\+HTTPHandler (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{prefix}{, }\item[{bool}]{exact\+Match}{, }\item[{const \textbf{ HTTPRequest\+Handler} \&}]{handler}{}\end{DoxyParamCaption})}

Register handler for prefix. If multiple handlers match a prefix, the first-\/registered one will be invoked. \index{httpserver.h@{httpserver.h}!StartHTTPServer@{StartHTTPServer}}
\index{StartHTTPServer@{StartHTTPServer}!httpserver.h@{httpserver.h}}
\doxysubsubsection{StartHTTPServer()}
{\footnotesize\ttfamily \label{httpserver_8h_a4fd74612426e28d4678557f401066d96} 
void Start\+HTTPServer (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Start HTTP server. This is separate from Init\+HTTPServer to give users race-\/condition-\/free time to register their handlers between Init\+HTTPServer and Start\+HTTPServer. \index{httpserver.h@{httpserver.h}!StopHTTPServer@{StopHTTPServer}}
\index{StopHTTPServer@{StopHTTPServer}!httpserver.h@{httpserver.h}}
\doxysubsubsection{StopHTTPServer()}
{\footnotesize\ttfamily \label{httpserver_8h_ad95d08d62c15b43d52fdba7b7ecaa0aa} 
void Stop\+HTTPServer (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Stop HTTP server \index{httpserver.h@{httpserver.h}!UnregisterHTTPHandler@{UnregisterHTTPHandler}}
\index{UnregisterHTTPHandler@{UnregisterHTTPHandler}!httpserver.h@{httpserver.h}}
\doxysubsubsection{UnregisterHTTPHandler()}
{\footnotesize\ttfamily \label{httpserver_8h_a42d2567faa003c410a310a9c4e36ebdc} 
void Unregister\+HTTPHandler (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{prefix}{, }\item[{bool}]{exact\+Match}{}\end{DoxyParamCaption})}

Unregister handler for prefix \index{httpserver.h@{httpserver.h}!UpdateHTTPServerLogging@{UpdateHTTPServerLogging}}
\index{UpdateHTTPServerLogging@{UpdateHTTPServerLogging}!httpserver.h@{httpserver.h}}
\doxysubsubsection{UpdateHTTPServerLogging()}
{\footnotesize\ttfamily \label{httpserver_8h_a5d061de02f52817cc3e5957046dbf766} 
void Update\+HTTPServer\+Logging (\begin{DoxyParamCaption}\item[{bool}]{enable}{}\end{DoxyParamCaption})}

Change logging level for libevent. 