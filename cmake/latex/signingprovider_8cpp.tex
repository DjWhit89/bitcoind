\doxysection{src/script/signingprovider.cpp File Reference}
\label{signingprovider_8cpp}\index{src/script/signingprovider.cpp@{src/script/signingprovider.cpp}}
{\ttfamily \#include $<$script/keyorigin.\+h$>$}\newline
{\ttfamily \#include $<$script/interpreter.\+h$>$}\newline
{\ttfamily \#include $<$script/signingprovider.\+h$>$}\newline
{\ttfamily \#include $<$logging.\+h$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename M, typename K, typename V$>$ }\\bool \textbf{ Lookup\+Helper} (const M \&map, const K \&key, V \&value)
\item 
\textbf{ CKey\+ID} \textbf{ Get\+Key\+For\+Destination} (const \textbf{ Signing\+Provider} \&store, const \textbf{ CTx\+Destination} \&dest)
\item 
std\+::optional$<$ std\+::vector$<$ std\+::tuple$<$ int, std\+::vector$<$ unsigned char $>$, int $>$ $>$ $>$ \textbf{ Infer\+Taproot\+Tree} (const \textbf{ Taproot\+Spend\+Data} \&spenddata, const \textbf{ XOnly\+Pub\+Key} \&output)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \textbf{ Signing\+Provider} \& \textbf{ DUMMY\+\_\+\+SIGNING\+\_\+\+PROVIDER} = \textbf{ Signing\+Provider}()
\end{DoxyCompactItemize}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{signingprovider.cpp@{signingprovider.cpp}!GetKeyForDestination@{GetKeyForDestination}}
\index{GetKeyForDestination@{GetKeyForDestination}!signingprovider.cpp@{signingprovider.cpp}}
\doxysubsubsection{GetKeyForDestination()}
{\footnotesize\ttfamily \label{signingprovider_8cpp_ae65e08579aa35a7b467349bfbf1d9880} 
\textbf{ CKey\+ID} Get\+Key\+For\+Destination (\begin{DoxyParamCaption}\item[{const \textbf{ Signing\+Provider} \&}]{store}{, }\item[{const \textbf{ CTx\+Destination} \&}]{dest}{}\end{DoxyParamCaption})}

Return the \doxyref{CKey\+ID}{p.}{class_c_key_i_d} of the key involved in a script (if there is a unique one). \index{signingprovider.cpp@{signingprovider.cpp}!InferTaprootTree@{InferTaprootTree}}
\index{InferTaprootTree@{InferTaprootTree}!signingprovider.cpp@{signingprovider.cpp}}
\doxysubsubsection{InferTaprootTree()}
{\footnotesize\ttfamily \label{signingprovider_8cpp_a075b7df92359ace305937514dfd5070a} 
std\+::optional$<$ std\+::vector$<$ std\+::tuple$<$ int, std\+::vector$<$ unsigned char $>$, int $>$ $>$ $>$ Infer\+Taproot\+Tree (\begin{DoxyParamCaption}\item[{const \textbf{ Taproot\+Spend\+Data} \&}]{spenddata}{, }\item[{const \textbf{ XOnly\+Pub\+Key} \&}]{output}{}\end{DoxyParamCaption})}

Given a \doxyref{Taproot\+Spend\+Data}{p.}{struct_taproot_spend_data} and the output key, reconstruct its script tree.

If the output doesn\textquotesingle{}t match the spenddata, or if the data in spenddata is incomplete, std\+::nullopt is returned. Otherwise, a vector of (depth, script, leaf\+\_\+ver) tuples is returned, corresponding to a depth-\/first traversal of the script tree. Data structure to represent the nodes of the tree we\textquotesingle{}re going to build.

Hash of this node, if known; 0 otherwise.

The left and right subtrees (note that their order is irrelevant).

If this is known to be a leaf node, a pointer to the (script, leaf\+\_\+ver) pair. nullptr otherwise.

Whether or not this node has been explored (is known to be a leaf, or known to have children).

Whether or not this node is an inner node (unknown until explored = true).

Whether or not we have produced output for this subtree.\index{signingprovider.cpp@{signingprovider.cpp}!LookupHelper@{LookupHelper}}
\index{LookupHelper@{LookupHelper}!signingprovider.cpp@{signingprovider.cpp}}
\doxysubsubsection{LookupHelper()}
{\footnotesize\ttfamily \label{signingprovider_8cpp_a428c50c9dc6390b9ab871ff3ed98cdf8} 
template$<$typename M, typename K, typename V$>$ \\
bool Lookup\+Helper (\begin{DoxyParamCaption}\item[{const M \&}]{map}{, }\item[{const K \&}]{key}{, }\item[{V \&}]{value}{}\end{DoxyParamCaption})}



\label{doc-var-members}
\doxysubsection{Variable Documentation}
\index{signingprovider.cpp@{signingprovider.cpp}!DUMMY\_SIGNING\_PROVIDER@{DUMMY\_SIGNING\_PROVIDER}}
\index{DUMMY\_SIGNING\_PROVIDER@{DUMMY\_SIGNING\_PROVIDER}!signingprovider.cpp@{signingprovider.cpp}}
\doxysubsubsection{DUMMY\_SIGNING\_PROVIDER}
{\footnotesize\ttfamily \label{signingprovider_8cpp_a129cc81972e09e3ba1c29777eb9d0ed0} 
const \textbf{ Signing\+Provider}\& DUMMY\+\_\+\+SIGNING\+\_\+\+PROVIDER = \textbf{ Signing\+Provider}()}

