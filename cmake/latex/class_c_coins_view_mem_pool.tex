\doxysection{CCoins\+View\+Mem\+Pool Class Reference}
\label{class_c_coins_view_mem_pool}\index{CCoinsViewMemPool@{CCoinsViewMemPool}}


{\ttfamily \#include $<$txmempool.\+h$>$}

Inheritance diagram for CCoins\+View\+Mem\+Pool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_c_coins_view_mem_pool}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ CCoins\+View\+Mem\+Pool} (\textbf{ CCoins\+View} $\ast$base\+In, const \textbf{ CTx\+Mem\+Pool} \&mempool\+In)
\item 
std\+::optional$<$ \textbf{ Coin} $>$ \textbf{ Get\+Coin} (const \textbf{ COut\+Point} \&outpoint) const override
\item 
void \textbf{ Package\+Add\+Transaction} (const \textbf{ CTransaction\+Ref} \&tx)
\item 
const std\+::unordered\+\_\+set$<$ \textbf{ COut\+Point}, \textbf{ Salted\+Outpoint\+Hasher} $>$ \& \textbf{ Get\+Non\+Base\+Coins} () const
\item 
void \textbf{ Reset} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ CCoins\+View\+Backed}}
\begin{DoxyCompactItemize}
\item 
\textbf{ CCoins\+View\+Backed} (\textbf{ CCoins\+View} $\ast$view\+In)
\item 
bool \textbf{ Have\+Coin} (const \textbf{ COut\+Point} \&outpoint) const override
\begin{DoxyCompactList}\small\item\em Just check whether a given outpoint is unspent. \end{DoxyCompactList}\item 
\textbf{ uint256} \textbf{ Get\+Best\+Block} () const override
\begin{DoxyCompactList}\small\item\em Retrieve the block hash whose state this \doxyref{CCoins\+View}{p.}{class_c_coins_view} currently represents. \end{DoxyCompactList}\item 
std\+::vector$<$ \textbf{ uint256} $>$ \textbf{ Get\+Head\+Blocks} () const override
\item 
void \textbf{ Set\+Backend} (\textbf{ CCoins\+View} \&view\+In)
\item 
bool \textbf{ Batch\+Write} (\textbf{ Coins\+View\+Cache\+Cursor} \&cursor, const \textbf{ uint256} \&hash\+Block) override
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ CCoins\+View\+Cursor} $>$ \textbf{ Cursor} () const override
\begin{DoxyCompactList}\small\item\em Get a cursor to iterate over the whole state. \end{DoxyCompactList}\item 
size\+\_\+t \textbf{ Estimate\+Size} () const override
\begin{DoxyCompactList}\small\item\em Estimate database size (0 if not implemented). \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ CCoins\+View}}
\begin{DoxyCompactItemize}
\item 
virtual \textbf{ $\sim$\+CCoins\+View} ()=default
\begin{DoxyCompactList}\small\item\em As we use CCoins\+Views polymorphically, have a virtual destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
const \textbf{ CTx\+Mem\+Pool} \& \textbf{ mempool}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \textbf{ CCoins\+View\+Backed}}
\begin{DoxyCompactItemize}
\item 
\textbf{ CCoins\+View} $\ast$ \textbf{ base}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\doxyref{CCoins\+View}{p.}{class_c_coins_view} that brings transactions from a mempool into view. It does not check for spendings by memory pool transactions. Instead, it provides access to all Coins which are either unspent in the base \doxyref{CCoins\+View}{p.}{class_c_coins_view}, are outputs from any mempool transaction, or are tracked temporarily to allow transaction dependencies in package validation. This allows transaction replacement to work as expected, as you want to have all inputs "{}available"{} to check signatures, and any cycles in the dependency graph are checked directly in Accept\+To\+Memory\+Pool. It also allows you to sign a double-\/spend directly in signrawtransactionwithkey and signrawtransactionwithwallet, as long as the conflicting transaction is not yet confirmed. 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{CCoinsViewMemPool@{CCoinsViewMemPool}!CCoinsViewMemPool@{CCoinsViewMemPool}}
\index{CCoinsViewMemPool@{CCoinsViewMemPool}!CCoinsViewMemPool@{CCoinsViewMemPool}}
\doxysubsubsection{CCoinsViewMemPool()}
{\footnotesize\ttfamily \label{class_c_coins_view_mem_pool_aa49e86e7990ec0508903c9e5c439bc8e} 
\textbf{ CCoins\+View\+Mem\+Pool} (\begin{DoxyParamCaption}\item[{\textbf{ CCoins\+View} $\ast$}]{base\+In}{, }\item[{const \textbf{ CTx\+Mem\+Pool} \&}]{mempool\+In}{}\end{DoxyParamCaption})}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{CCoinsViewMemPool@{CCoinsViewMemPool}!GetCoin@{GetCoin}}
\index{GetCoin@{GetCoin}!CCoinsViewMemPool@{CCoinsViewMemPool}}
\doxysubsubsection{GetCoin()}
{\footnotesize\ttfamily \label{class_c_coins_view_mem_pool_a053700fd896babb8aa62fc7c53dd27f6} 
std\+::optional$<$ \textbf{ Coin} $>$ Get\+Coin (\begin{DoxyParamCaption}\item[{const \textbf{ COut\+Point} \&}]{outpoint}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Get\+Coin, returning whether it exists and is not spent. Also updates m\+\_\+non\+\_\+base\+\_\+coins if the coin is not fetched from base. 

Reimplemented from \textbf{ CCoins\+View\+Backed} \doxyref{}{p.}{class_c_coins_view_backed_a053700fd896babb8aa62fc7c53dd27f6}.

\index{CCoinsViewMemPool@{CCoinsViewMemPool}!GetNonBaseCoins@{GetNonBaseCoins}}
\index{GetNonBaseCoins@{GetNonBaseCoins}!CCoinsViewMemPool@{CCoinsViewMemPool}}
\doxysubsubsection{GetNonBaseCoins()}
{\footnotesize\ttfamily \label{class_c_coins_view_mem_pool_aa7efd60fceff20119579f8d11d53d764} 
const std\+::unordered\+\_\+set$<$ \textbf{ COut\+Point}, \textbf{ Salted\+Outpoint\+Hasher} $>$ \& Get\+Non\+Base\+Coins (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Get all coins in m\+\_\+non\+\_\+base\+\_\+coins. \index{CCoinsViewMemPool@{CCoinsViewMemPool}!PackageAddTransaction@{PackageAddTransaction}}
\index{PackageAddTransaction@{PackageAddTransaction}!CCoinsViewMemPool@{CCoinsViewMemPool}}
\doxysubsubsection{PackageAddTransaction()}
{\footnotesize\ttfamily \label{class_c_coins_view_mem_pool_ac87b57e566d3dca1d7e968ecb5c71305} 
void Package\+Add\+Transaction (\begin{DoxyParamCaption}\item[{const \textbf{ CTransaction\+Ref} \&}]{tx}{}\end{DoxyParamCaption})}

Add the coins created by this transaction. These coins are only temporarily stored in m\+\_\+temp\+\_\+added and cannot be flushed to the back end. Only used for package validation. \index{CCoinsViewMemPool@{CCoinsViewMemPool}!Reset@{Reset}}
\index{Reset@{Reset}!CCoinsViewMemPool@{CCoinsViewMemPool}}
\doxysubsubsection{Reset()}
{\footnotesize\ttfamily \label{class_c_coins_view_mem_pool_a372de693ad40b3f42839c8ec6ac845f4} 
void Reset (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Clear m\+\_\+temp\+\_\+added and m\+\_\+non\+\_\+base\+\_\+coins. 

\label{doc-variable-members}
\doxysubsection{Field Documentation}
\index{CCoinsViewMemPool@{CCoinsViewMemPool}!mempool@{mempool}}
\index{mempool@{mempool}!CCoinsViewMemPool@{CCoinsViewMemPool}}
\doxysubsubsection{mempool}
{\footnotesize\ttfamily \label{class_c_coins_view_mem_pool_af9bd8e8173b60e24474b301814764c8c} 
const \textbf{ CTx\+Mem\+Pool}\& mempool\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/\textbf{ txmempool.\+h}\item 
src/\textbf{ txmempool.\+cpp}\end{DoxyCompactItemize}
