\doxysection{src/secp256k1/src/util.h File Reference}
\label{secp256k1_2src_2util_8h}\index{src/secp256k1/src/util.h@{src/secp256k1/src/util.h}}
{\ttfamily \#include "{}../include/secp256k1.\+h"{}}\newline
{\ttfamily \#include "{}checkmem.\+h"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$limits.\+h$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ secp256k1\+\_\+callback}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \textbf{ STR\+\_\+}(x)
\item 
\#define \textbf{ STR}(x)
\item 
\#define \textbf{ DEBUG\+\_\+\+CONFIG\+\_\+\+MSG}(x)
\item 
\#define \textbf{ DEBUG\+\_\+\+CONFIG\+\_\+\+DEF}(x)
\item 
\#define \textbf{ PRINT\+\_\+\+BUF}(buf,  len)
\item 
\#define \textbf{ SECP256\+K1\+\_\+\+INLINE}
\item 
\#define \textbf{ STATIC\+\_\+\+ASSERT}(expr)
\item 
\#define \textbf{ ASSERT\+\_\+\+INT\+\_\+\+CONST\+\_\+\+AND\+\_\+\+DO}(expr,  stmt)
\item 
\#define \textbf{ TEST\+\_\+\+FAILURE}(msg)
\item 
\#define \textbf{ EXPECT}(x,  c)
\item 
\#define \textbf{ CHECK}(cond)
\item 
\#define \textbf{ VERIFY\+\_\+\+CHECK}(cond)
\item 
\#define \textbf{ ALIGNMENT}~16
\item 
\#define \textbf{ CEIL\+\_\+\+DIV}(x,  y)
\item 
\#define \textbf{ ROUND\+\_\+\+TO\+\_\+\+ALIGN}(size)
\item 
\#define \textbf{ SECP256\+K1\+\_\+\+RESTRICT}
\item 
\#define \textbf{ SECP256\+K1\+\_\+\+GNUC\+\_\+\+EXT}
\item 
\#define \textbf{ SECP256\+K1\+\_\+\+WIDEMUL\+\_\+\+INT128}~1
\item 
\#define \textbf{ SECP256\+K1\+\_\+\+INT128\+\_\+\+STRUCT}~1
\item 
\#define \textbf{ \+\_\+\+\_\+has\+\_\+builtin}(x)
\end{DoxyCompactItemize}


\label{doc-define-members}
\doxysubsection{Macro Definition Documentation}
\index{util.h@{util.h}!\_\_has\_builtin@{\_\_has\_builtin}}
\index{\_\_has\_builtin@{\_\_has\_builtin}!util.h@{util.h}}
\doxysubsubsection{\_\_has\_builtin}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a447121dcab4275b7839a56082b7a1ab8} 
\#define \+\_\+\+\_\+has\+\_\+builtin(\begin{DoxyParamCaption}\item[{}]{x}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{0}

\end{DoxyCode}
\index{util.h@{util.h}!ALIGNMENT@{ALIGNMENT}}
\index{ALIGNMENT@{ALIGNMENT}!util.h@{util.h}}
\doxysubsubsection{ALIGNMENT}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a450f9d8af07bfe2f313dbe3a78738a5e} 
\#define ALIGNMENT~16}

\index{util.h@{util.h}!ASSERT\_INT\_CONST\_AND\_DO@{ASSERT\_INT\_CONST\_AND\_DO}}
\index{ASSERT\_INT\_CONST\_AND\_DO@{ASSERT\_INT\_CONST\_AND\_DO}!util.h@{util.h}}
\doxysubsubsection{ASSERT\_INT\_CONST\_AND\_DO}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a1fb9bd1c13eddc2c3f172354a3ae5039} 
\#define ASSERT\+\_\+\+INT\+\_\+\+CONST\+\_\+\+AND\+\_\+\+DO(\begin{DoxyParamCaption}\item[{}]{expr}{, }\item[{}]{stmt}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{do}\ \{\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ switch(42)\ \{\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ C\ allows\ only\ integer\ constant\ expressions\ as\ case\ labels.\ */}\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{comment}{/*\ ERROR:\ integer\ argument\ is\ not\ constant\ */}\ (expr):\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ break;\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ ;\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \}\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ stmt;\ \(\backslash\)}
\DoxyCodeLine{\}\ \textcolor{keywordflow}{while}(0)}

\end{DoxyCode}
Assert statically that expr is an integer constant expression, and run stmt.

Useful for example to enforce that magnitude arguments are constant. \index{util.h@{util.h}!CEIL\_DIV@{CEIL\_DIV}}
\index{CEIL\_DIV@{CEIL\_DIV}!util.h@{util.h}}
\doxysubsubsection{CEIL\_DIV}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_afbc3b0509e5eeaa83c581c4c3f4fda43} 
\#define CEIL\+\_\+\+DIV(\begin{DoxyParamCaption}\item[{}]{x}{, }\item[{}]{y}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{(1\ +\ ((x)\ -\/\ 1)\ /\ (y))}

\end{DoxyCode}
\index{util.h@{util.h}!CHECK@{CHECK}}
\index{CHECK@{CHECK}!util.h@{util.h}}
\doxysubsubsection{CHECK}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_aba1590ff86288c886c47dc8a27b30467} 
\#define CHECK(\begin{DoxyParamCaption}\item[{}]{cond}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{do}\ \{\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ if\ (EXPECT(!(cond),\ 0))\ \{\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ TEST\_FAILURE(\textcolor{stringliteral}{"{}test\ condition\ failed:\ "{}}\ \#cond);\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \}\ \(\backslash\)}
\DoxyCodeLine{\}\ \textcolor{keywordflow}{while}(0)}

\end{DoxyCode}
\index{util.h@{util.h}!DEBUG\_CONFIG\_DEF@{DEBUG\_CONFIG\_DEF}}
\index{DEBUG\_CONFIG\_DEF@{DEBUG\_CONFIG\_DEF}!util.h@{util.h}}
\doxysubsubsection{DEBUG\_CONFIG\_DEF}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_ae8ac11e24487a125fce4d1525e51cd64} 
\#define DEBUG\+\_\+\+CONFIG\+\_\+\+DEF(\begin{DoxyParamCaption}\item[{}]{x}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{DEBUG\_CONFIG\_MSG(\#x\ \textcolor{stringliteral}{"{}="{}}\ STR(x))}

\end{DoxyCode}
\index{util.h@{util.h}!DEBUG\_CONFIG\_MSG@{DEBUG\_CONFIG\_MSG}}
\index{DEBUG\_CONFIG\_MSG@{DEBUG\_CONFIG\_MSG}!util.h@{util.h}}
\doxysubsubsection{DEBUG\_CONFIG\_MSG}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a11ca1f826858f5f6047c4537ee7b070d} 
\#define DEBUG\+\_\+\+CONFIG\+\_\+\+MSG(\begin{DoxyParamCaption}\item[{}]{x}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{stringliteral}{"{}DEBUG\_CONFIG:\ "{}}\ x}

\end{DoxyCode}
\index{util.h@{util.h}!EXPECT@{EXPECT}}
\index{EXPECT@{EXPECT}!util.h@{util.h}}
\doxysubsubsection{EXPECT}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a76e8a689f16456e44a2cc438a6821025} 
\#define EXPECT(\begin{DoxyParamCaption}\item[{}]{x}{, }\item[{}]{c}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{(x)}

\end{DoxyCode}
\index{util.h@{util.h}!PRINT\_BUF@{PRINT\_BUF}}
\index{PRINT\_BUF@{PRINT\_BUF}!util.h@{util.h}}
\doxysubsubsection{PRINT\_BUF}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a09b4c8f7cb32ffa1a609bac908800f1b} 
\#define PRINT\+\_\+\+BUF(\begin{DoxyParamCaption}\item[{}]{buf}{, }\item[{}]{len}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{do}\ \{\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ printf(\textcolor{stringliteral}{"{}\%s[\%lu]\ =\ "{}},\ \#buf,\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long})len);\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ print\_buf\_plain(buf,\ len);\ \(\backslash\)}
\DoxyCodeLine{\}\ \textcolor{keywordflow}{while}(0)}

\end{DoxyCode}
\index{util.h@{util.h}!ROUND\_TO\_ALIGN@{ROUND\_TO\_ALIGN}}
\index{ROUND\_TO\_ALIGN@{ROUND\_TO\_ALIGN}!util.h@{util.h}}
\doxysubsubsection{ROUND\_TO\_ALIGN}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a7a45c2decf18b109c399282bb64708da} 
\#define ROUND\+\_\+\+TO\+\_\+\+ALIGN(\begin{DoxyParamCaption}\item[{}]{size}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{(CEIL\_DIV(size,\ ALIGNMENT)\ *\ ALIGNMENT)}

\end{DoxyCode}
\index{util.h@{util.h}!SECP256K1\_GNUC\_EXT@{SECP256K1\_GNUC\_EXT}}
\index{SECP256K1\_GNUC\_EXT@{SECP256K1\_GNUC\_EXT}!util.h@{util.h}}
\doxysubsubsection{SECP256K1\_GNUC\_EXT}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a5e4f61fb4fb994af091be33f413905bc} 
\#define SECP256\+K1\+\_\+\+GNUC\+\_\+\+EXT}

\index{util.h@{util.h}!SECP256K1\_INLINE@{SECP256K1\_INLINE}}
\index{SECP256K1\_INLINE@{SECP256K1\_INLINE}!util.h@{util.h}}
\doxysubsubsection{SECP256K1\_INLINE}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a7ddc487fd46aee88f21cabedb7268b1e} 
\#define SECP256\+K1\+\_\+\+INLINE}

\index{util.h@{util.h}!SECP256K1\_INT128\_STRUCT@{SECP256K1\_INT128\_STRUCT}}
\index{SECP256K1\_INT128\_STRUCT@{SECP256K1\_INT128\_STRUCT}!util.h@{util.h}}
\doxysubsubsection{SECP256K1\_INT128\_STRUCT}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a9e89757a80cb12e407507c517aaba142} 
\#define SECP256\+K1\+\_\+\+INT128\+\_\+\+STRUCT~1}

\index{util.h@{util.h}!SECP256K1\_RESTRICT@{SECP256K1\_RESTRICT}}
\index{SECP256K1\_RESTRICT@{SECP256K1\_RESTRICT}!util.h@{util.h}}
\doxysubsubsection{SECP256K1\_RESTRICT}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_ad3e284f8cb00286e85a753265f6b17b8} 
\#define SECP256\+K1\+\_\+\+RESTRICT}

\index{util.h@{util.h}!SECP256K1\_WIDEMUL\_INT128@{SECP256K1\_WIDEMUL\_INT128}}
\index{SECP256K1\_WIDEMUL\_INT128@{SECP256K1\_WIDEMUL\_INT128}!util.h@{util.h}}
\doxysubsubsection{SECP256K1\_WIDEMUL\_INT128}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a69a020c9a92aad3acd6e323dfd835dce} 
\#define SECP256\+K1\+\_\+\+WIDEMUL\+\_\+\+INT128~1}

\index{util.h@{util.h}!STATIC\_ASSERT@{STATIC\_ASSERT}}
\index{STATIC\_ASSERT@{STATIC\_ASSERT}!util.h@{util.h}}
\doxysubsubsection{STATIC\_ASSERT}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_aa7d921cda07f5efb9d08bbd36ee22f1b} 
\#define STATIC\+\_\+\+ASSERT(\begin{DoxyParamCaption}\item[{}]{expr}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{do}\ \{\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ switch(0)\ \{\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ expr\ evaluates\ to\ 0,\ we\ have\ two\ case\ labels\ "{}0"{},\ which\ is\ illegal.\ */}\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{comment}{/*\ ERROR:\ static\ assertion\ failed\ */}\ (expr):\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ;\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \}\ \(\backslash\)}
\DoxyCodeLine{\}\ \textcolor{keywordflow}{while}(0)}

\end{DoxyCode}
Assert statically that expr is true.

This is a statement-\/like macro and can only be used inside functions. \index{util.h@{util.h}!STR@{STR}}
\index{STR@{STR}!util.h@{util.h}}
\doxysubsubsection{STR}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a18d295a837ac71add5578860b55e5502} 
\#define STR(\begin{DoxyParamCaption}\item[{}]{x}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{STR\_(x)}

\end{DoxyCode}
\index{util.h@{util.h}!STR\_@{STR\_}}
\index{STR\_@{STR\_}!util.h@{util.h}}
\doxysubsubsection{STR\_}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_a0f86942485f6b615baa815a07e9819f1} 
\#define STR\+\_\+(\begin{DoxyParamCaption}\item[{}]{x}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#x}}

\end{DoxyCode}
\index{util.h@{util.h}!TEST\_FAILURE@{TEST\_FAILURE}}
\index{TEST\_FAILURE@{TEST\_FAILURE}!util.h@{util.h}}
\doxysubsubsection{TEST\_FAILURE}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_ac39417c5a18bbf27875c39fcfc8b271b} 
\#define TEST\+\_\+\+FAILURE(\begin{DoxyParamCaption}\item[{}]{msg}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{do}\ \{\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}\%s:\%d:\ \%s\(\backslash\)n"{}},\ \_\_FILE\_\_,\ \_\_LINE\_\_,\ msg);\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ abort();\ \(\backslash\)}
\DoxyCodeLine{\}\ \textcolor{keywordflow}{while}(0)}

\end{DoxyCode}
\index{util.h@{util.h}!VERIFY\_CHECK@{VERIFY\_CHECK}}
\index{VERIFY\_CHECK@{VERIFY\_CHECK}!util.h@{util.h}}
\doxysubsubsection{VERIFY\_CHECK}
{\footnotesize\ttfamily \label{secp256k1_2src_2util_8h_aca8ac5ae73fd966db106de59160a178b} 
\#define VERIFY\+\_\+\+CHECK(\begin{DoxyParamCaption}\item[{}]{cond}{}\end{DoxyParamCaption})}

