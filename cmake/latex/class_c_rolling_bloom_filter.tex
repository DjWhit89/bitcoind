\doxysection{CRolling\+Bloom\+Filter Class Reference}
\label{class_c_rolling_bloom_filter}\index{CRollingBloomFilter@{CRollingBloomFilter}}


{\ttfamily \#include $<$bloom.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ CRolling\+Bloom\+Filter} (const unsigned int n\+Elements, const double n\+FPRate)
\item 
void \textbf{ insert} (std\+::span$<$ const unsigned char $>$ v\+Key)
\item 
bool \textbf{ contains} (std\+::span$<$ const unsigned char $>$ v\+Key) const
\item 
void \textbf{ reset} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Rolling\+Bloom\+Filter is a probabilistic "{}keep track of most recently inserted"{} set. Construct it with the number of items to keep track of, and a false-\/positive rate. Unlike \doxyref{CBloom\+Filter}{p.}{class_c_bloom_filter}, by default n\+Tweak is set to a cryptographically secure random value for you. Similarly rather than \doxyref{clear()}{p.}{uint256__tests_8cpp_a4f5d99a6821ae59423c189b1f657369c} the method \doxyref{reset()}{p.}{class_c_rolling_bloom_filter_ad20897c5c8bd47f5d4005989bead0e55} is provided, which also changes n\+Tweak to decrease the impact of false-\/positives.

contains(item) will always return true if item was one of the last N to 1.\+5$\ast$N \doxyref{insert()}{p.}{class_c_rolling_bloom_filter_a0ffa34ea13dcfd2604c6611a1910ec94}\textquotesingle{}ed ... but may also return true for items that were not inserted.

It needs around 1.\+8 bytes per element per factor 0.\+1 of false positive rate. For example, if we want 1000 elements, we\textquotesingle{}d need\+:
\begin{DoxyItemize}
\item $\sim$1800 bytes for a false positive rate of 0.\+1
\item $\sim$3600 bytes for a false positive rate of 0.\+01
\item $\sim$5400 bytes for a false positive rate of 0.\+001
\end{DoxyItemize}

If we make these simplifying assumptions\+:
\begin{DoxyItemize}
\item log\+Fp\+Rate / log(0.\+5) doesn\textquotesingle{}t get rounded or clamped in the n\+Hash\+Funcs calculation
\item n\+Elements is even, so that n\+Entries\+Per\+Generation == n\+Elements / 2
\end{DoxyItemize}

Then we get a more accurate estimate for filter bytes\+: \begin{DoxyVerb}3/(log(256)*log(2)) * log(1/fpRate) * nElements
\end{DoxyVerb}
 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{CRollingBloomFilter@{CRollingBloomFilter}!CRollingBloomFilter@{CRollingBloomFilter}}
\index{CRollingBloomFilter@{CRollingBloomFilter}!CRollingBloomFilter@{CRollingBloomFilter}}
\doxysubsubsection{CRollingBloomFilter()}
{\footnotesize\ttfamily \label{class_c_rolling_bloom_filter_a7d7092efd9e788f90b4dea90eea36d19} 
\textbf{ CRolling\+Bloom\+Filter} (\begin{DoxyParamCaption}\item[{const unsigned int}]{n\+Elements}{, }\item[{const double}]{n\+FPRate}{}\end{DoxyParamCaption})}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{CRollingBloomFilter@{CRollingBloomFilter}!contains@{contains}}
\index{contains@{contains}!CRollingBloomFilter@{CRollingBloomFilter}}
\doxysubsubsection{contains()}
{\footnotesize\ttfamily \label{class_c_rolling_bloom_filter_a4aa5df3f0e22486ae74c274897b2fe33} 
bool contains (\begin{DoxyParamCaption}\item[{std\+::span$<$ const unsigned char $>$}]{v\+Key}{}\end{DoxyParamCaption}) const}

\index{CRollingBloomFilter@{CRollingBloomFilter}!insert@{insert}}
\index{insert@{insert}!CRollingBloomFilter@{CRollingBloomFilter}}
\doxysubsubsection{insert()}
{\footnotesize\ttfamily \label{class_c_rolling_bloom_filter_a0ffa34ea13dcfd2604c6611a1910ec94} 
void insert (\begin{DoxyParamCaption}\item[{std\+::span$<$ const unsigned char $>$}]{v\+Key}{}\end{DoxyParamCaption})}

\index{CRollingBloomFilter@{CRollingBloomFilter}!reset@{reset}}
\index{reset@{reset}!CRollingBloomFilter@{CRollingBloomFilter}}
\doxysubsubsection{reset()}
{\footnotesize\ttfamily \label{class_c_rolling_bloom_filter_ad20897c5c8bd47f5d4005989bead0e55} 
void reset (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/common/\textbf{ bloom.\+h}\item 
src/common/\textbf{ bloom.\+cpp}\end{DoxyCompactItemize}
