\doxysection{wallet.\+h}
\label{interfaces_2wallet_8h_source}\index{src/interfaces/wallet.h@{src/interfaces/wallet.h}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2018-\/present\ The\ Bitcoin\ Core\ developers}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Distributed\ under\ the\ MIT\ software\ license,\ see\ the\ accompanying}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ file\ COPYING\ or\ http://www.opensource.org/licenses/mit-\/license.php.}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#ifndef\ BITCOIN\_INTERFACES\_WALLET\_H}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#define\ BITCOIN\_INTERFACES\_WALLET\_H}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <addresstype.h>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <common/signmessage.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <consensus/amount.h>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <interfaces/chain.h>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <primitives/transaction\_identifier.h>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <pubkey.h>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <script/script.h>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <support/allocators/secure.h>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <util/fs.h>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <util/result.h>}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <util/ui\_change\_type.h>}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <tuple>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{class\ }CFeeRate;}
\DoxyCodeLine{00031\ \textcolor{keyword}{class\ }CKey;}
\DoxyCodeLine{00032\ \textcolor{keyword}{enum\ class}\ FeeReason;}
\DoxyCodeLine{00033\ \textcolor{keyword}{enum\ class}\ OutputType;}
\DoxyCodeLine{00034\ \textcolor{keyword}{struct\ }PartiallySignedTransaction;}
\DoxyCodeLine{00035\ \textcolor{keyword}{struct\ }bilingual\_str;}
\DoxyCodeLine{00036\ \textcolor{keyword}{namespace\ }common\ \{}
\DoxyCodeLine{00037\ \textcolor{keyword}{enum\ class}\ PSBTError;}
\DoxyCodeLine{00038\ \}\ \textcolor{comment}{//\ namespace\ common}}
\DoxyCodeLine{00039\ \textcolor{keyword}{namespace\ }node\ \{}
\DoxyCodeLine{00040\ \textcolor{keyword}{enum\ class}\ TransactionError;}
\DoxyCodeLine{00041\ \}\ \textcolor{comment}{//\ namespace\ node}}
\DoxyCodeLine{00042\ \textcolor{keyword}{namespace\ }wallet\ \{}
\DoxyCodeLine{00043\ \textcolor{keyword}{class\ }CCoinControl;}
\DoxyCodeLine{00044\ \textcolor{keyword}{class\ }CWallet;}
\DoxyCodeLine{00045\ \textcolor{keyword}{enum\ class}\ AddressPurpose;}
\DoxyCodeLine{00046\ \textcolor{keyword}{struct\ }CRecipient;}
\DoxyCodeLine{00047\ \textcolor{keyword}{struct\ }WalletContext;}
\DoxyCodeLine{00048\ \}\ \textcolor{comment}{//\ namespace\ wallet}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{namespace\ }interfaces\ \{}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{keyword}{class\ }Handler;}
\DoxyCodeLine{00053\ \textcolor{keyword}{struct\ }WalletAddress;}
\DoxyCodeLine{00054\ \textcolor{keyword}{struct\ }WalletBalances;}
\DoxyCodeLine{00055\ \textcolor{keyword}{struct\ }WalletTx;}
\DoxyCodeLine{00056\ \textcolor{keyword}{struct\ }WalletTxOut;}
\DoxyCodeLine{00057\ \textcolor{keyword}{struct\ }WalletTxStatus;}
\DoxyCodeLine{00058\ \textcolor{keyword}{struct\ }WalletMigrationResult;}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \textcolor{keyword}{using\ }WalletOrderForm\ =\ std::vector<std::pair<std::string,\ std::string>>;}
\DoxyCodeLine{00061\ \textcolor{keyword}{using\ }WalletValueMap\ =\ std::map<std::string,\ std::string>;}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00064\ \textcolor{keyword}{class\ }Wallet}
\DoxyCodeLine{00065\ \{}
\DoxyCodeLine{00066\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keyword}{virtual}\ \string~Wallet()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ encryptWallet(\textcolor{keyword}{const}\ SecureString\&\ wallet\_passphrase)\ =\ 0;}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ isCrypted()\ =\ 0;}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ lock()\ =\ 0;}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ unlock(\textcolor{keyword}{const}\ SecureString\&\ wallet\_passphrase)\ =\ 0;}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ isLocked()\ =\ 0;}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ changeWalletPassphrase(\textcolor{keyword}{const}\ SecureString\&\ old\_wallet\_passphrase,}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ SecureString\&\ new\_wallet\_passphrase)\ =\ 0;}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ abortRescan()\ =\ 0;}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ backupWallet(\textcolor{keyword}{const}\ std::string\&\ filename)\ =\ 0;}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keyword}{virtual}\ std::string\ getWalletName()\ =\ 0;}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{comment}{//\ Get\ a\ new\ address.}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keyword}{virtual}\ util::Result<CTxDestination>\ getNewDestination(\textcolor{keyword}{const}\ OutputType\ type,\ \textcolor{keyword}{const}\ std::string\&\ label)\ =\ 0;}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ getPubKey(\textcolor{keyword}{const}\ CScript\&\ script,\ \textcolor{keyword}{const}\ CKeyID\&\ address,\ CPubKey\&\ pub\_key)\ =\ 0;}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keyword}{virtual}\ SigningResult\ signMessage(\textcolor{keyword}{const}\ std::string\&\ message,\ \textcolor{keyword}{const}\ PKHash\&\ pkhash,\ std::string\&\ str\_sig)\ =\ 0;}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ isSpendable(\textcolor{keyword}{const}\ CTxDestination\&\ dest)\ =\ 0;}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ setAddressBook(\textcolor{keyword}{const}\ CTxDestination\&\ dest,\ \textcolor{keyword}{const}\ std::string\&\ name,\ \textcolor{keyword}{const}\ std::optional<wallet::AddressPurpose>\&\ purpose)\ =\ 0;}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{//\ Remove\ address.}}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ delAddressBook(\textcolor{keyword}{const}\ CTxDestination\&\ dest)\ =\ 0;}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ getAddress(\textcolor{keyword}{const}\ CTxDestination\&\ dest,}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ std::string*\ name,}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ wallet::AddressPurpose*\ purpose)\ =\ 0;}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keyword}{virtual}\ std::vector<WalletAddress>\ getAddresses()\ =\ 0;}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keyword}{virtual}\ std::vector<std::string>\ getAddressReceiveRequests()\ =\ 0;}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ setAddressReceiveRequest(\textcolor{keyword}{const}\ CTxDestination\&\ dest,\ \textcolor{keyword}{const}\ std::string\&\ \textcolor{keywordtype}{id},\ \textcolor{keyword}{const}\ std::string\&\ value)\ =\ 0;}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keyword}{virtual}\ util::Result<void>\ displayAddress(\textcolor{keyword}{const}\ CTxDestination\&\ dest)\ =\ 0;}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ lockCoin(\textcolor{keyword}{const}\ COutPoint\&\ output,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ write\_to\_db)\ =\ 0;}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ unlockCoin(\textcolor{keyword}{const}\ COutPoint\&\ output)\ =\ 0;}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ isLockedCoin(\textcolor{keyword}{const}\ COutPoint\&\ output)\ =\ 0;}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ listLockedCoins(std::vector<COutPoint>\&\ outputs)\ =\ 0;}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keyword}{virtual}\ util::Result<CTransactionRef>\ createTransaction(\textcolor{keyword}{const}\ std::vector<wallet::CRecipient>\&\ recipients,}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ wallet::CCoinControl\&\ coin\_control,}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ sign,}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\&\ change\_pos,}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ CAmount\&\ fee)\ =\ 0;}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ commitTransaction(CTransactionRef\ tx,}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ WalletValueMap\ value\_map,}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ WalletOrderForm\ order\_form)\ =\ 0;}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ transactionCanBeAbandoned(\textcolor{keyword}{const}\ Txid\&\ txid)\ =\ 0;}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ abandonTransaction(\textcolor{keyword}{const}\ Txid\&\ txid)\ =\ 0;}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ transactionCanBeBumped(\textcolor{keyword}{const}\ Txid\&\ txid)\ =\ 0;}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ createBumpTransaction(\textcolor{keyword}{const}\ Txid\&\ txid,}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ wallet::CCoinControl\&\ coin\_control,}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ std::vector<bilingual\_str>\&\ errors,}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ CAmount\&\ old\_fee,}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ CAmount\&\ new\_fee,}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ CMutableTransaction\&\ mtx)\ =\ 0;}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ signBumpTransaction(CMutableTransaction\&\ mtx)\ =\ 0;}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ commitBumpTransaction(\textcolor{keyword}{const}\ Txid\&\ txid,}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ CMutableTransaction\&\&\ mtx,}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ std::vector<bilingual\_str>\&\ errors,}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ Txid\&\ bumped\_txid)\ =\ 0;}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keyword}{virtual}\ CTransactionRef\ getTx(\textcolor{keyword}{const}\ Txid\&\ txid)\ =\ 0;}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keyword}{virtual}\ WalletTx\ getWalletTx(\textcolor{keyword}{const}\ Txid\&\ txid)\ =\ 0;}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keyword}{virtual}\ std::set<WalletTx>\ getWalletTxs()\ =\ 0;}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ tryGetTxStatus(\textcolor{keyword}{const}\ Txid\&\ txid,}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ WalletTxStatus\&\ tx\_status,}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\&\ num\_blocks,}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ int64\_t\&\ block\_time)\ =\ 0;}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keyword}{virtual}\ WalletTx\ getWalletTxDetails(\textcolor{keyword}{const}\ Txid\&\ txid,}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ WalletTxStatus\&\ tx\_status,}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ WalletOrderForm\&\ order\_form,}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\&\ in\_mempool,}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\&\ num\_blocks)\ =\ 0;}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keyword}{virtual}\ std::optional<common::PSBTError>\ fillPSBT(std::optional<int>\ sighash\_type,}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ sign,}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ bip32derivs,}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}*\ n\_signed,}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ PartiallySignedTransaction\&\ psbtx,}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\&\ complete)\ =\ 0;}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keyword}{virtual}\ WalletBalances\ getBalances()\ =\ 0;}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ tryGetBalances(WalletBalances\&\ balances,\ uint256\&\ block\_hash)\ =\ 0;}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keyword}{virtual}\ CAmount\ getBalance()\ =\ 0;}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keyword}{virtual}\ CAmount\ getAvailableBalance(\textcolor{keyword}{const}\ wallet::CCoinControl\&\ coin\_control)\ =\ 0;}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ txinIsMine(\textcolor{keyword}{const}\ CTxIn\&\ txin)\ =\ 0;}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ txoutIsMine(\textcolor{keyword}{const}\ CTxOut\&\ txout)\ =\ 0;}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keyword}{virtual}\ CAmount\ getDebit(\textcolor{keyword}{const}\ CTxIn\&\ txin)\ =\ 0;}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keyword}{virtual}\ CAmount\ getCredit(\textcolor{keyword}{const}\ CTxOut\&\ txout)\ =\ 0;}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keyword}{using\ }CoinsList\ =\ std::map<CTxDestination,\ std::vector<std::tuple<COutPoint,\ WalletTxOut>>>;}
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keyword}{virtual}\ CoinsList\ listCoins()\ =\ 0;}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{keyword}{virtual}\ std::vector<WalletTxOut>\ getCoins(\textcolor{keyword}{const}\ std::vector<COutPoint>\&\ outputs)\ =\ 0;}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keyword}{virtual}\ CAmount\ getRequiredFee(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ tx\_bytes)\ =\ 0;}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keyword}{virtual}\ CAmount\ getMinimumFee(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ tx\_bytes,}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ wallet::CCoinControl\&\ coin\_control,}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}*\ returned\_target,}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ FeeReason*\ reason)\ =\ 0;}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ getConfirmTarget()\ =\ 0;}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{comment}{//\ Return\ whether\ HD\ enabled.}}
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ hdEnabled()\ =\ 0;}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{comment}{//\ Return\ whether\ the\ wallet\ is\ blank.}}
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ canGetAddresses()\ =\ 0;}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{comment}{//\ Return\ whether\ private\ keys\ enabled.}}
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ privateKeysDisabled()\ =\ 0;}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{comment}{//\ Return\ whether\ the\ wallet\ contains\ a\ Taproot\ scriptPubKeyMan}}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ taprootEnabled()\ =\ 0;}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{comment}{//\ Return\ whether\ wallet\ uses\ an\ external\ signer.}}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ hasExternalSigner()\ =\ 0;}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{comment}{//\ Get\ default\ address\ type.}}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keyword}{virtual}\ OutputType\ getDefaultAddressType()\ =\ 0;}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keyword}{virtual}\ CAmount\ getDefaultMaxTxFee()\ =\ 0;}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{comment}{//\ Remove\ wallet.}}
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ remove()\ =\ 0;}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keyword}{using\ }UnloadFn\ =\ std::function<void()>;}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keyword}{virtual}\ std::unique\_ptr<Handler>\ handleUnload(UnloadFn\ fn)\ =\ 0;}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keyword}{using\ }ShowProgressFn\ =\ std::function<void(\textcolor{keyword}{const}\ std::string\&\ title,\ \textcolor{keywordtype}{int}\ progress)>;}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keyword}{virtual}\ std::unique\_ptr<Handler>\ handleShowProgress(ShowProgressFn\ fn)\ =\ 0;}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keyword}{using\ }StatusChangedFn\ =\ std::function<void()>;}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keyword}{virtual}\ std::unique\_ptr<Handler>\ handleStatusChanged(StatusChangedFn\ fn)\ =\ 0;}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keyword}{using\ }AddressBookChangedFn\ =\ std::function<void(\textcolor{keyword}{const}\ CTxDestination\&\ address,}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ label,}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_mine,}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ wallet::AddressPurpose\ purpose,}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ ChangeType\ status)>;}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keyword}{virtual}\ std::unique\_ptr<Handler>\ handleAddressBookChanged(AddressBookChangedFn\ fn)\ =\ 0;}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{keyword}{using\ }TransactionChangedFn\ =\ std::function<void(\textcolor{keyword}{const}\ Txid\&\ txid,\ ChangeType\ status)>;}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keyword}{virtual}\ std::unique\_ptr<Handler>\ handleTransactionChanged(TransactionChangedFn\ fn)\ =\ 0;}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00305\ \ \ \ \ \textcolor{keyword}{using\ }CanGetAddressesChangedFn\ =\ std::function<void()>;}
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{keyword}{virtual}\ std::unique\_ptr<Handler>\ handleCanGetAddressesChanged(CanGetAddressesChangedFn\ fn)\ =\ 0;}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00309\ \ \ \ \ \textcolor{keyword}{virtual}\ wallet::CWallet*\ wallet()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00310\ \};}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00315\ \textcolor{keyword}{class\ }WalletLoader\ :\ \textcolor{keyword}{public}\ ChainClient}
\DoxyCodeLine{00316\ \{}
\DoxyCodeLine{00317\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00319\ \ \ \ \ \textcolor{keyword}{virtual}\ util::Result<std::unique\_ptr<Wallet>>\ createWallet(\textcolor{keyword}{const}\ std::string\&\ name,\ \textcolor{keyword}{const}\ SecureString\&\ passphrase,\ uint64\_t\ wallet\_creation\_flags,\ std::vector<bilingual\_str>\&\ warnings)\ =\ 0;}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keyword}{virtual}\ util::Result<std::unique\_ptr<Wallet>>\ loadWallet(\textcolor{keyword}{const}\ std::string\&\ name,\ std::vector<bilingual\_str>\&\ warnings)\ =\ 0;}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keyword}{virtual}\ std::string\ getWalletDir()\ =\ 0;}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keyword}{virtual}\ util::Result<std::unique\_ptr<Wallet>>\ restoreWallet(\textcolor{keyword}{const}\ fs::path\&\ backup\_file,\ \textcolor{keyword}{const}\ std::string\&\ wallet\_name,\ std::vector<bilingual\_str>\&\ warnings,\ \textcolor{keywordtype}{bool}\ load\_after\_restore)\ =\ 0;}
\DoxyCodeLine{00329\ }
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keyword}{virtual}\ util::Result<WalletMigrationResult>\ migrateWallet(\textcolor{keyword}{const}\ std::string\&\ name,\ \textcolor{keyword}{const}\ SecureString\&\ passphrase)\ =\ 0;}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ isEncrypted(\textcolor{keyword}{const}\ std::string\&\ wallet\_name)\ =\ 0;}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{keyword}{virtual}\ std::vector<std::pair<std::string,\ std::string>>\ listWalletDir()\ =\ 0;}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{keyword}{virtual}\ std::vector<std::unique\_ptr<Wallet>>\ getWallets()\ =\ 0;}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keyword}{using\ }LoadWalletFn\ =\ std::function<void(std::unique\_ptr<Wallet>\ wallet)>;}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{keyword}{virtual}\ std::unique\_ptr<Handler>\ handleLoadWallet(LoadWalletFn\ fn)\ =\ 0;}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keyword}{virtual}\ wallet::WalletContext*\ context()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00350\ \};}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00353\ \textcolor{keyword}{struct\ }WalletAddress}
\DoxyCodeLine{00354\ \{}
\DoxyCodeLine{00355\ \ \ \ \ CTxDestination\ dest;}
\DoxyCodeLine{00356\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_mine;}
\DoxyCodeLine{00357\ \ \ \ \ wallet::AddressPurpose\ purpose;}
\DoxyCodeLine{00358\ \ \ \ \ std::string\ name;}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \ \ \ \ WalletAddress(CTxDestination\ dest,\ \textcolor{keywordtype}{bool}\ is\_mine,\ wallet::AddressPurpose\ purpose,\ std::string\ name)}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ :\ dest(std::move(dest)),\ is\_mine(is\_mine),\ purpose(std::move(purpose)),\ name(std::move(name))}
\DoxyCodeLine{00362\ \ \ \ \ \{}
\DoxyCodeLine{00363\ \ \ \ \ \}}
\DoxyCodeLine{00364\ \};}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00367\ \textcolor{keyword}{struct\ }WalletBalances}
\DoxyCodeLine{00368\ \{}
\DoxyCodeLine{00369\ \ \ \ \ CAmount\ balance\ =\ 0;}
\DoxyCodeLine{00370\ \ \ \ \ CAmount\ unconfirmed\_balance\ =\ 0;}
\DoxyCodeLine{00371\ \ \ \ \ CAmount\ immature\_balance\ =\ 0;}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keywordtype}{bool}\ balanceChanged(\textcolor{keyword}{const}\ WalletBalances\&\ prev)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00374\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ balance\ !=\ prev.balance\ ||\ unconfirmed\_balance\ !=\ prev.unconfirmed\_balance\ ||}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ immature\_balance\ !=\ prev.immature\_balance;}
\DoxyCodeLine{00377\ \ \ \ \ \}}
\DoxyCodeLine{00378\ \};}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00380\ \textcolor{comment}{//\ Wallet\ transaction\ information.}}
\DoxyCodeLine{00381\ \textcolor{keyword}{struct\ }WalletTx}
\DoxyCodeLine{00382\ \{}
\DoxyCodeLine{00383\ \ \ \ \ CTransactionRef\ tx;}
\DoxyCodeLine{00384\ \ \ \ \ std::vector<bool>\ txin\_is\_mine;}
\DoxyCodeLine{00385\ \ \ \ \ std::vector<bool>\ txout\_is\_mine;}
\DoxyCodeLine{00386\ \ \ \ \ std::vector<bool>\ txout\_is\_change;}
\DoxyCodeLine{00387\ \ \ \ \ std::vector<CTxDestination>\ txout\_address;}
\DoxyCodeLine{00388\ \ \ \ \ std::vector<bool>\ txout\_address\_is\_mine;}
\DoxyCodeLine{00389\ \ \ \ \ CAmount\ credit;}
\DoxyCodeLine{00390\ \ \ \ \ CAmount\ debit;}
\DoxyCodeLine{00391\ \ \ \ \ CAmount\ change;}
\DoxyCodeLine{00392\ \ \ \ \ int64\_t\ time;}
\DoxyCodeLine{00393\ \ \ \ \ std::map<std::string,\ std::string>\ value\_map;}
\DoxyCodeLine{00394\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_coinbase;}
\DoxyCodeLine{00395\ }
\DoxyCodeLine{00396\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator<(\textcolor{keyword}{const}\ WalletTx\&\ a)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ tx-\/>GetHash()\ <\ a.tx-\/>GetHash();\ \}}
\DoxyCodeLine{00397\ \};}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00400\ \textcolor{keyword}{struct\ }WalletTxStatus}
\DoxyCodeLine{00401\ \{}
\DoxyCodeLine{00402\ \ \ \ \ \textcolor{keywordtype}{int}\ block\_height;}
\DoxyCodeLine{00403\ \ \ \ \ \textcolor{keywordtype}{int}\ blocks\_to\_maturity;}
\DoxyCodeLine{00404\ \ \ \ \ \textcolor{keywordtype}{int}\ depth\_in\_main\_chain;}
\DoxyCodeLine{00405\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ time\_received;}
\DoxyCodeLine{00406\ \ \ \ \ uint32\_t\ lock\_time;}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_trusted;}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_abandoned;}
\DoxyCodeLine{00409\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_coinbase;}
\DoxyCodeLine{00410\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_in\_main\_chain;}
\DoxyCodeLine{00411\ \};}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00414\ \textcolor{keyword}{struct\ }WalletTxOut}
\DoxyCodeLine{00415\ \{}
\DoxyCodeLine{00416\ \ \ \ \ CTxOut\ txout;}
\DoxyCodeLine{00417\ \ \ \ \ int64\_t\ time;}
\DoxyCodeLine{00418\ \ \ \ \ \textcolor{keywordtype}{int}\ depth\_in\_main\_chain\ =\ -\/1;}
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_spent\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00420\ \};}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00423\ \textcolor{keyword}{struct\ }WalletMigrationResult}
\DoxyCodeLine{00424\ \{}
\DoxyCodeLine{00425\ \ \ \ \ std::unique\_ptr<Wallet>\ wallet;}
\DoxyCodeLine{00426\ \ \ \ \ std::optional<std::string>\ watchonly\_wallet\_name;}
\DoxyCodeLine{00427\ \ \ \ \ std::optional<std::string>\ solvables\_wallet\_name;}
\DoxyCodeLine{00428\ \ \ \ \ fs::path\ backup\_path;}
\DoxyCodeLine{00429\ \};}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00433\ std::unique\_ptr<Wallet>\ MakeWallet(wallet::WalletContext\&\ context,\ \textcolor{keyword}{const}\ std::shared\_ptr<wallet::CWallet>\&\ wallet);}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00437\ std::unique\_ptr<WalletLoader>\ MakeWalletLoader(Chain\&\ chain,\ ArgsManager\&\ args);}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00439\ \}\ \textcolor{comment}{//\ namespace\ interfaces}}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00441\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ BITCOIN\_INTERFACES\_WALLET\_H}}

\end{DoxyCode}
