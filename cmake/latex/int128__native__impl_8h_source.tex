\doxysection{int128\+\_\+native\+\_\+impl.\+h}
\label{int128__native__impl_8h_source}\index{src/secp256k1/src/int128\_native\_impl.h@{src/secp256k1/src/int128\_native\_impl.h}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ SECP256K1\_INT128\_NATIVE\_IMPL\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ SECP256K1\_INT128\_NATIVE\_IMPL\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}int128.h"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}util.h"{}}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_u128\_load(secp256k1\_uint128\ *r,\ uint64\_t\ hi,\ uint64\_t\ lo)\ \{}
\DoxyCodeLine{00008\ \ \ \ \ *r\ =\ (((uint128\_t)hi)\ <<\ 64)\ +\ lo;}
\DoxyCodeLine{00009\ \}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_u128\_mul(secp256k1\_uint128\ *r,\ uint64\_t\ a,\ uint64\_t\ b)\ \{}
\DoxyCodeLine{00012\ \ \ \ *r\ =\ (uint128\_t)a\ *\ b;}
\DoxyCodeLine{00013\ \}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_u128\_accum\_mul(secp256k1\_uint128\ *r,\ uint64\_t\ a,\ uint64\_t\ b)\ \{}
\DoxyCodeLine{00016\ \ \ \ *r\ +=\ (uint128\_t)a\ *\ b;}
\DoxyCodeLine{00017\ \}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_u128\_accum\_u64(secp256k1\_uint128\ *r,\ uint64\_t\ a)\ \{}
\DoxyCodeLine{00020\ \ \ \ *r\ +=\ a;}
\DoxyCodeLine{00021\ \}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_u128\_rshift(secp256k1\_uint128\ *r,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ n)\ \{}
\DoxyCodeLine{00024\ \ \ \ VERIFY\_CHECK(n\ <\ 128);}
\DoxyCodeLine{00025\ \ \ \ *r\ >>=\ n;}
\DoxyCodeLine{00026\ \}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ uint64\_t\ secp256k1\_u128\_to\_u64(\textcolor{keyword}{const}\ secp256k1\_uint128\ *a)\ \{}
\DoxyCodeLine{00029\ \ \ \ \textcolor{keywordflow}{return}\ (uint64\_t)(*a);}
\DoxyCodeLine{00030\ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ uint64\_t\ secp256k1\_u128\_hi\_u64(\textcolor{keyword}{const}\ secp256k1\_uint128\ *a)\ \{}
\DoxyCodeLine{00033\ \ \ \ \textcolor{keywordflow}{return}\ (uint64\_t)(*a\ >>\ 64);}
\DoxyCodeLine{00034\ \}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_u128\_from\_u64(secp256k1\_uint128\ *r,\ uint64\_t\ a)\ \{}
\DoxyCodeLine{00037\ \ \ \ *r\ =\ a;}
\DoxyCodeLine{00038\ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{int}\ secp256k1\_u128\_check\_bits(\textcolor{keyword}{const}\ secp256k1\_uint128\ *r,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ n)\ \{}
\DoxyCodeLine{00041\ \ \ \ VERIFY\_CHECK(n\ <\ 128);}
\DoxyCodeLine{00042\ \ \ \ \textcolor{keywordflow}{return}\ (*r\ >>\ n\ ==\ 0);}
\DoxyCodeLine{00043\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_i128\_load(secp256k1\_int128\ *r,\ int64\_t\ hi,\ uint64\_t\ lo)\ \{}
\DoxyCodeLine{00046\ \ \ \ \ *r\ =\ (((uint128\_t)(uint64\_t)hi)\ <<\ 64)\ +\ lo;}
\DoxyCodeLine{00047\ \}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_i128\_mul(secp256k1\_int128\ *r,\ int64\_t\ a,\ int64\_t\ b)\ \{}
\DoxyCodeLine{00050\ \ \ \ *r\ =\ (int128\_t)a\ *\ b;}
\DoxyCodeLine{00051\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_i128\_accum\_mul(secp256k1\_int128\ *r,\ int64\_t\ a,\ int64\_t\ b)\ \{}
\DoxyCodeLine{00054\ \ \ \ int128\_t\ ab\ =\ (int128\_t)a\ *\ b;}
\DoxyCodeLine{00055\ \ \ \ VERIFY\_CHECK(0\ <=\ ab\ ?\ *r\ <=\ INT128\_MAX\ -\/\ ab\ :\ INT128\_MIN\ -\/\ ab\ <=\ *r);}
\DoxyCodeLine{00056\ \ \ \ *r\ +=\ ab;}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_i128\_det(secp256k1\_int128\ *r,\ int64\_t\ a,\ int64\_t\ b,\ int64\_t\ c,\ int64\_t\ d)\ \{}
\DoxyCodeLine{00060\ \ \ \ int128\_t\ ad\ =\ (int128\_t)a\ *\ d;}
\DoxyCodeLine{00061\ \ \ \ int128\_t\ bc\ =\ (int128\_t)b\ *\ c;}
\DoxyCodeLine{00062\ \ \ \ VERIFY\_CHECK(0\ <=\ bc\ ?\ INT128\_MIN\ +\ bc\ <=\ ad\ :\ ad\ <=\ INT128\_MAX\ +\ bc);}
\DoxyCodeLine{00063\ \ \ \ *r\ =\ ad\ -\/\ bc;}
\DoxyCodeLine{00064\ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_i128\_rshift(secp256k1\_int128\ *r,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ n)\ \{}
\DoxyCodeLine{00067\ \ \ \ VERIFY\_CHECK(n\ <\ 128);}
\DoxyCodeLine{00068\ \ \ \ *r\ >>=\ n;}
\DoxyCodeLine{00069\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ uint64\_t\ secp256k1\_i128\_to\_u64(\textcolor{keyword}{const}\ secp256k1\_int128\ *a)\ \{}
\DoxyCodeLine{00072\ \ \ \ \textcolor{keywordflow}{return}\ (uint64\_t)*a;}
\DoxyCodeLine{00073\ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ int64\_t\ secp256k1\_i128\_to\_i64(\textcolor{keyword}{const}\ secp256k1\_int128\ *a)\ \{}
\DoxyCodeLine{00076\ \ \ \ VERIFY\_CHECK(INT64\_MIN\ <=\ *a\ \&\&\ *a\ <=\ INT64\_MAX);}
\DoxyCodeLine{00077\ \ \ \ \textcolor{keywordflow}{return}\ *a;}
\DoxyCodeLine{00078\ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{void}\ secp256k1\_i128\_from\_i64(secp256k1\_int128\ *r,\ int64\_t\ a)\ \{}
\DoxyCodeLine{00081\ \ \ \ *r\ =\ a;}
\DoxyCodeLine{00082\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{int}\ secp256k1\_i128\_eq\_var(\textcolor{keyword}{const}\ secp256k1\_int128\ *a,\ \textcolor{keyword}{const}\ secp256k1\_int128\ *b)\ \{}
\DoxyCodeLine{00085\ \ \ \ \textcolor{keywordflow}{return}\ *a\ ==\ *b;}
\DoxyCodeLine{00086\ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{keyword}{static}\ SECP256K1\_INLINE\ \textcolor{keywordtype}{int}\ secp256k1\_i128\_check\_pow2(\textcolor{keyword}{const}\ secp256k1\_int128\ *r,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ sign)\ \{}
\DoxyCodeLine{00089\ \ \ \ VERIFY\_CHECK(n\ <\ 127);}
\DoxyCodeLine{00090\ \ \ \ VERIFY\_CHECK(sign\ ==\ 1\ ||\ sign\ ==\ -\/1);}
\DoxyCodeLine{00091\ \ \ \ \textcolor{keywordflow}{return}\ (*r\ ==\ (int128\_t)((uint128\_t)sign\ <<\ n));}
\DoxyCodeLine{00092\ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
