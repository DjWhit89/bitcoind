\doxysection{src/rpc/request.cpp File Reference}
\label{request_8cpp}\index{src/rpc/request.cpp@{src/rpc/request.cpp}}
{\ttfamily \#include $<$rpc/request.\+h$>$}\newline
{\ttfamily \#include $<$common/args.\+h$>$}\newline
{\ttfamily \#include $<$logging.\+h$>$}\newline
{\ttfamily \#include $<$random.\+h$>$}\newline
{\ttfamily \#include $<$rpc/protocol.\+h$>$}\newline
{\ttfamily \#include $<$util/fs.\+h$>$}\newline
{\ttfamily \#include $<$util/fs\+\_\+helpers.\+h$>$}\newline
{\ttfamily \#include $<$util/strencodings.\+h$>$}\newline
{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include $<$stdexcept$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Uni\+Value} \textbf{ JSONRPCRequest\+Obj} (const std\+::string \&str\+Method, const \textbf{ Uni\+Value} \&params, const \textbf{ Uni\+Value} \&id)
\item 
\textbf{ Uni\+Value} \textbf{ JSONRPCReply\+Obj} (\textbf{ Uni\+Value} result, \textbf{ Uni\+Value} error, std\+::optional$<$ \textbf{ Uni\+Value} $>$ id, \textbf{ JSONRPCVersion} jsonrpc\+\_\+version)
\item 
\textbf{ Uni\+Value} \textbf{ JSONRPCError} (int code, const std\+::string \&message)
\item 
\textbf{ Generate\+Auth\+Cookie\+Result} \textbf{ Generate\+Auth\+Cookie} (const std\+::optional$<$ fs\+::perms $>$ \&cookie\+\_\+perms, std\+::string \&user, std\+::string \&pass)
\item 
bool \textbf{ Get\+Auth\+Cookie} (std\+::string $\ast$cookie\+\_\+out)
\item 
void \textbf{ Delete\+Auth\+Cookie} ()
\item 
std\+::vector$<$ \textbf{ Uni\+Value} $>$ \textbf{ JSONRPCProcess\+Batch\+Reply} (const \textbf{ Uni\+Value} \&in)
\end{DoxyCompactItemize}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{request.cpp@{request.cpp}!DeleteAuthCookie@{DeleteAuthCookie}}
\index{DeleteAuthCookie@{DeleteAuthCookie}!request.cpp@{request.cpp}}
\doxysubsubsection{DeleteAuthCookie()}
{\footnotesize\ttfamily \label{request_8cpp_a9807259ee7b7c4f5445cf54fd23589cb} 
void Delete\+Auth\+Cookie (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Delete RPC authentication cookie from disk \index{request.cpp@{request.cpp}!GenerateAuthCookie@{GenerateAuthCookie}}
\index{GenerateAuthCookie@{GenerateAuthCookie}!request.cpp@{request.cpp}}
\doxysubsubsection{GenerateAuthCookie()}
{\footnotesize\ttfamily \label{request_8cpp_a005251add6b8b37a1935dfea3967aa76} 
\textbf{ Generate\+Auth\+Cookie\+Result} Generate\+Auth\+Cookie (\begin{DoxyParamCaption}\item[{const std\+::optional$<$ fs\+::perms $>$ \&}]{cookie\+\_\+perms}{, }\item[{std\+::string \&}]{user}{, }\item[{std\+::string \&}]{pass}{}\end{DoxyParamCaption})}

Generate a new RPC authentication cookie and write it to disk 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em cookie\+\_\+perms} & Filesystem permissions to use for the cookie file. \\
\hline
\mbox{\texttt{out}}  & {\em user} & Generated username, only set if {\ttfamily OK} is returned. \\
\hline
\mbox{\texttt{out}}  & {\em pass} & Generated password, only set if {\ttfamily OK} is returned. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em \doxyref{Generate\+Auth\+Cookie\+Result\+::\+DISABLED}{p.}{request_8h_a6eb6b7c13b727f5a5b3b535313661517a055c1a591abb0e8cd86dc969727bcc0b}} & Authentication via cookie is disabled. \\
\hline
{\em Generate\+Auth\+Cookie\+Result\+::\+ERROR} & Error occurred, auth data could not be saved to disk. \\
\hline
{\em \doxyref{Generate\+Auth\+Cookie\+Result\+::\+OK}{p.}{request_8h_a6eb6b7c13b727f5a5b3b535313661517ae0aa021e21dddbd6d8cecec71e9cf564}} & Auth data was generated, saved to disk and in {\ttfamily user} and {\ttfamily pass}. \\
\hline
\end{DoxyRetVals}
the umask determines what permissions are used to create this file -\/ these are set to 0077 in \doxyref{common/system.\+cpp}{p.}{common_2system_8cpp}.\index{request.cpp@{request.cpp}!GetAuthCookie@{GetAuthCookie}}
\index{GetAuthCookie@{GetAuthCookie}!request.cpp@{request.cpp}}
\doxysubsubsection{GetAuthCookie()}
{\footnotesize\ttfamily \label{request_8cpp_a25c502e3691e714e8a130c2325d40d63} 
bool Get\+Auth\+Cookie (\begin{DoxyParamCaption}\item[{std\+::string $\ast$}]{cookie\+\_\+out}{}\end{DoxyParamCaption})}

Read the RPC authentication cookie from disk \index{request.cpp@{request.cpp}!JSONRPCError@{JSONRPCError}}
\index{JSONRPCError@{JSONRPCError}!request.cpp@{request.cpp}}
\doxysubsubsection{JSONRPCError()}
{\footnotesize\ttfamily \label{request_8cpp_a40b75d3d265c4a2e1d5fe3e129743884} 
\textbf{ Uni\+Value} JSONRPCError (\begin{DoxyParamCaption}\item[{int}]{code}{, }\item[{const std\+::string \&}]{message}{}\end{DoxyParamCaption})}

\index{request.cpp@{request.cpp}!JSONRPCProcessBatchReply@{JSONRPCProcessBatchReply}}
\index{JSONRPCProcessBatchReply@{JSONRPCProcessBatchReply}!request.cpp@{request.cpp}}
\doxysubsubsection{JSONRPCProcessBatchReply()}
{\footnotesize\ttfamily \label{request_8cpp_a05724b070606ec86736bdae1d2de7b3d} 
std\+::vector$<$ \textbf{ Uni\+Value} $>$ JSONRPCProcess\+Batch\+Reply (\begin{DoxyParamCaption}\item[{const \textbf{ Uni\+Value} \&}]{in}{}\end{DoxyParamCaption})}

Parse JSON-\/\+RPC batch reply into a vector \index{request.cpp@{request.cpp}!JSONRPCReplyObj@{JSONRPCReplyObj}}
\index{JSONRPCReplyObj@{JSONRPCReplyObj}!request.cpp@{request.cpp}}
\doxysubsubsection{JSONRPCReplyObj()}
{\footnotesize\ttfamily \label{request_8cpp_a7a5efbb94e314c4adebd44863536c016} 
\textbf{ Uni\+Value} JSONRPCReply\+Obj (\begin{DoxyParamCaption}\item[{\textbf{ Uni\+Value}}]{result}{, }\item[{\textbf{ Uni\+Value}}]{error}{, }\item[{std\+::optional$<$ \textbf{ Uni\+Value} $>$}]{id}{, }\item[{\textbf{ JSONRPCVersion}}]{jsonrpc\+\_\+version}{}\end{DoxyParamCaption})}

\index{request.cpp@{request.cpp}!JSONRPCRequestObj@{JSONRPCRequestObj}}
\index{JSONRPCRequestObj@{JSONRPCRequestObj}!request.cpp@{request.cpp}}
\doxysubsubsection{JSONRPCRequestObj()}
{\footnotesize\ttfamily \label{request_8cpp_a3adfee54547442fb913d3bd8269a0a49} 
\textbf{ Uni\+Value} JSONRPCRequest\+Obj (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{str\+Method}{, }\item[{const \textbf{ Uni\+Value} \&}]{params}{, }\item[{const \textbf{ Uni\+Value} \&}]{id}{}\end{DoxyParamCaption})}

JSON-\/\+RPC protocol. Bitcoin speaks version 1.\+0 for maximum compatibility, but uses JSON-\/\+RPC 1.\+1/2.0 standards for parts of the 1.\+0 standard that were unspecified (HTTP errors and contents of \textquotesingle{}error\textquotesingle{}).

1.\+0 spec\+: {\texttt{https\+://www.\+jsonrpc.\+org/specification\+\_\+v1}} 1.\+2 spec\+: {\texttt{https\+://jsonrpc.\+org/historical/json-\/rpc-\/over-\/http.\+html}}

If the server receives a request with the JSON-\/\+RPC 2.\+0 marker {\ttfamily \{"{}jsonrpc"{}\+: "{}2.\+0"{}\}} then Bitcoin will respond with a strictly specified response. It will only return an HTTP error code if an actual HTTP error is encountered such as the endpoint is not found (404) or the request is not formatted correctly (500). Otherwise the HTTP code is always OK (200) and RPC errors will be included in the response body.

2.\+0 spec\+: {\texttt{https\+://www.\+jsonrpc.\+org/specification}}

Also see {\texttt{https\+://www.\+simple-\/is-\/better.\+org/rpc/\#differences-\/between-\/1-\/0-\/and-\/2-\/0}} 