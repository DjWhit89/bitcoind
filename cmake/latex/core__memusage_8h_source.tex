\doxysection{core\+\_\+memusage.\+h}
\label{core__memusage_8h_source}\index{src/core\_memusage.h@{src/core\_memusage.h}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2015-\/present\ The\ Bitcoin\ Core\ developers}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Distributed\ under\ the\ MIT\ software\ license,\ see\ the\ accompanying}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ file\ COPYING\ or\ http://www.opensource.org/licenses/mit-\/license.php.}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#ifndef\ BITCOIN\_CORE\_MEMUSAGE\_H}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#define\ BITCOIN\_CORE\_MEMUSAGE\_H}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <primitives/transaction.h>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <primitives/block.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <memusage.h>}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ RecursiveDynamicUsage(\textcolor{keyword}{const}\ CScript\&\ script)\ \{}
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{keywordflow}{return}\ memusage::DynamicUsage(script);}
\DoxyCodeLine{00014\ \}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ RecursiveDynamicUsage(\textcolor{keyword}{const}\ COutPoint\&\ out)\ \{}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00018\ \}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ RecursiveDynamicUsage(\textcolor{keyword}{const}\ CTxIn\&\ in)\ \{}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ mem\ =\ RecursiveDynamicUsage(in.scriptSig)\ +\ RecursiveDynamicUsage(in.prevout)\ +\ memusage::DynamicUsage(in.scriptWitness.stack);}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordflow}{for}\ (std::vector<std::vector<unsigned\ char>\ >::const\_iterator\ it\ =\ in.scriptWitness.stack.begin();\ it\ !=\ in.scriptWitness.stack.end();\ it++)\ \{}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \ mem\ +=\ memusage::DynamicUsage(*it);}
\DoxyCodeLine{00024\ \ \ \ \ \}}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordflow}{return}\ mem;}
\DoxyCodeLine{00026\ \}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ RecursiveDynamicUsage(\textcolor{keyword}{const}\ CTxOut\&\ out)\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordflow}{return}\ RecursiveDynamicUsage(out.scriptPubKey);}
\DoxyCodeLine{00030\ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ RecursiveDynamicUsage(\textcolor{keyword}{const}\ CTransaction\&\ tx)\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ mem\ =\ memusage::DynamicUsage(tx.vin)\ +\ memusage::DynamicUsage(tx.vout);}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordflow}{for}\ (std::vector<CTxIn>::const\_iterator\ it\ =\ tx.vin.begin();\ it\ !=\ tx.vin.end();\ it++)\ \{}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ mem\ +=\ RecursiveDynamicUsage(*it);}
\DoxyCodeLine{00036\ \ \ \ \ \}}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordflow}{for}\ (std::vector<CTxOut>::const\_iterator\ it\ =\ tx.vout.begin();\ it\ !=\ tx.vout.end();\ it++)\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ mem\ +=\ RecursiveDynamicUsage(*it);}
\DoxyCodeLine{00039\ \ \ \ \ \}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordflow}{return}\ mem;}
\DoxyCodeLine{00041\ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ RecursiveDynamicUsage(\textcolor{keyword}{const}\ CMutableTransaction\&\ tx)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ mem\ =\ memusage::DynamicUsage(tx.vin)\ +\ memusage::DynamicUsage(tx.vout);}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordflow}{for}\ (std::vector<CTxIn>::const\_iterator\ it\ =\ tx.vin.begin();\ it\ !=\ tx.vin.end();\ it++)\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ mem\ +=\ RecursiveDynamicUsage(*it);}
\DoxyCodeLine{00047\ \ \ \ \ \}}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordflow}{for}\ (std::vector<CTxOut>::const\_iterator\ it\ =\ tx.vout.begin();\ it\ !=\ tx.vout.end();\ it++)\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ mem\ +=\ RecursiveDynamicUsage(*it);}
\DoxyCodeLine{00050\ \ \ \ \ \}}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{return}\ mem;}
\DoxyCodeLine{00052\ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ RecursiveDynamicUsage(\textcolor{keyword}{const}\ CBlock\&\ block)\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ mem\ =\ memusage::DynamicUsage(block.vtx);}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ tx\ :\ block.vtx)\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ mem\ +=\ memusage::DynamicUsage(tx)\ +\ RecursiveDynamicUsage(*tx);}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordflow}{return}\ mem;}
\DoxyCodeLine{00060\ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ RecursiveDynamicUsage(\textcolor{keyword}{const}\ CBlockLocator\&\ locator)\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordflow}{return}\ memusage::DynamicUsage(locator.vHave);}
\DoxyCodeLine{00064\ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ X>}
\DoxyCodeLine{00067\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ RecursiveDynamicUsage(\textcolor{keyword}{const}\ std::shared\_ptr<X>\&\ p)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{return}\ p\ ?\ memusage::DynamicUsage(p)\ +\ RecursiveDynamicUsage(*p)\ :\ 0;}
\DoxyCodeLine{00069\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ BITCOIN\_CORE\_MEMUSAGE\_H}}

\end{DoxyCode}
