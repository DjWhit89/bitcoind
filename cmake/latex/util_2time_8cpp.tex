\doxysection{src/util/time.cpp File Reference}
\label{util_2time_8cpp}\index{src/util/time.cpp@{src/util/time.cpp}}
{\ttfamily \#include $<$util/time.\+h$>$}\newline
{\ttfamily \#include $<$compat/compat.\+h$>$}\newline
{\ttfamily \#include $<$tinyformat.\+h$>$}\newline
{\ttfamily \#include $<$util/check.\+h$>$}\newline
{\ttfamily \#include $<$util/strencodings.\+h$>$}\newline
{\ttfamily \#include $<$atomic$>$}\newline
{\ttfamily \#include $<$chrono$>$}\newline
{\ttfamily \#include $<$optional$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$string\+\_\+view$>$}\newline
{\ttfamily \#include $<$thread$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \textbf{ Uninterruptible\+Sleep} (const std\+::chrono\+::microseconds \&n)
\item 
void \textbf{ Set\+Mock\+Time} (int64\+\_\+t n\+Mock\+Time\+In)
\item 
void \textbf{ Set\+Mock\+Time} (std\+::chrono\+::time\+\_\+point$<$ \textbf{ Node\+Clock}, std\+::chrono\+::seconds $>$ mock)
\item 
void \textbf{ Set\+Mock\+Time} (std\+::chrono\+::seconds mock\+\_\+time\+\_\+in)
\item 
std\+::chrono\+::seconds \textbf{ Get\+Mock\+Time} ()
\item 
int64\+\_\+t \textbf{ Get\+Time} ()
\item 
std\+::string \textbf{ Format\+ISO8601\+Date\+Time} (int64\+\_\+t n\+Time)
\item 
std\+::string \textbf{ Format\+ISO8601\+Date} (int64\+\_\+t n\+Time)
\item 
std\+::optional$<$ int64\+\_\+t $>$ \textbf{ Parse\+ISO8601\+Date\+Time} (std\+::string\+\_\+view str)
\item 
struct timeval \textbf{ Millis\+To\+Timeval} (int64\+\_\+t n\+Timeout)
\item 
struct timeval \textbf{ Millis\+To\+Timeval} (std\+::chrono\+::milliseconds ms)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
std\+::atomic$<$ bool $>$ \textbf{ g\+\_\+used\+\_\+system\+\_\+time} \{false\}
\end{DoxyCompactItemize}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{time.cpp@{time.cpp}!FormatISO8601Date@{FormatISO8601Date}}
\index{FormatISO8601Date@{FormatISO8601Date}!time.cpp@{time.cpp}}
\doxysubsubsection{FormatISO8601Date()}
{\footnotesize\ttfamily \label{util_2time_8cpp_a62628b3489284ec2c591d7969919de91} 
std\+::string Format\+ISO8601\+Date (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{n\+Time}{}\end{DoxyParamCaption})}

\index{time.cpp@{time.cpp}!FormatISO8601DateTime@{FormatISO8601DateTime}}
\index{FormatISO8601DateTime@{FormatISO8601DateTime}!time.cpp@{time.cpp}}
\doxysubsubsection{FormatISO8601DateTime()}
{\footnotesize\ttfamily \label{util_2time_8cpp_ae5186b218f085a0a48b08bcdb0fffed1} 
std\+::string Format\+ISO8601\+Date\+Time (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{n\+Time}{}\end{DoxyParamCaption})}

ISO 8601 formatting is preferred. Use the Format\+ISO8601\{Date\+Time,Date\} helper functions if possible. \index{time.cpp@{time.cpp}!GetMockTime@{GetMockTime}}
\index{GetMockTime@{GetMockTime}!time.cpp@{time.cpp}}
\doxysubsubsection{GetMockTime()}
{\footnotesize\ttfamily \label{util_2time_8cpp_a4034add14f1926f904d6d58b5fe48c7f} 
std\+::chrono\+::seconds Get\+Mock\+Time (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

For testing \index{time.cpp@{time.cpp}!GetTime@{GetTime}}
\index{GetTime@{GetTime}!time.cpp@{time.cpp}}
\doxysubsubsection{GetTime()}
{\footnotesize\ttfamily \label{util_2time_8cpp_a46fac5fba8ba905b5f9acb364f5d8c6f} 
int64\+\_\+t Get\+Time (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

DEPRECATED Use either Clock\+Type\+::now() or \doxyref{Now$<$\+Time\+Point\+Type$>$()}{p.}{util_2time_8h_a7a4e7e09a41ff922cf1eb6fdaae4b3ba} if a cast is needed. Clock\+Type is
\begin{DoxyItemize}
\item Steady\+Clock/std\+::chrono\+::steady\+\_\+clock for steady time
\item System\+Clock/std\+::chrono\+::system\+\_\+clock for system time
\item \doxyref{Node\+Clock}{p.}{struct_node_clock} for mockable system time 
\end{DoxyItemize}\index{time.cpp@{time.cpp}!MillisToTimeval@{MillisToTimeval}}
\index{MillisToTimeval@{MillisToTimeval}!time.cpp@{time.cpp}}
\doxysubsubsection{MillisToTimeval()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{util_2time_8cpp_a0813a315d41aebd2edea6c4298b90a37} 
struct timeval Millis\+To\+Timeval (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{n\+Timeout}{}\end{DoxyParamCaption})}

Convert milliseconds to a struct timeval for e.\+g. select. \index{time.cpp@{time.cpp}!MillisToTimeval@{MillisToTimeval}}
\index{MillisToTimeval@{MillisToTimeval}!time.cpp@{time.cpp}}
\doxysubsubsection{MillisToTimeval()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{util_2time_8cpp_a1027e937d2f5de88a4a10972242629ae} 
struct timeval Millis\+To\+Timeval (\begin{DoxyParamCaption}\item[{std\+::chrono\+::milliseconds}]{ms}{}\end{DoxyParamCaption})}

Convert milliseconds to a struct timeval for e.\+g. select. \index{time.cpp@{time.cpp}!ParseISO8601DateTime@{ParseISO8601DateTime}}
\index{ParseISO8601DateTime@{ParseISO8601DateTime}!time.cpp@{time.cpp}}
\doxysubsubsection{ParseISO8601DateTime()}
{\footnotesize\ttfamily \label{util_2time_8cpp_aac5c395bc006aa60b1c964adcad94f9a} 
std\+::optional$<$ int64\+\_\+t $>$ Parse\+ISO8601\+Date\+Time (\begin{DoxyParamCaption}\item[{std\+::string\+\_\+view}]{str}{}\end{DoxyParamCaption})}

\index{time.cpp@{time.cpp}!SetMockTime@{SetMockTime}}
\index{SetMockTime@{SetMockTime}!time.cpp@{time.cpp}}
\doxysubsubsection{SetMockTime()\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily \label{util_2time_8cpp_a79d4c36b511d6690ab0bbde0e0da9251} 
void Set\+Mock\+Time (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{n\+Mock\+Time\+In}{}\end{DoxyParamCaption})}

DEPRECATED Use Set\+Mock\+Time with chrono type


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em n\+Mock\+Time\+In} & Time in seconds. \\
\hline
\end{DoxyParams}
\index{time.cpp@{time.cpp}!SetMockTime@{SetMockTime}}
\index{SetMockTime@{SetMockTime}!time.cpp@{time.cpp}}
\doxysubsubsection{SetMockTime()\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily \label{util_2time_8cpp_ab79952573d52a79bbeaa17d26033261b} 
void Set\+Mock\+Time (\begin{DoxyParamCaption}\item[{std\+::chrono\+::seconds}]{mock\+\_\+time\+\_\+in}{}\end{DoxyParamCaption})}

For testing. Set e.\+g. with the setmocktime rpc, or -\/mocktime argument \index{time.cpp@{time.cpp}!SetMockTime@{SetMockTime}}
\index{SetMockTime@{SetMockTime}!time.cpp@{time.cpp}}
\doxysubsubsection{SetMockTime()\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily \label{util_2time_8cpp_a27a256d0e07eefa559640c2709448e19} 
void Set\+Mock\+Time (\begin{DoxyParamCaption}\item[{std\+::chrono\+::time\+\_\+point$<$ \textbf{ Node\+Clock}, std\+::chrono\+::seconds $>$}]{mock}{}\end{DoxyParamCaption})}

\index{time.cpp@{time.cpp}!UninterruptibleSleep@{UninterruptibleSleep}}
\index{UninterruptibleSleep@{UninterruptibleSleep}!time.cpp@{time.cpp}}
\doxysubsubsection{UninterruptibleSleep()}
{\footnotesize\ttfamily \label{util_2time_8cpp_a31a1bae0d4cc067165c23c609f2c37ee} 
void Uninterruptible\+Sleep (\begin{DoxyParamCaption}\item[{const std\+::chrono\+::microseconds \&}]{n}{}\end{DoxyParamCaption})}



\label{doc-var-members}
\doxysubsection{Variable Documentation}
\index{time.cpp@{time.cpp}!g\_used\_system\_time@{g\_used\_system\_time}}
\index{g\_used\_system\_time@{g\_used\_system\_time}!time.cpp@{time.cpp}}
\doxysubsubsection{g\_used\_system\_time}
{\footnotesize\ttfamily \label{util_2time_8cpp_af98971d530f2f4f1246c8b8871659d88} 
std\+::atomic$<$bool$>$ g\+\_\+used\+\_\+system\+\_\+time \{false\}}

