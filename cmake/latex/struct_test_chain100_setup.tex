\doxysection{Test\+Chain100\+Setup Struct Reference}
\label{struct_test_chain100_setup}\index{TestChain100Setup@{TestChain100Setup}}


{\ttfamily \#include $<$setup\+\_\+common.\+h$>$}

Inheritance diagram for Test\+Chain100\+Setup\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.050109cm]{struct_test_chain100_setup}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Test\+Chain100\+Setup} (const \textbf{ Chain\+Type} chain\+\_\+type=\textbf{ Chain\+Type\+::\+REGTEST}, \textbf{ Test\+Opts}=\{\})
\item 
\textbf{ CBlock} \textbf{ Create\+And\+Process\+Block} (const std\+::vector$<$ \textbf{ CMutable\+Transaction} $>$ \&txns, const \textbf{ CScript} \&script\+Pub\+Key, \textbf{ Chainstate} $\ast$chainstate=nullptr)
\item 
\textbf{ CBlock} \textbf{ Create\+Block} (const std\+::vector$<$ \textbf{ CMutable\+Transaction} $>$ \&txns, const \textbf{ CScript} \&script\+Pub\+Key, \textbf{ Chainstate} \&chainstate)
\item 
void \textbf{ mine\+Blocks} (int num\+\_\+blocks)
\begin{DoxyCompactList}\small\item\em Mine a series of new blocks on the active chain. \end{DoxyCompactList}\item 
std\+::pair$<$ \textbf{ CMutable\+Transaction}, \textbf{ CAmount} $>$ \textbf{ Create\+Valid\+Transaction} (const std\+::vector$<$ \textbf{ CTransaction\+Ref} $>$ \&input\+\_\+transactions, const std\+::vector$<$ \textbf{ COut\+Point} $>$ \&inputs, int input\+\_\+height, const std\+::vector$<$ \textbf{ CKey} $>$ \&input\+\_\+signing\+\_\+keys, const std\+::vector$<$ \textbf{ CTx\+Out} $>$ \&outputs, const std\+::optional$<$ \textbf{ CFee\+Rate} $>$ \&feerate, const std\+::optional$<$ uint32\+\_\+t $>$ \&fee\+\_\+output)
\item 
\textbf{ CMutable\+Transaction} \textbf{ Create\+Valid\+Mempool\+Transaction} (const std\+::vector$<$ \textbf{ CTransaction\+Ref} $>$ \&input\+\_\+transactions, const std\+::vector$<$ \textbf{ COut\+Point} $>$ \&inputs, int input\+\_\+height, const std\+::vector$<$ \textbf{ CKey} $>$ \&input\+\_\+signing\+\_\+keys, const std\+::vector$<$ \textbf{ CTx\+Out} $>$ \&outputs, bool submit=true)
\item 
\textbf{ CMutable\+Transaction} \textbf{ Create\+Valid\+Mempool\+Transaction} (\textbf{ CTransaction\+Ref} input\+\_\+transaction, uint32\+\_\+t input\+\_\+vout, int input\+\_\+height, \textbf{ CKey} input\+\_\+signing\+\_\+key, \textbf{ CScript} output\+\_\+destination, \textbf{ CAmount} output\+\_\+amount=\textbf{ CAmount}(1 $\ast$COIN), bool submit=true)
\item 
std\+::vector$<$ \textbf{ CTransaction\+Ref} $>$ \textbf{ Populate\+Mempool} (\textbf{ Fast\+Random\+Context} \&det\+\_\+rand, size\+\_\+t num\+\_\+transactions, bool submit)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ Testing\+Setup}}
\begin{DoxyCompactItemize}
\item 
\textbf{ Testing\+Setup} (const \textbf{ Chain\+Type} chain\+Type=\textbf{ Chain\+Type\+::\+MAIN}, \textbf{ Test\+Opts}=\{\})
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ Chain\+Testing\+Setup}}
\begin{DoxyCompactItemize}
\item 
\textbf{ Chain\+Testing\+Setup} (const \textbf{ Chain\+Type} chain\+Type=\textbf{ Chain\+Type\+::\+MAIN}, \textbf{ Test\+Opts}=\{\})
\item 
\textbf{ $\sim$\+Chain\+Testing\+Setup} ()
\item 
void \textbf{ Load\+Verify\+Activate\+Chainstate} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ Basic\+Testing\+Setup}}
\begin{DoxyCompactItemize}
\item 
void \textbf{ Seed\+Random\+For\+Test} (\textbf{ Seed\+Rand} seed)
\item 
\textbf{ Basic\+Testing\+Setup} (const \textbf{ Chain\+Type} chain\+Type=\textbf{ Chain\+Type\+::\+MAIN}, \textbf{ Test\+Opts}=\{\})
\item 
\textbf{ $\sim$\+Basic\+Testing\+Setup} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \textbf{ CTransaction\+Ref} $>$ \textbf{ m\+\_\+coinbase\+\_\+txns}
\item 
\textbf{ CKey} \textbf{ coinbase\+Key}
\end{DoxyCompactItemize}
\doxysubsection*{Data Fields inherited from \textbf{ Chain\+Testing\+Setup}}
\begin{DoxyCompactItemize}
\item 
\textbf{ kernel\+::\+Cache\+Sizes} \textbf{ m\+\_\+kernel\+\_\+cache\+\_\+sizes} \{\textbf{ node\+::\+Calculate\+Cache\+Sizes}(\textbf{ m\+\_\+args}).\textbf{ kernel}\}
\item 
bool \textbf{ m\+\_\+coins\+\_\+db\+\_\+in\+\_\+memory} \{true\}
\item 
bool \textbf{ m\+\_\+block\+\_\+tree\+\_\+db\+\_\+in\+\_\+memory} \{true\}
\item 
std\+::function$<$ void()$>$ \textbf{ m\+\_\+make\+\_\+chainman} \{\}
\end{DoxyCompactItemize}
\doxysubsection*{Data Fields inherited from \textbf{ Basic\+Testing\+Setup}}
\begin{DoxyCompactItemize}
\item 
\textbf{ util\+::\+Signal\+Interrupt} \textbf{ m\+\_\+interrupt}
\item 
\textbf{ node\+::\+Node\+Context} \textbf{ m\+\_\+node}
\item 
\textbf{ Fast\+Random\+Context} \textbf{ m\+\_\+rng}
\item 
\textbf{ fs\+::path} \textbf{ m\+\_\+path\+\_\+root}
\item 
\textbf{ fs\+::path} \textbf{ m\+\_\+path\+\_\+lock}
\item 
bool \textbf{ m\+\_\+has\+\_\+custom\+\_\+datadir} \{false\}
\item 
\textbf{ Args\+Manager} \textbf{ m\+\_\+args}
\begin{DoxyCompactList}\small\item\em Test-\/specific arguments and settings. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Testing fixture that pre-\/creates a 100-\/block REGTEST-\/mode block chain 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{TestChain100Setup@{TestChain100Setup}!TestChain100Setup@{TestChain100Setup}}
\index{TestChain100Setup@{TestChain100Setup}!TestChain100Setup@{TestChain100Setup}}
\doxysubsubsection{TestChain100Setup()}
{\footnotesize\ttfamily \label{struct_test_chain100_setup_a2ce135e2fe297137a4dc423261ac6271} 
\textbf{ Test\+Chain100\+Setup} (\begin{DoxyParamCaption}\item[{const \textbf{ Chain\+Type}}]{chain\+\_\+type}{ = {\ttfamily \textbf{ Chain\+Type\+::\+REGTEST}}, }\item[{\textbf{ Test\+Opts}}]{opts}{ = {\ttfamily \{\}}}\end{DoxyParamCaption})}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{TestChain100Setup@{TestChain100Setup}!CreateAndProcessBlock@{CreateAndProcessBlock}}
\index{CreateAndProcessBlock@{CreateAndProcessBlock}!TestChain100Setup@{TestChain100Setup}}
\doxysubsubsection{CreateAndProcessBlock()}
{\footnotesize\ttfamily \label{struct_test_chain100_setup_a687006610aa7c27e23d3cd76f8e94a95} 
\textbf{ CBlock} Create\+And\+Process\+Block (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \textbf{ CMutable\+Transaction} $>$ \&}]{txns}{, }\item[{const \textbf{ CScript} \&}]{script\+Pub\+Key}{, }\item[{\textbf{ Chainstate} $\ast$}]{chainstate}{ = {\ttfamily nullptr}}\end{DoxyParamCaption})}

Create a new block with just given transactions, coinbase paying to script\+Pub\+Key, and try to add it to the current chain. If no chainstate is specified, default to the active. \index{TestChain100Setup@{TestChain100Setup}!CreateBlock@{CreateBlock}}
\index{CreateBlock@{CreateBlock}!TestChain100Setup@{TestChain100Setup}}
\doxysubsubsection{CreateBlock()}
{\footnotesize\ttfamily \label{struct_test_chain100_setup_a2adb785d0a62e004b597f8debd51540d} 
\textbf{ CBlock} Create\+Block (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \textbf{ CMutable\+Transaction} $>$ \&}]{txns}{, }\item[{const \textbf{ CScript} \&}]{script\+Pub\+Key}{, }\item[{\textbf{ Chainstate} \&}]{chainstate}{}\end{DoxyParamCaption})}

Create a new block with just given transactions, coinbase paying to script\+Pub\+Key. \index{TestChain100Setup@{TestChain100Setup}!CreateValidMempoolTransaction@{CreateValidMempoolTransaction}}
\index{CreateValidMempoolTransaction@{CreateValidMempoolTransaction}!TestChain100Setup@{TestChain100Setup}}
\doxysubsubsection{CreateValidMempoolTransaction()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{struct_test_chain100_setup_af554800f43de0634100bf64d718e5c22} 
\textbf{ CMutable\+Transaction} Create\+Valid\+Mempool\+Transaction (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \textbf{ CTransaction\+Ref} $>$ \&}]{input\+\_\+transactions}{, }\item[{const std\+::vector$<$ \textbf{ COut\+Point} $>$ \&}]{inputs}{, }\item[{int}]{input\+\_\+height}{, }\item[{const std\+::vector$<$ \textbf{ CKey} $>$ \&}]{input\+\_\+signing\+\_\+keys}{, }\item[{const std\+::vector$<$ \textbf{ CTx\+Out} $>$ \&}]{outputs}{, }\item[{bool}]{submit}{ = {\ttfamily true}}\end{DoxyParamCaption})}

Create a transaction and, optionally, submit to the mempool.


\begin{DoxyParams}{Parameters}
{\em input\+\_\+transactions} & The transactions to spend \\
\hline
{\em inputs} & Outpoints with which to construct transaction vin. \\
\hline
{\em input\+\_\+height} & The height of the block that included the input transaction(s). \\
\hline
{\em input\+\_\+signing\+\_\+keys} & The keys to spend inputs. \\
\hline
{\em outputs} & Transaction vout. \\
\hline
{\em submit} & Whether or not to submit to mempool \\
\hline
\end{DoxyParams}
\index{TestChain100Setup@{TestChain100Setup}!CreateValidMempoolTransaction@{CreateValidMempoolTransaction}}
\index{CreateValidMempoolTransaction@{CreateValidMempoolTransaction}!TestChain100Setup@{TestChain100Setup}}
\doxysubsubsection{CreateValidMempoolTransaction()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{struct_test_chain100_setup_a618bf826681637d07bde066ea45caf6d} 
\textbf{ CMutable\+Transaction} Create\+Valid\+Mempool\+Transaction (\begin{DoxyParamCaption}\item[{\textbf{ CTransaction\+Ref}}]{input\+\_\+transaction}{, }\item[{uint32\+\_\+t}]{input\+\_\+vout}{, }\item[{int}]{input\+\_\+height}{, }\item[{\textbf{ CKey}}]{input\+\_\+signing\+\_\+key}{, }\item[{\textbf{ CScript}}]{output\+\_\+destination}{, }\item[{\textbf{ CAmount}}]{output\+\_\+amount}{ = {\ttfamily \textbf{ CAmount}(1~$\ast$~COIN)}, }\item[{bool}]{submit}{ = {\ttfamily true}}\end{DoxyParamCaption})}

Create a 1-\/in-\/1-\/out transaction and, optionally, submit to the mempool.


\begin{DoxyParams}{Parameters}
{\em input\+\_\+transaction} & The transaction to spend \\
\hline
{\em input\+\_\+vout} & The vout to spend from the input\+\_\+transaction \\
\hline
{\em input\+\_\+height} & The height of the block that included the input\+\_\+transaction \\
\hline
{\em input\+\_\+signing\+\_\+key} & The key to spend the input\+\_\+transaction \\
\hline
{\em output\+\_\+destination} & Where to send the output \\
\hline
{\em output\+\_\+amount} & How much to send \\
\hline
{\em submit} & Whether or not to submit to mempool \\
\hline
\end{DoxyParams}
\index{TestChain100Setup@{TestChain100Setup}!CreateValidTransaction@{CreateValidTransaction}}
\index{CreateValidTransaction@{CreateValidTransaction}!TestChain100Setup@{TestChain100Setup}}
\doxysubsubsection{CreateValidTransaction()}
{\footnotesize\ttfamily \label{struct_test_chain100_setup_a6bb58ec95f8d6cae1810771742a51069} 
std\+::pair$<$ \textbf{ CMutable\+Transaction}, \textbf{ CAmount} $>$ Create\+Valid\+Transaction (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \textbf{ CTransaction\+Ref} $>$ \&}]{input\+\_\+transactions}{, }\item[{const std\+::vector$<$ \textbf{ COut\+Point} $>$ \&}]{inputs}{, }\item[{int}]{input\+\_\+height}{, }\item[{const std\+::vector$<$ \textbf{ CKey} $>$ \&}]{input\+\_\+signing\+\_\+keys}{, }\item[{const std\+::vector$<$ \textbf{ CTx\+Out} $>$ \&}]{outputs}{, }\item[{const std\+::optional$<$ \textbf{ CFee\+Rate} $>$ \&}]{feerate}{, }\item[{const std\+::optional$<$ uint32\+\_\+t $>$ \&}]{fee\+\_\+output}{}\end{DoxyParamCaption})}

Create a transaction, optionally setting the fee based on the feerate. Note\+: The feerate may not be met exactly depending on whether the signatures can have different sizes.


\begin{DoxyParams}{Parameters}
{\em input\+\_\+transactions} & The transactions to spend \\
\hline
{\em inputs} & Outpoints with which to construct transaction vin. \\
\hline
{\em input\+\_\+height} & The height of the block that included the input transactions. \\
\hline
{\em input\+\_\+signing\+\_\+keys} & The keys to spend the input transactions. \\
\hline
{\em outputs} & Transaction vout. \\
\hline
{\em feerate} & The feerate the transaction should pay. \\
\hline
{\em fee\+\_\+output} & The index of the output to take the fee from. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The transaction and the fee it pays 
\end{DoxyReturn}
\index{TestChain100Setup@{TestChain100Setup}!mineBlocks@{mineBlocks}}
\index{mineBlocks@{mineBlocks}!TestChain100Setup@{TestChain100Setup}}
\doxysubsubsection{mineBlocks()}
{\footnotesize\ttfamily \label{struct_test_chain100_setup_a04d0ab6afe130dbab708a42b85d23a70} 
void mine\+Blocks (\begin{DoxyParamCaption}\item[{int}]{num\+\_\+blocks}{}\end{DoxyParamCaption})}



Mine a series of new blocks on the active chain. 

\index{TestChain100Setup@{TestChain100Setup}!PopulateMempool@{PopulateMempool}}
\index{PopulateMempool@{PopulateMempool}!TestChain100Setup@{TestChain100Setup}}
\doxysubsubsection{PopulateMempool()}
{\footnotesize\ttfamily \label{struct_test_chain100_setup_a6d1aca6eef14e9ae362a28606d6f89a6} 
std\+::vector$<$ \textbf{ CTransaction\+Ref} $>$ Populate\+Mempool (\begin{DoxyParamCaption}\item[{\textbf{ Fast\+Random\+Context} \&}]{det\+\_\+rand}{, }\item[{size\+\_\+t}]{num\+\_\+transactions}{, }\item[{bool}]{submit}{}\end{DoxyParamCaption})}

Create transactions spending from m\+\_\+coinbase\+\_\+txns. These transactions will only spend coins that exist in the current chain, but may be premature coinbase spends, have missing signatures, or violate some other consensus rules. They should only be used for testing mempool consistency. All transactions will have some random number of inputs and outputs (between 1 and 24). Transactions may or may not be dependent upon each other; if dependencies exit, every parent will always be somewhere in the list before the child so each transaction can be submitted in the same order they appear in the list. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em submit} & When true, submit transactions to the mempool. When false, return them but don\textquotesingle{}t submit them. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A vector of transactions that can be submitted to the mempool. 
\end{DoxyReturn}


\label{doc-variable-members}
\doxysubsection{Field Documentation}
\index{TestChain100Setup@{TestChain100Setup}!coinbaseKey@{coinbaseKey}}
\index{coinbaseKey@{coinbaseKey}!TestChain100Setup@{TestChain100Setup}}
\doxysubsubsection{coinbaseKey}
{\footnotesize\ttfamily \label{struct_test_chain100_setup_aa496b7f42af5edd2803fc18604d8f8a0} 
\textbf{ CKey} coinbase\+Key}

\index{TestChain100Setup@{TestChain100Setup}!m\_coinbase\_txns@{m\_coinbase\_txns}}
\index{m\_coinbase\_txns@{m\_coinbase\_txns}!TestChain100Setup@{TestChain100Setup}}
\doxysubsubsection{m\_coinbase\_txns}
{\footnotesize\ttfamily \label{struct_test_chain100_setup_ad55879f57790457e35e17bf04f0b8a8a} 
std\+::vector$<$\textbf{ CTransaction\+Ref}$>$ m\+\_\+coinbase\+\_\+txns}



The documentation for this struct was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/test/util/\textbf{ setup\+\_\+common.\+h}\item 
src/test/util/\textbf{ setup\+\_\+common.\+cpp}\end{DoxyCompactItemize}
