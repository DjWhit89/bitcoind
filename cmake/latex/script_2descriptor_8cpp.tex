\doxysection{src/script/descriptor.cpp File Reference}
\label{script_2descriptor_8cpp}\index{src/script/descriptor.cpp@{src/script/descriptor.cpp}}
{\ttfamily \#include $<$script/descriptor.\+h$>$}\newline
{\ttfamily \#include $<$hash.\+h$>$}\newline
{\ttfamily \#include $<$key\+\_\+io.\+h$>$}\newline
{\ttfamily \#include $<$pubkey.\+h$>$}\newline
{\ttfamily \#include $<$musig.\+h$>$}\newline
{\ttfamily \#include $<$script/miniscript.\+h$>$}\newline
{\ttfamily \#include $<$script/parsing.\+h$>$}\newline
{\ttfamily \#include $<$script/script.\+h$>$}\newline
{\ttfamily \#include $<$script/signingprovider.\+h$>$}\newline
{\ttfamily \#include $<$script/solver.\+h$>$}\newline
{\ttfamily \#include $<$uint256.\+h$>$}\newline
{\ttfamily \#include $<$common/args.\+h$>$}\newline
{\ttfamily \#include $<$span.\+h$>$}\newline
{\ttfamily \#include $<$util/bip32.\+h$>$}\newline
{\ttfamily \#include $<$util/check.\+h$>$}\newline
{\ttfamily \#include $<$util/strencodings.\+h$>$}\newline
{\ttfamily \#include $<$util/vector.\+h$>$}\newline
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$memory$>$}\newline
{\ttfamily \#include $<$numeric$>$}\newline
{\ttfamily \#include $<$optional$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \textbf{ Check\+Checksum} (std\+::span$<$ const char $>$ \&sp, bool require\+\_\+checksum, std\+::string \&error, std\+::string $\ast$out\+\_\+checksum=nullptr)
\item 
std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \textbf{ Descriptor} $>$ $>$ \textbf{ Parse} (std\+::string\+\_\+view descriptor, \textbf{ Flat\+Signing\+Provider} \&out, std\+::string \&error, bool require\+\_\+checksum)
\item 
std\+::string \textbf{ Get\+Descriptor\+Checksum} (const std\+::string \&descriptor)
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ Descriptor} $>$ \textbf{ Infer\+Descriptor} (const \textbf{ CScript} \&\textbf{ script}, const \textbf{ Signing\+Provider} \&provider)
\item 
\textbf{ uint256} \textbf{ Descriptor\+ID} (const \textbf{ Descriptor} \&desc)
\end{DoxyCompactItemize}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{descriptor.cpp@{descriptor.cpp}!CheckChecksum@{CheckChecksum}}
\index{CheckChecksum@{CheckChecksum}!descriptor.cpp@{descriptor.cpp}}
\doxysubsubsection{CheckChecksum()}
{\footnotesize\ttfamily \label{script_2descriptor_8cpp_a96c70a3a367b9b75d7dd3ccc121e21a6} 
bool Check\+Checksum (\begin{DoxyParamCaption}\item[{std\+::span$<$ const char $>$ \&}]{sp}{, }\item[{bool}]{require\+\_\+checksum}{, }\item[{std\+::string \&}]{error}{, }\item[{std\+::string $\ast$}]{out\+\_\+checksum}{ = {\ttfamily nullptr}}\end{DoxyParamCaption})}

Check a descriptor checksum, and update desc to be the checksum-\/less part. \index{descriptor.cpp@{descriptor.cpp}!DescriptorID@{DescriptorID}}
\index{DescriptorID@{DescriptorID}!descriptor.cpp@{descriptor.cpp}}
\doxysubsubsection{DescriptorID()}
{\footnotesize\ttfamily \label{script_2descriptor_8cpp_a701ef30b0fb75c016e64d898db1e6ae2} 
\textbf{ uint256} Descriptor\+ID (\begin{DoxyParamCaption}\item[{const \textbf{ Descriptor} \&}]{desc}{}\end{DoxyParamCaption})}

Unique identifier that may not change over time, unless explicitly marked as not backwards compatible. This is not part of BIP 380, not guaranteed to be interoperable and should not be exposed to the user. \index{descriptor.cpp@{descriptor.cpp}!GetDescriptorChecksum@{GetDescriptorChecksum}}
\index{GetDescriptorChecksum@{GetDescriptorChecksum}!descriptor.cpp@{descriptor.cpp}}
\doxysubsubsection{GetDescriptorChecksum()}
{\footnotesize\ttfamily \label{script_2descriptor_8cpp_aa9437a14bddb1c03bad468216020dcac} 
std\+::string Get\+Descriptor\+Checksum (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{descriptor}{}\end{DoxyParamCaption})}

Get the checksum for a {\ttfamily descriptor}.


\begin{DoxyItemize}
\item If it already has one, and it is correct, return the checksum in the input.
\item If it already has one that is wrong, return "{}"{}.
\item If it does not already have one, return the checksum that would need to be added. 
\end{DoxyItemize}\index{descriptor.cpp@{descriptor.cpp}!InferDescriptor@{InferDescriptor}}
\index{InferDescriptor@{InferDescriptor}!descriptor.cpp@{descriptor.cpp}}
\doxysubsubsection{InferDescriptor()}
{\footnotesize\ttfamily \label{script_2descriptor_8cpp_a496a25c1d88122782c2a426d38394f0a} 
std\+::unique\+\_\+ptr$<$ \textbf{ Descriptor} $>$ Infer\+Descriptor (\begin{DoxyParamCaption}\item[{const \textbf{ CScript} \&}]{script}{, }\item[{const \textbf{ Signing\+Provider} \&}]{provider}{}\end{DoxyParamCaption})}

Find a descriptor for the specified {\ttfamily \doxyref{script}{p.}{namespacescript}}, using information from {\ttfamily provider} where possible.

A non-\/ranged descriptor which only generates the specified script will be returned in all circumstances.

For public keys with key origin information, this information will be preserved in the returned descriptor.


\begin{DoxyItemize}
\item If all information for solving {\ttfamily \doxyref{script}{p.}{namespacescript}} is present in {\ttfamily provider}, a descriptor will be returned which is Is\+Solvable() and encapsulates said information.
\item Failing that, if {\ttfamily \doxyref{script}{p.}{namespacescript}} corresponds to a known address type, an "{}addr()"{} descriptor will be returned (which is not Is\+Solvable()).
\item Failing that, a "{}raw()"{} descriptor is returned. 
\end{DoxyItemize}\index{descriptor.cpp@{descriptor.cpp}!Parse@{Parse}}
\index{Parse@{Parse}!descriptor.cpp@{descriptor.cpp}}
\doxysubsubsection{Parse()}
{\footnotesize\ttfamily \label{script_2descriptor_8cpp_aa72a50fdea67f724a5c35f0b41561296} 
std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \textbf{ Descriptor} $>$ $>$ Parse (\begin{DoxyParamCaption}\item[{std\+::string\+\_\+view}]{descriptor}{, }\item[{\textbf{ Flat\+Signing\+Provider} \&}]{out}{, }\item[{std\+::string \&}]{error}{, }\item[{bool}]{require\+\_\+checksum}{ = {\ttfamily false}}\end{DoxyParamCaption})}

Parse a {\ttfamily descriptor} string. Included private keys are put in {\ttfamily out}.

If the descriptor has a checksum, it must be valid. If {\ttfamily require\+\_\+checksum} is set, the checksum is mandatory -\/ otherwise it is optional.

If a parse error occurs, or the checksum is missing/invalid, or anything else is wrong, an empty vector is returned. 