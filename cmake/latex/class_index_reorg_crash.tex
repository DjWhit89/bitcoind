\doxysection{Index\+Reorg\+Crash Class Reference}
\label{class_index_reorg_crash}\index{IndexReorgCrash@{IndexReorgCrash}}
Inheritance diagram for Index\+Reorg\+Crash\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_index_reorg_crash}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Index\+Reorg\+Crash} (std\+::unique\+\_\+ptr$<$ \textbf{ interfaces\+::\+Chain} $>$ chain, std\+::shared\+\_\+future$<$ void $>$ blocker, int blocking\+\_\+height)
\item 
bool \textbf{ Allow\+Prune} () const override
\item 
\textbf{ Base\+Index\+::\+DB} \& \textbf{ Get\+DB} () const override
\item 
bool \textbf{ Custom\+Append} (const \textbf{ interfaces\+::\+Block\+Info} \&block) override
\begin{DoxyCompactList}\small\item\em Write update index entries for a newly connected block. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ Base\+Index}}
\begin{DoxyCompactItemize}
\item 
\textbf{ Base\+Index} (std\+::unique\+\_\+ptr$<$ \textbf{ interfaces\+::\+Chain} $>$ chain, std\+::string \textbf{ name})
\item 
virtual \textbf{ $\sim$\+Base\+Index} ()
\begin{DoxyCompactList}\small\item\em Destructor interrupts sync thread if running and blocks until it exits. \end{DoxyCompactList}\item 
const std\+::string \& \textbf{ Get\+Name} () const \textbf{ LIFETIMEBOUND}
\begin{DoxyCompactList}\small\item\em Get the name of the index for display in logs. \end{DoxyCompactList}\item 
bool Block\+Until\+Synced\+To\+Current\+Chain() const \textbf{ LOCKS\+\_\+\+EXCLUDED}(void \textbf{ Interrupt} ()
\item 
bool \textbf{ Init} ()
\item 
bool \textbf{ Start\+Background\+Sync} ()
\begin{DoxyCompactList}\small\item\em Starts the initial sync process on a background thread. \end{DoxyCompactList}\item 
void \textbf{ Sync} ()
\item 
void \textbf{ Stop} ()
\begin{DoxyCompactList}\small\item\em Stops the instance from staying in sync with blockchain updates. \end{DoxyCompactList}\item 
\textbf{ Index\+Summary} \textbf{ Get\+Summary} () const
\begin{DoxyCompactList}\small\item\em Get a summary of the index and its state. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Protected Member Functions inherited from \textbf{ Base\+Index}}
\begin{DoxyCompactItemize}
\item 
void \textbf{ Block\+Connected} (const \textbf{ kernel\+::\+Chainstate\+Role} \&role, const std\+::shared\+\_\+ptr$<$ const \textbf{ CBlock} $>$ \&block, const \textbf{ CBlock\+Index} $\ast$pindex) override
\item 
void \textbf{ Chain\+State\+Flushed} (const \textbf{ kernel\+::\+Chainstate\+Role} \&role, const \textbf{ CBlock\+Locator} \&locator) override
\item 
virtual \textbf{ interfaces\+::\+Chain\+::\+Notify\+Options} \textbf{ Custom\+Options} ()
\begin{DoxyCompactList}\small\item\em Return custom notification options for index. \end{DoxyCompactList}\item 
virtual bool \textbf{ Custom\+Init} (const std\+::optional$<$ \textbf{ interfaces\+::\+Block\+Ref} $>$ \&block)
\begin{DoxyCompactList}\small\item\em Initialize internal state from the database and block index. \end{DoxyCompactList}\item 
virtual bool \textbf{ Custom\+Commit} (\textbf{ CDBBatch} \&batch)
\item 
virtual bool \textbf{ Custom\+Remove} (const \textbf{ interfaces\+::\+Block\+Info} \&block)
\begin{DoxyCompactList}\small\item\em Rewind index by one block during a chain reorg. \end{DoxyCompactList}\item 
void \textbf{ Set\+Best\+Block\+Index} (const \textbf{ CBlock\+Index} $\ast$block)
\begin{DoxyCompactList}\small\item\em Update the internal best block index as well as the prune lock. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \textbf{ CValidation\+Interface}}
\begin{DoxyCompactItemize}
\item 
\textbf{ $\sim$\+CValidation\+Interface} ()=default
\item 
virtual void \textbf{ Updated\+Block\+Tip} (const \textbf{ CBlock\+Index} $\ast$pindex\+New, const \textbf{ CBlock\+Index} $\ast$pindex\+Fork, bool f\+Initial\+Download)
\item 
virtual void \textbf{ Active\+Tip\+Change} (const \textbf{ CBlock\+Index} \&new\+\_\+tip, bool is\+\_\+ibd)
\item 
virtual void \textbf{ Transaction\+Added\+To\+Mempool} (const \textbf{ New\+Mempool\+Transaction\+Info} \&tx, uint64\+\_\+t mempool\+\_\+sequence)
\item 
virtual void \textbf{ Transaction\+Removed\+From\+Mempool} (const \textbf{ CTransaction\+Ref} \&tx, \textbf{ Mem\+Pool\+Removal\+Reason} reason, uint64\+\_\+t mempool\+\_\+sequence)
\item 
virtual void \textbf{ Mempool\+Transactions\+Removed\+For\+Block} (const std\+::vector$<$ \textbf{ Removed\+Mempool\+Transaction\+Info} $>$ \&txs\+\_\+removed\+\_\+for\+\_\+block, unsigned int n\+Block\+Height)
\item 
virtual void \textbf{ Block\+Disconnected} (const std\+::shared\+\_\+ptr$<$ const \textbf{ CBlock} $>$ \&block, const \textbf{ CBlock\+Index} $\ast$pindex)
\item 
virtual void \textbf{ Block\+Checked} (const std\+::shared\+\_\+ptr$<$ const \textbf{ CBlock} $>$ \&, const \textbf{ Block\+Validation\+State} \&)
\item 
virtual void \textbf{ New\+Po\+WValid\+Block} (const \textbf{ CBlock\+Index} $\ast$pindex, const std\+::shared\+\_\+ptr$<$ const \textbf{ CBlock} $>$ \&block)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \textbf{ Base\+Index}}
\begin{DoxyCompactItemize}
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ interfaces\+::\+Chain} $>$ \textbf{ m\+\_\+chain}
\item 
\textbf{ Chainstate} $\ast$ \textbf{ m\+\_\+chainstate} \{nullptr\}
\item 
const std\+::string \textbf{ m\+\_\+name}
\end{DoxyCompactItemize}


\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{IndexReorgCrash@{IndexReorgCrash}!IndexReorgCrash@{IndexReorgCrash}}
\index{IndexReorgCrash@{IndexReorgCrash}!IndexReorgCrash@{IndexReorgCrash}}
\doxysubsubsection{IndexReorgCrash()}
{\footnotesize\ttfamily \label{class_index_reorg_crash_aa5bcbe9d93082d6f1d3afb80026b6a19} 
\textbf{ Index\+Reorg\+Crash} (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \textbf{ interfaces\+::\+Chain} $>$}]{chain}{, }\item[{std\+::shared\+\_\+future$<$ void $>$}]{blocker}{, }\item[{int}]{blocking\+\_\+height}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{IndexReorgCrash@{IndexReorgCrash}!AllowPrune@{AllowPrune}}
\index{AllowPrune@{AllowPrune}!IndexReorgCrash@{IndexReorgCrash}}
\doxysubsubsection{AllowPrune()}
{\footnotesize\ttfamily \label{class_index_reorg_crash_a281709a4cae9ae4d7f0eaafb821918d2} 
bool Allow\+Prune (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \textbf{ Base\+Index} \doxyref{}{p.}{class_base_index}.

\index{IndexReorgCrash@{IndexReorgCrash}!CustomAppend@{CustomAppend}}
\index{CustomAppend@{CustomAppend}!IndexReorgCrash@{IndexReorgCrash}}
\doxysubsubsection{CustomAppend()}
{\footnotesize\ttfamily \label{class_index_reorg_crash_a2866130d78abde86682621008c9b0ca3} 
bool Custom\+Append (\begin{DoxyParamCaption}\item[{const \textbf{ interfaces\+::\+Block\+Info} \&}]{block}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Write update index entries for a newly connected block. 



Reimplemented from \textbf{ Base\+Index} \doxyref{}{p.}{class_base_index_a080cb86acb291b55063a4962ada7be55}.

\index{IndexReorgCrash@{IndexReorgCrash}!GetDB@{GetDB}}
\index{GetDB@{GetDB}!IndexReorgCrash@{IndexReorgCrash}}
\doxysubsubsection{GetDB()}
{\footnotesize\ttfamily \label{class_index_reorg_crash_a306d7e0e7cc4dfa4c78dcd837531edeb} 
\textbf{ Base\+Index\+::\+DB} \& Get\+DB (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \textbf{ Base\+Index} \doxyref{}{p.}{class_base_index_aa8e4007464e2ab64d3559b721f3fc71b}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/test/\textbf{ blockfilter\+\_\+index\+\_\+tests.\+cpp}\end{DoxyCompactItemize}
