\doxysection{Auto\+File Class Reference}
\label{class_auto_file}\index{AutoFile@{AutoFile}}


{\ttfamily \#include $<$streams.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Auto\+File} (std\+::\+FILE $\ast$file, const \textbf{ Obfuscation} \&obfuscation=\{\})
\item 
\textbf{ $\sim$\+Auto\+File} ()
\item 
\textbf{ Auto\+File} (const \textbf{ Auto\+File} \&)=delete
\item 
\textbf{ Auto\+File} \& \textbf{ operator=} (const \textbf{ Auto\+File} \&)=delete
\item 
bool \textbf{ feof} () const
\item 
int \textbf{ fclose} ()
\item 
std\+::\+FILE $\ast$ \textbf{ release} ()
\item 
bool \textbf{ Is\+Null} () const
\item 
void \textbf{ Set\+Obfuscation} (const \textbf{ Obfuscation} \&obfuscation)
\item 
std\+::size\+\_\+t \textbf{ detail\+\_\+fread} (std\+::span$<$ std\+::byte $>$ dst)
\item 
void \textbf{ seek} (int64\+\_\+t offset, int origin)
\item 
int64\+\_\+t \textbf{ tell} ()
\item 
int64\+\_\+t \textbf{ size} ()
\item 
bool \textbf{ Commit} ()
\item 
bool \textbf{ Truncate} (unsigned \textbf{ size})
\item 
void \textbf{ write\+\_\+buffer} (std\+::span$<$ std\+::byte $>$ src)
\begin{DoxyCompactList}\small\item\em Write a mutable buffer more efficiently than \doxyref{write()}{p.}{class_auto_file_af6cb91d791a456788d46419f8f06604e}, obfuscating the buffer in-\/place. \end{DoxyCompactList}\item 
void \textbf{ read} (std\+::span$<$ std\+::byte $>$ dst)
\item 
void \textbf{ ignore} (size\+\_\+t n\+Size)
\item 
void \textbf{ write} (std\+::span$<$ const std\+::byte $>$ src)
\item 
{\footnotesize template$<$typename \textbf{ T}$>$ }\\\textbf{ Auto\+File} \& \textbf{ operator$<$$<$} (const \textbf{ T} \&obj)
\item 
{\footnotesize template$<$typename \textbf{ T}$>$ }\\\textbf{ Auto\+File} \& \textbf{ operator$>$$>$} (\textbf{ T} \&\&obj)
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::\+FILE $\ast$ \textbf{ m\+\_\+file}
\item 
\textbf{ Obfuscation} \textbf{ m\+\_\+obfuscation}
\item 
std\+::optional$<$ int64\+\_\+t $>$ \textbf{ m\+\_\+position}
\item 
bool \textbf{ m\+\_\+was\+\_\+written} \{false\}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Non-\/refcounted RAII wrapper for FILE$\ast$

Will automatically close the file when it goes out of scope if not null. If you\textquotesingle{}re returning the file pointer, return file.\+release(). If you need to close the file early, use autofile.\+fclose() instead of fclose(underlying\+\_\+\+FILE).

\begin{DoxyNote}{Note}
If the file has been written to, then the caller must close it explicitly with the {\ttfamily \doxyref{fclose()}{p.}{class_auto_file_a8b9c3a533b9c6429d63aa0a970fb214c}} method, check if it returns an error and treat such an error as if the {\ttfamily \doxyref{write()}{p.}{class_auto_file_af6cb91d791a456788d46419f8f06604e}} method failed. The OS\textquotesingle{}s {\ttfamily fclose(3)} may fail to flush to disk data that has been previously written, rendering the file corrupt. 
\end{DoxyNote}


\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{AutoFile@{AutoFile}!AutoFile@{AutoFile}}
\index{AutoFile@{AutoFile}!AutoFile@{AutoFile}}
\doxysubsubsection{AutoFile()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{class_auto_file_a43aa4d585018ad287077d401419797ee} 
\textbf{ Auto\+File} (\begin{DoxyParamCaption}\item[{std\+::\+FILE $\ast$}]{file}{, }\item[{const \textbf{ Obfuscation} \&}]{obfuscation}{ = {\ttfamily \{\}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}

\index{AutoFile@{AutoFile}!````~AutoFile@{$\sim$AutoFile}}
\index{````~AutoFile@{$\sim$AutoFile}!AutoFile@{AutoFile}}
\doxysubsubsection{$\sim$AutoFile()}
{\footnotesize\ttfamily \label{class_auto_file_a524ad34fda6d010c73d204af7095c336} 
$\sim$\textbf{ Auto\+File} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\index{AutoFile@{AutoFile}!AutoFile@{AutoFile}}
\index{AutoFile@{AutoFile}!AutoFile@{AutoFile}}
\doxysubsubsection{AutoFile()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{class_auto_file_abe53a9738cda00fd628876dbb34a9acf} 
\textbf{ Auto\+File} (\begin{DoxyParamCaption}\item[{const \textbf{ Auto\+File} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{AutoFile@{AutoFile}!Commit@{Commit}}
\index{Commit@{Commit}!AutoFile@{AutoFile}}
\doxysubsubsection{Commit()}
{\footnotesize\ttfamily \label{class_auto_file_a44c78e17dec2b3af95f850baaee2683a} 
bool Commit (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\doxyref{Wrapper}{p.}{class_wrapper} around \doxyref{File\+Commit()}{p.}{fs__helpers_8cpp_aedd7d9ab25c6cfb8c81a4aaa917b104e}. \index{AutoFile@{AutoFile}!detail\_fread@{detail\_fread}}
\index{detail\_fread@{detail\_fread}!AutoFile@{AutoFile}}
\doxysubsubsection{detail\_fread()}
{\footnotesize\ttfamily \label{class_auto_file_a61ba6c0e76b2b050faa524b522509daf} 
std\+::size\+\_\+t detail\+\_\+fread (\begin{DoxyParamCaption}\item[{std\+::span$<$ std\+::byte $>$}]{dst}{}\end{DoxyParamCaption})}

Implementation detail, only used internally. \index{AutoFile@{AutoFile}!fclose@{fclose}}
\index{fclose@{fclose}!AutoFile@{AutoFile}}
\doxysubsubsection{fclose()}
{\footnotesize\ttfamily \label{class_auto_file_a8b9c3a533b9c6429d63aa0a970fb214c} 
int fclose (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [nodiscard]}}

\index{AutoFile@{AutoFile}!feof@{feof}}
\index{feof@{feof}!AutoFile@{AutoFile}}
\doxysubsubsection{feof()}
{\footnotesize\ttfamily \label{class_auto_file_a7c34ccaabb1d83651fe273a7b00f67b7} 
bool feof (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\index{AutoFile@{AutoFile}!ignore@{ignore}}
\index{ignore@{ignore}!AutoFile@{AutoFile}}
\doxysubsubsection{ignore()}
{\footnotesize\ttfamily \label{class_auto_file_aa2a43811b952c482fddf43749813eb7c} 
void ignore (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{n\+Size}{}\end{DoxyParamCaption})}

\index{AutoFile@{AutoFile}!IsNull@{IsNull}}
\index{IsNull@{IsNull}!AutoFile@{AutoFile}}
\doxysubsubsection{IsNull()}
{\footnotesize\ttfamily \label{class_auto_file_ac4d637a0dec45d546495c1660c9f6047} 
bool Is\+Null (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Return true if the wrapped FILE$\ast$ is nullptr, false otherwise. \index{AutoFile@{AutoFile}!operator$<$$<$@{operator$<$$<$}}
\index{operator$<$$<$@{operator$<$$<$}!AutoFile@{AutoFile}}
\doxysubsubsection{operator$<$$<$()}
{\footnotesize\ttfamily \label{class_auto_file_a379f7b26bd1298d423f1e686d1e51e16} 
template$<$typename \textbf{ T}$>$ \\
\textbf{ Auto\+File} \& operator$<$$<$ (\begin{DoxyParamCaption}\item[{const \textbf{ T} \&}]{obj}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\index{AutoFile@{AutoFile}!operator=@{operator=}}
\index{operator=@{operator=}!AutoFile@{AutoFile}}
\doxysubsubsection{operator=()}
{\footnotesize\ttfamily \label{class_auto_file_ae03c48e113e16f7737b0865a919be658} 
\textbf{ Auto\+File} \& operator= (\begin{DoxyParamCaption}\item[{const \textbf{ Auto\+File} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\index{AutoFile@{AutoFile}!operator$>$$>$@{operator$>$$>$}}
\index{operator$>$$>$@{operator$>$$>$}!AutoFile@{AutoFile}}
\doxysubsubsection{operator$>$$>$()}
{\footnotesize\ttfamily \label{class_auto_file_ad5d73be8cc40e8c5afc36ca4b31ac126} 
template$<$typename \textbf{ T}$>$ \\
\textbf{ Auto\+File} \& operator$>$$>$ (\begin{DoxyParamCaption}\item[{\textbf{ T} \&\&}]{obj}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\index{AutoFile@{AutoFile}!read@{read}}
\index{read@{read}!AutoFile@{AutoFile}}
\doxysubsubsection{read()}
{\footnotesize\ttfamily \label{class_auto_file_a5be91c0a88a93021e18e46b5c111ee5a} 
void read (\begin{DoxyParamCaption}\item[{std\+::span$<$ std\+::byte $>$}]{dst}{}\end{DoxyParamCaption})}

\index{AutoFile@{AutoFile}!release@{release}}
\index{release@{release}!AutoFile@{AutoFile}}
\doxysubsubsection{release()}
{\footnotesize\ttfamily \label{class_auto_file_a684abe07f318c64b8dc4150123c677e3} 
std\+::\+FILE $\ast$ release (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Get wrapped FILE$\ast$ with transfer of ownership. \begin{DoxyNote}{Note}
This will invalidate the \doxyref{Auto\+File}{p.}{class_auto_file} object, and makes it the responsibility of the caller of this function to clean up the returned FILE$\ast$. 
\end{DoxyNote}
\index{AutoFile@{AutoFile}!seek@{seek}}
\index{seek@{seek}!AutoFile@{AutoFile}}
\doxysubsubsection{seek()}
{\footnotesize\ttfamily \label{class_auto_file_a03fb78f27224a0aa7099b686212303bd} 
void seek (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{offset}{, }\item[{int}]{origin}{}\end{DoxyParamCaption})}

\doxyref{Wrapper}{p.}{class_wrapper} around fseek(). Will throw if seeking is not possible. \index{AutoFile@{AutoFile}!SetObfuscation@{SetObfuscation}}
\index{SetObfuscation@{SetObfuscation}!AutoFile@{AutoFile}}
\doxysubsubsection{SetObfuscation()}
{\footnotesize\ttfamily \label{class_auto_file_a8e9a257e9d3441e49edbf225d6502174} 
void Set\+Obfuscation (\begin{DoxyParamCaption}\item[{const \textbf{ Obfuscation} \&}]{obfuscation}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Continue with a different XOR key \index{AutoFile@{AutoFile}!size@{size}}
\index{size@{size}!AutoFile@{AutoFile}}
\doxysubsubsection{size()}
{\footnotesize\ttfamily \label{class_auto_file_aefa4cbcbdc75e346ec1ffadacbc0a72b} 
int64\+\_\+t size (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Return the size of the file. Will throw if unknown. \index{AutoFile@{AutoFile}!tell@{tell}}
\index{tell@{tell}!AutoFile@{AutoFile}}
\doxysubsubsection{tell()}
{\footnotesize\ttfamily \label{class_auto_file_a497f97b52a69efb2c54d21ccb31ff787} 
int64\+\_\+t tell (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Find position within the file. Will throw if unknown. \index{AutoFile@{AutoFile}!Truncate@{Truncate}}
\index{Truncate@{Truncate}!AutoFile@{AutoFile}}
\doxysubsubsection{Truncate()}
{\footnotesize\ttfamily \label{class_auto_file_a98e9b7b1b24494780aec892d21cd2531} 
bool Truncate (\begin{DoxyParamCaption}\item[{unsigned}]{size}{}\end{DoxyParamCaption})}

\doxyref{Wrapper}{p.}{class_wrapper} around \doxyref{Truncate\+File()}{p.}{fs__helpers_8cpp_acb8d6b822bc1bfa609bf43bbac1a0d44}. \index{AutoFile@{AutoFile}!write@{write}}
\index{write@{write}!AutoFile@{AutoFile}}
\doxysubsubsection{write()}
{\footnotesize\ttfamily \label{class_auto_file_af6cb91d791a456788d46419f8f06604e} 
void write (\begin{DoxyParamCaption}\item[{std\+::span$<$ const std\+::byte $>$}]{src}{}\end{DoxyParamCaption})}

\index{AutoFile@{AutoFile}!write\_buffer@{write\_buffer}}
\index{write\_buffer@{write\_buffer}!AutoFile@{AutoFile}}
\doxysubsubsection{write\_buffer()}
{\footnotesize\ttfamily \label{class_auto_file_ac104be40550ee3d33be3d7297289fd2d} 
void write\+\_\+buffer (\begin{DoxyParamCaption}\item[{std\+::span$<$ std\+::byte $>$}]{src}{}\end{DoxyParamCaption})}



Write a mutable buffer more efficiently than \doxyref{write()}{p.}{class_auto_file_af6cb91d791a456788d46419f8f06604e}, obfuscating the buffer in-\/place. 



\label{doc-variable-members}
\doxysubsection{Field Documentation}
\index{AutoFile@{AutoFile}!m\_file@{m\_file}}
\index{m\_file@{m\_file}!AutoFile@{AutoFile}}
\doxysubsubsection{m\_file}
{\footnotesize\ttfamily \label{class_auto_file_a5ab7244bcdce786ebba7cf8bfedd75ee} 
std\+::\+FILE$\ast$ m\+\_\+file\hspace{0.3cm}{\ttfamily [protected]}}

\index{AutoFile@{AutoFile}!m\_obfuscation@{m\_obfuscation}}
\index{m\_obfuscation@{m\_obfuscation}!AutoFile@{AutoFile}}
\doxysubsubsection{m\_obfuscation}
{\footnotesize\ttfamily \label{class_auto_file_ab04e139a69723e8d99c8729d46550b5b} 
\textbf{ Obfuscation} m\+\_\+obfuscation\hspace{0.3cm}{\ttfamily [protected]}}

\index{AutoFile@{AutoFile}!m\_position@{m\_position}}
\index{m\_position@{m\_position}!AutoFile@{AutoFile}}
\doxysubsubsection{m\_position}
{\footnotesize\ttfamily \label{class_auto_file_a5bb91a099cb682e02501b81f68bf86bf} 
std\+::optional$<$int64\+\_\+t$>$ m\+\_\+position\hspace{0.3cm}{\ttfamily [protected]}}

\index{AutoFile@{AutoFile}!m\_was\_written@{m\_was\_written}}
\index{m\_was\_written@{m\_was\_written}!AutoFile@{AutoFile}}
\doxysubsubsection{m\_was\_written}
{\footnotesize\ttfamily \label{class_auto_file_a6ffc0f0895b09ee493acbb8b7d722f6f} 
bool m\+\_\+was\+\_\+written \{false\}\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/\textbf{ streams.\+h}\item 
src/\textbf{ streams.\+cpp}\end{DoxyCompactItemize}
