\doxysection{src/ipc/libmultiprocess/include/mp/proxy-\/io.h File Reference}
\label{proxy-io_8h}\index{src/ipc/libmultiprocess/include/mp/proxy-\/io.h@{src/ipc/libmultiprocess/include/mp/proxy-\/io.h}}
{\ttfamily \#include $<$mp/proxy.\+h$>$}\newline
{\ttfamily \#include $<$mp/util.\+h$>$}\newline
{\ttfamily \#include $<$mp/proxy.\+capnp.\+h$>$}\newline
{\ttfamily \#include $<$capnp/rpc-\/twoparty.\+h$>$}\newline
{\ttfamily \#include $<$assert.\+h$>$}\newline
{\ttfamily \#include $<$condition\+\_\+variable$>$}\newline
{\ttfamily \#include $<$functional$>$}\newline
{\ttfamily \#include $<$kj/function.\+h$>$}\newline
{\ttfamily \#include $<$map$>$}\newline
{\ttfamily \#include $<$memory$>$}\newline
{\ttfamily \#include $<$optional$>$}\newline
{\ttfamily \#include $<$sstream$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$thread$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ Invoke\+Context}
\item 
struct \textbf{ Client\+Invoke\+Context}
\item 
struct \textbf{ Server\+Invoke\+Context$<$ Proxy\+Server, Call\+Context\+\_\+ $>$}
\item 
struct \textbf{ Proxy\+Client$<$ Thread $>$}
\item 
struct \textbf{ Proxy\+Server$<$ Thread $>$}
\item 
class \textbf{ Logging\+Error\+Handler}
\begin{DoxyCompactList}\small\item\em \doxyref{Handler}{p.}{class_handler} for kj\+::\+Task\+Set failed task events. \end{DoxyCompactList}\item 
struct \textbf{ Log\+Message}
\item 
struct \textbf{ Log\+Options}
\item 
class \textbf{ Logger}
\item 
class \textbf{ Event\+Loop}
\item 
struct \textbf{ Waiter}
\item 
class \textbf{ Connection}
\item 
struct \textbf{ Server\+Vat\+Id}
\item 
struct \textbf{ Thread\+Context}
\end{DoxyCompactItemize}
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \textbf{ mp}
\begin{DoxyCompactList}\small\item\em Functions to serialize / deserialize common bitcoin types. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \textbf{ MP\+\_\+\+LOGPLAIN}(loop, ...)
\item 
\#define \textbf{ MP\+\_\+\+LOG}(loop, ...)
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename Interface, typename \textbf{ Params}, typename Results$>$ }\\using \textbf{ Server\+Context} = \textbf{ Server\+Invoke\+Context}$<$\textbf{ Proxy\+Server}$<$Interface$>$, \+::capnp\+::\+Call\+Context$<$\textbf{ Params}, Results$>$$>$
\item 
using \textbf{ Log\+Fn} = std\+::function$<$void(\textbf{ Log\+Message})$>$
\item 
using \textbf{ Conn\+Threads} = std\+::map$<$\textbf{ Connection}$\ast$, std\+::optional$<$\textbf{ Proxy\+Client}$<$Thread$>$$>$$>$
\item 
using \textbf{ Conn\+Thread} = Conn\+Threads\+::iterator
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum class \textbf{ Log} \{ \newline
\textbf{ Trace} = 0
, \textbf{ Debug}
, \textbf{ Info}
, \textbf{ Warning}
, \newline
\textbf{ Error}
, \textbf{ Raise}
 \}
\begin{DoxyCompactList}\small\item\em Log flags. Update stringify function if changed! \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
kj\+::\+String\+Ptr \textbf{ KJ\+\_\+\+STRINGIFY} (\textbf{ Log} \textbf{ flags})
\item 
std\+::string \textbf{ Long\+Thread\+Name} (const char $\ast$exe\+\_\+name)
\item 
std\+::tuple$<$ \textbf{ Conn\+Thread}, bool $>$ \textbf{ Set\+Thread} (\textbf{ Guarded\+Ref}$<$ \textbf{ Conn\+Threads} $>$ threads, \textbf{ Connection} $\ast$connection, const std\+::function$<$ Thread\+::\+Client()$>$ \&make\+\_\+thread)
\item 
{\footnotesize template$<$typename Init\+Interface$>$ }\\std\+::unique\+\_\+ptr$<$ \textbf{ Proxy\+Client}$<$ Init\+Interface $>$ $>$ \textbf{ Connect\+Stream} (\textbf{ Event\+Loop} \&loop, int fd)
\item 
{\footnotesize template$<$typename Init\+Interface, typename \textbf{ Init\+Impl}$>$ }\\void \textbf{ \+\_\+\+Serve} (\textbf{ Event\+Loop} \&loop, kj\+::\+Own$<$ kj\+::\+Async\+Io\+Stream $>$ \&\&stream, \textbf{ Init\+Impl} \&\textbf{ init})
\item 
{\footnotesize template$<$typename Init\+Interface, typename \textbf{ Init\+Impl}$>$ }\\void \textbf{ \+\_\+\+Listen} (\textbf{ Event\+Loop} \&loop, kj\+::\+Own$<$ kj\+::\+Connection\+Receiver $>$ \&\&listener, \textbf{ Init\+Impl} \&\textbf{ init})
\item 
{\footnotesize template$<$typename Init\+Interface, typename \textbf{ Init\+Impl}$>$ }\\void \textbf{ Serve\+Stream} (\textbf{ Event\+Loop} \&loop, int fd, \textbf{ Init\+Impl} \&\textbf{ init})
\item 
{\footnotesize template$<$typename Init\+Interface, typename \textbf{ Init\+Impl}$>$ }\\void \textbf{ Listen\+Connections} (\textbf{ Event\+Loop} \&loop, int fd, \textbf{ Init\+Impl} \&\textbf{ init})
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\textbf{ Thread\+Context} \textbf{ g\+\_\+thread\+\_\+context}
\end{DoxyCompactItemize}


\label{doc-define-members}
\doxysubsection{Macro Definition Documentation}
\index{proxy-\/io.h@{proxy-\/io.h}!MP\_LOG@{MP\_LOG}}
\index{MP\_LOG@{MP\_LOG}!proxy-\/io.h@{proxy-\/io.h}}
\doxysubsubsection{MP\_LOG}
{\footnotesize\ttfamily \label{proxy-io_8h_aa6fc2a55e5127fdfee52af8eda04d5d5} 
\#define MP\+\_\+\+LOG(\begin{DoxyParamCaption}\item[{}]{loop}{, }\item[{}]{}...{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{MP\_LOGPLAIN(loop,\ \_\_VA\_ARGS\_\_)\ <<\ \textcolor{stringliteral}{"{}\{"{}}\ <<\ LongThreadName((loop).m\_exe\_name)\ <<\ \textcolor{stringliteral}{"{}\}\ "{}}}

\end{DoxyCode}
\index{proxy-\/io.h@{proxy-\/io.h}!MP\_LOGPLAIN@{MP\_LOGPLAIN}}
\index{MP\_LOGPLAIN@{MP\_LOGPLAIN}!proxy-\/io.h@{proxy-\/io.h}}
\doxysubsubsection{MP\_LOGPLAIN}
{\footnotesize\ttfamily \label{proxy-io_8h_ab3af3f094132fbaea399d39236f1be83} 
\#define MP\+\_\+\+LOGPLAIN(\begin{DoxyParamCaption}\item[{}]{loop}{, }\item[{}]{}...{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (mp::Logger\ logger\{(loop).m\_log\_opts,\ \_\_VA\_ARGS\_\_\};\ logger)\ logger}

\end{DoxyCode}
