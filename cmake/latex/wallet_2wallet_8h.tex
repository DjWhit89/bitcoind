\doxysection{src/wallet/wallet.h File Reference}
\label{wallet_2wallet_8h}\index{src/wallet/wallet.h@{src/wallet/wallet.h}}
{\ttfamily \#include $<$addresstype.\+h$>$}\newline
{\ttfamily \#include $<$consensus/amount.\+h$>$}\newline
{\ttfamily \#include $<$interfaces/chain.\+h$>$}\newline
{\ttfamily \#include $<$interfaces/handler.\+h$>$}\newline
{\ttfamily \#include $<$kernel/cs\+\_\+main.\+h$>$}\newline
{\ttfamily \#include $<$logging.\+h$>$}\newline
{\ttfamily \#include $<$node/types.\+h$>$}\newline
{\ttfamily \#include $<$outputtype.\+h$>$}\newline
{\ttfamily \#include $<$policy/feerate.\+h$>$}\newline
{\ttfamily \#include $<$primitives/transaction.\+h$>$}\newline
{\ttfamily \#include $<$primitives/transaction\+\_\+identifier.\+h$>$}\newline
{\ttfamily \#include $<$script/interpreter.\+h$>$}\newline
{\ttfamily \#include $<$script/script.\+h$>$}\newline
{\ttfamily \#include $<$support/allocators/secure.\+h$>$}\newline
{\ttfamily \#include $<$sync.\+h$>$}\newline
{\ttfamily \#include $<$tinyformat.\+h$>$}\newline
{\ttfamily \#include $<$uint256.\+h$>$}\newline
{\ttfamily \#include $<$util/fs.\+h$>$}\newline
{\ttfamily \#include $<$util/hasher.\+h$>$}\newline
{\ttfamily \#include $<$util/result.\+h$>$}\newline
{\ttfamily \#include $<$util/string.\+h$>$}\newline
{\ttfamily \#include $<$util/time.\+h$>$}\newline
{\ttfamily \#include $<$util/ui\+\_\+change\+\_\+type.\+h$>$}\newline
{\ttfamily \#include $<$wallet/crypter.\+h$>$}\newline
{\ttfamily \#include $<$wallet/db.\+h$>$}\newline
{\ttfamily \#include $<$wallet/scriptpubkeyman.\+h$>$}\newline
{\ttfamily \#include $<$wallet/transaction.\+h$>$}\newline
{\ttfamily \#include $<$wallet/types.\+h$>$}\newline
{\ttfamily \#include $<$wallet/walletutil.\+h$>$}\newline
{\ttfamily \#include $<$atomic$>$}\newline
{\ttfamily \#include $<$cassert$>$}\newline
{\ttfamily \#include $<$cstddef$>$}\newline
{\ttfamily \#include $<$cstdint$>$}\newline
{\ttfamily \#include $<$functional$>$}\newline
{\ttfamily \#include $<$limits$>$}\newline
{\ttfamily \#include $<$map$>$}\newline
{\ttfamily \#include $<$memory$>$}\newline
{\ttfamily \#include $<$optional$>$}\newline
{\ttfamily \#include $<$set$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$unordered\+\_\+map$>$}\newline
{\ttfamily \#include $<$utility$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$boost/signals2/signal.\+hpp$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
class \textbf{ Reserve\+Destination}
\item 
struct \textbf{ CAddress\+Book\+Data}
\item 
struct \textbf{ CRecipient}
\item 
class \textbf{ CWallet}
\item 
struct \textbf{ CWallet\+::\+Scan\+Result}
\item 
struct \textbf{ CWallet\+::\+Addr\+Book\+Filter}
\item 
class \textbf{ Wallet\+Rescan\+Reserver}
\item 
struct \textbf{ Migration\+Result}
\end{DoxyCompactItemize}
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \textbf{ common}
\item 
namespace \textbf{ interfaces}
\item 
namespace \textbf{ wallet}
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
using \textbf{ Load\+Wallet\+Fn} = std\+::function$<$void(std\+::unique\+\_\+ptr$<$\textbf{ interfaces\+::\+Wallet}$>$ \textbf{ wallet})$>$
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \textbf{ Wait\+For\+Delete\+Wallet} (std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ \&\&\textbf{ wallet})
\item 
bool \textbf{ Add\+Wallet} (\textbf{ Wallet\+Context} \&context, const std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ \&\textbf{ wallet})
\item 
bool \textbf{ Remove\+Wallet} (\textbf{ Wallet\+Context} \&context, const std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ \&\textbf{ wallet}, std\+::optional$<$ bool $>$ load\+\_\+on\+\_\+start, std\+::vector$<$ \textbf{ bilingual\+\_\+str} $>$ \&warnings)
\item 
bool \textbf{ Remove\+Wallet} (\textbf{ Wallet\+Context} \&context, const std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ \&\textbf{ wallet}, std\+::optional$<$ bool $>$ load\+\_\+on\+\_\+start)
\item 
std\+::vector$<$ std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ $>$ \textbf{ Get\+Wallets} (\textbf{ Wallet\+Context} \&context)
\item 
std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ \textbf{ Get\+Default\+Wallet} (\textbf{ Wallet\+Context} \&context, size\+\_\+t \&count)
\item 
std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ \textbf{ Get\+Wallet} (\textbf{ Wallet\+Context} \&context, const std\+::string \&\textbf{ name})
\item 
std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ \textbf{ Load\+Wallet} (\textbf{ Wallet\+Context} \&context, const std\+::string \&\textbf{ name}, std\+::optional$<$ bool $>$ load\+\_\+on\+\_\+start, const \textbf{ Database\+Options} \&options, \textbf{ Database\+Status} \&status, \textbf{ bilingual\+\_\+str} \&error, std\+::vector$<$ \textbf{ bilingual\+\_\+str} $>$ \&warnings)
\item 
std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ \textbf{ Create\+Wallet} (\textbf{ Wallet\+Context} \&context, const std\+::string \&\textbf{ name}, std\+::optional$<$ bool $>$ load\+\_\+on\+\_\+start, \textbf{ Database\+Options} \&options, \textbf{ Database\+Status} \&status, \textbf{ bilingual\+\_\+str} \&error, std\+::vector$<$ \textbf{ bilingual\+\_\+str} $>$ \&warnings)
\item 
std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ \textbf{ Restore\+Wallet} (\textbf{ Wallet\+Context} \&context, const \textbf{ fs\+::path} \&backup\+\_\+file, const std\+::string \&wallet\+\_\+name, std\+::optional$<$ bool $>$ load\+\_\+on\+\_\+start, \textbf{ Database\+Status} \&status, \textbf{ bilingual\+\_\+str} \&error, std\+::vector$<$ \textbf{ bilingual\+\_\+str} $>$ \&warnings, bool load\+\_\+after\+\_\+restore)
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ interfaces\+::\+Handler} $>$ \textbf{ Handle\+Load\+Wallet} (\textbf{ Wallet\+Context} \&context, \textbf{ Load\+Wallet\+Fn} load\+\_\+wallet)
\item 
void \textbf{ Notify\+Wallet\+Loaded} (\textbf{ Wallet\+Context} \&context, const std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ \&\textbf{ wallet})
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ Wallet\+Database} $>$ \textbf{ Make\+Wallet\+Database} (const std\+::string \&\textbf{ name}, const \textbf{ Database\+Options} \&options, \textbf{ Database\+Status} \&status, \textbf{ bilingual\+\_\+str} \&error\+\_\+string)
\item 
std\+::string \textbf{ Purpose\+To\+String} (\textbf{ Address\+Purpose} p)
\item 
std\+::optional$<$ \textbf{ Address\+Purpose} $>$ \textbf{ Purpose\+From\+String} (std\+::string\+\_\+view s)
\item 
void \textbf{ Maybe\+Resend\+Wallet\+Txs} (\textbf{ Wallet\+Context} \&context)
\item 
bool \textbf{ Add\+Wallet\+Setting} (\textbf{ interfaces\+::\+Chain} \&chain, const std\+::string \&wallet\+\_\+name)
\begin{DoxyCompactList}\small\item\em Add wallet name to persistent configuration so it will be loaded on startup. \end{DoxyCompactList}\item 
bool \textbf{ Remove\+Wallet\+Setting} (\textbf{ interfaces\+::\+Chain} \&chain, const std\+::string \&wallet\+\_\+name)
\begin{DoxyCompactList}\small\item\em Remove wallet name from persistent configuration so it will not be loaded on startup. \end{DoxyCompactList}\item 
\textbf{ util\+::\+Result}$<$ \textbf{ Migration\+Result} $>$ \textbf{ Migrate\+Legacy\+To\+Descriptor} (const std\+::string \&wallet\+\_\+name, const \textbf{ Secure\+String} \&passphrase, \textbf{ Wallet\+Context} \&context)
\begin{DoxyCompactList}\small\item\em Do all steps to migrate a legacy wallet to a descriptor wallet. \end{DoxyCompactList}\item 
\textbf{ util\+::\+Result}$<$ \textbf{ Migration\+Result} $>$ \textbf{ Migrate\+Legacy\+To\+Descriptor} (std\+::shared\+\_\+ptr$<$ \textbf{ CWallet} $>$ local\+\_\+wallet, const \textbf{ Secure\+String} \&passphrase, \textbf{ Wallet\+Context} \&context)
\begin{DoxyCompactList}\small\item\em Requirement\+: The wallet provided to this function must be isolated, with no attachment to the node\textquotesingle{}s context. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
constexpr \textbf{ CAmount} \textbf{ DEFAULT\+\_\+\+PAY\+\_\+\+TX\+\_\+\+FEE} = 0
\begin{DoxyCompactList}\small\item\em -\/paytxfee default \end{DoxyCompactList}\item 
constexpr \textbf{ CAmount} \textbf{ HIGH\+\_\+\+APS\+\_\+\+FEE} \{COIN / 10000\}
\begin{DoxyCompactList}\small\item\em discourage APS fee higher than this amount \end{DoxyCompactList}\item 
constexpr \textbf{ CAmount} \textbf{ DEFAULT\+\_\+\+TRANSACTION\+\_\+\+MAXFEE} \{COIN / 10\}
\begin{DoxyCompactList}\small\item\em -\/maxtxfee default \end{DoxyCompactList}\item 
constexpr \textbf{ CAmount} \textbf{ HIGH\+\_\+\+TX\+\_\+\+FEE\+\_\+\+PER\+\_\+\+KB} \{COIN / 100\}
\begin{DoxyCompactList}\small\item\em Discourage users to set fees higher than this amount (in satoshis) per kB. \end{DoxyCompactList}\item 
constexpr \textbf{ CAmount} \textbf{ HIGH\+\_\+\+MAX\+\_\+\+TX\+\_\+\+FEE} \{100 $\ast$ \textbf{ HIGH\+\_\+\+TX\+\_\+\+FEE\+\_\+\+PER\+\_\+\+KB}\}
\begin{DoxyCompactList}\small\item\em -\/maxtxfee will warn if called with a higher fee than this amount (in satoshis) \end{DoxyCompactList}\item 
constexpr \textbf{ Output\+Type} \textbf{ DEFAULT\+\_\+\+ADDRESS\+\_\+\+TYPE} \{\textbf{ Output\+Type\+::\+BECH32}\}
\begin{DoxyCompactList}\small\item\em Default for -\/addresstype. \end{DoxyCompactList}\end{DoxyCompactItemize}


\label{doc-typedef-members}
\doxysubsection{Typedef Documentation}
\index{wallet.h@{wallet.h}!LoadWalletFn@{LoadWalletFn}}
\index{LoadWalletFn@{LoadWalletFn}!wallet.h@{wallet.h}}
\doxysubsubsection{LoadWalletFn}
{\footnotesize\ttfamily \label{wallet_2wallet_8h_a171681c3ef00e6924cf660583791e775} 
using \textbf{ Load\+Wallet\+Fn} = std\+::function$<$void(std\+::unique\+\_\+ptr$<$\textbf{ interfaces\+::\+Wallet}$>$ \textbf{ wallet})$>$}

