\doxysection{bit\+\_\+packed\+\_\+atomic\+\_\+flags Class Reference}
\label{class_cuckoo_cache_1_1bit__packed__atomic__flags}\index{bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}}


{\ttfamily \#include $<$cuckoocache.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ bit\+\_\+packed\+\_\+atomic\+\_\+flags} ()=delete
\item 
\textbf{ bit\+\_\+packed\+\_\+atomic\+\_\+flags} (uint32\+\_\+t size)
\item 
void \textbf{ setup} (uint32\+\_\+t b)
\item 
void \textbf{ bit\+\_\+set} (uint32\+\_\+t s)
\item 
void \textbf{ bit\+\_\+unset} (uint32\+\_\+t s)
\item 
bool \textbf{ bit\+\_\+is\+\_\+set} (uint32\+\_\+t s) const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\doxyref{bit\+\_\+packed\+\_\+atomic\+\_\+flags}{p.}{class_cuckoo_cache_1_1bit__packed__atomic__flags} implements a container for garbage collection flags that is only thread unsafe on calls to setup. This class bit-\/packs collection flags for memory efficiency.

All operations are {\ttfamily std\+::memory\+\_\+order\+\_\+relaxed} so external mechanisms must ensure that writes and reads are properly synchronized.

On setup(n), all bits up to {\ttfamily n} are marked as collected.

Under the hood, because it is an 8-\/bit type, it makes sense to use a multiple of 8 for setup, but it will be safe if that is not the case as well. 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}!bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}}
\index{bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}!bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}}
\doxysubsubsection{bit\_packed\_atomic\_flags()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{class_cuckoo_cache_1_1bit__packed__atomic__flags_a565f860f13fc3a7757818576dd9164ba} 
bit\+\_\+packed\+\_\+atomic\+\_\+flags (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

No default constructor, as there must be some size. \index{bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}!bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}}
\index{bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}!bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}}
\doxysubsubsection{bit\_packed\_atomic\_flags()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{class_cuckoo_cache_1_1bit__packed__atomic__flags_a1bb955c471d0003fe4dfae06d4b5f810} 
bit\+\_\+packed\+\_\+atomic\+\_\+flags (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{size}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}

\doxyref{bit\+\_\+packed\+\_\+atomic\+\_\+flags}{p.}{class_cuckoo_cache_1_1bit__packed__atomic__flags} constructor creates memory to sufficiently keep track of garbage collection information for {\ttfamily size} entries.


\begin{DoxyParams}{Parameters}
{\em size} & the number of elements to allocate space for\\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{Postcondition}
bit\+\_\+set, bit\+\_\+unset, and bit\+\_\+is\+\_\+set function properly forall x. x $<$ size 

All calls to bit\+\_\+is\+\_\+set (without subsequent bit\+\_\+unset) will return true. 
\end{DoxyPostcond}


\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}!bit\_is\_set@{bit\_is\_set}}
\index{bit\_is\_set@{bit\_is\_set}!bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}}
\doxysubsubsection{bit\_is\_set()}
{\footnotesize\ttfamily \label{class_cuckoo_cache_1_1bit__packed__atomic__flags_aa91dad66bc29bb5d825ebdc5a141086c} 
bool bit\+\_\+is\+\_\+set (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{s}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

bit\+\_\+is\+\_\+set queries the table for discardability at {\ttfamily s}.


\begin{DoxyParams}{Parameters}
{\em s} & the index of the entry to read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the bit at index {\ttfamily s} was set, false otherwise 
\end{DoxyReturn}
\index{bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}!bit\_set@{bit\_set}}
\index{bit\_set@{bit\_set}!bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}}
\doxysubsubsection{bit\_set()}
{\footnotesize\ttfamily \label{class_cuckoo_cache_1_1bit__packed__atomic__flags_a46af126002e643dab0d9eb399626aed8} 
void bit\+\_\+set (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{s}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

bit\+\_\+set sets an entry as discardable.


\begin{DoxyParams}{Parameters}
{\em s} & the index of the entry to bit\+\_\+set \\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{Postcondition}
immediately subsequent call (assuming proper external memory ordering) to bit\+\_\+is\+\_\+set(s) == true. 
\end{DoxyPostcond}
\index{bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}!bit\_unset@{bit\_unset}}
\index{bit\_unset@{bit\_unset}!bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}}
\doxysubsubsection{bit\_unset()}
{\footnotesize\ttfamily \label{class_cuckoo_cache_1_1bit__packed__atomic__flags_a651bf1be50535ac7eb3d846ecd2b1e96} 
void bit\+\_\+unset (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{s}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

bit\+\_\+unset marks an entry as something that should not be overwritten.


\begin{DoxyParams}{Parameters}
{\em s} & the index of the entry to bit\+\_\+unset \\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{Postcondition}
immediately subsequent call (assuming proper external memory ordering) to bit\+\_\+is\+\_\+set(s) == false. 
\end{DoxyPostcond}
\index{bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}!setup@{setup}}
\index{setup@{setup}!bit\_packed\_atomic\_flags@{bit\_packed\_atomic\_flags}}
\doxysubsubsection{setup()}
{\footnotesize\ttfamily \label{class_cuckoo_cache_1_1bit__packed__atomic__flags_a56fcd822a91105abab64e7b785ad8448} 
void setup (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

setup marks all entries and ensures that \doxyref{bit\+\_\+packed\+\_\+atomic\+\_\+flags}{p.}{class_cuckoo_cache_1_1bit__packed__atomic__flags} can store at least {\ttfamily b} entries.


\begin{DoxyParams}{Parameters}
{\em b} & the number of elements to allocate space for \\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{Postcondition}
bit\+\_\+set, bit\+\_\+unset, and bit\+\_\+is\+\_\+set function properly forall x. x $<$ b 

All calls to bit\+\_\+is\+\_\+set (without subsequent bit\+\_\+unset) will return true. 
\end{DoxyPostcond}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/\textbf{ cuckoocache.\+h}\end{DoxyCompactItemize}
