\doxysection{Mining Class Reference}
\label{classinterfaces_1_1_mining}\index{Mining@{Mining}}


{\ttfamily \#include $<$mining.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \textbf{ $\sim$\+Mining} ()=default
\item 
virtual bool \textbf{ is\+Test\+Chain} ()=0
\begin{DoxyCompactList}\small\item\em If this chain is exclusively used for testing. \end{DoxyCompactList}\item 
virtual bool \textbf{ is\+Initial\+Block\+Download} ()=0
\begin{DoxyCompactList}\small\item\em Returns whether IBD is still in progress. \end{DoxyCompactList}\item 
virtual std\+::optional$<$ \textbf{ Block\+Ref} $>$ \textbf{ get\+Tip} ()=0
\begin{DoxyCompactList}\small\item\em Returns the hash and height for the tip of this chain. \end{DoxyCompactList}\item 
virtual std\+::optional$<$ \textbf{ Block\+Ref} $>$ \textbf{ wait\+Tip\+Changed} (\textbf{ uint256} current\+\_\+tip, \textbf{ Milliseconds\+Double} timeout=Milliseconds\+Double\+::max())=0
\item 
virtual std\+::unique\+\_\+ptr$<$ \textbf{ Block\+Template} $>$ \textbf{ create\+New\+Block} (const \textbf{ node\+::\+Block\+Create\+Options} \&options=\{\})=0
\item 
virtual bool \textbf{ check\+Block} (const \textbf{ CBlock} \&block, const \textbf{ node\+::\+Block\+Check\+Options} \&options, std\+::string \&reason, std\+::string \&debug)=0
\item 
virtual \textbf{ node\+::\+Node\+Context} $\ast$ \textbf{ context} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Interface giving clients (RPC, Stratum v2 Template Provider in the future) ability to create block templates. 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{Mining@{Mining}!````~Mining@{$\sim$Mining}}
\index{````~Mining@{$\sim$Mining}!Mining@{Mining}}
\doxysubsubsection{$\sim$Mining()}
{\footnotesize\ttfamily \label{classinterfaces_1_1_mining_aa9b2d0fe23fb3e8de075f032f8edfc69} 
virtual $\sim$\textbf{ Mining} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [default]}}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{Mining@{Mining}!checkBlock@{checkBlock}}
\index{checkBlock@{checkBlock}!Mining@{Mining}}
\doxysubsubsection{checkBlock()}
{\footnotesize\ttfamily \label{classinterfaces_1_1_mining_a05a577bfc881a58a8c857037189a259b} 
virtual bool check\+Block (\begin{DoxyParamCaption}\item[{const \textbf{ CBlock} \&}]{block}{, }\item[{const \textbf{ node\+::\+Block\+Check\+Options} \&}]{options}{, }\item[{std\+::string \&}]{reason}{, }\item[{std\+::string \&}]{debug}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Checks if a given block is valid.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em block} & the block to check \\
\hline
\mbox{\texttt{in}}  & {\em options} & verification options\+: the proof-\/of-\/work check can be skipped in order to verify a template generated by external software. \\
\hline
\mbox{\texttt{out}}  & {\em reason} & failure reason (BIP22) \\
\hline
\mbox{\texttt{out}}  & {\em debug} & more detailed rejection reason \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
whether the block is valid
\end{DoxyReturn}
For signets the challenge verification is skipped when check\+\_\+pow is false. \index{Mining@{Mining}!context@{context}}
\index{context@{context}!Mining@{Mining}}
\doxysubsubsection{context()}
{\footnotesize\ttfamily \label{classinterfaces_1_1_mining_ab6c3517bc6198d0289236eda9353468e} 
virtual \textbf{ node\+::\+Node\+Context} $\ast$ context (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

Get internal node context. Useful for RPC and testing, but not accessible across processes. \index{Mining@{Mining}!createNewBlock@{createNewBlock}}
\index{createNewBlock@{createNewBlock}!Mining@{Mining}}
\doxysubsubsection{createNewBlock()}
{\footnotesize\ttfamily \label{classinterfaces_1_1_mining_aa9c159c99887be3118855c15a0e34e3e} 
virtual std\+::unique\+\_\+ptr$<$ \textbf{ Block\+Template} $>$ create\+New\+Block (\begin{DoxyParamCaption}\item[{const \textbf{ node\+::\+Block\+Create\+Options} \&}]{options}{ = {\ttfamily \{\}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Construct a new block template.

During node initialization, this will wait until the tip is connected.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em options} & options for creating the block \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em \doxyref{Block\+Template}{p.}{classinterfaces_1_1_block_template}} & a block template. \\
\hline
{\em std\+::nullptr} & if the node is shut down. \\
\hline
\end{DoxyRetVals}
\index{Mining@{Mining}!getTip@{getTip}}
\index{getTip@{getTip}!Mining@{Mining}}
\doxysubsubsection{getTip()}
{\footnotesize\ttfamily \label{classinterfaces_1_1_mining_a27574e76d29108144b1a68922f3f6c77} 
virtual std\+::optional$<$ \textbf{ Block\+Ref} $>$ get\+Tip (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Returns the hash and height for the tip of this chain. 

\index{Mining@{Mining}!isInitialBlockDownload@{isInitialBlockDownload}}
\index{isInitialBlockDownload@{isInitialBlockDownload}!Mining@{Mining}}
\doxysubsubsection{isInitialBlockDownload()}
{\footnotesize\ttfamily \label{classinterfaces_1_1_mining_a80cb5166168a53326e32afe29e15fb78} 
virtual bool is\+Initial\+Block\+Download (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Returns whether IBD is still in progress. 

\index{Mining@{Mining}!isTestChain@{isTestChain}}
\index{isTestChain@{isTestChain}!Mining@{Mining}}
\doxysubsubsection{isTestChain()}
{\footnotesize\ttfamily \label{classinterfaces_1_1_mining_aef5e9e2e9d0fa9c614e0c1690fcc07b2} 
virtual bool is\+Test\+Chain (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



If this chain is exclusively used for testing. 

\index{Mining@{Mining}!waitTipChanged@{waitTipChanged}}
\index{waitTipChanged@{waitTipChanged}!Mining@{Mining}}
\doxysubsubsection{waitTipChanged()}
{\footnotesize\ttfamily \label{classinterfaces_1_1_mining_a3af7456ccba67865538c1f5f72a57f7d} 
virtual std\+::optional$<$ \textbf{ Block\+Ref} $>$ wait\+Tip\+Changed (\begin{DoxyParamCaption}\item[{\textbf{ uint256}}]{current\+\_\+tip}{, }\item[{\textbf{ Milliseconds\+Double}}]{timeout}{ = {\ttfamily MillisecondsDouble\+:\+:max()}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Waits for the connected tip to change. During node initialization, this will wait until the tip is connected (regardless of {\ttfamily timeout}).


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em current\+\_\+tip} & block hash of the current chain tip. Function waits for the chain tip to differ from this. \\
\hline
\mbox{\texttt{in}}  & {\em timeout} & how long to wait for a new tip (default is forever)\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em \doxyref{Block\+Ref}{p.}{structinterfaces_1_1_block_ref}} & hash and height of the current chain tip after this call. \\
\hline
{\em std\+::nullopt} & if the node is shut down. \\
\hline
\end{DoxyRetVals}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/interfaces/\textbf{ mining.\+h}\end{DoxyCompactItemize}
