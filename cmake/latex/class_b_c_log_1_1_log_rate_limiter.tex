\doxysection{Log\+Rate\+Limiter Class Reference}
\label{class_b_c_log_1_1_log_rate_limiter}\index{LogRateLimiter@{LogRateLimiter}}


Fixed window rate limiter for logging.  




{\ttfamily \#include $<$logging.\+h$>$}

\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ Stats}
\begin{DoxyCompactList}\small\item\em Keeps track of an individual source location and how many available bytes are left for logging from it. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum class \textbf{ Status} \{ \textbf{ UNSUPPRESSED}
, \textbf{ NEWLY\+\_\+\+SUPPRESSED}
, \textbf{ STILL\+\_\+\+SUPPRESSED}
 \}
\begin{DoxyCompactList}\small\item\em Suppression status of a source log location. \end{DoxyCompactList}\item 
using \textbf{ Scheduler\+Function} = std\+::function$<$void(std\+::function$<$void()$>$, std\+::chrono\+::milliseconds)$>$
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Status}\textbf{ Status} \textbf{ Consume} (const \textbf{ Source\+Location} \&source\+\_\+loc, const std\+::string \&str) \textbf{ EXCLUSIVE\+\_\+\+LOCKS\+\_\+\+REQUIRED}(!m\+\_\+mutex)
\item 
void \textbf{ Reset} () \textbf{ EXCLUSIVE\+\_\+\+LOCKS\+\_\+\+REQUIRED}(!m\+\_\+mutex)
\begin{DoxyCompactList}\small\item\em Resets all usage to zero. Called periodically by the scheduler. \end{DoxyCompactList}\item 
bool \textbf{ Suppressions\+Active} () const
\begin{DoxyCompactList}\small\item\em Returns true if any log locations are currently being suppressed. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::shared\+\_\+ptr$<$ Log\+Rate\+Limiter $>$ \textbf{ Create} (\textbf{ Scheduler\+Function} \&\&scheduler\+\_\+func, uint64\+\_\+t max\+\_\+bytes, std\+::chrono\+::seconds reset\+\_\+window)
\end{DoxyCompactItemize}
\doxysubsubsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
const uint64\+\_\+t \textbf{ m\+\_\+max\+\_\+bytes}
\begin{DoxyCompactList}\small\item\em Maximum number of bytes logged per location per window. \end{DoxyCompactList}\item 
const std\+::chrono\+::seconds \textbf{ m\+\_\+reset\+\_\+window}
\begin{DoxyCompactList}\small\item\em Interval after which the window is reset. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Fixed window rate limiter for logging. 

\label{doc-typedef-members}
\doxysubsection{Member Typedef Documentation}
\index{LogRateLimiter@{LogRateLimiter}!SchedulerFunction@{SchedulerFunction}}
\index{SchedulerFunction@{SchedulerFunction}!LogRateLimiter@{LogRateLimiter}}
\doxysubsubsection{SchedulerFunction}
{\footnotesize\ttfamily \label{class_b_c_log_1_1_log_rate_limiter_aada8e48f4cc9da700f435315c1cf8850} 
using \textbf{ Scheduler\+Function} = std\+::function$<$void(std\+::function$<$void()$>$, std\+::chrono\+::milliseconds)$>$}



\label{doc-enum-members}
\doxysubsection{Member Enumeration Documentation}
\index{LogRateLimiter@{LogRateLimiter}!Status@{Status}}
\index{Status@{Status}!LogRateLimiter@{LogRateLimiter}}
\doxysubsubsection{Status}
{\footnotesize\ttfamily \label{class_b_c_log_1_1_log_rate_limiter_a67a0db04d321a74b7e7fcfd3f1a3f70b} 
enum class \textbf{ Status}\textbf{ Status}\hspace{0.3cm}{\ttfamily [strong]}}



Suppression status of a source log location. 

\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{UNSUPPRESSED@{UNSUPPRESSED}!LogRateLimiter@{LogRateLimiter}}\index{LogRateLimiter@{LogRateLimiter}!UNSUPPRESSED@{UNSUPPRESSED}}}\label{class_b_c_log_1_1_log_rate_limiter_a67a0db04d321a74b7e7fcfd3f1a3f70bad2b37b1f0c2fa4e393aa53170cb09835} 
UNSUPPRESSED&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{NEWLY\_SUPPRESSED@{NEWLY\_SUPPRESSED}!LogRateLimiter@{LogRateLimiter}}\index{LogRateLimiter@{LogRateLimiter}!NEWLY\_SUPPRESSED@{NEWLY\_SUPPRESSED}}}\label{class_b_c_log_1_1_log_rate_limiter_a67a0db04d321a74b7e7fcfd3f1a3f70baa79081b2824ca028d8686997f32a5281} 
NEWLY\+\_\+\+SUPPRESSED&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{STILL\_SUPPRESSED@{STILL\_SUPPRESSED}!LogRateLimiter@{LogRateLimiter}}\index{LogRateLimiter@{LogRateLimiter}!STILL\_SUPPRESSED@{STILL\_SUPPRESSED}}}\label{class_b_c_log_1_1_log_rate_limiter_a67a0db04d321a74b7e7fcfd3f1a3f70ba665a40e3d4111b540e033f979102b34c} 
STILL\+\_\+\+SUPPRESSED&\\
\hline

\end{DoxyEnumFields}


\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{LogRateLimiter@{LogRateLimiter}!Consume@{Consume}}
\index{Consume@{Consume}!LogRateLimiter@{LogRateLimiter}}
\doxysubsubsection{Consume()}
{\footnotesize\ttfamily \label{class_b_c_log_1_1_log_rate_limiter_a7bd85dd858830ad5b1d7676db3729bd7} 
\textbf{ BCLog\+::\+Log\+Rate\+Limiter\+::\+Status} Consume (\begin{DoxyParamCaption}\item[{const \textbf{ Source\+Location} \&}]{source\+\_\+loc}{, }\item[{const std\+::string \&}]{str}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [nodiscard]}}

Consumes {\ttfamily source\+\_\+loc}\textquotesingle{}s available bytes corresponding to the size of the (formatted) {\ttfamily str} and returns its status. \index{LogRateLimiter@{LogRateLimiter}!Create@{Create}}
\index{Create@{Create}!LogRateLimiter@{LogRateLimiter}}
\doxysubsubsection{Create()}
{\footnotesize\ttfamily \label{class_b_c_log_1_1_log_rate_limiter_a55fcaa8e1e77f26828e4a5bb3f38dad9} 
std\+::shared\+\_\+ptr$<$ \textbf{ BCLog\+::\+Log\+Rate\+Limiter} $>$ Create (\begin{DoxyParamCaption}\item[{\textbf{ Scheduler\+Function} \&\&}]{scheduler\+\_\+func}{, }\item[{uint64\+\_\+t}]{max\+\_\+bytes}{, }\item[{std\+::chrono\+::seconds}]{reset\+\_\+window}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyParams}{Parameters}
{\em scheduler\+\_\+func} & Callable object used to schedule resetting the window. The first parameter is the function to be executed, and the second is the reset\+\_\+window interval. \\
\hline
{\em max\+\_\+bytes} & Maximum number of bytes that can be logged for each source location. \\
\hline
{\em reset\+\_\+window} & Time window after which the stats are reset. \\
\hline
\end{DoxyParams}
\index{LogRateLimiter@{LogRateLimiter}!Reset@{Reset}}
\index{Reset@{Reset}!LogRateLimiter@{LogRateLimiter}}
\doxysubsubsection{Reset()}
{\footnotesize\ttfamily \label{class_b_c_log_1_1_log_rate_limiter_aa0eb6c627e5f2ec722ee3b4a08622ec7} 
void Reset (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Resets all usage to zero. Called periodically by the scheduler. 

\index{LogRateLimiter@{LogRateLimiter}!SuppressionsActive@{SuppressionsActive}}
\index{SuppressionsActive@{SuppressionsActive}!LogRateLimiter@{LogRateLimiter}}
\doxysubsubsection{SuppressionsActive()}
{\footnotesize\ttfamily \label{class_b_c_log_1_1_log_rate_limiter_aee1e0ad3b74c3f3b97e4e0ec7f321786} 
bool Suppressions\+Active (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns true if any log locations are currently being suppressed. 



\label{doc-variable-members}
\doxysubsection{Field Documentation}
\index{LogRateLimiter@{LogRateLimiter}!m\_max\_bytes@{m\_max\_bytes}}
\index{m\_max\_bytes@{m\_max\_bytes}!LogRateLimiter@{LogRateLimiter}}
\doxysubsubsection{m\_max\_bytes}
{\footnotesize\ttfamily \label{class_b_c_log_1_1_log_rate_limiter_a16d210262f6c408dc91218eaada044c4} 
const uint64\+\_\+t m\+\_\+max\+\_\+bytes}



Maximum number of bytes logged per location per window. 

\index{LogRateLimiter@{LogRateLimiter}!m\_reset\_window@{m\_reset\_window}}
\index{m\_reset\_window@{m\_reset\_window}!LogRateLimiter@{LogRateLimiter}}
\doxysubsubsection{m\_reset\_window}
{\footnotesize\ttfamily \label{class_b_c_log_1_1_log_rate_limiter_abaa0e85f664eef7101ba16f584460588} 
const std\+::chrono\+::seconds m\+\_\+reset\+\_\+window}



Interval after which the window is reset. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/\textbf{ logging.\+h}\item 
src/\textbf{ logging.\+cpp}\end{DoxyCompactItemize}
