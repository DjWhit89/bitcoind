\doxysection{Test\+Setup Class Reference}
\label{classmp_1_1test_1_1_test_setup}\index{TestSetup@{TestSetup}}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Test\+Setup} (bool client\+\_\+owns\+\_\+connection=true)
\item 
\textbf{ $\sim$\+Test\+Setup} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
std\+::function$<$ void()$>$ \textbf{ server\+\_\+disconnect}
\item 
std\+::function$<$ void()$>$ \textbf{ client\+\_\+disconnect}
\item 
std\+::promise$<$ std\+::unique\+\_\+ptr$<$ \textbf{ Proxy\+Client}$<$ messages\+::\+Foo\+Interface $>$ $>$ $>$ \textbf{ client\+\_\+promise}
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ Proxy\+Client}$<$ messages\+::\+Foo\+Interface $>$ $>$ \textbf{ client}
\item 
\textbf{ Proxy\+Server}$<$ messages\+::\+Foo\+Interface $>$ $\ast$ \textbf{ server} \{nullptr\}
\item 
std\+::thread \textbf{ thread}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Test setup class creating a two way connection between a \doxyref{Proxy\+Server$<$\+Foo\+Interface$>$}{p.}{structmp_1_1_proxy_server} object and a \doxyref{Proxy\+Client$<$\+Foo\+Interface$>$}{p.}{structmp_1_1_proxy_client}.

Provides client\+\_\+disconnect and server\+\_\+disconnect lambdas that can be used to trigger disconnects and test handling of broken and closed connections.

Accepts a client\+\_\+owns\+\_\+connection option to test different \doxyref{Proxy\+Client}{p.}{structmp_1_1_proxy_client} destroy\+\_\+connection values and control whether destroying the \doxyref{Proxy\+Client}{p.}{structmp_1_1_proxy_client} object destroys the client \doxyref{Connection}{p.}{classmp_1_1_connection} object. Normally it makes sense for this to be true to simplify shutdown and avoid needing to call client\+\_\+disconnect manually, but false allows testing more \doxyref{Proxy\+Client}{p.}{structmp_1_1_proxy_client} behavior and the "{}\+IPC client method called after disconnect"{} code path. 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{TestSetup@{TestSetup}!TestSetup@{TestSetup}}
\index{TestSetup@{TestSetup}!TestSetup@{TestSetup}}
\doxysubsubsection{TestSetup()}
{\footnotesize\ttfamily \label{classmp_1_1test_1_1_test_setup_a08524d43c568c27a2e24c68efdd466ab} 
Test\+Setup (\begin{DoxyParamCaption}\item[{bool}]{client\+\_\+owns\+\_\+connection}{ = {\ttfamily true}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\index{TestSetup@{TestSetup}!````~TestSetup@{$\sim$TestSetup}}
\index{````~TestSetup@{$\sim$TestSetup}!TestSetup@{TestSetup}}
\doxysubsubsection{$\sim$TestSetup()}
{\footnotesize\ttfamily \label{classmp_1_1test_1_1_test_setup_a8d6f6cb8834c33e355f11202bf8a1935} 
$\sim$\textbf{ Test\+Setup} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



\label{doc-variable-members}
\doxysubsection{Field Documentation}
\index{TestSetup@{TestSetup}!client@{client}}
\index{client@{client}!TestSetup@{TestSetup}}
\doxysubsubsection{client}
{\footnotesize\ttfamily \label{classmp_1_1test_1_1_test_setup_a0bb0472e9464a480c48902a7d7a43906} 
std\+::unique\+\_\+ptr$<$\textbf{ Proxy\+Client}$<$messages\+::\+Foo\+Interface$>$ $>$ client}

\index{TestSetup@{TestSetup}!client\_disconnect@{client\_disconnect}}
\index{client\_disconnect@{client\_disconnect}!TestSetup@{TestSetup}}
\doxysubsubsection{client\_disconnect}
{\footnotesize\ttfamily \label{classmp_1_1test_1_1_test_setup_a7be0c0a9e6cc694e0d248b833e9a3b96} 
std\+::function$<$void()$>$ client\+\_\+disconnect}

\index{TestSetup@{TestSetup}!client\_promise@{client\_promise}}
\index{client\_promise@{client\_promise}!TestSetup@{TestSetup}}
\doxysubsubsection{client\_promise}
{\footnotesize\ttfamily \label{classmp_1_1test_1_1_test_setup_a3f00b938bb73d922e49ee70f34317195} 
std\+::promise$<$std\+::unique\+\_\+ptr$<$\textbf{ Proxy\+Client}$<$messages\+::\+Foo\+Interface$>$ $>$ $>$ client\+\_\+promise}

\index{TestSetup@{TestSetup}!server@{server}}
\index{server@{server}!TestSetup@{TestSetup}}
\doxysubsubsection{server}
{\footnotesize\ttfamily \label{classmp_1_1test_1_1_test_setup_ab8d1f12a790c41e53d414e03e36e26fc} 
\textbf{ Proxy\+Server}$<$messages\+::\+Foo\+Interface$>$$\ast$ server \{nullptr\}}

\index{TestSetup@{TestSetup}!server\_disconnect@{server\_disconnect}}
\index{server\_disconnect@{server\_disconnect}!TestSetup@{TestSetup}}
\doxysubsubsection{server\_disconnect}
{\footnotesize\ttfamily \label{classmp_1_1test_1_1_test_setup_a986286de7bf901ebd2476b9d44b3d9b5} 
std\+::function$<$void()$>$ server\+\_\+disconnect}

\index{TestSetup@{TestSetup}!thread@{thread}}
\index{thread@{thread}!TestSetup@{TestSetup}}
\doxysubsubsection{thread}
{\footnotesize\ttfamily \label{classmp_1_1test_1_1_test_setup_accda04e86905da56f6f9b7d5579d6f5a} 
std\+::thread thread}

Thread variable should be after other struct members so the thread does not start until the other members are initialized. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/ipc/libmultiprocess/test/mp/test/\textbf{ test.\+cpp}\end{DoxyCompactItemize}
