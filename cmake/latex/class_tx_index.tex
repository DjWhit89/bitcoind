\doxysection{Tx\+Index Class Reference}
\label{class_tx_index}\index{TxIndex@{TxIndex}}


{\ttfamily \#include $<$txindex.\+h$>$}

Inheritance diagram for Tx\+Index\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_tx_index}
\end{center}
\end{figure}
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
class \textbf{ DB}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Tx\+Index} (std\+::unique\+\_\+ptr$<$ \textbf{ interfaces\+::\+Chain} $>$ chain, size\+\_\+t n\+\_\+cache\+\_\+size, bool f\+\_\+memory=false, bool f\+\_\+wipe=false)
\begin{DoxyCompactList}\small\item\em Constructs the index, which becomes available to be queried. \end{DoxyCompactList}\item 
virtual \textbf{ $\sim$\+Tx\+Index} () override
\item 
bool \textbf{ Find\+Tx} (const \textbf{ Txid} \&tx\+\_\+hash, \textbf{ uint256} \&block\+\_\+hash, \textbf{ CTransaction\+Ref} \&tx) const
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ Base\+Index}}
\begin{DoxyCompactItemize}
\item 
\textbf{ Base\+Index} (std\+::unique\+\_\+ptr$<$ \textbf{ interfaces\+::\+Chain} $>$ chain, std\+::string \textbf{ name})
\item 
virtual \textbf{ $\sim$\+Base\+Index} ()
\begin{DoxyCompactList}\small\item\em Destructor interrupts sync thread if running and blocks until it exits. \end{DoxyCompactList}\item 
const std\+::string \& \textbf{ Get\+Name} () const \textbf{ LIFETIMEBOUND}
\begin{DoxyCompactList}\small\item\em Get the name of the index for display in logs. \end{DoxyCompactList}\item 
bool Block\+Until\+Synced\+To\+Current\+Chain() const \textbf{ LOCKS\+\_\+\+EXCLUDED}(void \textbf{ Interrupt} ()
\item 
bool \textbf{ Init} ()
\item 
bool \textbf{ Start\+Background\+Sync} ()
\begin{DoxyCompactList}\small\item\em Starts the initial sync process on a background thread. \end{DoxyCompactList}\item 
void \textbf{ Sync} ()
\item 
void \textbf{ Stop} ()
\begin{DoxyCompactList}\small\item\em Stops the instance from staying in sync with blockchain updates. \end{DoxyCompactList}\item 
\textbf{ Index\+Summary} \textbf{ Get\+Summary} () const
\begin{DoxyCompactList}\small\item\em Get a summary of the index and its state. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \textbf{ Custom\+Append} (const \textbf{ interfaces\+::\+Block\+Info} \&block) override
\begin{DoxyCompactList}\small\item\em Write update index entries for a newly connected block. \end{DoxyCompactList}\item 
\textbf{ Base\+Index\+::\+DB} \& \textbf{ Get\+DB} () const override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \textbf{ Base\+Index}}
\begin{DoxyCompactItemize}
\item 
void \textbf{ Block\+Connected} (const \textbf{ kernel\+::\+Chainstate\+Role} \&role, const std\+::shared\+\_\+ptr$<$ const \textbf{ CBlock} $>$ \&block, const \textbf{ CBlock\+Index} $\ast$pindex) override
\item 
void \textbf{ Chain\+State\+Flushed} (const \textbf{ kernel\+::\+Chainstate\+Role} \&role, const \textbf{ CBlock\+Locator} \&locator) override
\item 
virtual \textbf{ interfaces\+::\+Chain\+::\+Notify\+Options} \textbf{ Custom\+Options} ()
\begin{DoxyCompactList}\small\item\em Return custom notification options for index. \end{DoxyCompactList}\item 
virtual bool \textbf{ Custom\+Init} (const std\+::optional$<$ \textbf{ interfaces\+::\+Block\+Ref} $>$ \&block)
\begin{DoxyCompactList}\small\item\em Initialize internal state from the database and block index. \end{DoxyCompactList}\item 
virtual bool \textbf{ Custom\+Commit} (\textbf{ CDBBatch} \&batch)
\item 
virtual bool \textbf{ Custom\+Remove} (const \textbf{ interfaces\+::\+Block\+Info} \&block)
\begin{DoxyCompactList}\small\item\em Rewind index by one block during a chain reorg. \end{DoxyCompactList}\item 
void \textbf{ Set\+Best\+Block\+Index} (const \textbf{ CBlock\+Index} $\ast$block)
\begin{DoxyCompactList}\small\item\em Update the internal best block index as well as the prune lock. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \textbf{ CValidation\+Interface}}
\begin{DoxyCompactItemize}
\item 
\textbf{ $\sim$\+CValidation\+Interface} ()=default
\item 
virtual void \textbf{ Updated\+Block\+Tip} (const \textbf{ CBlock\+Index} $\ast$pindex\+New, const \textbf{ CBlock\+Index} $\ast$pindex\+Fork, bool f\+Initial\+Download)
\item 
virtual void \textbf{ Active\+Tip\+Change} (const \textbf{ CBlock\+Index} \&new\+\_\+tip, bool is\+\_\+ibd)
\item 
virtual void \textbf{ Transaction\+Added\+To\+Mempool} (const \textbf{ New\+Mempool\+Transaction\+Info} \&tx, uint64\+\_\+t mempool\+\_\+sequence)
\item 
virtual void \textbf{ Transaction\+Removed\+From\+Mempool} (const \textbf{ CTransaction\+Ref} \&tx, \textbf{ Mem\+Pool\+Removal\+Reason} reason, uint64\+\_\+t mempool\+\_\+sequence)
\item 
virtual void \textbf{ Mempool\+Transactions\+Removed\+For\+Block} (const std\+::vector$<$ \textbf{ Removed\+Mempool\+Transaction\+Info} $>$ \&txs\+\_\+removed\+\_\+for\+\_\+block, unsigned int n\+Block\+Height)
\item 
virtual void \textbf{ Block\+Disconnected} (const std\+::shared\+\_\+ptr$<$ const \textbf{ CBlock} $>$ \&block, const \textbf{ CBlock\+Index} $\ast$pindex)
\item 
virtual void \textbf{ Block\+Checked} (const std\+::shared\+\_\+ptr$<$ const \textbf{ CBlock} $>$ \&, const \textbf{ Block\+Validation\+State} \&)
\item 
virtual void \textbf{ New\+Po\+WValid\+Block} (const \textbf{ CBlock\+Index} $\ast$pindex, const std\+::shared\+\_\+ptr$<$ const \textbf{ CBlock} $>$ \&block)
\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Protected Attributes inherited from \textbf{ Base\+Index}}
\begin{DoxyCompactItemize}
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ interfaces\+::\+Chain} $>$ \textbf{ m\+\_\+chain}
\item 
\textbf{ Chainstate} $\ast$ \textbf{ m\+\_\+chainstate} \{nullptr\}
\item 
const std\+::string \textbf{ m\+\_\+name}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\doxyref{Tx\+Index}{p.}{class_tx_index} is used to look up transactions included in the blockchain by hash. The index is written to a Level\+DB database and records the filesystem location of each transaction by transaction hash. 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{TxIndex@{TxIndex}!TxIndex@{TxIndex}}
\index{TxIndex@{TxIndex}!TxIndex@{TxIndex}}
\doxysubsubsection{TxIndex()}
{\footnotesize\ttfamily \label{class_tx_index_a5a71ed9c8456e806e5d4f4b522b09b79} 
\textbf{ Tx\+Index} (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \textbf{ interfaces\+::\+Chain} $>$}]{chain}{, }\item[{size\+\_\+t}]{n\+\_\+cache\+\_\+size}{, }\item[{bool}]{f\+\_\+memory}{ = {\ttfamily false}, }\item[{bool}]{f\+\_\+wipe}{ = {\ttfamily false}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Constructs the index, which becomes available to be queried. 

\index{TxIndex@{TxIndex}!````~TxIndex@{$\sim$TxIndex}}
\index{````~TxIndex@{$\sim$TxIndex}!TxIndex@{TxIndex}}
\doxysubsubsection{$\sim$TxIndex()}
{\footnotesize\ttfamily \label{class_tx_index_afa916f643ff5e8605c91a70473f86cfc} 
$\sim$\textbf{ Tx\+Index} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [default]}}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{TxIndex@{TxIndex}!CustomAppend@{CustomAppend}}
\index{CustomAppend@{CustomAppend}!TxIndex@{TxIndex}}
\doxysubsubsection{CustomAppend()}
{\footnotesize\ttfamily \label{class_tx_index_a2866130d78abde86682621008c9b0ca3} 
bool Custom\+Append (\begin{DoxyParamCaption}\item[{const \textbf{ interfaces\+::\+Block\+Info} \&}]{block}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Write update index entries for a newly connected block. 



Reimplemented from \textbf{ Base\+Index} \doxyref{}{p.}{class_base_index_a080cb86acb291b55063a4962ada7be55}.

\index{TxIndex@{TxIndex}!FindTx@{FindTx}}
\index{FindTx@{FindTx}!TxIndex@{TxIndex}}
\doxysubsubsection{FindTx()}
{\footnotesize\ttfamily \label{class_tx_index_aefb53e79d1886ffd51fd0d75d6c7a0c4} 
bool Find\+Tx (\begin{DoxyParamCaption}\item[{const \textbf{ Txid} \&}]{tx\+\_\+hash}{, }\item[{\textbf{ uint256} \&}]{block\+\_\+hash}{, }\item[{\textbf{ CTransaction\+Ref} \&}]{tx}{}\end{DoxyParamCaption}) const}

Look up a transaction by hash.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em tx\+\_\+hash} & The hash of the transaction to be returned. \\
\hline
\mbox{\texttt{out}}  & {\em block\+\_\+hash} & The hash of the block the transaction is found in. \\
\hline
\mbox{\texttt{out}}  & {\em tx} & The transaction itself. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if transaction is found, false otherwise 
\end{DoxyReturn}
\index{TxIndex@{TxIndex}!GetDB@{GetDB}}
\index{GetDB@{GetDB}!TxIndex@{TxIndex}}
\doxysubsubsection{GetDB()}
{\footnotesize\ttfamily \label{class_tx_index_a306d7e0e7cc4dfa4c78dcd837531edeb} 
\textbf{ Base\+Index\+::\+DB} \& Get\+DB (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Implements \textbf{ Base\+Index} \doxyref{}{p.}{class_base_index_aa8e4007464e2ab64d3559b721f3fc71b}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/index/\textbf{ txindex.\+h}\item 
src/index/\textbf{ txindex.\+cpp}\end{DoxyCompactItemize}
