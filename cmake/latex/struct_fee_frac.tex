\doxysection{Fee\+Frac Struct Reference}
\label{struct_fee_frac}\index{FeeFrac@{FeeFrac}}


{\ttfamily \#include $<$feefrac.\+h$>$}

Inheritance diagram for Fee\+Frac\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{struct_fee_frac}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
constexpr \textbf{ Fee\+Frac} () noexcept
\item 
constexpr \textbf{ Fee\+Frac} (int64\+\_\+t f, int32\+\_\+t s) noexcept
\item 
constexpr \textbf{ Fee\+Frac} (const \textbf{ Fee\+Frac} \&) noexcept=default
\item 
constexpr \textbf{ Fee\+Frac} \& \textbf{ operator=} (const \textbf{ Fee\+Frac} \&) noexcept=default
\item 
bool \textbf{ Is\+Empty} () const noexcept
\item 
void \textbf{ operator+=} (const \textbf{ Fee\+Frac} \&other) noexcept
\item 
void \textbf{ operator-\/=} (const \textbf{ Fee\+Frac} \&other) noexcept
\item 
{\footnotesize template$<$bool Round\+Down$>$ }\\int64\+\_\+t \textbf{ Evaluate\+Fee} (int32\+\_\+t at\+\_\+size) const noexcept
\item 
int64\+\_\+t \textbf{ Evaluate\+Fee\+Down} (int32\+\_\+t at\+\_\+size) const noexcept
\item 
int64\+\_\+t \textbf{ Evaluate\+Fee\+Up} (int32\+\_\+t at\+\_\+size) const noexcept
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::pair$<$ int64\+\_\+t, uint32\+\_\+t $>$ \textbf{ Mul\+Fallback} (int64\+\_\+t a, int32\+\_\+t b) noexcept
\item 
static int64\+\_\+t \textbf{ Div\+Fallback} (std\+::pair$<$ int64\+\_\+t, uint32\+\_\+t $>$ n, int32\+\_\+t d, bool round\+\_\+down) noexcept
\end{DoxyCompactItemize}
\doxysubsubsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
int64\+\_\+t \textbf{ fee}
\item 
int32\+\_\+t \textbf{ size}
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static constexpr auto \textbf{ Mul} = \textbf{ Mul\+Fallback}
\item 
static constexpr auto \textbf{ Div} = \textbf{ Div\+Fallback}
\end{DoxyCompactItemize}
\doxysubsubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\textbf{ Fee\+Frac} \textbf{ operator+} (const \textbf{ Fee\+Frac} \&a, const \textbf{ Fee\+Frac} \&b) noexcept
\item 
\textbf{ Fee\+Frac} \textbf{ operator-\/} (const \textbf{ Fee\+Frac} \&a, const \textbf{ Fee\+Frac} \&b) noexcept
\item 
bool \textbf{ operator==} (const \textbf{ Fee\+Frac} \&a, const \textbf{ Fee\+Frac} \&b) noexcept
\item 
std\+::weak\+\_\+ordering \textbf{ Fee\+Rate\+Compare} (const \textbf{ Fee\+Frac} \&a, const \textbf{ Fee\+Frac} \&b) noexcept
\item 
bool \textbf{ operator$<$$<$} (const \textbf{ Fee\+Frac} \&a, const \textbf{ Fee\+Frac} \&b) noexcept
\item 
bool \textbf{ operator$>$$>$} (const \textbf{ Fee\+Frac} \&a, const \textbf{ Fee\+Frac} \&b) noexcept
\item 
std\+::strong\+\_\+ordering \textbf{ operator$<$=$>$} (const \textbf{ Fee\+Frac} \&a, const \textbf{ Fee\+Frac} \&b) noexcept
\item 
void \textbf{ swap} (\textbf{ Fee\+Frac} \&a, \textbf{ Fee\+Frac} \&b) noexcept
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Data structure storing a fee and size, ordered by increasing fee/size.

The size of a \doxyref{Fee\+Frac}{p.}{struct_fee_frac} cannot be zero unless the fee is also zero.

Fee\+Fracs have a total ordering, first by increasing feerate (ratio of fee over size), and then by decreasing size. The empty \doxyref{Fee\+Frac}{p.}{struct_fee_frac} (fee and size both 0) sorts last. So for example, the following Fee\+Fracs are in sorted order\+:


\begin{DoxyItemize}
\item fee=0 size=1 (feerate 0)
\item fee=1 size=2 (feerate 0.\+5)
\item fee=2 size=3 (feerate 0.\+667...)
\item fee=2 size=2 (feerate 1)
\item fee=1 size=1 (feerate 1)
\item fee=3 size=2 (feerate 1.\+5)
\item fee=2 size=1 (feerate 2)
\item fee=0 size=0 (undefined feerate)
\end{DoxyItemize}

A \doxyref{Fee\+Frac}{p.}{struct_fee_frac} is considered "{}better"{} if it sorts after another, by this ordering. All standard comparison operators ($<$=$>$, ==, !=, $>$, $<$, $>$=, $<$=) respect this ordering.

The Fee\+Rate\+Compare, and $>$$>$ and $<$$<$ operators only compare feerate and treat equal feerate but different size as equivalent. The empty \doxyref{Fee\+Frac}{p.}{struct_fee_frac} is neither lower or higher in feerate than any other. 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{FeeFrac@{FeeFrac}!FeeFrac@{FeeFrac}}
\index{FeeFrac@{FeeFrac}!FeeFrac@{FeeFrac}}
\doxysubsubsection{FeeFrac()\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily \label{struct_fee_frac_a0313f136865a22ed4add1b1dea0d1fee} 
\textbf{ Fee\+Frac} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [constexpr]}, {\ttfamily [noexcept]}}

Construct an \doxyref{Is\+Empty()}{p.}{struct_fee_frac_a43a51a0b54bb8a19b68ff5f09d861b3d} \doxyref{Fee\+Frac}{p.}{struct_fee_frac}. \index{FeeFrac@{FeeFrac}!FeeFrac@{FeeFrac}}
\index{FeeFrac@{FeeFrac}!FeeFrac@{FeeFrac}}
\doxysubsubsection{FeeFrac()\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily \label{struct_fee_frac_a2c9f49d529aa064181416634b8adbf25} 
\textbf{ Fee\+Frac} (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{f}{, }\item[{int32\+\_\+t}]{s}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [constexpr]}, {\ttfamily [noexcept]}}

Construct a \doxyref{Fee\+Frac}{p.}{struct_fee_frac} with specified fee and size. \index{FeeFrac@{FeeFrac}!FeeFrac@{FeeFrac}}
\index{FeeFrac@{FeeFrac}!FeeFrac@{FeeFrac}}
\doxysubsubsection{FeeFrac()\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily \label{struct_fee_frac_a82ff13f677459f80bdec95e0c46f186e} 
\textbf{ Fee\+Frac} (\begin{DoxyParamCaption}\item[{const \textbf{ Fee\+Frac} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [constexpr]}, {\ttfamily [default]}, {\ttfamily [noexcept]}}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{FeeFrac@{FeeFrac}!DivFallback@{DivFallback}}
\index{DivFallback@{DivFallback}!FeeFrac@{FeeFrac}}
\doxysubsubsection{DivFallback()}
{\footnotesize\ttfamily \label{struct_fee_frac_a69d9e7fe3a0db27b4143b098247c2a03} 
int64\+\_\+t Div\+Fallback (\begin{DoxyParamCaption}\item[{std\+::pair$<$ int64\+\_\+t, uint32\+\_\+t $>$}]{n}{, }\item[{int32\+\_\+t}]{d}{, }\item[{bool}]{round\+\_\+down}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [noexcept]}}

Helper function for 96/32 signed division, rounding towards negative infinity (if round\+\_\+down) or positive infinity (if !round\+\_\+down). This is a fallback version, separate so that it can be tested on platforms where it isn\textquotesingle{}t actually needed.

The exact behavior with negative n does not really matter, but this implementation chooses to be consistent for testability reasons.

The result must fit in an int64\+\_\+t, and d must be strictly positive. \index{FeeFrac@{FeeFrac}!EvaluateFee@{EvaluateFee}}
\index{EvaluateFee@{EvaluateFee}!FeeFrac@{FeeFrac}}
\doxysubsubsection{EvaluateFee()}
{\footnotesize\ttfamily \label{struct_fee_frac_a69389b6cf494f8a82236b3682a9fcbdc} 
template$<$bool Round\+Down$>$ \\
int64\+\_\+t Evaluate\+Fee (\begin{DoxyParamCaption}\item[{int32\+\_\+t}]{at\+\_\+size}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}

Compute the fee for a given size {\ttfamily at\+\_\+size} using this object\textquotesingle{}s feerate.

This effectively corresponds to evaluating (this-\/$>$fee $\ast$ at\+\_\+size) / this-\/$>$size, with the result rounded towards negative infinity (if Round\+Down) or towards positive infinity (if !\+Round\+Down).

Requires this-\/$>$size $>$ 0, at\+\_\+size $>$= 0, and that the correct result fits in a int64\+\_\+t. This is guaranteed to be the case when 0 $<$= at\+\_\+size $<$= this-\/$>$size. \index{FeeFrac@{FeeFrac}!EvaluateFeeDown@{EvaluateFeeDown}}
\index{EvaluateFeeDown@{EvaluateFeeDown}!FeeFrac@{FeeFrac}}
\doxysubsubsection{EvaluateFeeDown()}
{\footnotesize\ttfamily \label{struct_fee_frac_a60eaa3ba37b4315b2667f9fa278766f4} 
int64\+\_\+t Evaluate\+Fee\+Down (\begin{DoxyParamCaption}\item[{int32\+\_\+t}]{at\+\_\+size}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}

Compute the fee for a given size {\ttfamily at\+\_\+size} using this object\textquotesingle{}s feerate, rounding down. \index{FeeFrac@{FeeFrac}!EvaluateFeeUp@{EvaluateFeeUp}}
\index{EvaluateFeeUp@{EvaluateFeeUp}!FeeFrac@{FeeFrac}}
\doxysubsubsection{EvaluateFeeUp()}
{\footnotesize\ttfamily \label{struct_fee_frac_a4830a4d74fd10512673cda6c687102f2} 
int64\+\_\+t Evaluate\+Fee\+Up (\begin{DoxyParamCaption}\item[{int32\+\_\+t}]{at\+\_\+size}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}

Compute the fee for a given size {\ttfamily at\+\_\+size} using this object\textquotesingle{}s feerate, rounding up. \index{FeeFrac@{FeeFrac}!IsEmpty@{IsEmpty}}
\index{IsEmpty@{IsEmpty}!FeeFrac@{FeeFrac}}
\doxysubsubsection{IsEmpty()}
{\footnotesize\ttfamily \label{struct_fee_frac_a43a51a0b54bb8a19b68ff5f09d861b3d} 
bool Is\+Empty (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}

Check if this is empty (size and fee are 0). \index{FeeFrac@{FeeFrac}!MulFallback@{MulFallback}}
\index{MulFallback@{MulFallback}!FeeFrac@{FeeFrac}}
\doxysubsubsection{MulFallback()}
{\footnotesize\ttfamily \label{struct_fee_frac_ac2d27b13c73a3cd7067e66e01e1f18c6} 
std\+::pair$<$ int64\+\_\+t, uint32\+\_\+t $>$ Mul\+Fallback (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{a}{, }\item[{int32\+\_\+t}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [noexcept]}}

Helper function for 32$\ast$64 signed multiplication, returning an unspecified but totally ordered type. This is a fallback version, separate so it can be tested on platforms where it isn\textquotesingle{}t actually needed. \index{FeeFrac@{FeeFrac}!operator+=@{operator+=}}
\index{operator+=@{operator+=}!FeeFrac@{FeeFrac}}
\doxysubsubsection{operator+=()}
{\footnotesize\ttfamily \label{struct_fee_frac_aade4224224faa883886b221506b68ae2} 
void operator+= (\begin{DoxyParamCaption}\item[{const \textbf{ Fee\+Frac} \&}]{other}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}

Add fee and size of another \doxyref{Fee\+Frac}{p.}{struct_fee_frac} to this one. \index{FeeFrac@{FeeFrac}!operator-\/=@{operator-\/=}}
\index{operator-\/=@{operator-\/=}!FeeFrac@{FeeFrac}}
\doxysubsubsection{operator-\/=()}
{\footnotesize\ttfamily \label{struct_fee_frac_a6b8d20786c3445d2b7c797e74c30800d} 
void operator-\/= (\begin{DoxyParamCaption}\item[{const \textbf{ Fee\+Frac} \&}]{other}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}

Subtract fee and size of another \doxyref{Fee\+Frac}{p.}{struct_fee_frac} from this one. \index{FeeFrac@{FeeFrac}!operator=@{operator=}}
\index{operator=@{operator=}!FeeFrac@{FeeFrac}}
\doxysubsubsection{operator=()}
{\footnotesize\ttfamily \label{struct_fee_frac_aa35049caa4108d0401c3533586d228e5} 
\textbf{ Fee\+Frac} \& operator= (\begin{DoxyParamCaption}\item[{const \textbf{ Fee\+Frac} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [constexpr]}, {\ttfamily [default]}, {\ttfamily [noexcept]}}



\label{doc-related-members}
\doxysubsection{Friends And Related Symbol Documentation}
\index{FeeFrac@{FeeFrac}!FeeRateCompare@{FeeRateCompare}}
\index{FeeRateCompare@{FeeRateCompare}!FeeFrac@{FeeFrac}}
\doxysubsubsection{FeeRateCompare}
{\footnotesize\ttfamily \label{struct_fee_frac_a0ab4dfbc44eca54dd64f138023bb98ee} 
std\+::weak\+\_\+ordering Fee\+Rate\+Compare (\begin{DoxyParamCaption}\item[{const \textbf{ Fee\+Frac} \&}]{a}{, }\item[{const \textbf{ Fee\+Frac} \&}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}

Compare two Fee\+Fracs just by feerate. \index{FeeFrac@{FeeFrac}!operator+@{operator+}}
\index{operator+@{operator+}!FeeFrac@{FeeFrac}}
\doxysubsubsection{operator+}
{\footnotesize\ttfamily \label{struct_fee_frac_af0b78681a93bf4e1b90f9289ea865fdc} 
\textbf{ Fee\+Frac} operator+ (\begin{DoxyParamCaption}\item[{const \textbf{ Fee\+Frac} \&}]{a}{, }\item[{const \textbf{ Fee\+Frac} \&}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}

Sum fee and size. \index{FeeFrac@{FeeFrac}!operator-\/@{operator-\/}}
\index{operator-\/@{operator-\/}!FeeFrac@{FeeFrac}}
\doxysubsubsection{operator-\/}
{\footnotesize\ttfamily \label{struct_fee_frac_a0d3201cdcbd4b84e893622c156d26305} 
\textbf{ Fee\+Frac} operator-\/ (\begin{DoxyParamCaption}\item[{const \textbf{ Fee\+Frac} \&}]{a}{, }\item[{const \textbf{ Fee\+Frac} \&}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}

Subtract both fee and size. \index{FeeFrac@{FeeFrac}!operator$<$$<$@{operator$<$$<$}}
\index{operator$<$$<$@{operator$<$$<$}!FeeFrac@{FeeFrac}}
\doxysubsubsection{operator$<$$<$}
{\footnotesize\ttfamily \label{struct_fee_frac_a9e39693b6fee07e930fd29555b57d939} 
bool operator$<$$<$ (\begin{DoxyParamCaption}\item[{const \textbf{ Fee\+Frac} \&}]{a}{, }\item[{const \textbf{ Fee\+Frac} \&}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}

Check if a \doxyref{Fee\+Frac}{p.}{struct_fee_frac} object has strictly lower feerate than another. \index{FeeFrac@{FeeFrac}!operator$<$=$>$@{operator$<$=$>$}}
\index{operator$<$=$>$@{operator$<$=$>$}!FeeFrac@{FeeFrac}}
\doxysubsubsection{operator$<$=$>$}
{\footnotesize\ttfamily \label{struct_fee_frac_a4a742faa255d1dc8eb3ee5fa910af209} 
std\+::strong\+\_\+ordering operator$<$=$>$ (\begin{DoxyParamCaption}\item[{const \textbf{ Fee\+Frac} \&}]{a}{, }\item[{const \textbf{ Fee\+Frac} \&}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}

Compare two Fee\+Fracs. $<$, $>$, $<$=, and $>$= are auto-\/generated from this. \index{FeeFrac@{FeeFrac}!operator==@{operator==}}
\index{operator==@{operator==}!FeeFrac@{FeeFrac}}
\doxysubsubsection{operator==}
{\footnotesize\ttfamily \label{struct_fee_frac_af7cdde53cf06aa4353077ff96d7a584d} 
bool operator== (\begin{DoxyParamCaption}\item[{const \textbf{ Fee\+Frac} \&}]{a}{, }\item[{const \textbf{ Fee\+Frac} \&}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}

Check if two \doxyref{Fee\+Frac}{p.}{struct_fee_frac} objects are equal (both same fee and same size). \index{FeeFrac@{FeeFrac}!operator$>$$>$@{operator$>$$>$}}
\index{operator$>$$>$@{operator$>$$>$}!FeeFrac@{FeeFrac}}
\doxysubsubsection{operator$>$$>$}
{\footnotesize\ttfamily \label{struct_fee_frac_a10614893fb90a9554ce76a9fc07df6ab} 
bool operator$>$$>$ (\begin{DoxyParamCaption}\item[{const \textbf{ Fee\+Frac} \&}]{a}{, }\item[{const \textbf{ Fee\+Frac} \&}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}

Check if a \doxyref{Fee\+Frac}{p.}{struct_fee_frac} object has strictly higher feerate than another. \index{FeeFrac@{FeeFrac}!swap@{swap}}
\index{swap@{swap}!FeeFrac@{FeeFrac}}
\doxysubsubsection{swap}
{\footnotesize\ttfamily \label{struct_fee_frac_a1096e02e4d5372de30229b7fac9296d3} 
void swap (\begin{DoxyParamCaption}\item[{\textbf{ Fee\+Frac} \&}]{a}{, }\item[{\textbf{ Fee\+Frac} \&}]{b}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [friend]}}

Swap two Fee\+Fracs. 

\label{doc-variable-members}
\doxysubsection{Field Documentation}
\index{FeeFrac@{FeeFrac}!Div@{Div}}
\index{Div@{Div}!FeeFrac@{FeeFrac}}
\doxysubsubsection{Div}
{\footnotesize\ttfamily \label{struct_fee_frac_abc809a8e1d0f4ffc55f553883288ec41} 
auto Div = \textbf{ Div\+Fallback}\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}

\index{FeeFrac@{FeeFrac}!fee@{fee}}
\index{fee@{fee}!FeeFrac@{FeeFrac}}
\doxysubsubsection{fee}
{\footnotesize\ttfamily \label{struct_fee_frac_a6c6b1afb7a3ce84aa1ff3890e731b3d3} 
int64\+\_\+t fee}

\index{FeeFrac@{FeeFrac}!Mul@{Mul}}
\index{Mul@{Mul}!FeeFrac@{FeeFrac}}
\doxysubsubsection{Mul}
{\footnotesize\ttfamily \label{struct_fee_frac_a2fd896c893225f19b1e9cf2040814f08} 
auto Mul = \textbf{ Mul\+Fallback}\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}

\index{FeeFrac@{FeeFrac}!size@{size}}
\index{size@{size}!FeeFrac@{FeeFrac}}
\doxysubsubsection{size}
{\footnotesize\ttfamily \label{struct_fee_frac_af8fd9ce16b371c8a3bf5e0b37a69419f} 
int32\+\_\+t size}



The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/util/\textbf{ feefrac.\+h}\end{DoxyCompactItemize}
