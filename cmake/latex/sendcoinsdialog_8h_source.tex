\doxysection{sendcoinsdialog.\+h}
\label{sendcoinsdialog_8h_source}\index{src/qt/sendcoinsdialog.h@{src/qt/sendcoinsdialog.h}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2011-\/present\ The\ Bitcoin\ Core\ developers}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Distributed\ under\ the\ MIT\ software\ license,\ see\ the\ accompanying}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ file\ COPYING\ or\ http://www.opensource.org/licenses/mit-\/license.php.}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#ifndef\ BITCOIN\_QT\_SENDCOINSDIALOG\_H}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#define\ BITCOIN\_QT\_SENDCOINSDIALOG\_H}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <primitives/transaction\_identifier.h>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <qt/clientmodel.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <qt/walletmodel.h>}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <QDialog>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <QMessageBox>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <QString>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <QTimer>}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{class\ }PlatformStyle;}
\DoxyCodeLine{00018\ \textcolor{keyword}{class\ }SendCoinsEntry;}
\DoxyCodeLine{00019\ \textcolor{keyword}{class\ }SendCoinsRecipient;}
\DoxyCodeLine{00020\ \textcolor{keyword}{enum\ class}\ SynchronizationState;}
\DoxyCodeLine{00021\ \textcolor{keyword}{namespace\ }wallet\ \{}
\DoxyCodeLine{00022\ \textcolor{keyword}{class\ }CCoinControl;}
\DoxyCodeLine{00023\ \}\ \textcolor{comment}{//\ namespace\ wallet}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{namespace\ }Ui\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{class\ }SendCoinsDialog;}
\DoxyCodeLine{00027\ \}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ QT\_BEGIN\_NAMESPACE}
\DoxyCodeLine{00030\ \textcolor{keyword}{class\ }QUrl;}
\DoxyCodeLine{00031\ QT\_END\_NAMESPACE}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00034\ \textcolor{keyword}{class\ }SendCoinsDialog\ :\ \textcolor{keyword}{public}\ QDialog}
\DoxyCodeLine{00035\ \{}
\DoxyCodeLine{00036\ \ \ \ \ Q\_OBJECT}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{explicit}\ SendCoinsDialog(\textcolor{keyword}{const}\ PlatformStyle\ *platformStyle,\ QWidget\ *parent\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00040\ \ \ \ \ \string~SendCoinsDialog();}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{void}\ setClientModel(ClientModel\ *clientModel);}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{void}\ setModel(WalletModel\ *model);}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00047\ \ \ \ \ QWidget\ *setupTabChain(QWidget\ *prev);}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordtype}{void}\ setAddress(\textcolor{keyword}{const}\ QString\ \&address);}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{void}\ pasteEntry(\textcolor{keyword}{const}\ SendCoinsRecipient\ \&rv);}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{bool}\ handlePaymentRequest(\textcolor{keyword}{const}\ SendCoinsRecipient\ \&recipient);}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{comment}{//\ Only\ used\ for\ testing-\/purposes}}
\DoxyCodeLine{00054\ \ \ \ \ wallet::CCoinControl*\ getCoinControl()\ \{\ \textcolor{keywordflow}{return}\ m\_coin\_control.get();\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \textcolor{keyword}{public}\ Q\_SLOTS:}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{void}\ clear();}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{void}\ reject()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{void}\ accept()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00060\ \ \ \ \ SendCoinsEntry\ *addEntry();}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{void}\ updateTabsAndLabels();}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{void}\ setBalance(\textcolor{keyword}{const}\ interfaces::WalletBalances\&\ balances);}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ Q\_SIGNALS:}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordtype}{void}\ coinsSent(\textcolor{keyword}{const}\ Txid\&\ txid);}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00068\ \ \ \ \ Ui::SendCoinsDialog\ *ui;}
\DoxyCodeLine{00069\ \ \ \ \ ClientModel*\ clientModel\{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{00070\ \ \ \ \ WalletModel*\ model\{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{00071\ \ \ \ \ std::unique\_ptr<wallet::CCoinControl>\ m\_coin\_control;}
\DoxyCodeLine{00072\ \ \ \ \ std::unique\_ptr<WalletModelTransaction>\ m\_current\_transaction;}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{bool}\ fNewRecipientAllowed\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{bool}\ fFeeMinimized\{\textcolor{keyword}{true}\};}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{const}\ PlatformStyle\ *platformStyle;}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ Copy\ PSBT\ to\ clipboard\ and\ offer\ to\ save\ it.}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{void}\ presentPSBT(PartiallySignedTransaction\&\ psbt);}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{//\ Process\ WalletModel::SendCoinsReturn\ and\ generate\ a\ pair\ consisting}}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//\ of\ a\ message\ and\ message\ flags\ for\ use\ in\ Q\_EMIT\ message().}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{//\ Additional\ parameter\ msgArg\ can\ be\ used\ via\ .arg(msgArg).}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{void}\ processSendCoinsReturn(\textcolor{keyword}{const}\ WalletModel::SendCoinsReturn\ \&sendCoinsReturn,\ \textcolor{keyword}{const}\ QString\ \&msgArg\ =\ QString());}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{void}\ minimizeFeeSection(\textcolor{keywordtype}{bool}\ fMinimize);}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{comment}{//\ Format\ confirmation\ message}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{bool}\ PrepareSendText(QString\&\ question\_string,\ QString\&\ informative\_text,\ QString\&\ detailed\_text);}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{comment}{/*\ Sign\ PSBT\ using\ external\ signer.}}
\DoxyCodeLine{00087\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00088\ \textcolor{comment}{\ \ \ \ \ *\ @param[in,out]\ psbtx\ the\ PSBT\ to\ sign}}
\DoxyCodeLine{00089\ \textcolor{comment}{\ \ \ \ \ *\ @param[in,out]\ mtx\ needed\ to\ attempt\ to\ finalize}}
\DoxyCodeLine{00090\ \textcolor{comment}{\ \ \ \ \ *\ @param[in,out]\ complete\ whether\ the\ PSBT\ is\ complete\ (a\ successfully\ signed\ multisig\ transaction\ may\ not\ be\ complete)}}
\DoxyCodeLine{00091\ \textcolor{comment}{\ \ \ \ \ *}}
\DoxyCodeLine{00092\ \textcolor{comment}{\ \ \ \ \ *\ @returns\ false\ if\ any\ failure\ occurred,\ which\ may\ include\ the\ user\ rejection\ of\ a\ transaction\ on\ the\ device.}}
\DoxyCodeLine{00093\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{bool}\ signWithExternalSigner(PartiallySignedTransaction\&\ psbt,\ CMutableTransaction\&\ mtx,\ \textcolor{keywordtype}{bool}\&\ complete);}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{void}\ updateFeeMinimizedLabel();}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordtype}{void}\ updateCoinControlState();}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \textcolor{keyword}{private}\ Q\_SLOTS:}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordtype}{void}\ sendButtonClicked(\textcolor{keywordtype}{bool}\ checked);}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordtype}{void}\ on\_buttonChooseFee\_clicked();}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{void}\ on\_buttonMinimizeFee\_clicked();}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordtype}{void}\ removeEntry(SendCoinsEntry*\ entry);}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordtype}{void}\ useAvailableBalance(SendCoinsEntry*\ entry);}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordtype}{void}\ refreshBalance();}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlFeatureChanged(\textcolor{keywordtype}{bool});}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlButtonClicked();}
\DoxyCodeLine{00107\ \textcolor{preprocessor}{\#if\ (QT\_VERSION\ >=\ QT\_VERSION\_CHECK(6,\ 7,\ 0))}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlChangeChecked(Qt::CheckState);}
\DoxyCodeLine{00109\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlChangeChecked(\textcolor{keywordtype}{int});}
\DoxyCodeLine{00111\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlChangeEdited(\textcolor{keyword}{const}\ QString\ \&);}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlUpdateLabels();}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlClipboardQuantity();}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlClipboardAmount();}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlClipboardFee();}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlClipboardAfterFee();}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlClipboardBytes();}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordtype}{void}\ coinControlClipboardChange();}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordtype}{void}\ updateFeeSectionControls();}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordtype}{void}\ updateNumberOfBlocks(\textcolor{keywordtype}{int}\ count,\ \textcolor{keyword}{const}\ QDateTime\&\ blockDate,\ \textcolor{keywordtype}{double}\ nVerificationProgress,\ SyncType\ synctype,\ SynchronizationState\ sync\_state);}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordtype}{void}\ updateSmartFeeLabel();}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ Q\_SIGNALS:}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{comment}{//\ Fired\ when\ a\ message\ should\ be\ reported\ to\ the\ user}}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordtype}{void}\ message(\textcolor{keyword}{const}\ QString\ \&title,\ \textcolor{keyword}{const}\ QString\ \&message,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ style);}
\DoxyCodeLine{00127\ \};}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \textcolor{preprocessor}{\#define\ SEND\_CONFIRM\_DELAY\ \ \ 3}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \textcolor{keyword}{class\ }SendConfirmationDialog\ :\ \textcolor{keyword}{public}\ QMessageBox}
\DoxyCodeLine{00133\ \{}
\DoxyCodeLine{00134\ \ \ \ \ Q\_OBJECT}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00137\ \ \ \ \ SendConfirmationDialog(\textcolor{keyword}{const}\ QString\&\ title,\ \textcolor{keyword}{const}\ QString\&\ text,\ \textcolor{keyword}{const}\ QString\&\ informative\_text\ =\ \textcolor{stringliteral}{"{}"{}},\ \textcolor{keyword}{const}\ QString\&\ detailed\_text\ =\ \textcolor{stringliteral}{"{}"{}},\ \textcolor{keywordtype}{int}\ secDelay\ =\ SEND\_CONFIRM\_DELAY,\ \textcolor{keywordtype}{bool}\ enable\_send\ =\ \textcolor{keyword}{true},\ \textcolor{keywordtype}{bool}\ always\_show\_unsigned\ =\ \textcolor{keyword}{true},\ QWidget*\ parent\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{comment}{/*\ Returns\ QMessageBox::Cancel,\ QMessageBox::Yes\ when\ "{}Send"{}\ is}}
\DoxyCodeLine{00139\ \textcolor{comment}{\ \ \ \ \ \ \ clicked\ and\ QMessageBox::Save\ when\ "{}Create\ Unsigned"{}\ is\ clicked.\ */}}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordtype}{int}\ exec()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{keyword}{private}\ Q\_SLOTS:}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordtype}{void}\ countDown();}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordtype}{void}\ updateButtons();}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00147\ \ \ \ \ QAbstractButton\ *yesButton;}
\DoxyCodeLine{00148\ \ \ \ \ QAbstractButton\ *m\_psbt\_button;}
\DoxyCodeLine{00149\ \ \ \ \ QTimer\ countDownTimer;}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordtype}{int}\ secDelay;}
\DoxyCodeLine{00151\ \ \ \ \ QString\ confirmButtonText\{tr(\textcolor{stringliteral}{"{}Send"{}})\};}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_enable\_send;}
\DoxyCodeLine{00153\ \ \ \ \ QString\ m\_psbt\_button\_text\{tr(\textcolor{stringliteral}{"{}Create\ Unsigned"{}})\};}
\DoxyCodeLine{00154\ \};}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ BITCOIN\_QT\_SENDCOINSDIALOG\_H}}

\end{DoxyCode}
