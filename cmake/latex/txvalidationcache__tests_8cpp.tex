\doxysection{src/test/txvalidationcache\+\_\+tests.cpp File Reference}
\label{txvalidationcache__tests_8cpp}\index{src/test/txvalidationcache\_tests.cpp@{src/test/txvalidationcache\_tests.cpp}}
{\ttfamily \#include $<$consensus/validation.\+h$>$}\newline
{\ttfamily \#include $<$key.\+h$>$}\newline
{\ttfamily \#include $<$random.\+h$>$}\newline
{\ttfamily \#include $<$script/sigcache.\+h$>$}\newline
{\ttfamily \#include $<$script/sign.\+h$>$}\newline
{\ttfamily \#include $<$script/signingprovider.\+h$>$}\newline
{\ttfamily \#include $<$test/util/setup\+\_\+common.\+h$>$}\newline
{\ttfamily \#include $<$txmempool.\+h$>$}\newline
{\ttfamily \#include $<$util/chaintype.\+h$>$}\newline
{\ttfamily \#include $<$validation.\+h$>$}\newline
{\ttfamily \#include $<$boost/test/unit\+\_\+test.\+hpp$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ Dersig100\+Setup}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \textbf{ Check\+Input\+Scripts} (const \textbf{ CTransaction} \&tx, \textbf{ Tx\+Validation\+State} \&state, const \textbf{ CCoins\+View\+Cache} \&inputs, \textbf{ script\+\_\+verify\+\_\+flags} \textbf{ flags}, bool cache\+Sig\+Store, bool cache\+Full\+Script\+Store, \textbf{ Precomputed\+Transaction\+Data} \&txdata, \textbf{ Validation\+Cache} \&validation\+\_\+cache, std\+::vector$<$ \textbf{ CScript\+Check} $>$ $\ast$pv\+Checks) \textbf{ EXCLUSIVE\+\_\+\+LOCKS\+\_\+\+REQUIRED}(\textbf{ cs\+\_\+main})
\item 
\textbf{ BOOST\+\_\+\+FIXTURE\+\_\+\+TEST\+\_\+\+CASE} (tx\+\_\+mempool\+\_\+block\+\_\+doublespend, \textbf{ Dersig100\+Setup})
\item 
\textbf{ BOOST\+\_\+\+FIXTURE\+\_\+\+TEST\+\_\+\+CASE} (checkinputs\+\_\+test, \textbf{ Dersig100\+Setup})
\end{DoxyCompactItemize}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{txvalidationcache\_tests.cpp@{txvalidationcache\_tests.cpp}!BOOST\_FIXTURE\_TEST\_CASE@{BOOST\_FIXTURE\_TEST\_CASE}}
\index{BOOST\_FIXTURE\_TEST\_CASE@{BOOST\_FIXTURE\_TEST\_CASE}!txvalidationcache\_tests.cpp@{txvalidationcache\_tests.cpp}}
\doxysubsubsection{BOOST\_FIXTURE\_TEST\_CASE()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{txvalidationcache__tests_8cpp_a0cede32905e27934cd347c1455ae477b} 
BOOST\+\_\+\+FIXTURE\+\_\+\+TEST\+\_\+\+CASE (\begin{DoxyParamCaption}\item[{checkinputs\+\_\+test}]{}{, }\item[{\textbf{ Dersig100\+Setup}}]{}{}\end{DoxyParamCaption})}

\index{txvalidationcache\_tests.cpp@{txvalidationcache\_tests.cpp}!BOOST\_FIXTURE\_TEST\_CASE@{BOOST\_FIXTURE\_TEST\_CASE}}
\index{BOOST\_FIXTURE\_TEST\_CASE@{BOOST\_FIXTURE\_TEST\_CASE}!txvalidationcache\_tests.cpp@{txvalidationcache\_tests.cpp}}
\doxysubsubsection{BOOST\_FIXTURE\_TEST\_CASE()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{txvalidationcache__tests_8cpp_a0ad149e00d827fbbe731dde7852fe4c8} 
BOOST\+\_\+\+FIXTURE\+\_\+\+TEST\+\_\+\+CASE (\begin{DoxyParamCaption}\item[{tx\+\_\+mempool\+\_\+block\+\_\+doublespend}]{}{, }\item[{\textbf{ Dersig100\+Setup}}]{}{}\end{DoxyParamCaption})}

\index{txvalidationcache\_tests.cpp@{txvalidationcache\_tests.cpp}!CheckInputScripts@{CheckInputScripts}}
\index{CheckInputScripts@{CheckInputScripts}!txvalidationcache\_tests.cpp@{txvalidationcache\_tests.cpp}}
\doxysubsubsection{CheckInputScripts()}
{\footnotesize\ttfamily \label{txvalidationcache__tests_8cpp_a97d6169ac38d1dc06811732fda310b8c} 
bool Check\+Input\+Scripts (\begin{DoxyParamCaption}\item[{const \textbf{ CTransaction} \&}]{tx}{, }\item[{\textbf{ Tx\+Validation\+State} \&}]{state}{, }\item[{const \textbf{ CCoins\+View\+Cache} \&}]{inputs}{, }\item[{\textbf{ script\+\_\+verify\+\_\+flags}}]{flags}{, }\item[{bool}]{cache\+Sig\+Store}{, }\item[{bool}]{cache\+Full\+Script\+Store}{, }\item[{\textbf{ Precomputed\+Transaction\+Data} \&}]{txdata}{, }\item[{\textbf{ Validation\+Cache} \&}]{validation\+\_\+cache}{, }\item[{std\+::vector$<$ \textbf{ CScript\+Check} $>$ $\ast$}]{pv\+Checks}{ = {\ttfamily nullptr}}\end{DoxyParamCaption})}

Check whether all of this transaction\textquotesingle{}s input scripts succeed.

This involves ECDSA signature checks so can be computationally intensive. This function should only be called after the cheap sanity checks in Check\+Tx\+Inputs passed.

If pv\+Checks is not nullptr, script checks are pushed onto it instead of being performed inline. Any script checks which are not necessary (eg due to script execution cache hits) are, obviously, not pushed onto pv\+Checks/run.

Setting cache\+Sig\+Store/cache\+Full\+Script\+Store to false will remove elements from the corresponding cache which are matched. This is useful for checking blocks where we will likely never need the cache entry again.

Note that we may set state.\+reason to NOT\+\_\+\+STANDARD for extra soft-\/fork flags in flags, block-\/checking callers should probably reset it to CONSENSUS in such cases.

Non-\/static (and redeclared) in \doxyref{src/test/txvalidationcache\+\_\+tests.\+cpp}{p.}{txvalidationcache__tests_8cpp} 