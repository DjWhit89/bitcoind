\doxysection{src/protocol.h File Reference}
\label{protocol_8h}\index{src/protocol.h@{src/protocol.h}}
{\ttfamily \#include $<$kernel/messagestartchars.\+h$>$}\newline
{\ttfamily \#include $<$netaddress.\+h$>$}\newline
{\ttfamily \#include $<$primitives/transaction.\+h$>$}\newline
{\ttfamily \#include $<$serialize.\+h$>$}\newline
{\ttfamily \#include $<$streams.\+h$>$}\newline
{\ttfamily \#include $<$uint256.\+h$>$}\newline
{\ttfamily \#include $<$util/time.\+h$>$}\newline
{\ttfamily \#include $<$array$>$}\newline
{\ttfamily \#include $<$cstdint$>$}\newline
{\ttfamily \#include $<$limits$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
class \textbf{ CMessage\+Header}
\item 
class \textbf{ CAddress}
\item 
struct \textbf{ CAddress\+::\+Ser\+Params}
\item 
class \textbf{ CInv}
\end{DoxyCompactItemize}
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \textbf{ Net\+Msg\+Type}
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \textbf{ Service\+Flags} \+: uint64\+\_\+t \{ \newline
\textbf{ NODE\+\_\+\+NONE} = 0
, \textbf{ NODE\+\_\+\+NETWORK} = (1 $<$$<$ 0)
, \textbf{ NODE\+\_\+\+BLOOM} = (1 $<$$<$ 2)
, \textbf{ NODE\+\_\+\+WITNESS} = (1 $<$$<$ 3)
, \newline
\textbf{ NODE\+\_\+\+COMPACT\+\_\+\+FILTERS} = (1 $<$$<$ 6)
, \textbf{ NODE\+\_\+\+NETWORK\+\_\+\+LIMITED} = (1 $<$$<$ 10)
, \textbf{ NODE\+\_\+\+P2\+P\+\_\+\+V2} = (1 $<$$<$ 11)
 \}
\item 
enum \textbf{ Get\+Data\+Msg} \+: uint32\+\_\+t \{ \newline
\textbf{ UNDEFINED} = 0
, \textbf{ MSG\+\_\+\+TX} = 1
, \textbf{ MSG\+\_\+\+BLOCK} = 2
, \textbf{ MSG\+\_\+\+WTX} = 5
, \newline
\textbf{ MSG\+\_\+\+FILTERED\+\_\+\+BLOCK} = 3
, \textbf{ MSG\+\_\+\+CMPCT\+\_\+\+BLOCK} = 4
, \textbf{ MSG\+\_\+\+WITNESS\+\_\+\+BLOCK} = MSG\+\_\+\+BLOCK $\vert$ MSG\+\_\+\+WITNESS\+\_\+\+FLAG
, \textbf{ MSG\+\_\+\+WITNESS\+\_\+\+TX} = MSG\+\_\+\+TX $\vert$ MSG\+\_\+\+WITNESS\+\_\+\+FLAG
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ std\+::string $>$ \textbf{ service\+Flags\+To\+Str} (uint64\+\_\+t \textbf{ flags})
\item 
constexpr \textbf{ Service\+Flags} \textbf{ Seeds\+Service\+Flags} ()
\item 
\textbf{ Gen\+Txid} \textbf{ To\+Gen\+Txid} (const \textbf{ CInv} \&inv)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
constexpr const char $\ast$ \textbf{ VERSION} \{"{}version"{}\}
\item 
constexpr const char $\ast$ \textbf{ VERACK} \{"{}verack"{}\}
\item 
constexpr const char $\ast$ \textbf{ ADDR} \{"{}addr"{}\}
\item 
constexpr const char $\ast$ \textbf{ ADDRV2} \{"{}addrv2"{}\}
\item 
constexpr const char $\ast$ \textbf{ SENDADDRV2} \{"{}sendaddrv2"{}\}
\item 
constexpr const char $\ast$ \textbf{ INV} \{"{}inv"{}\}
\item 
constexpr const char $\ast$ \textbf{ GETDATA} \{"{}getdata"{}\}
\item 
constexpr const char $\ast$ \textbf{ MERKLEBLOCK} \{"{}merkleblock"{}\}
\item 
constexpr const char $\ast$ \textbf{ GETBLOCKS} \{"{}getblocks"{}\}
\item 
constexpr const char $\ast$ \textbf{ GETHEADERS} \{"{}getheaders"{}\}
\item 
constexpr const char $\ast$ \textbf{ TX} \{"{}tx"{}\}
\item 
constexpr const char $\ast$ \textbf{ HEADERS} \{"{}headers"{}\}
\item 
constexpr const char $\ast$ \textbf{ BLOCK} \{"{}block"{}\}
\item 
constexpr const char $\ast$ \textbf{ GETADDR} \{"{}getaddr"{}\}
\item 
constexpr const char $\ast$ \textbf{ MEMPOOL} \{"{}mempool"{}\}
\item 
constexpr const char $\ast$ \textbf{ PING} \{"{}ping"{}\}
\item 
constexpr const char $\ast$ \textbf{ PONG} \{"{}pong"{}\}
\item 
constexpr const char $\ast$ \textbf{ NOTFOUND} \{"{}notfound"{}\}
\item 
constexpr const char $\ast$ \textbf{ FILTERLOAD} \{"{}filterload"{}\}
\item 
constexpr const char $\ast$ \textbf{ FILTERADD} \{"{}filteradd"{}\}
\item 
constexpr const char $\ast$ \textbf{ FILTERCLEAR} \{"{}filterclear"{}\}
\item 
constexpr const char $\ast$ \textbf{ SENDHEADERS} \{"{}sendheaders"{}\}
\item 
constexpr const char $\ast$ \textbf{ FEEFILTER} \{"{}feefilter"{}\}
\item 
constexpr const char $\ast$ \textbf{ SENDCMPCT} \{"{}sendcmpct"{}\}
\item 
constexpr const char $\ast$ \textbf{ CMPCTBLOCK} \{"{}cmpctblock"{}\}
\item 
constexpr const char $\ast$ \textbf{ GETBLOCKTXN} \{"{}getblocktxn"{}\}
\item 
constexpr const char $\ast$ \textbf{ BLOCKTXN} \{"{}blocktxn"{}\}
\item 
constexpr const char $\ast$ \textbf{ GETCFILTERS} \{"{}getcfilters"{}\}
\item 
constexpr const char $\ast$ \textbf{ CFILTER} \{"{}cfilter"{}\}
\item 
constexpr const char $\ast$ \textbf{ GETCFHEADERS} \{"{}getcfheaders"{}\}
\item 
constexpr const char $\ast$ \textbf{ CFHEADERS} \{"{}cfheaders"{}\}
\item 
constexpr const char $\ast$ \textbf{ GETCFCHECKPT} \{"{}getcfcheckpt"{}\}
\item 
constexpr const char $\ast$ \textbf{ CFCHECKPT} \{"{}cfcheckpt"{}\}
\item 
constexpr const char $\ast$ \textbf{ WTXIDRELAY} \{"{}wtxidrelay"{}\}
\item 
constexpr const char $\ast$ \textbf{ SENDTXRCNCL} \{"{}sendtxrcncl"{}\}
\item 
const std\+::array \textbf{ ALL\+\_\+\+NET\+\_\+\+MESSAGE\+\_\+\+TYPES}
\item 
const uint32\+\_\+t \textbf{ MSG\+\_\+\+WITNESS\+\_\+\+FLAG} = 1 $<$$<$ 30
\item 
const uint32\+\_\+t \textbf{ MSG\+\_\+\+TYPE\+\_\+\+MASK} = 0xffffffff $>$$>$ 2
\end{DoxyCompactItemize}


\label{doc-enum-members}
\doxysubsection{Enumeration Type Documentation}
\index{protocol.h@{protocol.h}!GetDataMsg@{GetDataMsg}}
\index{GetDataMsg@{GetDataMsg}!protocol.h@{protocol.h}}
\doxysubsubsection{GetDataMsg}
{\footnotesize\ttfamily \label{protocol_8h_ac1162efdf35b533ba996ac9d1c96fc05} 
enum \textbf{ Get\+Data\+Msg} \+: uint32\+\_\+t}

getdata / inv message types. These numbers are defined by the protocol. When adding a new value, be sure to mention it in the respective BIP. \begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{UNDEFINED@{UNDEFINED}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!UNDEFINED@{UNDEFINED}}}\label{protocol_8h_ac1162efdf35b533ba996ac9d1c96fc05a605159e8a4c32319fd69b5d151369d93} 
UNDEFINED&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{MSG\_TX@{MSG\_TX}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!MSG\_TX@{MSG\_TX}}}\label{protocol_8h_ac1162efdf35b533ba996ac9d1c96fc05a0494732fc92c975f58783e224585c473} 
MSG\+\_\+\+TX&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{MSG\_BLOCK@{MSG\_BLOCK}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!MSG\_BLOCK@{MSG\_BLOCK}}}\label{protocol_8h_ac1162efdf35b533ba996ac9d1c96fc05a4cae15fd207d555331995cd5c57689c1} 
MSG\+\_\+\+BLOCK&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{MSG\_WTX@{MSG\_WTX}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!MSG\_WTX@{MSG\_WTX}}}\label{protocol_8h_ac1162efdf35b533ba996ac9d1c96fc05a1ff1717282df3ccaaa1bec2bf94dcd51} 
MSG\+\_\+\+WTX&Defined in BIP 339. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{MSG\_FILTERED\_BLOCK@{MSG\_FILTERED\_BLOCK}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!MSG\_FILTERED\_BLOCK@{MSG\_FILTERED\_BLOCK}}}\label{protocol_8h_ac1162efdf35b533ba996ac9d1c96fc05a11f393e43f75b471170b96ce59a07d33} 
MSG\+\_\+\+FILTERED\+\_\+\+BLOCK&Defined in BIP37. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{MSG\_CMPCT\_BLOCK@{MSG\_CMPCT\_BLOCK}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!MSG\_CMPCT\_BLOCK@{MSG\_CMPCT\_BLOCK}}}\label{protocol_8h_ac1162efdf35b533ba996ac9d1c96fc05a78b9ead22ca5cae07b98370ffab06abc} 
MSG\+\_\+\+CMPCT\+\_\+\+BLOCK&Defined in BIP152. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{MSG\_WITNESS\_BLOCK@{MSG\_WITNESS\_BLOCK}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!MSG\_WITNESS\_BLOCK@{MSG\_WITNESS\_BLOCK}}}\label{protocol_8h_ac1162efdf35b533ba996ac9d1c96fc05a818c40ec63ca86496df4bbf110fd7891} 
MSG\+\_\+\+WITNESS\+\_\+\+BLOCK&Defined in BIP144. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{MSG\_WITNESS\_TX@{MSG\_WITNESS\_TX}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!MSG\_WITNESS\_TX@{MSG\_WITNESS\_TX}}}\label{protocol_8h_ac1162efdf35b533ba996ac9d1c96fc05af1be4c88bb7a6a014000e49631c3555c} 
MSG\+\_\+\+WITNESS\+\_\+\+TX&Defined in BIP144. \\
\hline

\end{DoxyEnumFields}
\index{protocol.h@{protocol.h}!ServiceFlags@{ServiceFlags}}
\index{ServiceFlags@{ServiceFlags}!protocol.h@{protocol.h}}
\doxysubsubsection{ServiceFlags}
{\footnotesize\ttfamily \label{protocol_8h_ad131f3177584caea787cdbf6f85a9537} 
enum \textbf{ Service\+Flags} \+: uint64\+\_\+t}

n\+Services flags \begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{NODE\_NONE@{NODE\_NONE}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!NODE\_NONE@{NODE\_NONE}}}\label{protocol_8h_ad131f3177584caea787cdbf6f85a9537a51f819cd0b9ac374d6950a29b4861398} 
NODE\+\_\+\+NONE&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{NODE\_NETWORK@{NODE\_NETWORK}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!NODE\_NETWORK@{NODE\_NETWORK}}}\label{protocol_8h_ad131f3177584caea787cdbf6f85a9537a9d1154f0e7e56f183a5c8373abe2e86c} 
NODE\+\_\+\+NETWORK&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{NODE\_BLOOM@{NODE\_BLOOM}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!NODE\_BLOOM@{NODE\_BLOOM}}}\label{protocol_8h_ad131f3177584caea787cdbf6f85a9537a9ca74e44e29a412c070750bdbf2380bb} 
NODE\+\_\+\+BLOOM&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{NODE\_WITNESS@{NODE\_WITNESS}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!NODE\_WITNESS@{NODE\_WITNESS}}}\label{protocol_8h_ad131f3177584caea787cdbf6f85a9537a749f25f8cdb0125f7a479627b4944696} 
NODE\+\_\+\+WITNESS&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{NODE\_COMPACT\_FILTERS@{NODE\_COMPACT\_FILTERS}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!NODE\_COMPACT\_FILTERS@{NODE\_COMPACT\_FILTERS}}}\label{protocol_8h_ad131f3177584caea787cdbf6f85a9537ad279240d0624d58813461a7790873e46} 
NODE\+\_\+\+COMPACT\+\_\+\+FILTERS&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{NODE\_NETWORK\_LIMITED@{NODE\_NETWORK\_LIMITED}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!NODE\_NETWORK\_LIMITED@{NODE\_NETWORK\_LIMITED}}}\label{protocol_8h_ad131f3177584caea787cdbf6f85a9537a8294ff7e8ff77692c2fb330df0a3c372} 
NODE\+\_\+\+NETWORK\+\_\+\+LIMITED&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{NODE\_P2P\_V2@{NODE\_P2P\_V2}!protocol.h@{protocol.h}}\index{protocol.h@{protocol.h}!NODE\_P2P\_V2@{NODE\_P2P\_V2}}}\label{protocol_8h_ad131f3177584caea787cdbf6f85a9537a6cec5ba21c2e7665e42eca13ea37dd75} 
NODE\+\_\+\+P2\+P\+\_\+\+V2&\\
\hline

\end{DoxyEnumFields}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{protocol.h@{protocol.h}!SeedsServiceFlags@{SeedsServiceFlags}}
\index{SeedsServiceFlags@{SeedsServiceFlags}!protocol.h@{protocol.h}}
\doxysubsubsection{SeedsServiceFlags()}
{\footnotesize\ttfamily \label{protocol_8h_aa9db474ae59f3e09d7ff8ec65084572f} 
\textbf{ Service\+Flags} Seeds\+Service\+Flags (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}

\doxyref{State}{p.}{headers__sync__chainwork__tests_8cpp_ae883f65c4951396ab945f766e09e3c94} independent service flags. If the return value is changed, contrib/seeds/makeseeds.\+py should be updated appropriately to filter for nodes with desired service flags (compatible with our new flags). \index{protocol.h@{protocol.h}!serviceFlagsToStr@{serviceFlagsToStr}}
\index{serviceFlagsToStr@{serviceFlagsToStr}!protocol.h@{protocol.h}}
\doxysubsubsection{serviceFlagsToStr()}
{\footnotesize\ttfamily \label{protocol_8h_a3e821db595250233ecdc8827991d066e} 
std\+::vector$<$ std\+::string $>$ service\+Flags\+To\+Str (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{flags}{}\end{DoxyParamCaption})}

Convert service flags (a bitmask of NODE\+\_\+$\ast$) to human readable strings. It supports unknown service flags which will be returned as "{}\+UNKNOWN[...]"{}. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em flags} & multiple NODE\+\_\+$\ast$ bitwise-\/\+OR-\/ed together \\
\hline
\end{DoxyParams}
\index{protocol.h@{protocol.h}!ToGenTxid@{ToGenTxid}}
\index{ToGenTxid@{ToGenTxid}!protocol.h@{protocol.h}}
\doxysubsubsection{ToGenTxid()}
{\footnotesize\ttfamily \label{protocol_8h_a3466d64f79e3865dc16910ed3d1ba3d8} 
\textbf{ Gen\+Txid} To\+Gen\+Txid (\begin{DoxyParamCaption}\item[{const \textbf{ CInv} \&}]{inv}{}\end{DoxyParamCaption})}

Convert a TX/\+WITNESS\+\_\+\+TX/\+WTX \doxyref{CInv}{p.}{class_c_inv} to a \doxyref{Gen\+Txid}{p.}{class_gen_txid}. 

\label{doc-var-members}
\doxysubsection{Variable Documentation}
\index{protocol.h@{protocol.h}!ALL\_NET\_MESSAGE\_TYPES@{ALL\_NET\_MESSAGE\_TYPES}}
\index{ALL\_NET\_MESSAGE\_TYPES@{ALL\_NET\_MESSAGE\_TYPES}!protocol.h@{protocol.h}}
\doxysubsubsection{ALL\_NET\_MESSAGE\_TYPES}
{\footnotesize\ttfamily \label{protocol_8h_a2492337a0b7f82206e1670cc34944c91} 
const std\+::array ALL\+\_\+\+NET\+\_\+\+MESSAGE\+\_\+\+TYPES\hspace{0.3cm}{\ttfamily [inline]}}

All known message types (see above). Keep this in the same order as the list of messages above. \index{protocol.h@{protocol.h}!MSG\_TYPE\_MASK@{MSG\_TYPE\_MASK}}
\index{MSG\_TYPE\_MASK@{MSG\_TYPE\_MASK}!protocol.h@{protocol.h}}
\doxysubsubsection{MSG\_TYPE\_MASK}
{\footnotesize\ttfamily \label{protocol_8h_a954a3d925849c04ec257eccefafd8b55} 
const uint32\+\_\+t MSG\+\_\+\+TYPE\+\_\+\+MASK = 0xffffffff $>$$>$ 2}

\index{protocol.h@{protocol.h}!MSG\_WITNESS\_FLAG@{MSG\_WITNESS\_FLAG}}
\index{MSG\_WITNESS\_FLAG@{MSG\_WITNESS\_FLAG}!protocol.h@{protocol.h}}
\doxysubsubsection{MSG\_WITNESS\_FLAG}
{\footnotesize\ttfamily \label{protocol_8h_a706dc5bf653ca632edd8d08fa81c1073} 
const uint32\+\_\+t MSG\+\_\+\+WITNESS\+\_\+\+FLAG = 1 $<$$<$ 30}

getdata message type flags 