\doxysection{Descriptor Struct Reference}
\label{struct_descriptor}\index{Descriptor@{Descriptor}}


Interface for parsed descriptor objects.  




{\ttfamily \#include $<$descriptor.\+h$>$}

Inheritance diagram for Descriptor\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{struct_descriptor}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \textbf{ $\sim$\+Descriptor} ()=default
\item 
virtual bool \textbf{ Is\+Range} () const =0
\item 
virtual bool \textbf{ Is\+Solvable} () const =0
\item 
virtual std\+::string \textbf{ To\+String} (bool compat\+\_\+format=false) const =0
\item 
virtual bool \textbf{ Is\+Single\+Type} () const =0
\item 
virtual bool \textbf{ To\+Private\+String} (const \textbf{ Signing\+Provider} \&provider, std\+::string \&out) const =0
\item 
virtual bool \textbf{ To\+Normalized\+String} (const \textbf{ Signing\+Provider} \&provider, std\+::string \&out, const \textbf{ Descriptor\+Cache} $\ast$cache=nullptr) const =0
\item 
virtual bool \textbf{ Expand} (int pos, const \textbf{ Signing\+Provider} \&provider, std\+::vector$<$ \textbf{ CScript} $>$ \&output\+\_\+scripts, \textbf{ Flat\+Signing\+Provider} \&out, \textbf{ Descriptor\+Cache} $\ast$write\+\_\+cache=nullptr) const =0
\item 
virtual bool \textbf{ Expand\+From\+Cache} (int pos, const \textbf{ Descriptor\+Cache} \&read\+\_\+cache, std\+::vector$<$ \textbf{ CScript} $>$ \&output\+\_\+scripts, \textbf{ Flat\+Signing\+Provider} \&out) const =0
\item 
virtual void \textbf{ Expand\+Private} (int pos, const \textbf{ Signing\+Provider} \&provider, \textbf{ Flat\+Signing\+Provider} \&out) const =0
\item 
virtual std\+::optional$<$ \textbf{ Output\+Type} $>$ \textbf{ Get\+Output\+Type} () const =0
\item 
virtual std\+::optional$<$ int64\+\_\+t $>$ \textbf{ Script\+Size} () const =0
\item 
virtual std\+::optional$<$ int64\+\_\+t $>$ \textbf{ Max\+Satisfaction\+Weight} (bool use\+\_\+max\+\_\+sig) const =0
\item 
virtual std\+::optional$<$ int64\+\_\+t $>$ \textbf{ Max\+Satisfaction\+Elems} () const =0
\item 
virtual void \textbf{ Get\+Pub\+Keys} (std\+::set$<$ \textbf{ CPub\+Key} $>$ \&pubkeys, std\+::set$<$ \textbf{ CExt\+Pub\+Key} $>$ \&ext\+\_\+pubs) const =0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Interface for parsed descriptor objects. 

Descriptors are strings that describe a set of script\+Pub\+Keys, together with all information necessary to solve them. By combining all information into one, they avoid the need to separately import keys and scripts.

Descriptors may be ranged, which occurs when the public keys inside are specified in the form of HD chains (xpubs).

Descriptors always represent public information -\/ public keys and scripts -\/ but in cases where private keys need to be conveyed along with a descriptor, they can be included inside by changing public keys to private keys (WIF format), and changing xpubs by xprvs.

Reference documentation about the descriptor language can be found in doc/descriptors.\+md. 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{Descriptor@{Descriptor}!````~Descriptor@{$\sim$Descriptor}}
\index{````~Descriptor@{$\sim$Descriptor}!Descriptor@{Descriptor}}
\doxysubsubsection{$\sim$Descriptor()}
{\footnotesize\ttfamily \label{struct_descriptor_a905d836df499cb5a69f5bd4276f73ba8} 
virtual $\sim$\textbf{ Descriptor} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [default]}}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{Descriptor@{Descriptor}!Expand@{Expand}}
\index{Expand@{Expand}!Descriptor@{Descriptor}}
\doxysubsubsection{Expand()}
{\footnotesize\ttfamily \label{struct_descriptor_a29c4fae2742f4d1e9fe6260104921c05} 
virtual bool Expand (\begin{DoxyParamCaption}\item[{int}]{pos}{, }\item[{const \textbf{ Signing\+Provider} \&}]{provider}{, }\item[{std\+::vector$<$ \textbf{ CScript} $>$ \&}]{output\+\_\+scripts}{, }\item[{\textbf{ Flat\+Signing\+Provider} \&}]{out}{, }\item[{\textbf{ Descriptor\+Cache} $\ast$}]{write\+\_\+cache}{ = {\ttfamily nullptr}}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Expand a descriptor at a specified position.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em pos} & The position at which to expand the descriptor. If \doxyref{Is\+Range()}{p.}{struct_descriptor_a384f402d107e574081cce67d2bbe392c} is false, this is ignored. \\
\hline
\mbox{\texttt{in}}  & {\em provider} & The provider to query for private keys in case of hardened derivation. \\
\hline
\mbox{\texttt{out}}  & {\em output\+\_\+scripts} & The expanded script\+Pub\+Keys. \\
\hline
\mbox{\texttt{out}}  & {\em out} & Scripts and public keys necessary for solving the expanded script\+Pub\+Keys (may be equal to {\ttfamily provider}). \\
\hline
\mbox{\texttt{out}}  & {\em write\+\_\+cache} & \doxyref{Cache}{p.}{class_cache} data necessary to evaluate the descriptor at this point without access to private keys. \\
\hline
\end{DoxyParams}


Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_a62efca1cd1b01367452dd50356660cd2}.

\index{Descriptor@{Descriptor}!ExpandFromCache@{ExpandFromCache}}
\index{ExpandFromCache@{ExpandFromCache}!Descriptor@{Descriptor}}
\doxysubsubsection{ExpandFromCache()}
{\footnotesize\ttfamily \label{struct_descriptor_a039721ff3b383ca3f8917e2659a1a197} 
virtual bool Expand\+From\+Cache (\begin{DoxyParamCaption}\item[{int}]{pos}{, }\item[{const \textbf{ Descriptor\+Cache} \&}]{read\+\_\+cache}{, }\item[{std\+::vector$<$ \textbf{ CScript} $>$ \&}]{output\+\_\+scripts}{, }\item[{\textbf{ Flat\+Signing\+Provider} \&}]{out}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Expand a descriptor at a specified position using cached expansion data.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em pos} & The position at which to expand the descriptor. If \doxyref{Is\+Range()}{p.}{struct_descriptor_a384f402d107e574081cce67d2bbe392c} is false, this is ignored. \\
\hline
\mbox{\texttt{in}}  & {\em read\+\_\+cache} & Cached expansion data. \\
\hline
\mbox{\texttt{out}}  & {\em output\+\_\+scripts} & The expanded script\+Pub\+Keys. \\
\hline
\mbox{\texttt{out}}  & {\em out} & Scripts and public keys necessary for solving the expanded script\+Pub\+Keys (may be equal to {\ttfamily provider}). \\
\hline
\end{DoxyParams}


Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_a2a5aeb3c45bd16514b6eb7528d750144}.

\index{Descriptor@{Descriptor}!ExpandPrivate@{ExpandPrivate}}
\index{ExpandPrivate@{ExpandPrivate}!Descriptor@{Descriptor}}
\doxysubsubsection{ExpandPrivate()}
{\footnotesize\ttfamily \label{struct_descriptor_a515491fdee3ec1bd3c9675ad6ce95b5e} 
virtual void Expand\+Private (\begin{DoxyParamCaption}\item[{int}]{pos}{, }\item[{const \textbf{ Signing\+Provider} \&}]{provider}{, }\item[{\textbf{ Flat\+Signing\+Provider} \&}]{out}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Expand the private key for a descriptor at a specified position, if possible.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em pos} & The position at which to expand the descriptor. If \doxyref{Is\+Range()}{p.}{struct_descriptor_a384f402d107e574081cce67d2bbe392c} is false, this is ignored. \\
\hline
\mbox{\texttt{in}}  & {\em provider} & The provider to query for the private keys. \\
\hline
\mbox{\texttt{out}}  & {\em out} & Any private keys available for the specified {\ttfamily pos}. \\
\hline
\end{DoxyParams}


Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_a166cbae4e76ec0504280b02bec368256}.

\index{Descriptor@{Descriptor}!GetOutputType@{GetOutputType}}
\index{GetOutputType@{GetOutputType}!Descriptor@{Descriptor}}
\doxysubsubsection{GetOutputType()}
{\footnotesize\ttfamily \label{struct_descriptor_a5a8844efa79548b19463806458501d64} 
virtual std\+::optional$<$ \textbf{ Output\+Type} $>$ Get\+Output\+Type (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

\begin{DoxyReturn}{Returns}
The \doxyref{Output\+Type}{p.}{outputtype_8h_a4e0517338e6c4a31a2addafc06d4f3a3} of the script\+Pub\+Key(s) produced by this descriptor. Or nullopt if indeterminate (multiple or none) 
\end{DoxyReturn}


Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_a41d43f0f438daf2fcfe39e9097efa6fb}.

\index{Descriptor@{Descriptor}!GetPubKeys@{GetPubKeys}}
\index{GetPubKeys@{GetPubKeys}!Descriptor@{Descriptor}}
\doxysubsubsection{GetPubKeys()}
{\footnotesize\ttfamily \label{struct_descriptor_ad48de921cfe887c0b0c2b0859e1727d6} 
virtual void Get\+Pub\+Keys (\begin{DoxyParamCaption}\item[{std\+::set$<$ \textbf{ CPub\+Key} $>$ \&}]{pubkeys}{, }\item[{std\+::set$<$ \textbf{ CExt\+Pub\+Key} $>$ \&}]{ext\+\_\+pubs}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Return all (extended) public keys for this descriptor, including any from subdescriptors.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{out}}  & {\em pubkeys} & Any public keys \\
\hline
\mbox{\texttt{out}}  & {\em ext\+\_\+pubs} & Any extended public keys \\
\hline
\end{DoxyParams}


Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_a682dea7d4240aea70673fc1e030efa4b}.

\index{Descriptor@{Descriptor}!IsRange@{IsRange}}
\index{IsRange@{IsRange}!Descriptor@{Descriptor}}
\doxysubsubsection{IsRange()}
{\footnotesize\ttfamily \label{struct_descriptor_a384f402d107e574081cce67d2bbe392c} 
virtual bool Is\+Range (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Whether the expansion of this descriptor depends on the position. 

Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_a97274b8f0685d8616871a8da55b7ca1f}.

\index{Descriptor@{Descriptor}!IsSingleType@{IsSingleType}}
\index{IsSingleType@{IsSingleType}!Descriptor@{Descriptor}}
\doxysubsubsection{IsSingleType()}
{\footnotesize\ttfamily \label{struct_descriptor_a3f10bfdd5847ddfee562397bbadb7a88} 
virtual bool Is\+Single\+Type (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Whether this descriptor will return one script\+Pub\+Key or multiple (aka is or is not combo) 

Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_ac209bc974d575716f48e4b1dc5fdc209}.

\index{Descriptor@{Descriptor}!IsSolvable@{IsSolvable}}
\index{IsSolvable@{IsSolvable}!Descriptor@{Descriptor}}
\doxysubsubsection{IsSolvable()}
{\footnotesize\ttfamily \label{struct_descriptor_a5188f152804288ca25e3b24181c83d0c} 
virtual bool Is\+Solvable (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Whether this descriptor has all information about signing ignoring lack of private keys. This is true for all descriptors except ones that use {\ttfamily raw} or {\ttfamily addr} constructions. 

Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_a6915f253643fe035676aaa1d5f029edb}.

\index{Descriptor@{Descriptor}!MaxSatisfactionElems@{MaxSatisfactionElems}}
\index{MaxSatisfactionElems@{MaxSatisfactionElems}!Descriptor@{Descriptor}}
\doxysubsubsection{MaxSatisfactionElems()}
{\footnotesize\ttfamily \label{struct_descriptor_a84c63c5bf1813cd11bd780093766904c} 
virtual std\+::optional$<$ int64\+\_\+t $>$ Max\+Satisfaction\+Elems (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Get the maximum size number of stack elements for satisfying this descriptor. 

Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_ae8cac69aeda9b479363960a7264cf18f}.

\index{Descriptor@{Descriptor}!MaxSatisfactionWeight@{MaxSatisfactionWeight}}
\index{MaxSatisfactionWeight@{MaxSatisfactionWeight}!Descriptor@{Descriptor}}
\doxysubsubsection{MaxSatisfactionWeight()}
{\footnotesize\ttfamily \label{struct_descriptor_a8ae2b600f1849a03edd46144e4294a67} 
virtual std\+::optional$<$ int64\+\_\+t $>$ Max\+Satisfaction\+Weight (\begin{DoxyParamCaption}\item[{bool}]{use\+\_\+max\+\_\+sig}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Get the maximum size of a satisfaction for this descriptor, in weight units.


\begin{DoxyParams}{Parameters}
{\em use\+\_\+max\+\_\+sig} & Whether to assume ECDSA signatures will have a high-\/r. \\
\hline
\end{DoxyParams}


Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_a87eb4bb350b11b23c74b9c2fd2fb42aa}.

\index{Descriptor@{Descriptor}!ScriptSize@{ScriptSize}}
\index{ScriptSize@{ScriptSize}!Descriptor@{Descriptor}}
\doxysubsubsection{ScriptSize()}
{\footnotesize\ttfamily \label{struct_descriptor_a8576a31df9e87d9fbbec932cf80995c5} 
virtual std\+::optional$<$ int64\+\_\+t $>$ Script\+Size (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Get the size of the script\+Pub\+Key for this descriptor. 

Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_aec0da457ba0d065b0ddf12a472d7d8bf}.

\index{Descriptor@{Descriptor}!ToNormalizedString@{ToNormalizedString}}
\index{ToNormalizedString@{ToNormalizedString}!Descriptor@{Descriptor}}
\doxysubsubsection{ToNormalizedString()}
{\footnotesize\ttfamily \label{struct_descriptor_a9bd59675bde06a6637e6dc5e035de0f4} 
virtual bool To\+Normalized\+String (\begin{DoxyParamCaption}\item[{const \textbf{ Signing\+Provider} \&}]{provider}{, }\item[{std\+::string \&}]{out}{, }\item[{const \textbf{ Descriptor\+Cache} $\ast$}]{cache}{ = {\ttfamily nullptr}}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Convert the descriptor to a normalized string. Normalized descriptors have the xpub at the last hardened step. This fails if the provided provider does not have the private keys to derive that xpub. 

Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_afc9f55832f60ca5cd9d01a93f1e48926}.

\index{Descriptor@{Descriptor}!ToPrivateString@{ToPrivateString}}
\index{ToPrivateString@{ToPrivateString}!Descriptor@{Descriptor}}
\doxysubsubsection{ToPrivateString()}
{\footnotesize\ttfamily \label{struct_descriptor_a3384c33d1e43041f9a01f4b96e38f012} 
virtual bool To\+Private\+String (\begin{DoxyParamCaption}\item[{const \textbf{ Signing\+Provider} \&}]{provider}{, }\item[{std\+::string \&}]{out}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. 

Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_ab1fe5deccbcb0ba8f75e537478a6ad5b}.

\index{Descriptor@{Descriptor}!ToString@{ToString}}
\index{ToString@{ToString}!Descriptor@{Descriptor}}
\doxysubsubsection{ToString()}
{\footnotesize\ttfamily \label{struct_descriptor_a51f5d3c6406b32be4a0dcd3f60598757} 
virtual std\+::string To\+String (\begin{DoxyParamCaption}\item[{bool}]{compat\+\_\+format}{ = {\ttfamily false}}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Convert the descriptor back to a string, undoing parsing. 

Implemented in \textbf{ Dummy\+Descriptor} \doxyref{}{p.}{classwallet_1_1_dummy_descriptor_a03ffd9c69b86eb7914b7f20a18eae5e5}.



The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/script/\textbf{ descriptor.\+h}\end{DoxyCompactItemize}
