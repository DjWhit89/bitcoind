\doxysection{Session Class Reference}
\label{classi2p_1_1sam_1_1_session}\index{Session@{Session}}


{\ttfamily \#include $<$i2p.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Session} (const \textbf{ fs\+::path} \&private\+\_\+key\+\_\+file, const \textbf{ Proxy} \&control\+\_\+host, std\+::shared\+\_\+ptr$<$ \textbf{ CThread\+Interrupt} $>$ interrupt)
\item 
\textbf{ Session} (const \textbf{ Proxy} \&control\+\_\+host, std\+::shared\+\_\+ptr$<$ \textbf{ CThread\+Interrupt} $>$ interrupt)
\item 
\textbf{ $\sim$\+Session} ()
\item 
bool \textbf{ Listen} (\textbf{ Connection} \&conn) \textbf{ EXCLUSIVE\+\_\+\+LOCKS\+\_\+\+REQUIRED}(!m\+\_\+mutex)
\item 
bool \textbf{ Accept} (\textbf{ Connection} \&conn) \textbf{ EXCLUSIVE\+\_\+\+LOCKS\+\_\+\+REQUIRED}(!m\+\_\+mutex)
\item 
bool \textbf{ Connect} (const \textbf{ CService} \&to, \textbf{ Connection} \&conn, bool \&proxy\+\_\+error) \textbf{ EXCLUSIVE\+\_\+\+LOCKS\+\_\+\+REQUIRED}(!m\+\_\+mutex)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
I2P SAM session. 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{Session@{Session}!Session@{Session}}
\index{Session@{Session}!Session@{Session}}
\doxysubsubsection{Session()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classi2p_1_1sam_1_1_session_a85658cb9a754d70a1fe1ce0d645625c1} 
Session (\begin{DoxyParamCaption}\item[{const \textbf{ fs\+::path} \&}]{private\+\_\+key\+\_\+file}{, }\item[{const \textbf{ Proxy} \&}]{control\+\_\+host}{, }\item[{std\+::shared\+\_\+ptr$<$ \textbf{ CThread\+Interrupt} $>$}]{interrupt}{}\end{DoxyParamCaption})}

Construct a session. This will not initiate any IO, the session will be lazily created later when first used. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em private\+\_\+key\+\_\+file} & Path to a private key file. If the file does not exist then the private key will be generated and saved into the file. \\
\hline
\mbox{\texttt{in}}  & {\em control\+\_\+host} & Location of the SAM proxy. \\
\hline
\mbox{\texttt{in,out}}  & {\em interrupt} & If this is signaled then all operations are canceled as soon as possible and executing methods throw an exception. \\
\hline
\end{DoxyParams}
\index{Session@{Session}!Session@{Session}}
\index{Session@{Session}!Session@{Session}}
\doxysubsubsection{Session()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classi2p_1_1sam_1_1_session_a814a19231bc9101a3be5e3dad542333f} 
Session (\begin{DoxyParamCaption}\item[{const \textbf{ Proxy} \&}]{control\+\_\+host}{, }\item[{std\+::shared\+\_\+ptr$<$ \textbf{ CThread\+Interrupt} $>$}]{interrupt}{}\end{DoxyParamCaption})}

Construct a transient session which will generate its own I2P private key rather than read the one from disk (it will not be saved on disk either and will be lost once this object is destroyed). This will not initiate any IO, the session will be lazily created later when first used. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em control\+\_\+host} & Location of the SAM proxy. \\
\hline
\mbox{\texttt{in,out}}  & {\em interrupt} & If this is signaled then all operations are canceled as soon as possible and executing methods throw an exception. \\
\hline
\end{DoxyParams}
\index{Session@{Session}!````~Session@{$\sim$Session}}
\index{````~Session@{$\sim$Session}!Session@{Session}}
\doxysubsubsection{$\sim$Session()}
{\footnotesize\ttfamily \label{classi2p_1_1sam_1_1_session_a12455f5db8475fe429d3ebf3aa84d7eb} 
$\sim$\textbf{ Session} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Destroy the session, closing the internally used sockets. The sockets that have been returned by {\ttfamily \doxyref{Accept()}{p.}{classi2p_1_1sam_1_1_session_a374ecfa4bb67dfadeeec44e8c1481766}} or {\ttfamily \doxyref{Connect()}{p.}{classi2p_1_1sam_1_1_session_a89c66ea021e473f04482e4871d9e9bf9}} will not be closed, but they will be closed by the SAM proxy because the session is destroyed. So they will return an error next time we try to read or write to them. 

\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{Session@{Session}!Accept@{Accept}}
\index{Accept@{Accept}!Session@{Session}}
\doxysubsubsection{Accept()}
{\footnotesize\ttfamily \label{classi2p_1_1sam_1_1_session_a374ecfa4bb67dfadeeec44e8c1481766} 
bool Accept (\begin{DoxyParamCaption}\item[{\textbf{ Connection} \&}]{conn}{}\end{DoxyParamCaption})}

Wait for and accept a new incoming connection. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in,out}}  & {\em conn} & The {\ttfamily sock} member is used for waiting and accepting. Upon successful completion the {\ttfamily peer} member will be set to the address of the incoming peer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success 
\end{DoxyReturn}
\index{Session@{Session}!Connect@{Connect}}
\index{Connect@{Connect}!Session@{Session}}
\doxysubsubsection{Connect()}
{\footnotesize\ttfamily \label{classi2p_1_1sam_1_1_session_a89c66ea021e473f04482e4871d9e9bf9} 
bool Connect (\begin{DoxyParamCaption}\item[{const \textbf{ CService} \&}]{to}{, }\item[{\textbf{ Connection} \&}]{conn}{, }\item[{bool \&}]{proxy\+\_\+error}{}\end{DoxyParamCaption})}

Connect to an I2P peer. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em to} & Peer to connect to. \\
\hline
\mbox{\texttt{out}}  & {\em conn} & Established connection. Only set if {\ttfamily true} is returned. \\
\hline
\mbox{\texttt{out}}  & {\em proxy\+\_\+error} & If an error occurs due to proxy or general network failure, then this is set to {\ttfamily true}. If an error occurs due to unreachable peer (likely peer is down), then it is set to {\ttfamily false}. Only set if {\ttfamily false} is returned. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success 
\end{DoxyReturn}
\index{Session@{Session}!Listen@{Listen}}
\index{Listen@{Listen}!Session@{Session}}
\doxysubsubsection{Listen()}
{\footnotesize\ttfamily \label{classi2p_1_1sam_1_1_session_a96bbb63bd36a0974e6cbf9777b11520e} 
bool Listen (\begin{DoxyParamCaption}\item[{\textbf{ Connection} \&}]{conn}{}\end{DoxyParamCaption})}

Start listening for an incoming connection. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{out}}  & {\em conn} & Upon successful completion the {\ttfamily sock} and {\ttfamily me} members will be set to the listening socket and address. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success 
\end{DoxyReturn}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/\textbf{ i2p.\+h}\item 
src/\textbf{ i2p.\+cpp}\end{DoxyCompactItemize}
