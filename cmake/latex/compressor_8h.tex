\doxysection{src/compressor.h File Reference}
\label{compressor_8h}\index{src/compressor.h@{src/compressor.h}}
{\ttfamily \#include $<$prevector.\+h$>$}\newline
{\ttfamily \#include $<$primitives/transaction.\+h$>$}\newline
{\ttfamily \#include $<$script/script.\+h$>$}\newline
{\ttfamily \#include $<$serialize.\+h$>$}\newline
{\ttfamily \#include $<$span.\+h$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ Script\+Compression}
\item 
struct \textbf{ Amount\+Compression}
\item 
struct \textbf{ Tx\+Out\+Compression}
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
using \textbf{ Compressed\+Script} = \textbf{ prevector}$<$33, unsigned char$>$
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \textbf{ Compress\+Script} (const \textbf{ CScript} \&\textbf{ script}, \textbf{ Compressed\+Script} \&out)
\item 
unsigned int \textbf{ Get\+Special\+Script\+Size} (unsigned int n\+Size)
\item 
bool \textbf{ Decompress\+Script} (\textbf{ CScript} \&\textbf{ script}, unsigned int n\+Size, const \textbf{ Compressed\+Script} \&in)
\item 
uint64\+\_\+t \textbf{ Compress\+Amount} (uint64\+\_\+t n\+Amount)
\item 
uint64\+\_\+t \textbf{ Decompress\+Amount} (uint64\+\_\+t n\+Amount)
\end{DoxyCompactItemize}


\label{doc-typedef-members}
\doxysubsection{Typedef Documentation}
\index{compressor.h@{compressor.h}!CompressedScript@{CompressedScript}}
\index{CompressedScript@{CompressedScript}!compressor.h@{compressor.h}}
\doxysubsubsection{CompressedScript}
{\footnotesize\ttfamily \label{compressor_8h_ae46e6589b8544cb3020db212f4d80430} 
using \textbf{ Compressed\+Script} = \textbf{ prevector}$<$33, unsigned char$>$}

This saves us from making many heap allocations when serializing and deserializing compressed scripts.

This prevector size is determined by the largest .resize() in the Compress\+Script function. The largest compressed script format is a compressed public key, which is 33 bytes. 

\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{compressor.h@{compressor.h}!CompressAmount@{CompressAmount}}
\index{CompressAmount@{CompressAmount}!compressor.h@{compressor.h}}
\doxysubsubsection{CompressAmount()}
{\footnotesize\ttfamily \label{compressor_8h_aececde1cd29d059e9e0b9509d08ed003} 
uint64\+\_\+t Compress\+Amount (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{n\+Amount}{}\end{DoxyParamCaption})}

Compress amount.

n\+Amount is of type uint64\+\_\+t and thus cannot be negative. If you\textquotesingle{}re passing in a \doxyref{CAmount}{p.}{amount_8h_a4eaf3a5239714d8c45b851527f7cb564} (int64\+\_\+t), make sure to properly handle the case where the amount is negative before calling Compress\+Amount(...).

\begin{DoxyPrecond}{Precondition}
Function defined only for 0 $<$= n\+Amount $<$= MAX\+\_\+\+MONEY. 
\end{DoxyPrecond}
\index{compressor.h@{compressor.h}!CompressScript@{CompressScript}}
\index{CompressScript@{CompressScript}!compressor.h@{compressor.h}}
\doxysubsubsection{CompressScript()}
{\footnotesize\ttfamily \label{compressor_8h_a2aaa93b002d9850bb7f71e17211302d4} 
bool Compress\+Script (\begin{DoxyParamCaption}\item[{const \textbf{ CScript} \&}]{script}{, }\item[{\textbf{ Compressed\+Script} \&}]{out}{}\end{DoxyParamCaption})}

\index{compressor.h@{compressor.h}!DecompressAmount@{DecompressAmount}}
\index{DecompressAmount@{DecompressAmount}!compressor.h@{compressor.h}}
\doxysubsubsection{DecompressAmount()}
{\footnotesize\ttfamily \label{compressor_8h_a91d426e89018c1c7d946f622b5c8a7ed} 
uint64\+\_\+t Decompress\+Amount (\begin{DoxyParamCaption}\item[{uint64\+\_\+t}]{n\+Amount}{}\end{DoxyParamCaption})}

\index{compressor.h@{compressor.h}!DecompressScript@{DecompressScript}}
\index{DecompressScript@{DecompressScript}!compressor.h@{compressor.h}}
\doxysubsubsection{DecompressScript()}
{\footnotesize\ttfamily \label{compressor_8h_a23c8120bf6a4002f09eec3381a1de7c3} 
bool Decompress\+Script (\begin{DoxyParamCaption}\item[{\textbf{ CScript} \&}]{script}{, }\item[{unsigned int}]{n\+Size}{, }\item[{const \textbf{ Compressed\+Script} \&}]{in}{}\end{DoxyParamCaption})}

\index{compressor.h@{compressor.h}!GetSpecialScriptSize@{GetSpecialScriptSize}}
\index{GetSpecialScriptSize@{GetSpecialScriptSize}!compressor.h@{compressor.h}}
\doxysubsubsection{GetSpecialScriptSize()}
{\footnotesize\ttfamily \label{compressor_8h_af19d884713b6311086e72ca1c123d7e5} 
unsigned int Get\+Special\+Script\+Size (\begin{DoxyParamCaption}\item[{unsigned int}]{n\+Size}{}\end{DoxyParamCaption})}

