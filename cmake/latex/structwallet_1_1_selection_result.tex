\doxysection{Selection\+Result Struct Reference}
\label{structwallet_1_1_selection_result}\index{SelectionResult@{SelectionResult}}


{\ttfamily \#include $<$coinselection.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Selection\+Result} (const \textbf{ CAmount} target, \textbf{ Selection\+Algorithm} algo)
\item 
\textbf{ Selection\+Result} ()=delete
\item 
\textbf{ CAmount} \textbf{ Get\+Selected\+Value} () const
\item 
\textbf{ CAmount} \textbf{ Get\+Selected\+Effective\+Value} () const
\item 
\textbf{ CAmount} \textbf{ Get\+Total\+Bump\+Fees} () const
\item 
void \textbf{ Clear} ()
\item 
void \textbf{ Add\+Input} (const \textbf{ Output\+Group} \&group)
\item 
void \textbf{ Add\+Inputs} (const std\+::set$<$ std\+::shared\+\_\+ptr$<$ \textbf{ COutput} $>$ $>$ \&inputs, bool subtract\+\_\+fee\+\_\+outputs)
\item 
void \textbf{ Set\+Bump\+Fee\+Discount} (const \textbf{ CAmount} discount)
\item 
void \textbf{ Recalculate\+Waste} (const \textbf{ CAmount} min\+\_\+viable\+\_\+change, const \textbf{ CAmount} change\+\_\+cost, const \textbf{ CAmount} change\+\_\+fee)
\item 
\textbf{ CAmount} \textbf{ Get\+Waste} () const
\item 
void \textbf{ Set\+Algo\+Completed} (bool algo\+\_\+completed)
\item 
bool \textbf{ Get\+Algo\+Completed} () const
\item 
void \textbf{ Set\+Selections\+Evaluated} (size\+\_\+t attempts)
\item 
size\+\_\+t \textbf{ Get\+Selections\+Evaluated} () const
\item 
void \textbf{ Merge} (const \textbf{ Selection\+Result} \&other)
\item 
const std\+::set$<$ std\+::shared\+\_\+ptr$<$ \textbf{ COutput} $>$ $>$ \& \textbf{ Get\+Input\+Set} () const
\item 
std\+::vector$<$ std\+::shared\+\_\+ptr$<$ \textbf{ COutput} $>$ $>$ \textbf{ Get\+Shuffled\+Input\+Vector} () const
\item 
bool \textbf{ operator$<$} (\textbf{ Selection\+Result} other) const
\item 
\textbf{ CAmount} \textbf{ Get\+Change} (const \textbf{ CAmount} min\+\_\+viable\+\_\+change, const \textbf{ CAmount} change\+\_\+fee) const
\item 
\textbf{ CAmount} \textbf{ Get\+Target} () const
\item 
\textbf{ Selection\+Algorithm} \textbf{ Get\+Algo} () const
\item 
int \textbf{ Get\+Weight} () const
\end{DoxyCompactItemize}


\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{SelectionResult@{SelectionResult}!SelectionResult@{SelectionResult}}
\index{SelectionResult@{SelectionResult}!SelectionResult@{SelectionResult}}
\doxysubsubsection{SelectionResult()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a2a880efa4dfba53e07749f5d06fae32c} 
Selection\+Result (\begin{DoxyParamCaption}\item[{const \textbf{ CAmount}}]{target}{, }\item[{\textbf{ Selection\+Algorithm}}]{algo}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}

\index{SelectionResult@{SelectionResult}!SelectionResult@{SelectionResult}}
\index{SelectionResult@{SelectionResult}!SelectionResult@{SelectionResult}}
\doxysubsubsection{SelectionResult()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a992fa7b7fb010adca2f74a1ea6c39ab8} 
Selection\+Result (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{SelectionResult@{SelectionResult}!AddInput@{AddInput}}
\index{AddInput@{AddInput}!SelectionResult@{SelectionResult}}
\doxysubsubsection{AddInput()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a2c7cb2419fa4e2170d547cf0ec4fa5c4} 
void Add\+Input (\begin{DoxyParamCaption}\item[{const \textbf{ Output\+Group} \&}]{group}{}\end{DoxyParamCaption})}

\index{SelectionResult@{SelectionResult}!AddInputs@{AddInputs}}
\index{AddInputs@{AddInputs}!SelectionResult@{SelectionResult}}
\doxysubsubsection{AddInputs()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_ad48b5ed26e0c3809eddf28d662ad5e98} 
void Add\+Inputs (\begin{DoxyParamCaption}\item[{const std\+::set$<$ std\+::shared\+\_\+ptr$<$ \textbf{ COutput} $>$ $>$ \&}]{inputs}{, }\item[{bool}]{subtract\+\_\+fee\+\_\+outputs}{}\end{DoxyParamCaption})}

\index{SelectionResult@{SelectionResult}!Clear@{Clear}}
\index{Clear@{Clear}!SelectionResult@{SelectionResult}}
\doxysubsubsection{Clear()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_aa71d36872f416feaa853788a7a7a7ef8} 
void Clear (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\index{SelectionResult@{SelectionResult}!GetAlgo@{GetAlgo}}
\index{GetAlgo@{GetAlgo}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetAlgo()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a085be5f78092e827141a24a71179c20e} 
\textbf{ Selection\+Algorithm} Get\+Algo (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\index{SelectionResult@{SelectionResult}!GetAlgoCompleted@{GetAlgoCompleted}}
\index{GetAlgoCompleted@{GetAlgoCompleted}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetAlgoCompleted()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a7a9a5b1728febf31a31d7b1347649f47} 
bool Get\+Algo\+Completed (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Get m\+\_\+algo\+\_\+completed \index{SelectionResult@{SelectionResult}!GetChange@{GetChange}}
\index{GetChange@{GetChange}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetChange()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a6421e2ae16e5ccad164a79061ab2e486} 
\textbf{ CAmount} Get\+Change (\begin{DoxyParamCaption}\item[{const \textbf{ CAmount}}]{min\+\_\+viable\+\_\+change}{, }\item[{const \textbf{ CAmount}}]{change\+\_\+fee}{}\end{DoxyParamCaption}) const}

Get the amount for the change output after paying needed fees.

The change amount is not 100\% precise due to discrepancies in fee calculation. The final change amount (if any) should be corrected after calculating the final tx fees. When there is a discrepancy, most of the time the final change would be slightly bigger than estimated.

Following are the possible factors of discrepancy\+:
\begin{DoxyItemize}
\item non-\/input fees always include segwit flags
\item input fee estimation always include segwit stack size
\item input fees are rounded individually and not collectively, which leads to small rounding errors
\item input counter size is always assumed to be 1vbyte
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em min\+\_\+viable\+\_\+change} & Minimum amount for change output, if change would be less then we forgo change \\
\hline
\mbox{\texttt{in}}  & {\em change\+\_\+fee} & Fees to include change output in the tx \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Amount for change output, 0 when there is no change. 
\end{DoxyReturn}
\index{SelectionResult@{SelectionResult}!GetInputSet@{GetInputSet}}
\index{GetInputSet@{GetInputSet}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetInputSet()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_acec4c597f55a016119f07bb986ee5211} 
const std\+::set$<$ std\+::shared\+\_\+ptr$<$ \textbf{ COutput} $>$ $>$ \& Get\+Input\+Set (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Get m\+\_\+selected\+\_\+inputs \index{SelectionResult@{SelectionResult}!GetSelectedEffectiveValue@{GetSelectedEffectiveValue}}
\index{GetSelectedEffectiveValue@{GetSelectedEffectiveValue}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetSelectedEffectiveValue()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a8a27d70aff3a50cdc82bbc2a56c62c4b} 
\textbf{ CAmount} Get\+Selected\+Effective\+Value (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [nodiscard]}}

\index{SelectionResult@{SelectionResult}!GetSelectedValue@{GetSelectedValue}}
\index{GetSelectedValue@{GetSelectedValue}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetSelectedValue()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a5d8abc522e284e009dd3a35b6c79c5b3} 
\textbf{ CAmount} Get\+Selected\+Value (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [nodiscard]}}

Get the sum of the input values \index{SelectionResult@{SelectionResult}!GetSelectionsEvaluated@{GetSelectionsEvaluated}}
\index{GetSelectionsEvaluated@{GetSelectionsEvaluated}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetSelectionsEvaluated()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_ab07ca98c5d218b233167a0b68deb87e6} 
size\+\_\+t Get\+Selections\+Evaluated (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Get selections\+\_\+evaluated \index{SelectionResult@{SelectionResult}!GetShuffledInputVector@{GetShuffledInputVector}}
\index{GetShuffledInputVector@{GetShuffledInputVector}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetShuffledInputVector()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_aab7f9c06502d339f37c8ffe4f6e1d277} 
std\+::vector$<$ std\+::shared\+\_\+ptr$<$ \textbf{ COutput} $>$ $>$ Get\+Shuffled\+Input\+Vector (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Get the vector of COutputs that will be used to fill in a \doxyref{CTransaction}{p.}{class_c_transaction}\textquotesingle{}s vin \index{SelectionResult@{SelectionResult}!GetTarget@{GetTarget}}
\index{GetTarget@{GetTarget}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetTarget()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a584f2d1f9e0c5207d2f8ed1fbd748f58} 
\textbf{ CAmount} Get\+Target (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\index{SelectionResult@{SelectionResult}!GetTotalBumpFees@{GetTotalBumpFees}}
\index{GetTotalBumpFees@{GetTotalBumpFees}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetTotalBumpFees()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a1ca3cf187cb9675e35d11d0bfafc7975} 
\textbf{ CAmount} Get\+Total\+Bump\+Fees (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [nodiscard]}}

\index{SelectionResult@{SelectionResult}!GetWaste@{GetWaste}}
\index{GetWaste@{GetWaste}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetWaste()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a099f0911cbc3755dfac5bf616891e392} 
\textbf{ CAmount} Get\+Waste (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [nodiscard]}}

\index{SelectionResult@{SelectionResult}!GetWeight@{GetWeight}}
\index{GetWeight@{GetWeight}!SelectionResult@{SelectionResult}}
\doxysubsubsection{GetWeight()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_af2f5602ff89e9ee513396faa4debfba9} 
int Get\+Weight (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\index{SelectionResult@{SelectionResult}!Merge@{Merge}}
\index{Merge@{Merge}!SelectionResult@{SelectionResult}}
\doxysubsubsection{Merge()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a67ed75feb7bb5dbdfa11c433048fed46} 
void Merge (\begin{DoxyParamCaption}\item[{const \textbf{ Selection\+Result} \&}]{other}{}\end{DoxyParamCaption})}

Combines the
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em other} & selection result into \textquotesingle{}this\textquotesingle{} selection result.\\
\hline
\end{DoxyParams}
Important note\+: There must be no shared \textquotesingle{}\doxyref{COutput}{p.}{structwallet_1_1_c_output}\textquotesingle{} among the two selection results being combined. \index{SelectionResult@{SelectionResult}!operator$<$@{operator$<$}}
\index{operator$<$@{operator$<$}!SelectionResult@{SelectionResult}}
\doxysubsubsection{operator$<$()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_aa14b4d9743ba63d401ffd65b9b23923e} 
bool operator$<$ (\begin{DoxyParamCaption}\item[{\textbf{ Selection\+Result}}]{other}{}\end{DoxyParamCaption}) const}

\index{SelectionResult@{SelectionResult}!RecalculateWaste@{RecalculateWaste}}
\index{RecalculateWaste@{RecalculateWaste}!SelectionResult@{SelectionResult}}
\doxysubsubsection{RecalculateWaste()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a25694f80fdbcf786c3a5f2dcedda6d09} 
void Recalculate\+Waste (\begin{DoxyParamCaption}\item[{const \textbf{ CAmount}}]{min\+\_\+viable\+\_\+change}{, }\item[{const \textbf{ CAmount}}]{change\+\_\+cost}{, }\item[{const \textbf{ CAmount}}]{change\+\_\+fee}{}\end{DoxyParamCaption})}

Calculates and stores the waste for this result given the cost of change and the opportunity cost of spending these inputs now vs in the future. If change exists, waste = change\+\_\+cost + inputs $\ast$ (effective\+\_\+feerate -\/ long\+\_\+term\+\_\+feerate) -\/ bump\+\_\+fee\+\_\+group\+\_\+discount If no change, waste = excess + inputs $\ast$ (effective\+\_\+feerate -\/ long\+\_\+term\+\_\+feerate) -\/ bump\+\_\+fee\+\_\+group\+\_\+discount where excess = selected\+\_\+effective\+\_\+value -\/ target change\+\_\+cost = effective\+\_\+feerate $\ast$ change\+\_\+output\+\_\+size + long\+\_\+term\+\_\+feerate $\ast$ change\+\_\+spend\+\_\+size


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em min\+\_\+viable\+\_\+change} & The minimum amount necessary to make a change output economic \\
\hline
\mbox{\texttt{in}}  & {\em change\+\_\+cost} & The cost of creating a change output and spending it in the future. Only used if there is change, in which case it must be non-\/negative. \\
\hline
\mbox{\texttt{in}}  & {\em change\+\_\+fee} & The fee for creating a change output \\
\hline
\end{DoxyParams}
\index{SelectionResult@{SelectionResult}!SetAlgoCompleted@{SetAlgoCompleted}}
\index{SetAlgoCompleted@{SetAlgoCompleted}!SelectionResult@{SelectionResult}}
\doxysubsubsection{SetAlgoCompleted()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a7745b6e525f3ab3d9cd6cfb2f08caf20} 
void Set\+Algo\+Completed (\begin{DoxyParamCaption}\item[{bool}]{algo\+\_\+completed}{}\end{DoxyParamCaption})}

Tracks that algorithm was able to exhaustively search the entire combination space before hitting limit of tries \index{SelectionResult@{SelectionResult}!SetBumpFeeDiscount@{SetBumpFeeDiscount}}
\index{SetBumpFeeDiscount@{SetBumpFeeDiscount}!SelectionResult@{SelectionResult}}
\doxysubsubsection{SetBumpFeeDiscount()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a62d7349f9221bc519521fa5d0a1ffdac} 
void Set\+Bump\+Fee\+Discount (\begin{DoxyParamCaption}\item[{const \textbf{ CAmount}}]{discount}{}\end{DoxyParamCaption})}

How much individual inputs overestimated the bump fees for shared ancestries \index{SelectionResult@{SelectionResult}!SetSelectionsEvaluated@{SetSelectionsEvaluated}}
\index{SetSelectionsEvaluated@{SetSelectionsEvaluated}!SelectionResult@{SelectionResult}}
\doxysubsubsection{SetSelectionsEvaluated()}
{\footnotesize\ttfamily \label{structwallet_1_1_selection_result_a8ebd4e3f6fa2ebe8e7cdcd5761f48ff9} 
void Set\+Selections\+Evaluated (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{attempts}{}\end{DoxyParamCaption})}

Record the number of selections that were evaluated 

The documentation for this struct was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/wallet/\textbf{ coinselection.\+h}\item 
src/wallet/\textbf{ coinselection.\+cpp}\end{DoxyCompactItemize}
