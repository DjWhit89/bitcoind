\doxysection{src/pow.cpp File Reference}
\label{pow_8cpp}\index{src/pow.cpp@{src/pow.cpp}}
{\ttfamily \#include $<$pow.\+h$>$}\newline
{\ttfamily \#include $<$arith\+\_\+uint256.\+h$>$}\newline
{\ttfamily \#include $<$chain.\+h$>$}\newline
{\ttfamily \#include $<$primitives/block.\+h$>$}\newline
{\ttfamily \#include $<$uint256.\+h$>$}\newline
{\ttfamily \#include $<$util/check.\+h$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
unsigned int \textbf{ Get\+Next\+Work\+Required} (const \textbf{ CBlock\+Index} $\ast$pindex\+Last, const \textbf{ CBlock\+Header} $\ast$pblock, const \textbf{ Consensus\+::\+Params} \&params)
\item 
unsigned int \textbf{ Calculate\+Next\+Work\+Required} (const \textbf{ CBlock\+Index} $\ast$pindex\+Last, int64\+\_\+t n\+First\+Block\+Time, const \textbf{ Consensus\+::\+Params} \&params)
\item 
bool \textbf{ Permitted\+Difficulty\+Transition} (const \textbf{ Consensus\+::\+Params} \&params, int64\+\_\+t height, uint32\+\_\+t old\+\_\+nbits, uint32\+\_\+t new\+\_\+nbits)
\item 
bool \textbf{ Check\+Proof\+Of\+Work} (\textbf{ uint256} hash, unsigned int n\+Bits, const \textbf{ Consensus\+::\+Params} \&params)
\item 
std\+::optional$<$ \textbf{ arith\+\_\+uint256} $>$ \textbf{ Derive\+Target} (unsigned int n\+Bits, const \textbf{ uint256} pow\+\_\+limit)
\item 
bool \textbf{ Check\+Proof\+Of\+Work\+Impl} (\textbf{ uint256} hash, unsigned int n\+Bits, const \textbf{ Consensus\+::\+Params} \&params)
\end{DoxyCompactItemize}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{pow.cpp@{pow.cpp}!CalculateNextWorkRequired@{CalculateNextWorkRequired}}
\index{CalculateNextWorkRequired@{CalculateNextWorkRequired}!pow.cpp@{pow.cpp}}
\doxysubsubsection{CalculateNextWorkRequired()}
{\footnotesize\ttfamily \label{pow_8cpp_aeb760adff75ed6ca74ae6b345555bcb4} 
unsigned int Calculate\+Next\+Work\+Required (\begin{DoxyParamCaption}\item[{const \textbf{ CBlock\+Index} $\ast$}]{pindex\+Last}{, }\item[{int64\+\_\+t}]{n\+First\+Block\+Time}{, }\item[{const \textbf{ Consensus\+::\+Params} \&}]{params}{}\end{DoxyParamCaption})}

\index{pow.cpp@{pow.cpp}!CheckProofOfWork@{CheckProofOfWork}}
\index{CheckProofOfWork@{CheckProofOfWork}!pow.cpp@{pow.cpp}}
\doxysubsubsection{CheckProofOfWork()}
{\footnotesize\ttfamily \label{pow_8cpp_a4e1129d7ab72643eb7e830f7f72953d7} 
bool Check\+Proof\+Of\+Work (\begin{DoxyParamCaption}\item[{\textbf{ uint256}}]{hash}{, }\item[{unsigned int}]{n\+Bits}{, }\item[{const \textbf{ Consensus\+::\+Params} \&}]{params}{}\end{DoxyParamCaption})}

Check whether a block hash satisfies the proof-\/of-\/work requirement specified by n\+Bits \index{pow.cpp@{pow.cpp}!CheckProofOfWorkImpl@{CheckProofOfWorkImpl}}
\index{CheckProofOfWorkImpl@{CheckProofOfWorkImpl}!pow.cpp@{pow.cpp}}
\doxysubsubsection{CheckProofOfWorkImpl()}
{\footnotesize\ttfamily \label{pow_8cpp_a44b0af954c9f22049c62ed71f527aaa5} 
bool Check\+Proof\+Of\+Work\+Impl (\begin{DoxyParamCaption}\item[{\textbf{ uint256}}]{hash}{, }\item[{unsigned int}]{n\+Bits}{, }\item[{const \textbf{ Consensus\+::\+Params} \&}]{params}{}\end{DoxyParamCaption})}

\index{pow.cpp@{pow.cpp}!DeriveTarget@{DeriveTarget}}
\index{DeriveTarget@{DeriveTarget}!pow.cpp@{pow.cpp}}
\doxysubsubsection{DeriveTarget()}
{\footnotesize\ttfamily \label{pow_8cpp_a2de4bcf0a76c20765d177f3f1de93e4f} 
std\+::optional$<$ \textbf{ arith\+\_\+uint256} $>$ Derive\+Target (\begin{DoxyParamCaption}\item[{unsigned int}]{n\+Bits}{, }\item[{const \textbf{ uint256}}]{pow\+\_\+limit}{}\end{DoxyParamCaption})}

Convert n\+Bits value to target.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em n\+Bits} & compact representation of the target \\
\hline
\mbox{\texttt{in}}  & {\em pow\+\_\+limit} & PoW limit (consensus parameter)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the proof-\/of-\/work target or nullopt if the n\+Bits value is invalid (due to overflow or exceeding pow\+\_\+limit) 
\end{DoxyReturn}
\index{pow.cpp@{pow.cpp}!GetNextWorkRequired@{GetNextWorkRequired}}
\index{GetNextWorkRequired@{GetNextWorkRequired}!pow.cpp@{pow.cpp}}
\doxysubsubsection{GetNextWorkRequired()}
{\footnotesize\ttfamily \label{pow_8cpp_a444323ddc75c2b90f484fa9b9da31dc8} 
unsigned int Get\+Next\+Work\+Required (\begin{DoxyParamCaption}\item[{const \textbf{ CBlock\+Index} $\ast$}]{pindex\+Last}{, }\item[{const \textbf{ CBlock\+Header} $\ast$}]{pblock}{, }\item[{const \textbf{ Consensus\+::\+Params} \&}]{params}{}\end{DoxyParamCaption})}

\index{pow.cpp@{pow.cpp}!PermittedDifficultyTransition@{PermittedDifficultyTransition}}
\index{PermittedDifficultyTransition@{PermittedDifficultyTransition}!pow.cpp@{pow.cpp}}
\doxysubsubsection{PermittedDifficultyTransition()}
{\footnotesize\ttfamily \label{pow_8cpp_a130882e657d7b28218ca2703356ae2d4} 
bool Permitted\+Difficulty\+Transition (\begin{DoxyParamCaption}\item[{const \textbf{ Consensus\+::\+Params} \&}]{params}{, }\item[{int64\+\_\+t}]{height}{, }\item[{uint32\+\_\+t}]{old\+\_\+nbits}{, }\item[{uint32\+\_\+t}]{new\+\_\+nbits}{}\end{DoxyParamCaption})}

Return false if the proof-\/of-\/work requirement specified by new\+\_\+nbits at a given height is not possible, given the proof-\/of-\/work on the prior block as specified by old\+\_\+nbits.

This function only checks that the new value is within a factor of 4 of the old value for blocks at the difficulty adjustment interval, and otherwise requires the values to be the same.

Always returns true on networks where min difficulty blocks are allowed, such as regtest/testnet. 