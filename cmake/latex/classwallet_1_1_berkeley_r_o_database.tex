\doxysection{Berkeley\+RODatabase Class Reference}
\label{classwallet_1_1_berkeley_r_o_database}\index{BerkeleyRODatabase@{BerkeleyRODatabase}}


{\ttfamily \#include $<$migrate.\+h$>$}

Inheritance diagram for Berkeley\+RODatabase\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classwallet_1_1_berkeley_r_o_database}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Berkeley\+RODatabase} (const \textbf{ fs\+::path} \&filepath, bool open=true)
\item 
\textbf{ $\sim$\+Berkeley\+RODatabase} ()=default
\item 
void \textbf{ Open} () override
\item 
bool \textbf{ Rewrite} () override
\item 
bool \textbf{ Backup} (const std\+::string \&str\+Dest) const override
\item 
void \textbf{ Close} () override
\item 
std\+::string \textbf{ Filename} () override
\item 
std\+::vector$<$ \textbf{ fs\+::path} $>$ \textbf{ Files} () override
\item 
std\+::string \textbf{ Format} () override
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ Database\+Batch} $>$ \textbf{ Make\+Batch} () override
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ Wallet\+Database}}
\begin{DoxyCompactItemize}
\item 
\textbf{ Wallet\+Database} ()=default
\item 
virtual \textbf{ $\sim$\+Wallet\+Database} ()=default
\end{DoxyCompactItemize}
\doxysubsubsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
\textbf{ Berkeley\+ROData} \textbf{ m\+\_\+records}
\end{DoxyCompactItemize}
\doxysubsection*{Data Fields inherited from \textbf{ Wallet\+Database}}
\begin{DoxyCompactItemize}
\item 
std\+::atomic$<$ int $>$ \textbf{ m\+\_\+refcount} \{0\}
\begin{DoxyCompactList}\small\item\em Counts the number of active database users to be sure that the database is not closed while someone is using it. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A class representing a Berkeley\+DB file from which we can only read records. This is used only for migration of legacy to descriptor wallets 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{BerkeleyRODatabase@{BerkeleyRODatabase}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\index{BerkeleyRODatabase@{BerkeleyRODatabase}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\doxysubsubsection{BerkeleyRODatabase()}
{\footnotesize\ttfamily \label{classwallet_1_1_berkeley_r_o_database_aea45dd70fcd0add121fedfe78f0f2741} 
Berkeley\+RODatabase (\begin{DoxyParamCaption}\item[{const \textbf{ fs\+::path} \&}]{filepath}{, }\item[{bool}]{open}{ = {\ttfamily true}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Create \doxyref{DB}{p.}{class_d_b} handle \index{BerkeleyRODatabase@{BerkeleyRODatabase}!````~BerkeleyRODatabase@{$\sim$BerkeleyRODatabase}}
\index{````~BerkeleyRODatabase@{$\sim$BerkeleyRODatabase}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\doxysubsubsection{$\sim$BerkeleyRODatabase()}
{\footnotesize\ttfamily \label{classwallet_1_1_berkeley_r_o_database_a39f40bcdb57537708db542bf867965bf} 
$\sim$\textbf{ Berkeley\+RODatabase} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{BerkeleyRODatabase@{BerkeleyRODatabase}!Backup@{Backup}}
\index{Backup@{Backup}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\doxysubsubsection{Backup()}
{\footnotesize\ttfamily \label{classwallet_1_1_berkeley_r_o_database_a3d90a7cbddc2947343cfec5e7c7fc8ff} 
bool Backup (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{str\+Dest}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Back up the entire database to a file. 

Implements \textbf{ Wallet\+Database} \doxyref{}{p.}{classwallet_1_1_wallet_database_a128c0cdd162a59b9e673b7b3ef25e5eb}.

\index{BerkeleyRODatabase@{BerkeleyRODatabase}!Close@{Close}}
\index{Close@{Close}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\doxysubsubsection{Close()}
{\footnotesize\ttfamily \label{classwallet_1_1_berkeley_r_o_database_a0f9aecd570c4e5e6d41337f0e2f1adf5} 
void Close (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Flush to the database file and close the database. Also close the environment if no other databases are open in it. 

Implements \textbf{ Wallet\+Database} \doxyref{}{p.}{classwallet_1_1_wallet_database_aacb6d0e5e6d570cdc2b0da14c3921ff0}.

\index{BerkeleyRODatabase@{BerkeleyRODatabase}!Filename@{Filename}}
\index{Filename@{Filename}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\doxysubsubsection{Filename()}
{\footnotesize\ttfamily \label{classwallet_1_1_berkeley_r_o_database_a5763f6a37436a3c2ea3055108142d4fe} 
std\+::string Filename (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Return path to main database file for logs and error messages. 

Implements \textbf{ Wallet\+Database} \doxyref{}{p.}{classwallet_1_1_wallet_database_a25ad5f26118c00b51c1d1cdfe4dde260}.

\index{BerkeleyRODatabase@{BerkeleyRODatabase}!Files@{Files}}
\index{Files@{Files}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\doxysubsubsection{Files()}
{\footnotesize\ttfamily \label{classwallet_1_1_berkeley_r_o_database_a374248409e6c55c3a928c4c464f25ce2} 
std\+::vector$<$ \textbf{ fs\+::path} $>$ Files (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Return paths to all database created files 

Implements \textbf{ Wallet\+Database} \doxyref{}{p.}{classwallet_1_1_wallet_database_a5ce53d218b3605687ac43ddf1db7b152}.

\index{BerkeleyRODatabase@{BerkeleyRODatabase}!Format@{Format}}
\index{Format@{Format}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\doxysubsubsection{Format()}
{\footnotesize\ttfamily \label{classwallet_1_1_berkeley_r_o_database_ab484e14597e1c01509c032bf827ed268} 
std\+::string \textbf{ Format} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \textbf{ Wallet\+Database} \doxyref{}{p.}{classwallet_1_1_wallet_database_af4e31ecb708419370270e68032cf9c40}.

\index{BerkeleyRODatabase@{BerkeleyRODatabase}!MakeBatch@{MakeBatch}}
\index{MakeBatch@{MakeBatch}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\doxysubsubsection{MakeBatch()}
{\footnotesize\ttfamily \label{classwallet_1_1_berkeley_r_o_database_a5f4d22dcb275c0d9067128fae22d0410} 
std\+::unique\+\_\+ptr$<$ \textbf{ Database\+Batch} $>$ Make\+Batch (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Make a \doxyref{Database\+Batch}{p.}{classwallet_1_1_database_batch} connected to this database 

Implements \textbf{ Wallet\+Database} \doxyref{}{p.}{classwallet_1_1_wallet_database_a44572b5ff40991b2f6883eec7f1b800b}.

\index{BerkeleyRODatabase@{BerkeleyRODatabase}!Open@{Open}}
\index{Open@{Open}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\doxysubsubsection{Open()}
{\footnotesize\ttfamily \label{classwallet_1_1_berkeley_r_o_database_acf67a6e477cdfa63a5e865e472441a17} 
void Open (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Open the database if it is not already opened. 

Implements \textbf{ Wallet\+Database} \doxyref{}{p.}{classwallet_1_1_wallet_database_af3d7c172541d28c555ba083eeaa8fafb}.

\index{BerkeleyRODatabase@{BerkeleyRODatabase}!Rewrite@{Rewrite}}
\index{Rewrite@{Rewrite}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\doxysubsubsection{Rewrite()}
{\footnotesize\ttfamily \label{classwallet_1_1_berkeley_r_o_database_a2269883cba6033755413f1d878f70e18} 
bool Rewrite (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Rewrite the entire database on disk 

Implements \textbf{ Wallet\+Database} \doxyref{}{p.}{classwallet_1_1_wallet_database_a6dc9d008c3beb3b25cdfb0f9d9953cef}.



\label{doc-variable-members}
\doxysubsection{Field Documentation}
\index{BerkeleyRODatabase@{BerkeleyRODatabase}!m\_records@{m\_records}}
\index{m\_records@{m\_records}!BerkeleyRODatabase@{BerkeleyRODatabase}}
\doxysubsubsection{m\_records}
{\footnotesize\ttfamily \label{classwallet_1_1_berkeley_r_o_database_a862a5fc2a8f23ce26e9b062676ec4acd} 
\textbf{ Berkeley\+ROData} m\+\_\+records}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/wallet/\textbf{ migrate.\+h}\item 
src/wallet/\textbf{ migrate.\+cpp}\end{DoxyCompactItemize}
