\doxysection{src/psbt.h File Reference}
\label{psbt_8h}\index{src/psbt.h@{src/psbt.h}}
{\ttfamily \#include $<$common/types.\+h$>$}\newline
{\ttfamily \#include $<$node/transaction.\+h$>$}\newline
{\ttfamily \#include $<$policy/feerate.\+h$>$}\newline
{\ttfamily \#include $<$primitives/transaction.\+h$>$}\newline
{\ttfamily \#include $<$pubkey.\+h$>$}\newline
{\ttfamily \#include $<$script/keyorigin.\+h$>$}\newline
{\ttfamily \#include $<$script/sign.\+h$>$}\newline
{\ttfamily \#include $<$script/signingprovider.\+h$>$}\newline
{\ttfamily \#include $<$span.\+h$>$}\newline
{\ttfamily \#include $<$streams.\+h$>$}\newline
{\ttfamily \#include $<$optional$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ PSBTProprietary}
\item 
struct \textbf{ PSBTInput}
\item 
struct \textbf{ PSBTOutput}
\item 
struct \textbf{ Partially\+Signed\+Transaction}
\end{DoxyCompactItemize}
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \textbf{ node}
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum class \textbf{ PSBTRole} \{ \newline
\textbf{ CREATOR}
, \textbf{ UPDATER}
, \textbf{ SIGNER}
, \textbf{ FINALIZER}
, \newline
\textbf{ EXTRACTOR}
 \}
\item 
enum class \textbf{ PSBTError} 
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename Stream, typename... X$>$ }\\void \textbf{ Serialize\+To\+Vector} (Stream \&s, const \textbf{ X} \&... \textbf{ args})
\item 
{\footnotesize template$<$typename Stream, typename... X$>$ }\\void \textbf{ Unserialize\+From\+Vector} (Stream \&s, \textbf{ X} \&\&... \textbf{ args})
\item 
{\footnotesize template$<$typename Stream$>$ }\\\textbf{ Key\+Origin\+Info} \textbf{ Deserialize\+Key\+Origin} (Stream \&s, uint64\+\_\+t length)
\item 
{\footnotesize template$<$typename Stream$>$ }\\void \textbf{ Deserialize\+HDKeypath} (Stream \&s, \textbf{ Key\+Origin\+Info} \&hd\+\_\+keypath)
\item 
{\footnotesize template$<$typename Stream$>$ }\\void \textbf{ Deserialize\+HDKeypaths} (Stream \&s, const std\+::vector$<$ unsigned char $>$ \&key, std\+::map$<$ \textbf{ CPub\+Key}, \textbf{ Key\+Origin\+Info} $>$ \&hd\+\_\+keypaths)
\item 
{\footnotesize template$<$typename Stream$>$ }\\void \textbf{ Serialize\+Key\+Origin} (Stream \&s, \textbf{ Key\+Origin\+Info} hd\+\_\+keypath)
\item 
{\footnotesize template$<$typename Stream$>$ }\\void \textbf{ Serialize\+HDKeypath} (Stream \&s, \textbf{ Key\+Origin\+Info} hd\+\_\+keypath)
\item 
{\footnotesize template$<$typename Stream$>$ }\\void \textbf{ Serialize\+HDKeypaths} (Stream \&s, const std\+::map$<$ \textbf{ CPub\+Key}, \textbf{ Key\+Origin\+Info} $>$ \&hd\+\_\+keypaths, \textbf{ Compact\+Size\+Writer} type)
\item 
{\footnotesize template$<$typename Stream$>$ }\\void \textbf{ Deserialize\+Mu\+Sig2\+Participant\+Pubkeys} (Stream \&s, \textbf{ Span\+Reader} \&skey, std\+::map$<$ \textbf{ CPub\+Key}, std\+::vector$<$ \textbf{ CPub\+Key} $>$ $>$ \&out, std\+::string context)
\item 
{\footnotesize template$<$typename Stream$>$ }\\void \textbf{ Deserialize\+Mu\+Sig2\+Participant\+Data\+Identifier} (Stream \&skey, \textbf{ CPub\+Key} \&agg\+\_\+pub, \textbf{ CPub\+Key} \&part\+\_\+pub, \textbf{ uint256} \&leaf\+\_\+hash)
\item 
std\+::string \textbf{ PSBTRole\+Name} (\textbf{ PSBTRole} role)
\item 
\textbf{ Precomputed\+Transaction\+Data} \textbf{ Precompute\+PSBTData} (const \textbf{ Partially\+Signed\+Transaction} \&psbt)
\item 
bool \textbf{ PSBTInput\+Signed} (const \textbf{ PSBTInput} \&input)
\item 
bool \textbf{ PSBTInput\+Signed\+And\+Verified} (const \textbf{ Partially\+Signed\+Transaction} psbt, unsigned int input\+\_\+index, const \textbf{ Precomputed\+Transaction\+Data} $\ast$txdata)
\item 
\textbf{ PSBTError} \textbf{ Sign\+PSBTInput} (const \textbf{ Signing\+Provider} \&provider, \textbf{ Partially\+Signed\+Transaction} \&psbt, int index, const \textbf{ Precomputed\+Transaction\+Data} $\ast$txdata, std\+::optional$<$ int $>$ sighash=std\+::nullopt, \textbf{ Signature\+Data} $\ast$out\+\_\+sigdata=nullptr, bool finalize=true)
\item 
void \textbf{ Remove\+Unnecessary\+Transactions} (\textbf{ Partially\+Signed\+Transaction} \&psbtx)
\item 
size\+\_\+t \textbf{ Count\+PSBTUnsigned\+Inputs} (const \textbf{ Partially\+Signed\+Transaction} \&psbt)
\item 
void \textbf{ Update\+PSBTOutput} (const \textbf{ Signing\+Provider} \&provider, \textbf{ Partially\+Signed\+Transaction} \&psbt, int index)
\item 
bool \textbf{ Finalize\+PSBT} (\textbf{ Partially\+Signed\+Transaction} \&psbtx)
\item 
bool \textbf{ Finalize\+And\+Extract\+PSBT} (\textbf{ Partially\+Signed\+Transaction} \&psbtx, \textbf{ CMutable\+Transaction} \&result)
\item 
bool \textbf{ Combine\+PSBTs} (\textbf{ Partially\+Signed\+Transaction} \&out, const std\+::vector$<$ \textbf{ Partially\+Signed\+Transaction} $>$ \&psbtxs)
\item 
bool \textbf{ Decode\+Base64\+PSBT} (\textbf{ Partially\+Signed\+Transaction} \&decoded\+\_\+psbt, const std\+::string \&base64\+\_\+psbt, std\+::string \&error)
\begin{DoxyCompactList}\small\item\em Decode a base64ed PSBT into a \doxyref{Partially\+Signed\+Transaction}{p.}{struct_partially_signed_transaction}. \end{DoxyCompactList}\item 
bool \textbf{ Decode\+Raw\+PSBT} (\textbf{ Partially\+Signed\+Transaction} \&decoded\+\_\+psbt, std\+::span$<$ const std\+::byte $>$ raw\+\_\+psbt, std\+::string \&error)
\begin{DoxyCompactList}\small\item\em Decode a raw (binary blob) PSBT into a \doxyref{Partially\+Signed\+Transaction}{p.}{struct_partially_signed_transaction}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const std\+::streamsize \textbf{ MAX\+\_\+\+FILE\+\_\+\+SIZE\+\_\+\+PSBT} = 100000000
\end{DoxyCompactItemize}


\label{doc-enum-members}
\doxysubsection{Enumeration Type Documentation}
\index{psbt.h@{psbt.h}!PSBTError@{PSBTError}}
\index{PSBTError@{PSBTError}!psbt.h@{psbt.h}}
\doxysubsubsection{PSBTError}
{\footnotesize\ttfamily \label{psbt_8h_a463d00d67d3e9d48d7a3dc0c6ee84d06} 
enum class \textbf{ PSBTError}\hspace{0.3cm}{\ttfamily [strong]}}

\index{psbt.h@{psbt.h}!PSBTRole@{PSBTRole}}
\index{PSBTRole@{PSBTRole}!psbt.h@{psbt.h}}
\doxysubsubsection{PSBTRole}
{\footnotesize\ttfamily \label{psbt_8h_a60377f9d3fc1342a56ec0fdcab343d72} 
enum class \textbf{ PSBTRole}\hspace{0.3cm}{\ttfamily [strong]}}

\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{CREATOR@{CREATOR}!psbt.h@{psbt.h}}\index{psbt.h@{psbt.h}!CREATOR@{CREATOR}}}\label{psbt_8h_a60377f9d3fc1342a56ec0fdcab343d72a71867d2546785ba58a16552639a722c2} 
CREATOR&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{UPDATER@{UPDATER}!psbt.h@{psbt.h}}\index{psbt.h@{psbt.h}!UPDATER@{UPDATER}}}\label{psbt_8h_a60377f9d3fc1342a56ec0fdcab343d72a73d722d1f99e14084d41d1f2d375f080} 
UPDATER&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{SIGNER@{SIGNER}!psbt.h@{psbt.h}}\index{psbt.h@{psbt.h}!SIGNER@{SIGNER}}}\label{psbt_8h_a60377f9d3fc1342a56ec0fdcab343d72a7cf616e7107cc0fc058107eb24361b47} 
SIGNER&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{FINALIZER@{FINALIZER}!psbt.h@{psbt.h}}\index{psbt.h@{psbt.h}!FINALIZER@{FINALIZER}}}\label{psbt_8h_a60377f9d3fc1342a56ec0fdcab343d72a075a459f11c14d5a1764c6f629ca04d6} 
FINALIZER&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{EXTRACTOR@{EXTRACTOR}!psbt.h@{psbt.h}}\index{psbt.h@{psbt.h}!EXTRACTOR@{EXTRACTOR}}}\label{psbt_8h_a60377f9d3fc1342a56ec0fdcab343d72a861c86c3d4e5c9c676607295755a8cb7} 
EXTRACTOR&\\
\hline

\end{DoxyEnumFields}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{psbt.h@{psbt.h}!CombinePSBTs@{CombinePSBTs}}
\index{CombinePSBTs@{CombinePSBTs}!psbt.h@{psbt.h}}
\doxysubsubsection{CombinePSBTs()}
{\footnotesize\ttfamily \label{psbt_8h_a45fae24aba4e755880c1911baad57e9e} 
bool Combine\+PSBTs (\begin{DoxyParamCaption}\item[{\textbf{ Partially\+Signed\+Transaction} \&}]{out}{, }\item[{const std\+::vector$<$ \textbf{ Partially\+Signed\+Transaction} $>$ \&}]{psbtxs}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [nodiscard]}}

Combines PSBTs with the same underlying transaction, resulting in a single PSBT with all partial signatures from each input.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{out}}  & {\em out} & the combined PSBT, if successful \\
\hline
\mbox{\texttt{in}}  & {\em psbtxs} & the PSBTs to combine \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if we successfully combined the transactions, false if they were not compatible 
\end{DoxyReturn}
\index{psbt.h@{psbt.h}!CountPSBTUnsignedInputs@{CountPSBTUnsignedInputs}}
\index{CountPSBTUnsignedInputs@{CountPSBTUnsignedInputs}!psbt.h@{psbt.h}}
\doxysubsubsection{CountPSBTUnsignedInputs()}
{\footnotesize\ttfamily \label{psbt_8h_aa9d848247f5f2bdd331a619628a9b469} 
size\+\_\+t Count\+PSBTUnsigned\+Inputs (\begin{DoxyParamCaption}\item[{const \textbf{ Partially\+Signed\+Transaction} \&}]{psbt}{}\end{DoxyParamCaption})}

Counts the unsigned inputs of a PSBT. \index{psbt.h@{psbt.h}!DecodeBase64PSBT@{DecodeBase64PSBT}}
\index{DecodeBase64PSBT@{DecodeBase64PSBT}!psbt.h@{psbt.h}}
\doxysubsubsection{DecodeBase64PSBT()}
{\footnotesize\ttfamily \label{psbt_8h_a873926567af0392706f83131f48633dd} 
bool Decode\+Base64\+PSBT (\begin{DoxyParamCaption}\item[{\textbf{ Partially\+Signed\+Transaction} \&}]{decoded\+\_\+psbt}{, }\item[{const std\+::string \&}]{base64\+\_\+psbt}{, }\item[{std\+::string \&}]{error}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [nodiscard]}}



Decode a base64ed PSBT into a \doxyref{Partially\+Signed\+Transaction}{p.}{struct_partially_signed_transaction}. 

\index{psbt.h@{psbt.h}!DecodeRawPSBT@{DecodeRawPSBT}}
\index{DecodeRawPSBT@{DecodeRawPSBT}!psbt.h@{psbt.h}}
\doxysubsubsection{DecodeRawPSBT()}
{\footnotesize\ttfamily \label{psbt_8h_ab77fbf55a246764a405b2e793f26f4ff} 
bool Decode\+Raw\+PSBT (\begin{DoxyParamCaption}\item[{\textbf{ Partially\+Signed\+Transaction} \&}]{decoded\+\_\+psbt}{, }\item[{std\+::span$<$ const std\+::byte $>$}]{raw\+\_\+psbt}{, }\item[{std\+::string \&}]{error}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [nodiscard]}}



Decode a raw (binary blob) PSBT into a \doxyref{Partially\+Signed\+Transaction}{p.}{struct_partially_signed_transaction}. 

\index{psbt.h@{psbt.h}!DeserializeHDKeypath@{DeserializeHDKeypath}}
\index{DeserializeHDKeypath@{DeserializeHDKeypath}!psbt.h@{psbt.h}}
\doxysubsubsection{DeserializeHDKeypath()}
{\footnotesize\ttfamily \label{psbt_8h_ae3d20f798709a67f0c815f6e6e38dec8} 
template$<$typename Stream$>$ \\
void Deserialize\+HDKeypath (\begin{DoxyParamCaption}\item[{Stream \&}]{s}{, }\item[{\textbf{ Key\+Origin\+Info} \&}]{hd\+\_\+keypath}{}\end{DoxyParamCaption})}

\index{psbt.h@{psbt.h}!DeserializeHDKeypaths@{DeserializeHDKeypaths}}
\index{DeserializeHDKeypaths@{DeserializeHDKeypaths}!psbt.h@{psbt.h}}
\doxysubsubsection{DeserializeHDKeypaths()}
{\footnotesize\ttfamily \label{psbt_8h_acd331ecf16a63bfe92939ea7d5465bd0} 
template$<$typename Stream$>$ \\
void Deserialize\+HDKeypaths (\begin{DoxyParamCaption}\item[{Stream \&}]{s}{, }\item[{const std\+::vector$<$ unsigned char $>$ \&}]{key}{, }\item[{std\+::map$<$ \textbf{ CPub\+Key}, \textbf{ Key\+Origin\+Info} $>$ \&}]{hd\+\_\+keypaths}{}\end{DoxyParamCaption})}

\index{psbt.h@{psbt.h}!DeserializeKeyOrigin@{DeserializeKeyOrigin}}
\index{DeserializeKeyOrigin@{DeserializeKeyOrigin}!psbt.h@{psbt.h}}
\doxysubsubsection{DeserializeKeyOrigin()}
{\footnotesize\ttfamily \label{psbt_8h_a6dc61c4fa277aa6b39c7150a3d33ef15} 
template$<$typename Stream$>$ \\
\textbf{ Key\+Origin\+Info} Deserialize\+Key\+Origin (\begin{DoxyParamCaption}\item[{Stream \&}]{s}{, }\item[{uint64\+\_\+t}]{length}{}\end{DoxyParamCaption})}

\index{psbt.h@{psbt.h}!DeserializeMuSig2ParticipantDataIdentifier@{DeserializeMuSig2ParticipantDataIdentifier}}
\index{DeserializeMuSig2ParticipantDataIdentifier@{DeserializeMuSig2ParticipantDataIdentifier}!psbt.h@{psbt.h}}
\doxysubsubsection{DeserializeMuSig2ParticipantDataIdentifier()}
{\footnotesize\ttfamily \label{psbt_8h_a75c718b88955d267cb2606e364254d36} 
template$<$typename Stream$>$ \\
void Deserialize\+Mu\+Sig2\+Participant\+Data\+Identifier (\begin{DoxyParamCaption}\item[{Stream \&}]{skey}{, }\item[{\textbf{ CPub\+Key} \&}]{agg\+\_\+pub}{, }\item[{\textbf{ CPub\+Key} \&}]{part\+\_\+pub}{, }\item[{\textbf{ uint256} \&}]{leaf\+\_\+hash}{}\end{DoxyParamCaption})}

\index{psbt.h@{psbt.h}!DeserializeMuSig2ParticipantPubkeys@{DeserializeMuSig2ParticipantPubkeys}}
\index{DeserializeMuSig2ParticipantPubkeys@{DeserializeMuSig2ParticipantPubkeys}!psbt.h@{psbt.h}}
\doxysubsubsection{DeserializeMuSig2ParticipantPubkeys()}
{\footnotesize\ttfamily \label{psbt_8h_a541d22be15fb000b00c7b8f1ed3a1948} 
template$<$typename Stream$>$ \\
void Deserialize\+Mu\+Sig2\+Participant\+Pubkeys (\begin{DoxyParamCaption}\item[{Stream \&}]{s}{, }\item[{\textbf{ Span\+Reader} \&}]{skey}{, }\item[{std\+::map$<$ \textbf{ CPub\+Key}, std\+::vector$<$ \textbf{ CPub\+Key} $>$ $>$ \&}]{out}{, }\item[{std\+::string}]{context}{}\end{DoxyParamCaption})}

\index{psbt.h@{psbt.h}!FinalizeAndExtractPSBT@{FinalizeAndExtractPSBT}}
\index{FinalizeAndExtractPSBT@{FinalizeAndExtractPSBT}!psbt.h@{psbt.h}}
\doxysubsubsection{FinalizeAndExtractPSBT()}
{\footnotesize\ttfamily \label{psbt_8h_aab3ec9bcf6f951016a077dcfcbb3da0a} 
bool Finalize\+And\+Extract\+PSBT (\begin{DoxyParamCaption}\item[{\textbf{ Partially\+Signed\+Transaction} \&}]{psbtx}{, }\item[{\textbf{ CMutable\+Transaction} \&}]{result}{}\end{DoxyParamCaption})}

Finalizes a PSBT if possible, and extracts it to a \doxyref{CMutable\+Transaction}{p.}{struct_c_mutable_transaction} if it could be finalized.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em psbtx} & \doxyref{Partially\+Signed\+Transaction}{p.}{struct_partially_signed_transaction} \\
\hline
\mbox{\texttt{out}}  & {\em result} & \doxyref{CMutable\+Transaction}{p.}{struct_c_mutable_transaction} representing the complete transaction, if successful \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if we successfully extracted the transaction, false otherwise 
\end{DoxyReturn}
\index{psbt.h@{psbt.h}!FinalizePSBT@{FinalizePSBT}}
\index{FinalizePSBT@{FinalizePSBT}!psbt.h@{psbt.h}}
\doxysubsubsection{FinalizePSBT()}
{\footnotesize\ttfamily \label{psbt_8h_ae928e40974eb627033adb546395ae535} 
bool Finalize\+PSBT (\begin{DoxyParamCaption}\item[{\textbf{ Partially\+Signed\+Transaction} \&}]{psbtx}{}\end{DoxyParamCaption})}

Finalizes a PSBT if possible, combining partial signatures.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in,out}}  & {\em psbtx} & \doxyref{Partially\+Signed\+Transaction}{p.}{struct_partially_signed_transaction} to finalize return True if the PSBT is now complete, false otherwise \\
\hline
\end{DoxyParams}
\index{psbt.h@{psbt.h}!PrecomputePSBTData@{PrecomputePSBTData}}
\index{PrecomputePSBTData@{PrecomputePSBTData}!psbt.h@{psbt.h}}
\doxysubsubsection{PrecomputePSBTData()}
{\footnotesize\ttfamily \label{psbt_8h_ae3b8a65af026fb8dbba801281a09d6ab} 
\textbf{ Precomputed\+Transaction\+Data} Precompute\+PSBTData (\begin{DoxyParamCaption}\item[{const \textbf{ Partially\+Signed\+Transaction} \&}]{psbt}{}\end{DoxyParamCaption})}

Compute a \doxyref{Precomputed\+Transaction\+Data}{p.}{struct_precomputed_transaction_data} object from a psbt. \index{psbt.h@{psbt.h}!PSBTInputSigned@{PSBTInputSigned}}
\index{PSBTInputSigned@{PSBTInputSigned}!psbt.h@{psbt.h}}
\doxysubsubsection{PSBTInputSigned()}
{\footnotesize\ttfamily \label{psbt_8h_adb45b4ff9d80ea5612fdfa22afb76fda} 
bool PSBTInput\+Signed (\begin{DoxyParamCaption}\item[{const \textbf{ PSBTInput} \&}]{input}{}\end{DoxyParamCaption})}

Checks whether a \doxyref{PSBTInput}{p.}{struct_p_s_b_t_input} is already signed by checking for non-\/null finalized fields. \index{psbt.h@{psbt.h}!PSBTInputSignedAndVerified@{PSBTInputSignedAndVerified}}
\index{PSBTInputSignedAndVerified@{PSBTInputSignedAndVerified}!psbt.h@{psbt.h}}
\doxysubsubsection{PSBTInputSignedAndVerified()}
{\footnotesize\ttfamily \label{psbt_8h_a256d9d3afe0d516d5a1064db63527f1f} 
bool PSBTInput\+Signed\+And\+Verified (\begin{DoxyParamCaption}\item[{const \textbf{ Partially\+Signed\+Transaction}}]{psbt}{, }\item[{unsigned int}]{input\+\_\+index}{, }\item[{const \textbf{ Precomputed\+Transaction\+Data} $\ast$}]{txdata}{}\end{DoxyParamCaption})}

Checks whether a \doxyref{PSBTInput}{p.}{struct_p_s_b_t_input} is already signed by doing script verification using final fields. \index{psbt.h@{psbt.h}!PSBTRoleName@{PSBTRoleName}}
\index{PSBTRoleName@{PSBTRoleName}!psbt.h@{psbt.h}}
\doxysubsubsection{PSBTRoleName()}
{\footnotesize\ttfamily \label{psbt_8h_a3a970aef1eb908d625f38a7f26d3096a} 
std\+::string PSBTRole\+Name (\begin{DoxyParamCaption}\item[{\textbf{ PSBTRole}}]{role}{}\end{DoxyParamCaption})}

\index{psbt.h@{psbt.h}!RemoveUnnecessaryTransactions@{RemoveUnnecessaryTransactions}}
\index{RemoveUnnecessaryTransactions@{RemoveUnnecessaryTransactions}!psbt.h@{psbt.h}}
\doxysubsubsection{RemoveUnnecessaryTransactions()}
{\footnotesize\ttfamily \label{psbt_8h_a661cf94272ebbe91e43510e9f254a1a2} 
void Remove\+Unnecessary\+Transactions (\begin{DoxyParamCaption}\item[{\textbf{ Partially\+Signed\+Transaction} \&}]{psbtx}{}\end{DoxyParamCaption})}

Reduces the size of the PSBT by dropping unnecessary {\ttfamily non\+\_\+witness\+\_\+utxos} (i.\+e. complete previous transactions) from a psbt when all inputs are segwit v1. \index{psbt.h@{psbt.h}!SerializeHDKeypath@{SerializeHDKeypath}}
\index{SerializeHDKeypath@{SerializeHDKeypath}!psbt.h@{psbt.h}}
\doxysubsubsection{SerializeHDKeypath()}
{\footnotesize\ttfamily \label{psbt_8h_ade04b7388ab94255c2dd01ba547fc781} 
template$<$typename Stream$>$ \\
void Serialize\+HDKeypath (\begin{DoxyParamCaption}\item[{Stream \&}]{s}{, }\item[{\textbf{ Key\+Origin\+Info}}]{hd\+\_\+keypath}{}\end{DoxyParamCaption})}

\index{psbt.h@{psbt.h}!SerializeHDKeypaths@{SerializeHDKeypaths}}
\index{SerializeHDKeypaths@{SerializeHDKeypaths}!psbt.h@{psbt.h}}
\doxysubsubsection{SerializeHDKeypaths()}
{\footnotesize\ttfamily \label{psbt_8h_a7e2600446714069306fe23c61f4a8bd0} 
template$<$typename Stream$>$ \\
void Serialize\+HDKeypaths (\begin{DoxyParamCaption}\item[{Stream \&}]{s}{, }\item[{const std\+::map$<$ \textbf{ CPub\+Key}, \textbf{ Key\+Origin\+Info} $>$ \&}]{hd\+\_\+keypaths}{, }\item[{\textbf{ Compact\+Size\+Writer}}]{type}{}\end{DoxyParamCaption})}

\index{psbt.h@{psbt.h}!SerializeKeyOrigin@{SerializeKeyOrigin}}
\index{SerializeKeyOrigin@{SerializeKeyOrigin}!psbt.h@{psbt.h}}
\doxysubsubsection{SerializeKeyOrigin()}
{\footnotesize\ttfamily \label{psbt_8h_ac6bbc1fc3389393256c5a7a2747ffbcb} 
template$<$typename Stream$>$ \\
void Serialize\+Key\+Origin (\begin{DoxyParamCaption}\item[{Stream \&}]{s}{, }\item[{\textbf{ Key\+Origin\+Info}}]{hd\+\_\+keypath}{}\end{DoxyParamCaption})}

\index{psbt.h@{psbt.h}!SerializeToVector@{SerializeToVector}}
\index{SerializeToVector@{SerializeToVector}!psbt.h@{psbt.h}}
\doxysubsubsection{SerializeToVector()}
{\footnotesize\ttfamily \label{psbt_8h_a0ca0e322433b3a17166f3ff112196169} 
template$<$typename Stream, typename... X$>$ \\
void Serialize\+To\+Vector (\begin{DoxyParamCaption}\item[{Stream \&}]{s}{, }\item[{const \textbf{ X} \&...}]{args}{}\end{DoxyParamCaption})}

\index{psbt.h@{psbt.h}!SignPSBTInput@{SignPSBTInput}}
\index{SignPSBTInput@{SignPSBTInput}!psbt.h@{psbt.h}}
\doxysubsubsection{SignPSBTInput()}
{\footnotesize\ttfamily \label{psbt_8h_a6f49d0ec4a7564f00ac2634116fb8c9c} 
\textbf{ PSBTError} Sign\+PSBTInput (\begin{DoxyParamCaption}\item[{const \textbf{ Signing\+Provider} \&}]{provider}{, }\item[{\textbf{ Partially\+Signed\+Transaction} \&}]{psbt}{, }\item[{int}]{index}{, }\item[{const \textbf{ Precomputed\+Transaction\+Data} $\ast$}]{txdata}{, }\item[{std\+::optional$<$ int $>$}]{sighash}{ = {\ttfamily std\+:\+:nullopt}, }\item[{\textbf{ Signature\+Data} $\ast$}]{out\+\_\+sigdata}{ = {\ttfamily nullptr}, }\item[{bool}]{finalize}{ = {\ttfamily true}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [nodiscard]}}

Signs a \doxyref{PSBTInput}{p.}{struct_p_s_b_t_input}, verifying that all provided data matches what is being signed.

txdata should be the output of Precompute\+PSBTData (which can be shared across multiple Sign\+PSBTInput calls). If it is nullptr, a dummy signature will be created. \index{psbt.h@{psbt.h}!UnserializeFromVector@{UnserializeFromVector}}
\index{UnserializeFromVector@{UnserializeFromVector}!psbt.h@{psbt.h}}
\doxysubsubsection{UnserializeFromVector()}
{\footnotesize\ttfamily \label{psbt_8h_a29a7dc35dead92deafdc0e2cf6bb3bf3} 
template$<$typename Stream, typename... X$>$ \\
void Unserialize\+From\+Vector (\begin{DoxyParamCaption}\item[{Stream \&}]{s}{, }\item[{\textbf{ X} \&\&...}]{args}{}\end{DoxyParamCaption})}

\index{psbt.h@{psbt.h}!UpdatePSBTOutput@{UpdatePSBTOutput}}
\index{UpdatePSBTOutput@{UpdatePSBTOutput}!psbt.h@{psbt.h}}
\doxysubsubsection{UpdatePSBTOutput()}
{\footnotesize\ttfamily \label{psbt_8h_a1fbcc5412f6bced6bdbc803fa9b92bc6} 
void Update\+PSBTOutput (\begin{DoxyParamCaption}\item[{const \textbf{ Signing\+Provider} \&}]{provider}{, }\item[{\textbf{ Partially\+Signed\+Transaction} \&}]{psbt}{, }\item[{int}]{index}{}\end{DoxyParamCaption})}

Updates a \doxyref{PSBTOutput}{p.}{struct_p_s_b_t_output} with information from provider.

This fills in the redeem\+\_\+script, witness\+\_\+script, and hd\+\_\+keypaths where possible. 

\label{doc-var-members}
\doxysubsection{Variable Documentation}
\index{psbt.h@{psbt.h}!MAX\_FILE\_SIZE\_PSBT@{MAX\_FILE\_SIZE\_PSBT}}
\index{MAX\_FILE\_SIZE\_PSBT@{MAX\_FILE\_SIZE\_PSBT}!psbt.h@{psbt.h}}
\doxysubsubsection{MAX\_FILE\_SIZE\_PSBT}
{\footnotesize\ttfamily \label{psbt_8h_af7a1f77aecbf161eaff788d458b3e803} 
const std\+::streamsize MAX\+\_\+\+FILE\+\_\+\+SIZE\+\_\+\+PSBT = 100000000}

