\doxysection{Wallet\+Database Class Reference}
\label{classwallet_1_1_wallet_database}\index{WalletDatabase@{WalletDatabase}}


{\ttfamily \#include $<$db.\+h$>$}

Inheritance diagram for Wallet\+Database\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classwallet_1_1_wallet_database}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ Wallet\+Database} ()=default
\item 
virtual \textbf{ $\sim$\+Wallet\+Database} ()=default
\item 
virtual void \textbf{ Open} ()=0
\item 
virtual bool \textbf{ Rewrite} ()=0
\item 
virtual bool \textbf{ Backup} (const std\+::string \&str\+Dest) const =0
\item 
virtual void \textbf{ Close} ()=0
\item 
virtual std\+::string \textbf{ Filename} ()=0
\item 
virtual std\+::vector$<$ \textbf{ fs\+::path} $>$ \textbf{ Files} ()=0
\item 
virtual std\+::string \textbf{ Format} ()=0
\item 
virtual std\+::unique\+\_\+ptr$<$ \textbf{ Database\+Batch} $>$ \textbf{ Make\+Batch} ()=0
\end{DoxyCompactItemize}
\doxysubsubsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
std\+::atomic$<$ int $>$ \textbf{ m\+\_\+refcount} \{0\}
\begin{DoxyCompactList}\small\item\em Counts the number of active database users to be sure that the database is not closed while someone is using it. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
An instance of this class represents one database. 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{WalletDatabase@{WalletDatabase}!WalletDatabase@{WalletDatabase}}
\index{WalletDatabase@{WalletDatabase}!WalletDatabase@{WalletDatabase}}
\doxysubsubsection{WalletDatabase()}
{\footnotesize\ttfamily \label{classwallet_1_1_wallet_database_a87c967abd437522d947f3e0f56d76d67} 
Wallet\+Database (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

Create dummy \doxyref{DB}{p.}{class_d_b} handle \index{WalletDatabase@{WalletDatabase}!````~WalletDatabase@{$\sim$WalletDatabase}}
\index{````~WalletDatabase@{$\sim$WalletDatabase}!WalletDatabase@{WalletDatabase}}
\doxysubsubsection{$\sim$WalletDatabase()}
{\footnotesize\ttfamily \label{classwallet_1_1_wallet_database_a4c6df2ee4ae5831fb48076424b1faa6f} 
virtual $\sim$\textbf{ Wallet\+Database} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [default]}}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{WalletDatabase@{WalletDatabase}!Backup@{Backup}}
\index{Backup@{Backup}!WalletDatabase@{WalletDatabase}}
\doxysubsubsection{Backup()}
{\footnotesize\ttfamily \label{classwallet_1_1_wallet_database_a128c0cdd162a59b9e673b7b3ef25e5eb} 
virtual bool Backup (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{str\+Dest}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [pure virtual]}}

Back up the entire database to a file. 

Implemented in \textbf{ Berkeley\+RODatabase} \doxyref{}{p.}{classwallet_1_1_berkeley_r_o_database_a3d90a7cbddc2947343cfec5e7c7fc8ff}, \textbf{ Mockable\+Database} \doxyref{}{p.}{classwallet_1_1_mockable_database_a3d90a7cbddc2947343cfec5e7c7fc8ff}, and \textbf{ SQLite\+Database} \doxyref{}{p.}{classwallet_1_1_s_q_lite_database_a9007e8d5abbe567c3255a71d3802dc94}.

\index{WalletDatabase@{WalletDatabase}!Close@{Close}}
\index{Close@{Close}!WalletDatabase@{WalletDatabase}}
\doxysubsubsection{Close()}
{\footnotesize\ttfamily \label{classwallet_1_1_wallet_database_aacb6d0e5e6d570cdc2b0da14c3921ff0} 
virtual void Close (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Flush to the database file and close the database. Also close the environment if no other databases are open in it. 

Implemented in \textbf{ Berkeley\+RODatabase} \doxyref{}{p.}{classwallet_1_1_berkeley_r_o_database_a0f9aecd570c4e5e6d41337f0e2f1adf5}, \textbf{ Mockable\+Database} \doxyref{}{p.}{classwallet_1_1_mockable_database_a0f9aecd570c4e5e6d41337f0e2f1adf5}, and \textbf{ SQLite\+Database} \doxyref{}{p.}{classwallet_1_1_s_q_lite_database_a0f9aecd570c4e5e6d41337f0e2f1adf5}.

\index{WalletDatabase@{WalletDatabase}!Filename@{Filename}}
\index{Filename@{Filename}!WalletDatabase@{WalletDatabase}}
\doxysubsubsection{Filename()}
{\footnotesize\ttfamily \label{classwallet_1_1_wallet_database_a25ad5f26118c00b51c1d1cdfe4dde260} 
virtual std\+::string Filename (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Return path to main database file for logs and error messages. 

Implemented in \textbf{ Berkeley\+RODatabase} \doxyref{}{p.}{classwallet_1_1_berkeley_r_o_database_a5763f6a37436a3c2ea3055108142d4fe}, \textbf{ Mockable\+Database} \doxyref{}{p.}{classwallet_1_1_mockable_database_a5763f6a37436a3c2ea3055108142d4fe}, and \textbf{ SQLite\+Database} \doxyref{}{p.}{classwallet_1_1_s_q_lite_database_a5763f6a37436a3c2ea3055108142d4fe}.

\index{WalletDatabase@{WalletDatabase}!Files@{Files}}
\index{Files@{Files}!WalletDatabase@{WalletDatabase}}
\doxysubsubsection{Files()}
{\footnotesize\ttfamily \label{classwallet_1_1_wallet_database_a5ce53d218b3605687ac43ddf1db7b152} 
virtual std\+::vector$<$ \textbf{ fs\+::path} $>$ Files (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Return paths to all database created files 

Implemented in \textbf{ Berkeley\+RODatabase} \doxyref{}{p.}{classwallet_1_1_berkeley_r_o_database_a374248409e6c55c3a928c4c464f25ce2}, \textbf{ Mockable\+Database} \doxyref{}{p.}{classwallet_1_1_mockable_database_a374248409e6c55c3a928c4c464f25ce2}, and \textbf{ SQLite\+Database} \doxyref{}{p.}{classwallet_1_1_s_q_lite_database_a374248409e6c55c3a928c4c464f25ce2}.

\index{WalletDatabase@{WalletDatabase}!Format@{Format}}
\index{Format@{Format}!WalletDatabase@{WalletDatabase}}
\doxysubsubsection{Format()}
{\footnotesize\ttfamily \label{classwallet_1_1_wallet_database_af4e31ecb708419370270e68032cf9c40} 
virtual std\+::string \textbf{ Format} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Implemented in \textbf{ Berkeley\+RODatabase} \doxyref{}{p.}{classwallet_1_1_berkeley_r_o_database_ab484e14597e1c01509c032bf827ed268}, \textbf{ Mockable\+Database} \doxyref{}{p.}{classwallet_1_1_mockable_database_ab484e14597e1c01509c032bf827ed268}, and \textbf{ SQLite\+Database} \doxyref{}{p.}{classwallet_1_1_s_q_lite_database_ab484e14597e1c01509c032bf827ed268}.

\index{WalletDatabase@{WalletDatabase}!MakeBatch@{MakeBatch}}
\index{MakeBatch@{MakeBatch}!WalletDatabase@{WalletDatabase}}
\doxysubsubsection{MakeBatch()}
{\footnotesize\ttfamily \label{classwallet_1_1_wallet_database_a44572b5ff40991b2f6883eec7f1b800b} 
virtual std\+::unique\+\_\+ptr$<$ \textbf{ Database\+Batch} $>$ Make\+Batch (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Make a \doxyref{Database\+Batch}{p.}{classwallet_1_1_database_batch} connected to this database 

Implemented in \textbf{ Berkeley\+RODatabase} \doxyref{}{p.}{classwallet_1_1_berkeley_r_o_database_a5f4d22dcb275c0d9067128fae22d0410}, \textbf{ Mockable\+Database} \doxyref{}{p.}{classwallet_1_1_mockable_database_a5f4d22dcb275c0d9067128fae22d0410}, and \textbf{ SQLite\+Database} \doxyref{}{p.}{classwallet_1_1_s_q_lite_database_a5f4d22dcb275c0d9067128fae22d0410}.

\index{WalletDatabase@{WalletDatabase}!Open@{Open}}
\index{Open@{Open}!WalletDatabase@{WalletDatabase}}
\doxysubsubsection{Open()}
{\footnotesize\ttfamily \label{classwallet_1_1_wallet_database_af3d7c172541d28c555ba083eeaa8fafb} 
virtual void Open (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Open the database if it is not already opened. 

Implemented in \textbf{ Berkeley\+RODatabase} \doxyref{}{p.}{classwallet_1_1_berkeley_r_o_database_acf67a6e477cdfa63a5e865e472441a17}, \textbf{ Mockable\+Database} \doxyref{}{p.}{classwallet_1_1_mockable_database_acf67a6e477cdfa63a5e865e472441a17}, and \textbf{ SQLite\+Database} \doxyref{}{p.}{classwallet_1_1_s_q_lite_database_acf67a6e477cdfa63a5e865e472441a17}.

\index{WalletDatabase@{WalletDatabase}!Rewrite@{Rewrite}}
\index{Rewrite@{Rewrite}!WalletDatabase@{WalletDatabase}}
\doxysubsubsection{Rewrite()}
{\footnotesize\ttfamily \label{classwallet_1_1_wallet_database_a6dc9d008c3beb3b25cdfb0f9d9953cef} 
virtual bool Rewrite (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}

Rewrite the entire database on disk 

Implemented in \textbf{ Berkeley\+RODatabase} \doxyref{}{p.}{classwallet_1_1_berkeley_r_o_database_a2269883cba6033755413f1d878f70e18}, \textbf{ Mockable\+Database} \doxyref{}{p.}{classwallet_1_1_mockable_database_a2269883cba6033755413f1d878f70e18}, and \textbf{ SQLite\+Database} \doxyref{}{p.}{classwallet_1_1_s_q_lite_database_a2269883cba6033755413f1d878f70e18}.



\label{doc-variable-members}
\doxysubsection{Field Documentation}
\index{WalletDatabase@{WalletDatabase}!m\_refcount@{m\_refcount}}
\index{m\_refcount@{m\_refcount}!WalletDatabase@{WalletDatabase}}
\doxysubsubsection{m\_refcount}
{\footnotesize\ttfamily \label{classwallet_1_1_wallet_database_a38e8ed04f2455e154e2a1e2985a8da46} 
std\+::atomic$<$int$>$ m\+\_\+refcount \{0\}}



Counts the number of active database users to be sure that the database is not closed while someone is using it. 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/wallet/\textbf{ db.\+h}\end{DoxyCompactItemize}
