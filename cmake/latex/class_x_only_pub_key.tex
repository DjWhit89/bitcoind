\doxysection{XOnly\+Pub\+Key Class Reference}
\label{class_x_only_pub_key}\index{XOnlyPubKey@{XOnlyPubKey}}


{\ttfamily \#include $<$pubkey.\+h$>$}

Inheritance diagram for XOnly\+Pub\+Key\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_x_only_pub_key}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ XOnly\+Pub\+Key} ()=default
\item 
\textbf{ XOnly\+Pub\+Key} (const \textbf{ XOnly\+Pub\+Key} \&)=default
\item 
\textbf{ XOnly\+Pub\+Key} \& \textbf{ operator=} (const \textbf{ XOnly\+Pub\+Key} \&)=default
\item 
bool \textbf{ Is\+Fully\+Valid} () const
\item 
bool \textbf{ Is\+Null} () const
\item 
constexpr \textbf{ XOnly\+Pub\+Key} (std\+::span$<$ const unsigned char $>$ bytes)
\item 
\textbf{ XOnly\+Pub\+Key} (const \textbf{ CPub\+Key} \&pubkey)
\item 
bool \textbf{ Verify\+Schnorr} (const \textbf{ uint256} \&msg, std\+::span$<$ const unsigned char $>$ sigbytes) const
\item 
\textbf{ uint256} \textbf{ Compute\+Tap\+Tweak\+Hash} (const \textbf{ uint256} $\ast$merkle\+\_\+root) const
\item 
bool \textbf{ Check\+Tap\+Tweak} (const \textbf{ XOnly\+Pub\+Key} \&internal, const \textbf{ uint256} \&merkle\+\_\+root, bool parity) const
\item 
std\+::optional$<$ std\+::pair$<$ \textbf{ XOnly\+Pub\+Key}, bool $>$ $>$ \textbf{ Create\+Tap\+Tweak} (const \textbf{ uint256} $\ast$merkle\+\_\+root) const
\item 
std\+::vector$<$ \textbf{ CKey\+ID} $>$ \textbf{ Get\+Key\+IDs} () const
\item 
std\+::vector$<$ \textbf{ CPub\+Key} $>$ \textbf{ Get\+CPub\+Keys} () const
\item 
\textbf{ CPub\+Key} \textbf{ Get\+Even\+Corresponding\+CPub\+Key} () const
\item 
const unsigned char \& \textbf{ operator[$\,$]} (int pos) const
\item 
const unsigned char $\ast$ \textbf{ data} () const
\item 
const unsigned char $\ast$ \textbf{ begin} () const
\item 
const unsigned char $\ast$ \textbf{ end} () const
\item 
unsigned char $\ast$ \textbf{ data} ()
\item 
unsigned char $\ast$ \textbf{ begin} ()
\item 
unsigned char $\ast$ \textbf{ end} ()
\item 
bool \textbf{ operator==} (const \textbf{ XOnly\+Pub\+Key} \&other) const
\item 
bool \textbf{ operator$<$} (const \textbf{ XOnly\+Pub\+Key} \&other) const
\item 
\textbf{ SERIALIZE\+\_\+\+METHODS} (\textbf{ XOnly\+Pub\+Key}, obj)
\begin{DoxyCompactList}\small\item\em Implement serialization without length prefixes since it is a fixed length. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static constexpr size\+\_\+t \textbf{ size} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static const \textbf{ XOnly\+Pub\+Key} \textbf{ NUMS\+\_\+H}
\end{DoxyCompactItemize}


\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{XOnlyPubKey@{XOnlyPubKey}!XOnlyPubKey@{XOnlyPubKey}}
\index{XOnlyPubKey@{XOnlyPubKey}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{XOnlyPubKey()\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a8d0259611552c71eee58a913c16b8340} 
\textbf{ XOnly\+Pub\+Key} (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

Construct an empty x-\/only pubkey. \index{XOnlyPubKey@{XOnlyPubKey}!XOnlyPubKey@{XOnlyPubKey}}
\index{XOnlyPubKey@{XOnlyPubKey}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{XOnlyPubKey()\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily \label{class_x_only_pub_key_af34a800b6f8e4af00f3c912a8b35ddec} 
\textbf{ XOnly\+Pub\+Key} (\begin{DoxyParamCaption}\item[{const \textbf{ XOnly\+Pub\+Key} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

\index{XOnlyPubKey@{XOnlyPubKey}!XOnlyPubKey@{XOnlyPubKey}}
\index{XOnlyPubKey@{XOnlyPubKey}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{XOnlyPubKey()\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a700cd617ecaa14800794a99a0d8a257b} 
\textbf{ XOnly\+Pub\+Key} (\begin{DoxyParamCaption}\item[{std\+::span$<$ const unsigned char $>$}]{bytes}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}, {\ttfamily [constexpr]}}

Construct an x-\/only pubkey from exactly 32 bytes. \index{XOnlyPubKey@{XOnlyPubKey}!XOnlyPubKey@{XOnlyPubKey}}
\index{XOnlyPubKey@{XOnlyPubKey}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{XOnlyPubKey()\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a4cfec2ce2f0074a6085e4609a202c61f} 
\textbf{ XOnly\+Pub\+Key} (\begin{DoxyParamCaption}\item[{const \textbf{ CPub\+Key} \&}]{pubkey}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}

Construct an x-\/only pubkey from a normal pubkey. 

\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{XOnlyPubKey@{XOnlyPubKey}!begin@{begin}}
\index{begin@{begin}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{begin()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a450af1cef6ba697691fa99aa7a6224cb} 
unsigned char $\ast$ begin (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\index{XOnlyPubKey@{XOnlyPubKey}!begin@{begin}}
\index{begin@{begin}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{begin()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a1b0b9d70f5f2ebe577cb78aa60d88ba5} 
const unsigned char $\ast$ begin (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\index{XOnlyPubKey@{XOnlyPubKey}!CheckTapTweak@{CheckTapTweak}}
\index{CheckTapTweak@{CheckTapTweak}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{CheckTapTweak()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a3d04c7a95ee748b9acc82c24a2111fe4} 
bool Check\+Tap\+Tweak (\begin{DoxyParamCaption}\item[{const \textbf{ XOnly\+Pub\+Key} \&}]{internal}{, }\item[{const \textbf{ uint256} \&}]{merkle\+\_\+root}{, }\item[{bool}]{parity}{}\end{DoxyParamCaption}) const}

Verify that this is a Taproot tweaked output point, against a specified internal key, Merkle root, and parity. \index{XOnlyPubKey@{XOnlyPubKey}!ComputeTapTweakHash@{ComputeTapTweakHash}}
\index{ComputeTapTweakHash@{ComputeTapTweakHash}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{ComputeTapTweakHash()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a05761a29a67a2217e5af0ca0789d119c} 
\textbf{ uint256} Compute\+Tap\+Tweak\+Hash (\begin{DoxyParamCaption}\item[{const \textbf{ uint256} $\ast$}]{merkle\+\_\+root}{}\end{DoxyParamCaption}) const}

Compute the Taproot tweak as specified in BIP341, with $\ast$this as internal key\+:
\begin{DoxyItemize}
\item if merkle\+\_\+root == nullptr\+: H\+\_\+\+Tap\+Tweak(xonly\+\_\+pubkey)
\item otherwise\+: H\+\_\+\+Tap\+Tweak(xonly\+\_\+pubkey $\vert$$\vert$ $\ast$merkle\+\_\+root)
\end{DoxyItemize}

Note that the behavior of this function with merkle\+\_\+root != nullptr is consensus critical. \index{XOnlyPubKey@{XOnlyPubKey}!CreateTapTweak@{CreateTapTweak}}
\index{CreateTapTweak@{CreateTapTweak}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{CreateTapTweak()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a78106f91eb59a5eb7957bb4da69e47d6} 
std\+::optional$<$ std\+::pair$<$ \textbf{ XOnly\+Pub\+Key}, bool $>$ $>$ Create\+Tap\+Tweak (\begin{DoxyParamCaption}\item[{const \textbf{ uint256} $\ast$}]{merkle\+\_\+root}{}\end{DoxyParamCaption}) const}

Construct a Taproot tweaked output point with this point as internal key. \index{XOnlyPubKey@{XOnlyPubKey}!data@{data}}
\index{data@{data}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{data()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a3884d6c46a68636a526bdfd8ab131895} 
unsigned char $\ast$ data (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\index{XOnlyPubKey@{XOnlyPubKey}!data@{data}}
\index{data@{data}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{data()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a370225871d639f2fc9a3744b2a6e6128} 
const unsigned char $\ast$ data (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\index{XOnlyPubKey@{XOnlyPubKey}!end@{end}}
\index{end@{end}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{end()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a6c38da3798c8bea4ed5148829610d001} 
unsigned char $\ast$ end (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\index{XOnlyPubKey@{XOnlyPubKey}!end@{end}}
\index{end@{end}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{end()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{class_x_only_pub_key_ae08c7ee97416c0ea9a52b0d5f5820fe4} 
const unsigned char $\ast$ end (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\index{XOnlyPubKey@{XOnlyPubKey}!GetCPubKeys@{GetCPubKeys}}
\index{GetCPubKeys@{GetCPubKeys}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{GetCPubKeys()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a8260e2827d93253a43ec1835653a5aae} 
std\+::vector$<$ \textbf{ CPub\+Key} $>$ Get\+CPub\+Keys (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Returns this \doxyref{XOnly\+Pub\+Key}{p.}{class_x_only_pub_key} with 0x02 and 0x03 prefixes \index{XOnlyPubKey@{XOnlyPubKey}!GetEvenCorrespondingCPubKey@{GetEvenCorrespondingCPubKey}}
\index{GetEvenCorrespondingCPubKey@{GetEvenCorrespondingCPubKey}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{GetEvenCorrespondingCPubKey()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a68f114490ce36d3add53fafc17c5eb15} 
\textbf{ CPub\+Key} Get\+Even\+Corresponding\+CPub\+Key (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

\index{XOnlyPubKey@{XOnlyPubKey}!GetKeyIDs@{GetKeyIDs}}
\index{GetKeyIDs@{GetKeyIDs}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{GetKeyIDs()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a5a381a87268f4a5500a502f6e59fa48e} 
std\+::vector$<$ \textbf{ CKey\+ID} $>$ Get\+Key\+IDs (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Returns a list of CKey\+IDs for the CPub\+Keys that could have been used to create this \doxyref{XOnly\+Pub\+Key}{p.}{class_x_only_pub_key}. As the \doxyref{CKey\+ID}{p.}{class_c_key_i_d} is the Hash160(full pubkey), the produced CKey\+IDs are for the versions of this \doxyref{XOnly\+Pub\+Key}{p.}{class_x_only_pub_key} with 0x02 and 0x03 prefixes. This is needed for key lookups since keys are indexed by \doxyref{CKey\+ID}{p.}{class_c_key_i_d}. \index{XOnlyPubKey@{XOnlyPubKey}!IsFullyValid@{IsFullyValid}}
\index{IsFullyValid@{IsFullyValid}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{IsFullyValid()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a8a8cb600401c8f6ffa31ebabcdbc5308} 
bool Is\+Fully\+Valid (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Determine if this pubkey is fully valid. This is true for approximately 50\% of all possible 32-\/byte arrays. If false, Verify\+Schnorr, Check\+Tap\+Tweak and Create\+Tap\+Tweak will always fail. \index{XOnlyPubKey@{XOnlyPubKey}!IsNull@{IsNull}}
\index{IsNull@{IsNull}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{IsNull()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_ac4d637a0dec45d546495c1660c9f6047} 
bool Is\+Null (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Test whether this is the 0 key (the result of default construction). This implies !\+Is\+Fully\+Valid(). \index{XOnlyPubKey@{XOnlyPubKey}!operator$<$@{operator$<$}}
\index{operator$<$@{operator$<$}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{operator$<$()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_ad2e6f4b7d54b21ad08e27677c1f2729d} 
bool operator$<$ (\begin{DoxyParamCaption}\item[{const \textbf{ XOnly\+Pub\+Key} \&}]{other}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\index{XOnlyPubKey@{XOnlyPubKey}!operator=@{operator=}}
\index{operator=@{operator=}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{operator=()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a1eec45cbd2d5c7ca29dbfc723d095c87} 
\textbf{ XOnly\+Pub\+Key} \& operator= (\begin{DoxyParamCaption}\item[{const \textbf{ XOnly\+Pub\+Key} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

\index{XOnlyPubKey@{XOnlyPubKey}!operator==@{operator==}}
\index{operator==@{operator==}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{operator==()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a4ffd66586abf8e060026a57eeb36bdf9} 
bool operator== (\begin{DoxyParamCaption}\item[{const \textbf{ XOnly\+Pub\+Key} \&}]{other}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\index{XOnlyPubKey@{XOnlyPubKey}!operator[]@{operator[]}}
\index{operator[]@{operator[]}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{operator[]()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_af608602f99e80dbe87c6ec962fd7685c} 
const unsigned char \& operator[$\,$] (\begin{DoxyParamCaption}\item[{int}]{pos}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\index{XOnlyPubKey@{XOnlyPubKey}!SERIALIZE\_METHODS@{SERIALIZE\_METHODS}}
\index{SERIALIZE\_METHODS@{SERIALIZE\_METHODS}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{SERIALIZE\_METHODS()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a9838121a32c67d23ca61a0e0bed71c80} 
SERIALIZE\+\_\+\+METHODS (\begin{DoxyParamCaption}\item[{\textbf{ XOnly\+Pub\+Key}}]{}{, }\item[{obj}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Implement serialization without length prefixes since it is a fixed length. 

\index{XOnlyPubKey@{XOnlyPubKey}!size@{size}}
\index{size@{size}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{size()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a1b5d7e2e663d7997796fd9f72b8af75a} 
constexpr size\+\_\+t size (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [constexpr]}}

\index{XOnlyPubKey@{XOnlyPubKey}!VerifySchnorr@{VerifySchnorr}}
\index{VerifySchnorr@{VerifySchnorr}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{VerifySchnorr()}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a6ef1a3b718d8bdf33745ce693f435932} 
bool Verify\+Schnorr (\begin{DoxyParamCaption}\item[{const \textbf{ uint256} \&}]{msg}{, }\item[{std\+::span$<$ const unsigned char $>$}]{sigbytes}{}\end{DoxyParamCaption}) const}

Verify a Schnorr signature against this public key.

sigbytes must be exactly 64 bytes. 

\label{doc-variable-members}
\doxysubsection{Field Documentation}
\index{XOnlyPubKey@{XOnlyPubKey}!NUMS\_H@{NUMS\_H}}
\index{NUMS\_H@{NUMS\_H}!XOnlyPubKey@{XOnlyPubKey}}
\doxysubsubsection{NUMS\_H}
{\footnotesize\ttfamily \label{class_x_only_pub_key_a099d3baf6f197c59f70fbd277b9b4d66} 
\textbf{ XOnly\+Pub\+Key} NUMS\+\_\+H\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ []()\ \textcolor{keyword}{consteval}\ \{\ \textcolor{keywordflow}{return}\ XOnlyPubKey\{\textcolor{stringliteral}{"{}50929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac0"{}}\_hex\_u8\};\ \}(),}
\DoxyCodeLine{\}}

\end{DoxyCode}
Nothing Up My Sleeve point H Used as an internal key for provably disabling the key path spend see BIP341 for more details

Nothing Up My Sleeve (NUMS) point

NUMS\+\_\+H is a point with an unknown discrete logarithm, constructed by taking the \doxyref{sha256}{p.}{namespacesha256} of \textquotesingle{}g\textquotesingle{} (uncompressed encoding), which happens to be a point on the curve.

For an example script for calculating H, refer to the unit tests in ./test/functional/test\+\_\+framework/crypto/secp256k1.py 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/\textbf{ pubkey.\+h}\item 
src/\textbf{ pubkey.\+cpp}\end{DoxyCompactItemize}
