\doxysection{External\+Signer\+Script\+Pub\+Key\+Man Class Reference}
\label{classwallet_1_1_external_signer_script_pub_key_man}\index{ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}}


{\ttfamily \#include $<$external\+\_\+signer\+\_\+scriptpubkeyman.\+h$>$}

Inheritance diagram for External\+Signer\+Script\+Pub\+Key\+Man\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classwallet_1_1_external_signer_script_pub_key_man}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ External\+Signer\+Script\+Pub\+Key\+Man} (\textbf{ Wallet\+Storage} \&storage, \textbf{ Wallet\+Descriptor} \&descriptor, int64\+\_\+t keypool\+\_\+size)
\item 
\textbf{ External\+Signer\+Script\+Pub\+Key\+Man} (\textbf{ Wallet\+Storage} \&storage, int64\+\_\+t keypool\+\_\+size)
\item 
bool \textbf{ Setup\+Descriptor} (\textbf{ Wallet\+Batch} \&batch, std\+::unique\+\_\+ptr$<$ \textbf{ Descriptor} $>$desc)
\item 
\textbf{ util\+::\+Result}$<$ void $>$ \textbf{ Display\+Address} (const \textbf{ CTx\+Destination} \&dest, const \textbf{ External\+Signer} \&\textbf{ signer}) const
\item 
std\+::optional$<$ \textbf{ common\+::\+PSBTError} $>$ \textbf{ Fill\+PSBT} (\textbf{ Partially\+Signed\+Transaction} \&psbt, const \textbf{ Precomputed\+Transaction\+Data} \&txdata, std\+::optional$<$ int $>$ sighash\+\_\+type=std\+::nullopt, bool sign=true, bool bip32derivs=false, int $\ast$n\+\_\+signed=nullptr, bool finalize=true) const override
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ Descriptor\+Script\+Pub\+Key\+Man}}
\begin{DoxyCompactItemize}
\item 
\textbf{ Descriptor\+Script\+Pub\+Key\+Man} (\textbf{ Wallet\+Storage} \&storage, \textbf{ Wallet\+Descriptor} \&descriptor, int64\+\_\+t keypool\+\_\+size)
\item 
\textbf{ Descriptor\+Script\+Pub\+Key\+Man} (\textbf{ Wallet\+Storage} \&storage, int64\+\_\+t keypool\+\_\+size)
\item 
\textbf{ util\+::\+Result}$<$ \textbf{ CTx\+Destination} $>$ \textbf{ Get\+New\+Destination} (const \textbf{ Output\+Type} type) override
\item 
bool \textbf{ Is\+Mine} (const \textbf{ CScript} \&\textbf{ script}) const override
\item 
bool \textbf{ Check\+Decryption\+Key} (const \textbf{ CKeying\+Material} \&master\+\_\+key) override
\begin{DoxyCompactList}\small\item\em Check that the given decryption key is valid for this \doxyref{Script\+Pub\+Key\+Man}{p.}{classwallet_1_1_script_pub_key_man}, i.\+e. it decrypts all of the keys handled by it. \end{DoxyCompactList}\item 
bool \textbf{ Encrypt} (const \textbf{ CKeying\+Material} \&master\+\_\+key, \textbf{ Wallet\+Batch} $\ast$batch) override
\item 
\textbf{ util\+::\+Result}$<$ \textbf{ CTx\+Destination} $>$ \textbf{ Get\+Reserved\+Destination} (const \textbf{ Output\+Type} type, bool internal, int64\+\_\+t \&index) override
\item 
void \textbf{ Return\+Destination} (int64\+\_\+t index, bool internal, const \textbf{ CTx\+Destination} \&addr) override
\item 
bool \textbf{ Top\+Up} (unsigned int size=0) override
\item 
std\+::vector$<$ \textbf{ Wallet\+Destination} $>$ \textbf{ Mark\+Unused\+Addresses} (const \textbf{ CScript} \&\textbf{ script}) override
\item 
bool \textbf{ Is\+HDEnabled} () const override
\item 
bool \textbf{ Setup\+Descriptor\+Generation} (\textbf{ Wallet\+Batch} \&batch, const \textbf{ CExt\+Key} \&master\+\_\+key, \textbf{ Output\+Type} addr\+\_\+type, bool internal)
\begin{DoxyCompactList}\small\item\em Setup descriptors based on the given CExtkey. \end{DoxyCompactList}\item 
bool \textbf{ Have\+Private\+Keys} () const override
\item 
bool \textbf{ Has\+Priv\+Key} (const \textbf{ CKey\+ID} \&keyid) const \textbf{ EXCLUSIVE\+\_\+\+LOCKS\+\_\+\+REQUIRED}(\textbf{ cs\+\_\+desc\+\_\+man})
\item 
std\+::optional$<$ \textbf{ CKey} $>$ \textbf{ Get\+Key} (const \textbf{ CKey\+ID} \&keyid) const \textbf{ EXCLUSIVE\+\_\+\+LOCKS\+\_\+\+REQUIRED}(\textbf{ cs\+\_\+desc\+\_\+man})
\begin{DoxyCompactList}\small\item\em Retrieve the particular key if it is available. Returns nullopt if the key is not in the wallet, or if the wallet is locked. \end{DoxyCompactList}\item 
bool \textbf{ Have\+Crypted\+Keys} () const override
\item 
unsigned int \textbf{ Get\+Key\+Pool\+Size} () const override
\item 
int64\+\_\+t \textbf{ Get\+Time\+First\+Key} () const override
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ CKey\+Metadata} $>$ \textbf{ Get\+Metadata} (const \textbf{ CTx\+Destination} \&dest) const override
\item 
bool \textbf{ Can\+Get\+Addresses} (bool internal=false) const override
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ Signing\+Provider} $>$ \textbf{ Get\+Solving\+Provider} (const \textbf{ CScript} \&\textbf{ script}) const override
\item 
bool \textbf{ Can\+Provide} (const \textbf{ CScript} \&\textbf{ script}, \textbf{ Signature\+Data} \&sigdata) override
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ Flat\+Signing\+Provider} $>$ \textbf{ Get\+Signing\+Provider} (const \textbf{ CPub\+Key} \&pubkey) const
\item 
bool \textbf{ Sign\+Transaction} (\textbf{ CMutable\+Transaction} \&tx, const std\+::map$<$ \textbf{ COut\+Point}, \textbf{ Coin} $>$ \&coins, int sighash, std\+::map$<$ int, \textbf{ bilingual\+\_\+str} $>$ \&input\+\_\+errors) const override
\item 
\textbf{ Signing\+Result} \textbf{ Sign\+Message} (const std\+::string \&message, const \textbf{ PKHash} \&pkhash, std\+::string \&str\+\_\+sig) const override
\item 
\textbf{ uint256} \textbf{ Get\+ID} () const override
\item 
void \textbf{ Set\+Cache} (const \textbf{ Descriptor\+Cache} \&cache)
\item 
bool \textbf{ Add\+Key} (const \textbf{ CKey\+ID} \&key\+\_\+id, const \textbf{ CKey} \&key)
\item 
bool \textbf{ Add\+Crypted\+Key} (const \textbf{ CKey\+ID} \&key\+\_\+id, const \textbf{ CPub\+Key} \&pubkey, const std\+::vector$<$ unsigned char $>$ \&crypted\+\_\+key)
\item 
bool \textbf{ Has\+Wallet\+Descriptor} (const \textbf{ Wallet\+Descriptor} \&desc) const
\item 
\textbf{ util\+::\+Result}$<$ void $>$ \textbf{ Update\+Wallet\+Descriptor} (\textbf{ Wallet\+Descriptor} \&descriptor)
\item 
bool \textbf{ Can\+Update\+To\+Wallet\+Descriptor} (const \textbf{ Wallet\+Descriptor} \&descriptor, std\+::string \&error)
\item 
void \textbf{ Add\+Descriptor\+Key} (const \textbf{ CKey} \&key, const \textbf{ CPub\+Key} \&pubkey)
\item 
void \textbf{ Write\+Descriptor} ()
\item 
\textbf{ Wallet\+Descriptor} \textbf{ Get\+Wallet\+Descriptor} () const \textbf{ EXCLUSIVE\+\_\+\+LOCKS\+\_\+\+REQUIRED}(\textbf{ cs\+\_\+desc\+\_\+man})
\item 
std\+::unordered\+\_\+set$<$ \textbf{ CScript}, \textbf{ Salted\+Sip\+Hasher} $>$ \textbf{ Get\+Script\+Pub\+Keys} () const override
\item 
std\+::unordered\+\_\+set$<$ \textbf{ CScript}, \textbf{ Salted\+Sip\+Hasher} $>$ \textbf{ Get\+Script\+Pub\+Keys} (int32\+\_\+t minimum\+\_\+index) const
\item 
int32\+\_\+t \textbf{ Get\+End\+Range} () const
\item 
bool \textbf{ Get\+Descriptor\+String} (std\+::string \&out, const bool priv) const
\item 
void \textbf{ Upgrade\+Descriptor\+Cache} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ Script\+Pub\+Key\+Man}}
\begin{DoxyCompactItemize}
\item 
\textbf{ Script\+Pub\+Key\+Man} (\textbf{ Wallet\+Storage} \&storage)
\item 
virtual \textbf{ $\sim$\+Script\+Pub\+Key\+Man} ()=default
\item 
virtual void \textbf{ Keep\+Destination} (int64\+\_\+t index, const \textbf{ Output\+Type} \&type)
\item 
virtual void \textbf{ Rewrite\+DB} ()
\begin{DoxyCompactList}\small\item\em The action to do when the \doxyref{DB}{p.}{class_d_b} needs rewrite. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename... Params$>$ }\\void \textbf{ Wallet\+Log\+Printf} (\textbf{ util\+::\+Consteval\+Format\+String}$<$ sizeof...(\textbf{ Params})$>$ wallet\+\_\+fmt, const \textbf{ Params} \&... params) const
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \textbf{ util\+::\+Result}$<$ \textbf{ External\+Signer} $>$ \textbf{ Get\+External\+Signer} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Data Fields inherited from \textbf{ Descriptor\+Script\+Pub\+Key\+Man}}
\begin{DoxyCompactItemize}
\item 
\textbf{ Recursive\+Mutex} \textbf{ cs\+\_\+desc\+\_\+man}
\end{DoxyCompactItemize}
\doxysubsection*{Data Fields inherited from \textbf{ Script\+Pub\+Key\+Man}}
\begin{DoxyCompactItemize}
\item 
boost\+::signals2\+::signal$<$ void()$>$ \textbf{ Notify\+Can\+Get\+Addresses\+Changed}
\item 
boost\+::signals2\+::signal$<$ void(const \textbf{ Script\+Pub\+Key\+Man} $\ast$spkm, int64\+\_\+t new\+\_\+birth\+\_\+time)$>$ \textbf{ Notify\+First\+Key\+Time\+Changed}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \textbf{ Descriptor\+Script\+Pub\+Key\+Man}}
\begin{DoxyCompactItemize}
\item 
\textbf{ Wallet\+Descriptor} m\+\_\+wallet\+\_\+descriptor \textbf{ GUARDED\+\_\+\+BY} (\textbf{ cs\+\_\+desc\+\_\+man})
\item 
bool \textbf{ Top\+Up\+With\+DB} (\textbf{ Wallet\+Batch} \&batch, unsigned int size=0)
\begin{DoxyCompactList}\small\item\em Same as \textquotesingle{}Top\+Up\textquotesingle{} but designed for use within a batch transaction context. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \textbf{ Script\+Pub\+Key\+Man}}
\begin{DoxyCompactItemize}
\item 
\textbf{ Wallet\+Storage} \& \textbf{ m\+\_\+storage}
\end{DoxyCompactItemize}


\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}!ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}}
\index{ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}!ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}}
\doxysubsubsection{ExternalSignerScriptPubKeyMan()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classwallet_1_1_external_signer_script_pub_key_man_a14f6d51736a38fdc14cb4a257cbf8bc3} 
External\+Signer\+Script\+Pub\+Key\+Man (\begin{DoxyParamCaption}\item[{\textbf{ Wallet\+Storage} \&}]{storage}{, }\item[{\textbf{ Wallet\+Descriptor} \&}]{descriptor}{, }\item[{int64\+\_\+t}]{keypool\+\_\+size}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\index{ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}!ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}}
\index{ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}!ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}}
\doxysubsubsection{ExternalSignerScriptPubKeyMan()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classwallet_1_1_external_signer_script_pub_key_man_a21bbe63e8e234faa4a1bf3bb83f811b4} 
External\+Signer\+Script\+Pub\+Key\+Man (\begin{DoxyParamCaption}\item[{\textbf{ Wallet\+Storage} \&}]{storage}{, }\item[{int64\+\_\+t}]{keypool\+\_\+size}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}!DisplayAddress@{DisplayAddress}}
\index{DisplayAddress@{DisplayAddress}!ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}}
\doxysubsubsection{DisplayAddress()}
{\footnotesize\ttfamily \label{classwallet_1_1_external_signer_script_pub_key_man_aefd78cce5320314cb50128cf92250094} 
\textbf{ util\+::\+Result}$<$ void $>$ Display\+Address (\begin{DoxyParamCaption}\item[{const \textbf{ CTx\+Destination} \&}]{dest}{, }\item[{const \textbf{ External\+Signer} \&}]{signer}{}\end{DoxyParamCaption}) const}

Display address on the device and verify that the returned value matches. \begin{DoxyReturn}{Returns}
nothing or an error message 
\end{DoxyReturn}
\index{ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}!FillPSBT@{FillPSBT}}
\index{FillPSBT@{FillPSBT}!ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}}
\doxysubsubsection{FillPSBT()}
{\footnotesize\ttfamily \label{classwallet_1_1_external_signer_script_pub_key_man_a9acb2bdcd9c33be21fbde99eb195755e} 
std\+::optional$<$ \textbf{ PSBTError} $>$ Fill\+PSBT (\begin{DoxyParamCaption}\item[{\textbf{ Partially\+Signed\+Transaction} \&}]{psbt}{, }\item[{const \textbf{ Precomputed\+Transaction\+Data} \&}]{txdata}{, }\item[{std\+::optional$<$ int $>$}]{sighash\+\_\+type}{ = {\ttfamily std\+:\+:nullopt}, }\item[{bool}]{sign}{ = {\ttfamily true}, }\item[{bool}]{bip32derivs}{ = {\ttfamily false}, }\item[{int $\ast$}]{n\+\_\+signed}{ = {\ttfamily nullptr}, }\item[{bool}]{finalize}{ = {\ttfamily true}}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Adds script and derivation path information to a PSBT, and optionally signs it. 

Reimplemented from \textbf{ Descriptor\+Script\+Pub\+Key\+Man} \doxyref{}{p.}{classwallet_1_1_descriptor_script_pub_key_man_a9acb2bdcd9c33be21fbde99eb195755e}.

\index{ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}!GetExternalSigner@{GetExternalSigner}}
\index{GetExternalSigner@{GetExternalSigner}!ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}}
\doxysubsubsection{GetExternalSigner()}
{\footnotesize\ttfamily \label{classwallet_1_1_external_signer_script_pub_key_man_a81e64a28b3ce374f49f38ff73f811565} 
\textbf{ util\+::\+Result}$<$ \textbf{ External\+Signer} $>$ Get\+External\+Signer (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\index{ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}!SetupDescriptor@{SetupDescriptor}}
\index{SetupDescriptor@{SetupDescriptor}!ExternalSignerScriptPubKeyMan@{ExternalSignerScriptPubKeyMan}}
\doxysubsubsection{SetupDescriptor()}
{\footnotesize\ttfamily \label{classwallet_1_1_external_signer_script_pub_key_man_af5dc471d3ec45fbbe66f97405b447bdd} 
bool Setup\+Descriptor (\begin{DoxyParamCaption}\item[{\textbf{ Wallet\+Batch} \&}]{batch}{, }\item[{std\+::unique\+\_\+ptr$<$ \textbf{ Descriptor} $>$}]{desc}{}\end{DoxyParamCaption})}

Provide a descriptor at setup time Returns false if already setup or setup fails, true if setup is successful 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/wallet/\textbf{ external\+\_\+signer\+\_\+scriptpubkeyman.\+h}\item 
src/wallet/\textbf{ external\+\_\+signer\+\_\+scriptpubkeyman.\+cpp}\end{DoxyCompactItemize}
