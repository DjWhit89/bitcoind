\doxysection{src/util/time.h File Reference}
\label{util_2time_8h}\index{src/util/time.h@{src/util/time.h}}
{\ttfamily \#include $<$chrono$>$}\newline
{\ttfamily \#include $<$cstdint$>$}\newline
{\ttfamily \#include $<$optional$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$string\+\_\+view$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ Node\+Clock}
\item 
struct \textbf{ Mockable\+Steady\+Clock}
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
using \textbf{ Node\+Seconds} = std\+::chrono\+::time\+\_\+point$<$\textbf{ Node\+Clock}, std\+::chrono\+::seconds$>$
\item 
using \textbf{ Steady\+Clock} = std\+::chrono\+::steady\+\_\+clock
\item 
using \textbf{ Steady\+Seconds} = std\+::chrono\+::time\+\_\+point$<$std\+::chrono\+::steady\+\_\+clock, std\+::chrono\+::seconds$>$
\item 
using \textbf{ Steady\+Milliseconds} = std\+::chrono\+::time\+\_\+point$<$std\+::chrono\+::steady\+\_\+clock, std\+::chrono\+::milliseconds$>$
\item 
using \textbf{ Steady\+Microseconds} = std\+::chrono\+::time\+\_\+point$<$std\+::chrono\+::steady\+\_\+clock, std\+::chrono\+::microseconds$>$
\item 
using \textbf{ System\+Clock} = std\+::chrono\+::system\+\_\+clock
\item 
using \textbf{ Hours\+Double} = std\+::chrono\+::duration$<$double, std\+::chrono\+::hours\+::period$>$
\item 
using \textbf{ Seconds\+Double} = std\+::chrono\+::duration$<$double, std\+::chrono\+::seconds\+::period$>$
\item 
using \textbf{ Milliseconds\+Double} = std\+::chrono\+::duration$<$double, std\+::chrono\+::milliseconds\+::period$>$
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \textbf{ Uninterruptible\+Sleep} (const std\+::chrono\+::microseconds \&n)
\item 
{\footnotesize template$<$typename Dur1, typename Dur2$>$ }\\constexpr auto \textbf{ Ticks} (Dur2 d)
\item 
{\footnotesize template$<$typename Duration, typename Timepoint$>$ }\\constexpr auto \textbf{ Ticks\+Since\+Epoch} (Timepoint t)
\item 
constexpr int64\+\_\+t \textbf{ count\+\_\+seconds} (std\+::chrono\+::seconds t)
\item 
constexpr int64\+\_\+t \textbf{ count\+\_\+milliseconds} (std\+::chrono\+::milliseconds t)
\item 
constexpr int64\+\_\+t \textbf{ count\+\_\+microseconds} (std\+::chrono\+::microseconds t)
\item 
int64\+\_\+t \textbf{ Get\+Time} ()
\item 
void \textbf{ Set\+Mock\+Time} (int64\+\_\+t n\+Mock\+Time\+In)
\item 
void \textbf{ Set\+Mock\+Time} (std\+::chrono\+::seconds mock\+\_\+time\+\_\+in)
\item 
void \textbf{ Set\+Mock\+Time} (std\+::chrono\+::time\+\_\+point$<$ \textbf{ Node\+Clock}, std\+::chrono\+::seconds $>$ mock)
\item 
std\+::chrono\+::seconds \textbf{ Get\+Mock\+Time} ()
\item 
{\footnotesize template$<$typename \textbf{ T}$>$ }\\\textbf{ T} \textbf{ Now} ()
\item 
{\footnotesize template$<$typename \textbf{ T}$>$ }\\\textbf{ T} \textbf{ Get\+Time} ()
\item 
std\+::string \textbf{ Format\+ISO8601\+Date\+Time} (int64\+\_\+t n\+Time)
\item 
std\+::string \textbf{ Format\+ISO8601\+Date} (int64\+\_\+t n\+Time)
\item 
std\+::optional$<$ int64\+\_\+t $>$ \textbf{ Parse\+ISO8601\+Date\+Time} (std\+::string\+\_\+view str)
\item 
struct timeval \textbf{ Millis\+To\+Timeval} (int64\+\_\+t n\+Timeout)
\item 
struct timeval \textbf{ Millis\+To\+Timeval} (std\+::chrono\+::milliseconds ms)
\end{DoxyCompactItemize}


\label{doc-typedef-members}
\doxysubsection{Typedef Documentation}
\index{time.h@{time.h}!HoursDouble@{HoursDouble}}
\index{HoursDouble@{HoursDouble}!time.h@{time.h}}
\doxysubsubsection{HoursDouble}
{\footnotesize\ttfamily \label{util_2time_8h_a1b1a1ceb1a8e74c0f55dbf3669ac2f42} 
using \textbf{ Hours\+Double} = std\+::chrono\+::duration$<$double, std\+::chrono\+::hours\+::period$>$}

\index{time.h@{time.h}!MillisecondsDouble@{MillisecondsDouble}}
\index{MillisecondsDouble@{MillisecondsDouble}!time.h@{time.h}}
\doxysubsubsection{MillisecondsDouble}
{\footnotesize\ttfamily \label{util_2time_8h_a30c9e1a2af0f5daddd2594c7082ffda0} 
using \textbf{ Milliseconds\+Double} = std\+::chrono\+::duration$<$double, std\+::chrono\+::milliseconds\+::period$>$}

\index{time.h@{time.h}!NodeSeconds@{NodeSeconds}}
\index{NodeSeconds@{NodeSeconds}!time.h@{time.h}}
\doxysubsubsection{NodeSeconds}
{\footnotesize\ttfamily \label{util_2time_8h_a8f3f2401a7990dfdbcf694471e95fb1e} 
using \textbf{ Node\+Seconds} = std\+::chrono\+::time\+\_\+point$<$\textbf{ Node\+Clock}, std\+::chrono\+::seconds$>$}

\index{time.h@{time.h}!SecondsDouble@{SecondsDouble}}
\index{SecondsDouble@{SecondsDouble}!time.h@{time.h}}
\doxysubsubsection{SecondsDouble}
{\footnotesize\ttfamily \label{util_2time_8h_a1a6c40019173a4eab044a950d0b8df52} 
using \textbf{ Seconds\+Double} = std\+::chrono\+::duration$<$double, std\+::chrono\+::seconds\+::period$>$}

\index{time.h@{time.h}!SteadyClock@{SteadyClock}}
\index{SteadyClock@{SteadyClock}!time.h@{time.h}}
\doxysubsubsection{SteadyClock}
{\footnotesize\ttfamily \label{util_2time_8h_a2bad2cc0a942ac46811d2fb59b8fa4a5} 
using \textbf{ Steady\+Clock} = std\+::chrono\+::steady\+\_\+clock}

\index{time.h@{time.h}!SteadyMicroseconds@{SteadyMicroseconds}}
\index{SteadyMicroseconds@{SteadyMicroseconds}!time.h@{time.h}}
\doxysubsubsection{SteadyMicroseconds}
{\footnotesize\ttfamily \label{util_2time_8h_a8d8e38b27857e628624cea1108fcf43e} 
using \textbf{ Steady\+Microseconds} = std\+::chrono\+::time\+\_\+point$<$std\+::chrono\+::steady\+\_\+clock, std\+::chrono\+::microseconds$>$}

\index{time.h@{time.h}!SteadyMilliseconds@{SteadyMilliseconds}}
\index{SteadyMilliseconds@{SteadyMilliseconds}!time.h@{time.h}}
\doxysubsubsection{SteadyMilliseconds}
{\footnotesize\ttfamily \label{util_2time_8h_af5502102db9e1908fb6028161f99cd93} 
using \textbf{ Steady\+Milliseconds} = std\+::chrono\+::time\+\_\+point$<$std\+::chrono\+::steady\+\_\+clock, std\+::chrono\+::milliseconds$>$}

\index{time.h@{time.h}!SteadySeconds@{SteadySeconds}}
\index{SteadySeconds@{SteadySeconds}!time.h@{time.h}}
\doxysubsubsection{SteadySeconds}
{\footnotesize\ttfamily \label{util_2time_8h_aaca9f1796c06c37ff5b385af5073ea34} 
using \textbf{ Steady\+Seconds} = std\+::chrono\+::time\+\_\+point$<$std\+::chrono\+::steady\+\_\+clock, std\+::chrono\+::seconds$>$}

\index{time.h@{time.h}!SystemClock@{SystemClock}}
\index{SystemClock@{SystemClock}!time.h@{time.h}}
\doxysubsubsection{SystemClock}
{\footnotesize\ttfamily \label{util_2time_8h_a828193189ede412612f0ee4f7dc3fb5a} 
using \textbf{ System\+Clock} = std\+::chrono\+::system\+\_\+clock}



\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{time.h@{time.h}!count\_microseconds@{count\_microseconds}}
\index{count\_microseconds@{count\_microseconds}!time.h@{time.h}}
\doxysubsubsection{count\_microseconds()}
{\footnotesize\ttfamily \label{util_2time_8h_a856f7917ac1e6451b436ae92fc133cef} 
int64\+\_\+t count\+\_\+microseconds (\begin{DoxyParamCaption}\item[{std\+::chrono\+::microseconds}]{t}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}

\index{time.h@{time.h}!count\_milliseconds@{count\_milliseconds}}
\index{count\_milliseconds@{count\_milliseconds}!time.h@{time.h}}
\doxysubsubsection{count\_milliseconds()}
{\footnotesize\ttfamily \label{util_2time_8h_a02feccaa5f7f0b6fd475711c15c9110a} 
int64\+\_\+t count\+\_\+milliseconds (\begin{DoxyParamCaption}\item[{std\+::chrono\+::milliseconds}]{t}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}

\index{time.h@{time.h}!count\_seconds@{count\_seconds}}
\index{count\_seconds@{count\_seconds}!time.h@{time.h}}
\doxysubsubsection{count\_seconds()}
{\footnotesize\ttfamily \label{util_2time_8h_a888f421c54ec4d38a01dd0f7ddacd6a6} 
int64\+\_\+t count\+\_\+seconds (\begin{DoxyParamCaption}\item[{std\+::chrono\+::seconds}]{t}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}

\index{time.h@{time.h}!FormatISO8601Date@{FormatISO8601Date}}
\index{FormatISO8601Date@{FormatISO8601Date}!time.h@{time.h}}
\doxysubsubsection{FormatISO8601Date()}
{\footnotesize\ttfamily \label{util_2time_8h_a62628b3489284ec2c591d7969919de91} 
std\+::string Format\+ISO8601\+Date (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{n\+Time}{}\end{DoxyParamCaption})}

\index{time.h@{time.h}!FormatISO8601DateTime@{FormatISO8601DateTime}}
\index{FormatISO8601DateTime@{FormatISO8601DateTime}!time.h@{time.h}}
\doxysubsubsection{FormatISO8601DateTime()}
{\footnotesize\ttfamily \label{util_2time_8h_ae5186b218f085a0a48b08bcdb0fffed1} 
std\+::string Format\+ISO8601\+Date\+Time (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{n\+Time}{}\end{DoxyParamCaption})}

ISO 8601 formatting is preferred. Use the Format\+ISO8601\{Date\+Time,Date\} helper functions if possible. \index{time.h@{time.h}!GetMockTime@{GetMockTime}}
\index{GetMockTime@{GetMockTime}!time.h@{time.h}}
\doxysubsubsection{GetMockTime()}
{\footnotesize\ttfamily \label{util_2time_8h_a4034add14f1926f904d6d58b5fe48c7f} 
std\+::chrono\+::seconds Get\+Mock\+Time (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

For testing \index{time.h@{time.h}!GetTime@{GetTime}}
\index{GetTime@{GetTime}!time.h@{time.h}}
\doxysubsubsection{GetTime()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{util_2time_8h_ae3401f4814e02fe53bf8ab1732c3efd2} 
template$<$typename \textbf{ T}$>$ \\
\textbf{ T} Get\+Time (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

DEPRECATED, see Get\+Time \index{time.h@{time.h}!GetTime@{GetTime}}
\index{GetTime@{GetTime}!time.h@{time.h}}
\doxysubsubsection{GetTime()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{util_2time_8h_a46fac5fba8ba905b5f9acb364f5d8c6f} 
int64\+\_\+t Get\+Time (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

DEPRECATED Use either Clock\+Type\+::now() or \doxyref{Now$<$\+Time\+Point\+Type$>$()}{p.}{util_2time_8h_a7a4e7e09a41ff922cf1eb6fdaae4b3ba} if a cast is needed. Clock\+Type is
\begin{DoxyItemize}
\item Steady\+Clock/std\+::chrono\+::steady\+\_\+clock for steady time
\item System\+Clock/std\+::chrono\+::system\+\_\+clock for system time
\item \doxyref{Node\+Clock}{p.}{struct_node_clock} for mockable system time 
\end{DoxyItemize}\index{time.h@{time.h}!MillisToTimeval@{MillisToTimeval}}
\index{MillisToTimeval@{MillisToTimeval}!time.h@{time.h}}
\doxysubsubsection{MillisToTimeval()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{util_2time_8h_a0813a315d41aebd2edea6c4298b90a37} 
struct timeval Millis\+To\+Timeval (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{n\+Timeout}{}\end{DoxyParamCaption})}

Convert milliseconds to a struct timeval for e.\+g. select. \index{time.h@{time.h}!MillisToTimeval@{MillisToTimeval}}
\index{MillisToTimeval@{MillisToTimeval}!time.h@{time.h}}
\doxysubsubsection{MillisToTimeval()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{util_2time_8h_a1027e937d2f5de88a4a10972242629ae} 
struct timeval Millis\+To\+Timeval (\begin{DoxyParamCaption}\item[{std\+::chrono\+::milliseconds}]{ms}{}\end{DoxyParamCaption})}

Convert milliseconds to a struct timeval for e.\+g. select. \index{time.h@{time.h}!Now@{Now}}
\index{Now@{Now}!time.h@{time.h}}
\doxysubsubsection{Now()}
{\footnotesize\ttfamily \label{util_2time_8h_a7a4e7e09a41ff922cf1eb6fdaae4b3ba} 
template$<$typename \textbf{ T}$>$ \\
\textbf{ T} Now (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Return the current time point cast to the given precision. Only use this when an exact precision is needed, otherwise use T\+::clock\+::now() directly. \index{time.h@{time.h}!ParseISO8601DateTime@{ParseISO8601DateTime}}
\index{ParseISO8601DateTime@{ParseISO8601DateTime}!time.h@{time.h}}
\doxysubsubsection{ParseISO8601DateTime()}
{\footnotesize\ttfamily \label{util_2time_8h_aac5c395bc006aa60b1c964adcad94f9a} 
std\+::optional$<$ int64\+\_\+t $>$ Parse\+ISO8601\+Date\+Time (\begin{DoxyParamCaption}\item[{std\+::string\+\_\+view}]{str}{}\end{DoxyParamCaption})}

\index{time.h@{time.h}!SetMockTime@{SetMockTime}}
\index{SetMockTime@{SetMockTime}!time.h@{time.h}}
\doxysubsubsection{SetMockTime()\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily \label{util_2time_8h_a79d4c36b511d6690ab0bbde0e0da9251} 
void Set\+Mock\+Time (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{n\+Mock\+Time\+In}{}\end{DoxyParamCaption})}

DEPRECATED Use Set\+Mock\+Time with chrono type


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em n\+Mock\+Time\+In} & Time in seconds. \\
\hline
\end{DoxyParams}
\index{time.h@{time.h}!SetMockTime@{SetMockTime}}
\index{SetMockTime@{SetMockTime}!time.h@{time.h}}
\doxysubsubsection{SetMockTime()\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily \label{util_2time_8h_ab79952573d52a79bbeaa17d26033261b} 
void Set\+Mock\+Time (\begin{DoxyParamCaption}\item[{std\+::chrono\+::seconds}]{mock\+\_\+time\+\_\+in}{}\end{DoxyParamCaption})}

For testing. Set e.\+g. with the setmocktime rpc, or -\/mocktime argument \index{time.h@{time.h}!SetMockTime@{SetMockTime}}
\index{SetMockTime@{SetMockTime}!time.h@{time.h}}
\doxysubsubsection{SetMockTime()\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily \label{util_2time_8h_a27a256d0e07eefa559640c2709448e19} 
void Set\+Mock\+Time (\begin{DoxyParamCaption}\item[{std\+::chrono\+::time\+\_\+point$<$ \textbf{ Node\+Clock}, std\+::chrono\+::seconds $>$}]{mock}{}\end{DoxyParamCaption})}

\index{time.h@{time.h}!Ticks@{Ticks}}
\index{Ticks@{Ticks}!time.h@{time.h}}
\doxysubsubsection{Ticks()}
{\footnotesize\ttfamily \label{util_2time_8h_ac04088c2a91199afcf20f9536bcbb60e} 
template$<$typename Dur1, typename Dur2$>$ \\
auto Ticks (\begin{DoxyParamCaption}\item[{Dur2}]{d}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}

Helper to count the seconds of a duration/time\+\_\+point.

All durations/time\+\_\+points should be using std\+::chrono and calling this should generally be avoided in code. Though, it is still preferred to an inline t.\+count() to protect against a reliance on the exact type of t.

This helper is used to convert durations/time\+\_\+points before passing them over an interface that doesn\textquotesingle{}t support std\+::chrono (e.\+g. RPC, debug log, or the GUI) \index{time.h@{time.h}!TicksSinceEpoch@{TicksSinceEpoch}}
\index{TicksSinceEpoch@{TicksSinceEpoch}!time.h@{time.h}}
\doxysubsubsection{TicksSinceEpoch()}
{\footnotesize\ttfamily \label{util_2time_8h_a4cece1006bbcfc11487e9e8bcd837d14} 
template$<$typename Duration, typename Timepoint$>$ \\
auto Ticks\+Since\+Epoch (\begin{DoxyParamCaption}\item[{Timepoint}]{t}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}

\index{time.h@{time.h}!UninterruptibleSleep@{UninterruptibleSleep}}
\index{UninterruptibleSleep@{UninterruptibleSleep}!time.h@{time.h}}
\doxysubsubsection{UninterruptibleSleep()}
{\footnotesize\ttfamily \label{util_2time_8h_a31a1bae0d4cc067165c23c609f2c37ee} 
void Uninterruptible\+Sleep (\begin{DoxyParamCaption}\item[{const std\+::chrono\+::microseconds \&}]{n}{}\end{DoxyParamCaption})}

