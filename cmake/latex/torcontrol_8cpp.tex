\doxysection{src/torcontrol.cpp File Reference}
\label{torcontrol_8cpp}\index{src/torcontrol.cpp@{src/torcontrol.cpp}}
{\ttfamily \#include $<$torcontrol.\+h$>$}\newline
{\ttfamily \#include $<$chainparams.\+h$>$}\newline
{\ttfamily \#include $<$chainparamsbase.\+h$>$}\newline
{\ttfamily \#include $<$common/args.\+h$>$}\newline
{\ttfamily \#include $<$compat/compat.\+h$>$}\newline
{\ttfamily \#include $<$crypto/hmac\+\_\+sha256.\+h$>$}\newline
{\ttfamily \#include $<$logging.\+h$>$}\newline
{\ttfamily \#include $<$net.\+h$>$}\newline
{\ttfamily \#include $<$netaddress.\+h$>$}\newline
{\ttfamily \#include $<$netbase.\+h$>$}\newline
{\ttfamily \#include $<$random.\+h$>$}\newline
{\ttfamily \#include $<$tinyformat.\+h$>$}\newline
{\ttfamily \#include $<$util/check.\+h$>$}\newline
{\ttfamily \#include $<$util/fs.\+h$>$}\newline
{\ttfamily \#include $<$util/readwritefile.\+h$>$}\newline
{\ttfamily \#include $<$util/strencodings.\+h$>$}\newline
{\ttfamily \#include $<$util/string.\+h$>$}\newline
{\ttfamily \#include $<$util/thread.\+h$>$}\newline
{\ttfamily \#include $<$util/time.\+h$>$}\newline
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$cassert$>$}\newline
{\ttfamily \#include $<$cstdint$>$}\newline
{\ttfamily \#include $<$cstdlib$>$}\newline
{\ttfamily \#include $<$deque$>$}\newline
{\ttfamily \#include $<$functional$>$}\newline
{\ttfamily \#include $<$map$>$}\newline
{\ttfamily \#include $<$optional$>$}\newline
{\ttfamily \#include $<$set$>$}\newline
{\ttfamily \#include $<$thread$>$}\newline
{\ttfamily \#include $<$utility$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$event2/buffer.\+h$>$}\newline
{\ttfamily \#include $<$event2/bufferevent.\+h$>$}\newline
{\ttfamily \#include $<$event2/event.\+h$>$}\newline
{\ttfamily \#include $<$event2/thread.\+h$>$}\newline
{\ttfamily \#include $<$event2/util.\+h$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
std\+::pair$<$ std\+::string, std\+::string $>$ \textbf{ Split\+Tor\+Reply\+Line} (const std\+::string \&s)
\item 
std\+::map$<$ std\+::string, std\+::string $>$ \textbf{ Parse\+Tor\+Reply\+Mapping} (const std\+::string \&s)
\item 
void \textbf{ Start\+Tor\+Control} (\textbf{ CService} onion\+\_\+service\+\_\+target)
\item 
void \textbf{ Interrupt\+Tor\+Control} ()
\item 
void \textbf{ Stop\+Tor\+Control} ()
\item 
\textbf{ CService} \textbf{ Default\+Onion\+Service\+Target} (uint16\+\_\+t port)
\item 
void \textbf{ Replace\+All} (std\+::string \&in\+\_\+out, const std\+::string \&search, const std\+::string \&substitute)
\item 
std\+::vector$<$ std\+::string $>$ \textbf{ Split\+String} (std\+::string\+\_\+view str, char sep)
\item 
{\footnotesize template$<$typename \textbf{ T}$>$ }\\std\+::string \textbf{ To\+String} (const \textbf{ T} \&t)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const std\+::string \textbf{ DEFAULT\+\_\+\+TOR\+\_\+\+CONTROL} = "{}127.\+0.\+0.\+1\+:"{} + \textbf{ To\+String}(\textbf{ DEFAULT\+\_\+\+TOR\+\_\+\+CONTROL\+\_\+\+PORT})
\end{DoxyCompactItemize}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{torcontrol.cpp@{torcontrol.cpp}!DefaultOnionServiceTarget@{DefaultOnionServiceTarget}}
\index{DefaultOnionServiceTarget@{DefaultOnionServiceTarget}!torcontrol.cpp@{torcontrol.cpp}}
\doxysubsubsection{DefaultOnionServiceTarget()}
{\footnotesize\ttfamily \label{torcontrol_8cpp_ade4058f5c475a26cc598047c9250cb06} 
\textbf{ CService} Default\+Onion\+Service\+Target (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{port}{}\end{DoxyParamCaption})}

\index{torcontrol.cpp@{torcontrol.cpp}!InterruptTorControl@{InterruptTorControl}}
\index{InterruptTorControl@{InterruptTorControl}!torcontrol.cpp@{torcontrol.cpp}}
\doxysubsubsection{InterruptTorControl()}
{\footnotesize\ttfamily \label{torcontrol_8cpp_aa3f2e0ce7300bbbedc6da69566e426e6} 
void Interrupt\+Tor\+Control (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\index{torcontrol.cpp@{torcontrol.cpp}!ParseTorReplyMapping@{ParseTorReplyMapping}}
\index{ParseTorReplyMapping@{ParseTorReplyMapping}!torcontrol.cpp@{torcontrol.cpp}}
\doxysubsubsection{ParseTorReplyMapping()}
{\footnotesize\ttfamily \label{torcontrol_8cpp_ab50a461a384ff81a89788cae9cf1d85d} 
std\+::map$<$ std\+::string, std\+::string $>$ Parse\+Tor\+Reply\+Mapping (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{s}{}\end{DoxyParamCaption})}

Parse reply arguments in the form \textquotesingle{}METHODS=COOKIE,SAFECOOKIE COOKIEFILE="{}.../control\+\_\+auth\+\_\+cookie"{}\textquotesingle{}. Returns a map of keys to values, or an empty map if there was an error. Grammar is implicitly defined in {\texttt{https\+://spec.\+torproject.\+org/control-\/spec}} by the server reply formats for PROTOCOLINFO (S3.\+21), AUTHCHALLENGE (S3.\+24), and ADD\+\_\+\+ONION (S3.\+27). See also sections 2.\+1 and 2.\+3. Unescape value. Per {\texttt{https\+://spec.\+torproject.\+org/control-\/spec}} section 2.\+1.\+1\+:

For future-\/proofing, controller implementers MAY use the following rules to be compatible with buggy Tor implementations and with future ones that implement the spec as intended\+:

Read ~\newline
 \textbackslash{}t \textbackslash{}r and \textbackslash{}0 ... \textbackslash{}377 as C escapes. Treat a backslash followed by any other character as that character.\index{torcontrol.cpp@{torcontrol.cpp}!ReplaceAll@{ReplaceAll}}
\index{ReplaceAll@{ReplaceAll}!torcontrol.cpp@{torcontrol.cpp}}
\doxysubsubsection{ReplaceAll()}
{\footnotesize\ttfamily \label{torcontrol_8cpp_ac3615d6e25683cb921a19c421c2f558b} 
void Replace\+All (\begin{DoxyParamCaption}\item[{std\+::string \&}]{in\+\_\+out}{, }\item[{const std\+::string \&}]{search}{, }\item[{const std\+::string \&}]{substitute}{}\end{DoxyParamCaption})}

\index{torcontrol.cpp@{torcontrol.cpp}!SplitString@{SplitString}}
\index{SplitString@{SplitString}!torcontrol.cpp@{torcontrol.cpp}}
\doxysubsubsection{SplitString()}
{\footnotesize\ttfamily \label{torcontrol_8cpp_aa8c971a6e91a687b968e737c9d22de2c} 
std\+::vector$<$ std\+::string $>$ Split\+String (\begin{DoxyParamCaption}\item[{std\+::string\+\_\+view}]{str}{, }\item[{char}]{sep}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [nodiscard]}}

\index{torcontrol.cpp@{torcontrol.cpp}!SplitTorReplyLine@{SplitTorReplyLine}}
\index{SplitTorReplyLine@{SplitTorReplyLine}!torcontrol.cpp@{torcontrol.cpp}}
\doxysubsubsection{SplitTorReplyLine()}
{\footnotesize\ttfamily \label{torcontrol_8cpp_a57e57d5d8c565f03ca4c1aeea9607101} 
std\+::pair$<$ std\+::string, std\+::string $>$ Split\+Tor\+Reply\+Line (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{s}{}\end{DoxyParamCaption})}

\index{torcontrol.cpp@{torcontrol.cpp}!StartTorControl@{StartTorControl}}
\index{StartTorControl@{StartTorControl}!torcontrol.cpp@{torcontrol.cpp}}
\doxysubsubsection{StartTorControl()}
{\footnotesize\ttfamily \label{torcontrol_8cpp_aea858fac1029984bdd92142eca936f86} 
void Start\+Tor\+Control (\begin{DoxyParamCaption}\item[{\textbf{ CService}}]{onion\+\_\+service\+\_\+target}{}\end{DoxyParamCaption})}

\index{torcontrol.cpp@{torcontrol.cpp}!StopTorControl@{StopTorControl}}
\index{StopTorControl@{StopTorControl}!torcontrol.cpp@{torcontrol.cpp}}
\doxysubsubsection{StopTorControl()}
{\footnotesize\ttfamily \label{torcontrol_8cpp_af056d7647453338e57eca61f23aebb14} 
void Stop\+Tor\+Control (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\index{torcontrol.cpp@{torcontrol.cpp}!ToString@{ToString}}
\index{ToString@{ToString}!torcontrol.cpp@{torcontrol.cpp}}
\doxysubsubsection{ToString()}
{\footnotesize\ttfamily \label{torcontrol_8cpp_aec2c30b1707eac00ff7e4fb5b3f7a92d} 
template$<$typename \textbf{ T}$>$ \\
std\+::string To\+String (\begin{DoxyParamCaption}\item[{const \textbf{ T} \&}]{t}{}\end{DoxyParamCaption})}

Locale-\/independent version of std\+::to\+\_\+string 

\label{doc-var-members}
\doxysubsection{Variable Documentation}
\index{torcontrol.cpp@{torcontrol.cpp}!DEFAULT\_TOR\_CONTROL@{DEFAULT\_TOR\_CONTROL}}
\index{DEFAULT\_TOR\_CONTROL@{DEFAULT\_TOR\_CONTROL}!torcontrol.cpp@{torcontrol.cpp}}
\doxysubsubsection{DEFAULT\_TOR\_CONTROL}
{\footnotesize\ttfamily \label{torcontrol_8cpp_a48ca9f53bd923a35d926ac7d60f3bdd7} 
const std\+::string DEFAULT\+\_\+\+TOR\+\_\+\+CONTROL = "{}127.\+0.\+0.\+1\+:"{} + \textbf{ To\+String}(\textbf{ DEFAULT\+\_\+\+TOR\+\_\+\+CONTROL\+\_\+\+PORT})}

Default control ip and port 