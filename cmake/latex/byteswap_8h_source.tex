\doxysection{byteswap.\+h}
\label{byteswap_8h_source}\index{src/compat/byteswap.h@{src/compat/byteswap.h}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ (c)\ 2014-\/present\ The\ Bitcoin\ Core\ developers}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Distributed\ under\ the\ MIT\ software\ license,\ see\ the\ accompanying}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ file\ COPYING\ or\ http://www.opensource.org/licenses/mit-\/license.php.}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#ifndef\ BITCOIN\_COMPAT\_BYTESWAP\_H}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#define\ BITCOIN\_COMPAT\_BYTESWAP\_H}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#ifdef\ \_MSC\_VER}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <cstdlib>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{comment}{//\ All\ internal\_bswap\_*\ functions\ can\ be\ replaced\ with\ std::byteswap\ once\ we}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ require\ c++23.\ Both\ libstdc++\ and\ libc++\ implement\ std::byteswap\ via\ these}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ builtins.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#ifndef\ DISABLE\_BUILTIN\_BSWAPS}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#\ \ if\ defined\ \_\_has\_builtin}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#\ \ \ \ if\ \_\_has\_builtin(\_\_builtin\_bswap16)}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ bitcoin\_builtin\_bswap16(x)\ \_\_builtin\_bswap16(x)}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#\ \ \ \ endif}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#\ \ \ \ if\ \_\_has\_builtin(\_\_builtin\_bswap32)}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ bitcoin\_builtin\_bswap32(x)\ \_\_builtin\_bswap32(x)}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#\ \ \ \ endif}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#\ \ \ \ if\ \_\_has\_builtin(\_\_builtin\_bswap64)}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ bitcoin\_builtin\_bswap64(x)\ \_\_builtin\_bswap64(x)}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#\ \ \ \ endif}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#\ \ elif\ defined(\_MSC\_VER)}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ bitcoin\_builtin\_bswap16(x)\ \_byteswap\_ushort(x)}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ bitcoin\_builtin\_bswap32(x)\ \_byteswap\_ulong(x)}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#\ \ \ \ \ \ define\ bitcoin\_builtin\_bswap64(x)\ \_byteswap\_uint64(x)}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#\ \ endif}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{comment}{//\ MSVC's\ \_byteswap\_*\ functions\ are\ not\ constexpr}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#ifndef\ \_MSC\_VER}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#define\ BSWAP\_CONSTEXPR\ constexpr}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#define\ BSWAP\_CONSTEXPR}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{keyword}{inline}\ BSWAP\_CONSTEXPR\ uint16\_t\ internal\_bswap\_16(uint16\_t\ x)}
\DoxyCodeLine{00045\ \{}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#ifdef\ bitcoin\_builtin\_bswap16}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordflow}{return}\ bitcoin\_builtin\_bswap16(x);}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{return}\ (x\ >>\ 8)\ |\ (x\ <<\ 8);}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00051\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{inline}\ BSWAP\_CONSTEXPR\ uint32\_t\ internal\_bswap\_32(uint32\_t\ x)}
\DoxyCodeLine{00054\ \{}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#ifdef\ bitcoin\_builtin\_bswap32}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{return}\ bitcoin\_builtin\_bswap32(x);}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{return}\ (((x\ \&\ 0xff000000U)\ >>\ 24)\ |\ ((x\ \&\ 0x00ff0000U)\ >>\ \ 8)\ |}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ ((x\ \&\ 0x0000ff00U)\ <<\ \ 8)\ |\ ((x\ \&\ 0x000000ffU)\ <<\ 24));}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00061\ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{inline}\ BSWAP\_CONSTEXPR\ uint64\_t\ internal\_bswap\_64(uint64\_t\ x)}
\DoxyCodeLine{00064\ \{}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#ifdef\ bitcoin\_builtin\_bswap64}}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{return}\ bitcoin\_builtin\_bswap64(x);}
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00068\ \ \ \ \ \ \textcolor{keywordflow}{return}\ (((x\ \&\ 0xff00000000000000ull)\ >>\ 56)}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ |\ ((x\ \&\ 0x00ff000000000000ull)\ >>\ 40)}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ |\ ((x\ \&\ 0x0000ff0000000000ull)\ >>\ 24)}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ |\ ((x\ \&\ 0x000000ff00000000ull)\ >>\ 8)}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ |\ ((x\ \&\ 0x00000000ff000000ull)\ <<\ 8)}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ |\ ((x\ \&\ 0x0000000000ff0000ull)\ <<\ 24)}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ |\ ((x\ \&\ 0x000000000000ff00ull)\ <<\ 40)}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ |\ ((x\ \&\ 0x00000000000000ffull)\ <<\ 56));}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00077\ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ BITCOIN\_COMPAT\_BYTESWAP\_H}}

\end{DoxyCode}
