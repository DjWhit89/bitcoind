\doxysection{CCoins\+View\+DB Class Reference}
\label{class_c_coins_view_d_b}\index{CCoinsViewDB@{CCoinsViewDB}}


{\ttfamily \#include $<$txdb.\+h$>$}

Inheritance diagram for CCoins\+View\+DB\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_c_coins_view_d_b}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ CCoins\+View\+DB} (\textbf{ DBParams} db\+\_\+params, \textbf{ Coins\+View\+Options} options)
\item 
std\+::optional$<$ \textbf{ Coin} $>$ \textbf{ Get\+Coin} (const \textbf{ COut\+Point} \&outpoint) const override
\begin{DoxyCompactList}\small\item\em Retrieve the \doxyref{Coin}{p.}{class_coin} (unspent transaction output) for a given outpoint. \end{DoxyCompactList}\item 
bool \textbf{ Have\+Coin} (const \textbf{ COut\+Point} \&outpoint) const override
\begin{DoxyCompactList}\small\item\em Just check whether a given outpoint is unspent. \end{DoxyCompactList}\item 
\textbf{ uint256} \textbf{ Get\+Best\+Block} () const override
\begin{DoxyCompactList}\small\item\em Retrieve the block hash whose state this \doxyref{CCoins\+View}{p.}{class_c_coins_view} currently represents. \end{DoxyCompactList}\item 
std\+::vector$<$ \textbf{ uint256} $>$ \textbf{ Get\+Head\+Blocks} () const override
\item 
bool \textbf{ Batch\+Write} (\textbf{ Coins\+View\+Cache\+Cursor} \&cursor, const \textbf{ uint256} \&hash\+Block) override
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ CCoins\+View\+Cursor} $>$ \textbf{ Cursor} () const override
\begin{DoxyCompactList}\small\item\em Get a cursor to iterate over the whole state. \end{DoxyCompactList}\item 
bool \textbf{ Needs\+Upgrade} ()
\begin{DoxyCompactList}\small\item\em Whether an unsupported database format is used. \end{DoxyCompactList}\item 
size\+\_\+t \textbf{ Estimate\+Size} () const override
\begin{DoxyCompactList}\small\item\em Estimate database size (0 if not implemented). \end{DoxyCompactList}\item 
void \textbf{ Resize\+Cache} (size\+\_\+t new\+\_\+cache\+\_\+size) \textbf{ EXCLUSIVE\+\_\+\+LOCKS\+\_\+\+REQUIRED}(\textbf{ cs\+\_\+main})
\begin{DoxyCompactList}\small\item\em Dynamically alter the underlying leveldb cache size. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ CCoins\+View}}
\begin{DoxyCompactItemize}
\item 
virtual \textbf{ $\sim$\+CCoins\+View} ()=default
\begin{DoxyCompactList}\small\item\em As we use CCoins\+Views polymorphically, have a virtual destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\textbf{ DBParams} \textbf{ m\+\_\+db\+\_\+params}
\item 
\textbf{ Coins\+View\+Options} \textbf{ m\+\_\+options}
\item 
std\+::unique\+\_\+ptr$<$ \textbf{ CDBWrapper} $>$ \textbf{ m\+\_\+db}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\doxyref{CCoins\+View}{p.}{class_c_coins_view} backed by the coin database (chainstate/) 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{CCoinsViewDB@{CCoinsViewDB}!CCoinsViewDB@{CCoinsViewDB}}
\index{CCoinsViewDB@{CCoinsViewDB}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{CCoinsViewDB()}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_a84965fbd4e85d1c59d39fbcc087e373e} 
\textbf{ CCoins\+View\+DB} (\begin{DoxyParamCaption}\item[{\textbf{ DBParams}}]{db\+\_\+params}{, }\item[{\textbf{ Coins\+View\+Options}}]{options}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{CCoinsViewDB@{CCoinsViewDB}!BatchWrite@{BatchWrite}}
\index{BatchWrite@{BatchWrite}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{BatchWrite()}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_a56d539fa8b1427ee21191bd0690b96d7} 
bool Batch\+Write (\begin{DoxyParamCaption}\item[{\textbf{ Coins\+View\+Cache\+Cursor} \&}]{cursor}{, }\item[{const \textbf{ uint256} \&}]{hash\+Block}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Do a bulk modification (multiple \doxyref{Coin}{p.}{class_coin} changes + Best\+Block change). The passed cursor is used to iterate through the coins. 

Reimplemented from \textbf{ CCoins\+View} \doxyref{}{p.}{class_c_coins_view_a433922bb29053e30cb00224aa60351e7}.

\index{CCoinsViewDB@{CCoinsViewDB}!Cursor@{Cursor}}
\index{Cursor@{Cursor}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{Cursor()}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_a8c25e928c7d604e75e3bb5913a41613f} 
std\+::unique\+\_\+ptr$<$ \textbf{ CCoins\+View\+Cursor} $>$ Cursor (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Get a cursor to iterate over the whole state. 



Reimplemented from \textbf{ CCoins\+View} \doxyref{}{p.}{class_c_coins_view_a6cec651f9dd2b1af270b18b6b4f006fa}.

\index{CCoinsViewDB@{CCoinsViewDB}!EstimateSize@{EstimateSize}}
\index{EstimateSize@{EstimateSize}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{EstimateSize()}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_acaefa4e24e5ff7816b5bd2c94092e12f} 
size\+\_\+t Estimate\+Size (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Estimate database size (0 if not implemented). 



Reimplemented from \textbf{ CCoins\+View} \doxyref{}{p.}{class_c_coins_view_a9e5bd276af180cd2a8be0f57e846eb47}.

\index{CCoinsViewDB@{CCoinsViewDB}!GetBestBlock@{GetBestBlock}}
\index{GetBestBlock@{GetBestBlock}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{GetBestBlock()}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_a357197e89d0c22e33f9e58b3dac685ff} 
\textbf{ uint256} Get\+Best\+Block (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Retrieve the block hash whose state this \doxyref{CCoins\+View}{p.}{class_c_coins_view} currently represents. 



Reimplemented from \textbf{ CCoins\+View} \doxyref{}{p.}{class_c_coins_view_a32e48fb2d05ede4a1eb6d2709aa0436c}.

\index{CCoinsViewDB@{CCoinsViewDB}!GetCoin@{GetCoin}}
\index{GetCoin@{GetCoin}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{GetCoin()}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_a053700fd896babb8aa62fc7c53dd27f6} 
std\+::optional$<$ \textbf{ Coin} $>$ Get\+Coin (\begin{DoxyParamCaption}\item[{const \textbf{ COut\+Point} \&}]{outpoint}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Retrieve the \doxyref{Coin}{p.}{class_coin} (unspent transaction output) for a given outpoint. 



Reimplemented from \textbf{ CCoins\+View} \doxyref{}{p.}{class_c_coins_view_a61b812f0303e2e66dcbdd78992bf3478}.

\index{CCoinsViewDB@{CCoinsViewDB}!GetHeadBlocks@{GetHeadBlocks}}
\index{GetHeadBlocks@{GetHeadBlocks}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{GetHeadBlocks()}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_a50cca46427f48531df06f904e85cd907} 
std\+::vector$<$ \textbf{ uint256} $>$ Get\+Head\+Blocks (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Retrieve the range of blocks that may have been only partially written. If the database is in a consistent state, the result is the empty vector. Otherwise, a two-\/element vector is returned consisting of the new and the old block hash, in that order. 

Reimplemented from \textbf{ CCoins\+View} \doxyref{}{p.}{class_c_coins_view_a0793beb40f9e77c408cd673ff38cbc8b}.

\index{CCoinsViewDB@{CCoinsViewDB}!HaveCoin@{HaveCoin}}
\index{HaveCoin@{HaveCoin}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{HaveCoin()}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_a57c7063d0b2cb3900509d8a9e91a8459} 
bool Have\+Coin (\begin{DoxyParamCaption}\item[{const \textbf{ COut\+Point} \&}]{outpoint}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Just check whether a given outpoint is unspent. 



Reimplemented from \textbf{ CCoins\+View} \doxyref{}{p.}{class_c_coins_view_a565d28efda751ff411f4953dae8f74f7}.

\index{CCoinsViewDB@{CCoinsViewDB}!NeedsUpgrade@{NeedsUpgrade}}
\index{NeedsUpgrade@{NeedsUpgrade}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{NeedsUpgrade()}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_a179fd0f4bb70a47e745c0f2cf1836d25} 
bool Needs\+Upgrade (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Whether an unsupported database format is used. 

\index{CCoinsViewDB@{CCoinsViewDB}!ResizeCache@{ResizeCache}}
\index{ResizeCache@{ResizeCache}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{ResizeCache()}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_a1e774d1abd7c539947ae3d53bb0b7f74} 
void Resize\+Cache (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{new\+\_\+cache\+\_\+size}{}\end{DoxyParamCaption})}



Dynamically alter the underlying leveldb cache size. 



\label{doc-variable-members}
\doxysubsection{Field Documentation}
\index{CCoinsViewDB@{CCoinsViewDB}!m\_db@{m\_db}}
\index{m\_db@{m\_db}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{m\_db}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_aec0b4c11fa18c1e1e9772136d9017646} 
std\+::unique\+\_\+ptr$<$\textbf{ CDBWrapper}$>$ m\+\_\+db\hspace{0.3cm}{\ttfamily [protected]}}

\index{CCoinsViewDB@{CCoinsViewDB}!m\_db\_params@{m\_db\_params}}
\index{m\_db\_params@{m\_db\_params}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{m\_db\_params}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_ad266bd27decb5bedf2c32881de65be60} 
\textbf{ DBParams} m\+\_\+db\+\_\+params\hspace{0.3cm}{\ttfamily [protected]}}

\index{CCoinsViewDB@{CCoinsViewDB}!m\_options@{m\_options}}
\index{m\_options@{m\_options}!CCoinsViewDB@{CCoinsViewDB}}
\doxysubsubsection{m\_options}
{\footnotesize\ttfamily \label{class_c_coins_view_d_b_a9d557cc8bc7008b0a289b5166ecf63ca} 
\textbf{ Coins\+View\+Options} m\+\_\+options\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/\textbf{ txdb.\+h}\item 
src/\textbf{ txdb.\+cpp}\end{DoxyCompactItemize}
