\doxysection{src/musig.h File Reference}
\label{musig_8h}\index{src/musig.h@{src/musig.h}}
{\ttfamily \#include $<$pubkey.\+h$>$}\newline
{\ttfamily \#include $<$optional$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
class \textbf{ Mu\+Sig2\+Sec\+Nonce}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
std\+::optional$<$ \textbf{ CPub\+Key} $>$ \textbf{ Mu\+Sig2\+Aggregate\+Pubkeys} (const std\+::vector$<$ \textbf{ CPub\+Key} $>$ \&pubkeys, \textbf{ secp256k1\+\_\+musig\+\_\+keyagg\+\_\+cache} \&keyagg\+\_\+cache, const std\+::optional$<$ \textbf{ CPub\+Key} $>$ \&expected\+\_\+aggregate)
\item 
std\+::optional$<$ \textbf{ CPub\+Key} $>$ \textbf{ Mu\+Sig2\+Aggregate\+Pubkeys} (const std\+::vector$<$ \textbf{ CPub\+Key} $>$ \&pubkeys)
\item 
\textbf{ CExt\+Pub\+Key} \textbf{ Create\+Mu\+Sig2\+Synthetic\+Xpub} (const \textbf{ CPub\+Key} \&pubkey)
\begin{DoxyCompactList}\small\item\em Construct the BIP 328 synthetic xpub for a pubkey. \end{DoxyCompactList}\item 
\textbf{ uint256} \textbf{ Mu\+Sig2\+Session\+ID} (const \textbf{ CPub\+Key} \&script\+\_\+pubkey, const \textbf{ CPub\+Key} \&part\+\_\+pubkey, const \textbf{ uint256} \&sighash)
\item 
std\+::optional$<$ std\+::vector$<$ uint8\+\_\+t $>$ $>$ \textbf{ Create\+Mu\+Sig2\+Aggregate\+Sig} (const std\+::vector$<$ \textbf{ CPub\+Key} $>$ \&participants, const \textbf{ CPub\+Key} \&aggregate\+\_\+pubkey, const std\+::vector$<$ std\+::pair$<$ \textbf{ uint256}, bool $>$ $>$ \&tweaks, const \textbf{ uint256} \&sighash, const std\+::map$<$ \textbf{ CPub\+Key}, std\+::vector$<$ uint8\+\_\+t $>$ $>$ \&pubnonces, const std\+::map$<$ \textbf{ CPub\+Key}, \textbf{ uint256} $>$ \&partial\+\_\+sigs)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
constexpr size\+\_\+t \textbf{ MUSIG2\+\_\+\+PUBNONCE\+\_\+\+SIZE} \{66\}
\end{DoxyCompactItemize}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{musig.h@{musig.h}!CreateMuSig2AggregateSig@{CreateMuSig2AggregateSig}}
\index{CreateMuSig2AggregateSig@{CreateMuSig2AggregateSig}!musig.h@{musig.h}}
\doxysubsubsection{CreateMuSig2AggregateSig()}
{\footnotesize\ttfamily \label{musig_8h_a93758ae165a129173f6564de6279dc07} 
std\+::optional$<$ std\+::vector$<$ uint8\+\_\+t $>$ $>$ Create\+Mu\+Sig2\+Aggregate\+Sig (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \textbf{ CPub\+Key} $>$ \&}]{participants}{, }\item[{const \textbf{ CPub\+Key} \&}]{aggregate\+\_\+pubkey}{, }\item[{const std\+::vector$<$ std\+::pair$<$ \textbf{ uint256}, bool $>$ $>$ \&}]{tweaks}{, }\item[{const \textbf{ uint256} \&}]{sighash}{, }\item[{const std\+::map$<$ \textbf{ CPub\+Key}, std\+::vector$<$ uint8\+\_\+t $>$ $>$ \&}]{pubnonces}{, }\item[{const std\+::map$<$ \textbf{ CPub\+Key}, \textbf{ uint256} $>$ \&}]{partial\+\_\+sigs}{}\end{DoxyParamCaption})}

\index{musig.h@{musig.h}!CreateMuSig2SyntheticXpub@{CreateMuSig2SyntheticXpub}}
\index{CreateMuSig2SyntheticXpub@{CreateMuSig2SyntheticXpub}!musig.h@{musig.h}}
\doxysubsubsection{CreateMuSig2SyntheticXpub()}
{\footnotesize\ttfamily \label{musig_8h_a3abea53654d71e451d7c6f92ab3b7e67} 
\textbf{ CExt\+Pub\+Key} Create\+Mu\+Sig2\+Synthetic\+Xpub (\begin{DoxyParamCaption}\item[{const \textbf{ CPub\+Key} \&}]{pubkey}{}\end{DoxyParamCaption})}



Construct the BIP 328 synthetic xpub for a pubkey. 

\index{musig.h@{musig.h}!MuSig2AggregatePubkeys@{MuSig2AggregatePubkeys}}
\index{MuSig2AggregatePubkeys@{MuSig2AggregatePubkeys}!musig.h@{musig.h}}
\doxysubsubsection{MuSig2AggregatePubkeys()\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{musig_8h_a9451892c0b99f2e5c2dd3b3c810d36bb} 
std\+::optional$<$ \textbf{ CPub\+Key} $>$ Mu\+Sig2\+Aggregate\+Pubkeys (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \textbf{ CPub\+Key} $>$ \&}]{pubkeys}{}\end{DoxyParamCaption})}

\index{musig.h@{musig.h}!MuSig2AggregatePubkeys@{MuSig2AggregatePubkeys}}
\index{MuSig2AggregatePubkeys@{MuSig2AggregatePubkeys}!musig.h@{musig.h}}
\doxysubsubsection{MuSig2AggregatePubkeys()\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{musig_8h_abeb828224f84045ca66600c7de7c172f} 
std\+::optional$<$ \textbf{ CPub\+Key} $>$ Mu\+Sig2\+Aggregate\+Pubkeys (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \textbf{ CPub\+Key} $>$ \&}]{pubkeys}{, }\item[{\textbf{ secp256k1\+\_\+musig\+\_\+keyagg\+\_\+cache} \&}]{keyagg\+\_\+cache}{, }\item[{const std\+::optional$<$ \textbf{ CPub\+Key} $>$ \&}]{expected\+\_\+aggregate}{}\end{DoxyParamCaption})}

Compute the full aggregate pubkey from the given participant pubkeys in their current order. Outputs the \doxyref{secp256k1\+\_\+musig\+\_\+keyagg\+\_\+cache}{p.}{structsecp256k1__musig__keyagg__cache} and validates that the computed aggregate pubkey matches an expected aggregate pubkey. This is necessary for most Mu\+Sig2 operations. \index{musig.h@{musig.h}!MuSig2SessionID@{MuSig2SessionID}}
\index{MuSig2SessionID@{MuSig2SessionID}!musig.h@{musig.h}}
\doxysubsubsection{MuSig2SessionID()}
{\footnotesize\ttfamily \label{musig_8h_a64c70b08ecbd7cec9f5765cc4d7f7046} 
\textbf{ uint256} Mu\+Sig2\+Session\+ID (\begin{DoxyParamCaption}\item[{const \textbf{ CPub\+Key} \&}]{script\+\_\+pubkey}{, }\item[{const \textbf{ CPub\+Key} \&}]{part\+\_\+pubkey}{, }\item[{const \textbf{ uint256} \&}]{sighash}{}\end{DoxyParamCaption})}



\label{doc-var-members}
\doxysubsection{Variable Documentation}
\index{musig.h@{musig.h}!MUSIG2\_PUBNONCE\_SIZE@{MUSIG2\_PUBNONCE\_SIZE}}
\index{MUSIG2\_PUBNONCE\_SIZE@{MUSIG2\_PUBNONCE\_SIZE}!musig.h@{musig.h}}
\doxysubsubsection{MUSIG2\_PUBNONCE\_SIZE}
{\footnotesize\ttfamily \label{musig_8h_a4e0153b3f51a3a0cd42dbf0ad0b24b1a} 
size\+\_\+t MUSIG2\+\_\+\+PUBNONCE\+\_\+\+SIZE \{66\}\hspace{0.3cm}{\ttfamily [constexpr]}}

