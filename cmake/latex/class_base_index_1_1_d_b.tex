\doxysection{Base\+Index\+::DB Class Reference}
\label{class_base_index_1_1_d_b}\index{BaseIndex::DB@{BaseIndex::DB}}


{\ttfamily \#include $<$base.\+h$>$}

Inheritance diagram for Base\+Index\+::DB\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_base_index_1_1_d_b}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ DB} (const \textbf{ fs\+::path} \&path, size\+\_\+t n\+\_\+cache\+\_\+size, bool f\+\_\+memory=false, bool f\+\_\+wipe=false, bool f\+\_\+obfuscate=false)
\item 
\textbf{ CBlock\+Locator} \textbf{ Read\+Best\+Block} () const
\item 
void \textbf{ Write\+Best\+Block} (\textbf{ CDBBatch} \&batch, const \textbf{ CBlock\+Locator} \&locator)
\begin{DoxyCompactList}\small\item\em Write block locator of the chain that the index is in sync with. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \textbf{ CDBWrapper}}
\begin{DoxyCompactItemize}
\item 
\textbf{ CDBWrapper} (const \textbf{ DBParams} \&params)
\item 
\textbf{ $\sim$\+CDBWrapper} ()
\item 
\textbf{ CDBWrapper} (const \textbf{ CDBWrapper} \&)=delete
\item 
\textbf{ CDBWrapper} \& \textbf{ operator=} (const \textbf{ CDBWrapper} \&)=delete
\item 
{\footnotesize template$<$typename K, typename V$>$ }\\bool \textbf{ Read} (const K \&key, V \&value) const
\item 
{\footnotesize template$<$typename K, typename V$>$ }\\void \textbf{ Write} (const K \&key, const V \&value, bool f\+Sync=false)
\item 
{\footnotesize template$<$typename K$>$ }\\bool \textbf{ Exists} (const K \&key) const
\item 
{\footnotesize template$<$typename K$>$ }\\void \textbf{ Erase} (const K \&key, bool f\+Sync=false)
\item 
void \textbf{ Write\+Batch} (\textbf{ CDBBatch} \&batch, bool f\+Sync=false)
\item 
size\+\_\+t \textbf{ Dynamic\+Memory\+Usage} () const
\item 
\textbf{ CDBIterator} $\ast$ \textbf{ New\+Iterator} ()
\item 
bool \textbf{ Is\+Empty} ()
\item 
{\footnotesize template$<$typename K$>$ }\\size\+\_\+t \textbf{ Estimate\+Size} (const K \&key\+\_\+begin, const K \&key\+\_\+end) const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The database stores a block locator of the chain the database is synced to so that the index can efficiently determine the point it last stopped at. A locator is used instead of a simple hash of the chain tip because blocks and block index entries may not be flushed to disk until after this database is updated. 

\label{doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\index{BaseIndex::DB@{BaseIndex::DB}!DB@{DB}}
\index{DB@{DB}!BaseIndex::DB@{BaseIndex::DB}}
\doxysubsubsection{DB()}
{\footnotesize\ttfamily \label{class_base_index_1_1_d_b_aa5d5eaaa508eddb6780b7a569b14c5c2} 
\textbf{ DB} (\begin{DoxyParamCaption}\item[{const \textbf{ fs\+::path} \&}]{path}{, }\item[{size\+\_\+t}]{n\+\_\+cache\+\_\+size}{, }\item[{bool}]{f\+\_\+memory}{ = {\ttfamily false}, }\item[{bool}]{f\+\_\+wipe}{ = {\ttfamily false}, }\item[{bool}]{f\+\_\+obfuscate}{ = {\ttfamily false}}\end{DoxyParamCaption})}



\label{doc-func-members}
\doxysubsection{Member Function Documentation}
\index{BaseIndex::DB@{BaseIndex::DB}!ReadBestBlock@{ReadBestBlock}}
\index{ReadBestBlock@{ReadBestBlock}!BaseIndex::DB@{BaseIndex::DB}}
\doxysubsubsection{ReadBestBlock()}
{\footnotesize\ttfamily \label{class_base_index_1_1_d_b_aab358d07741af3d2fd3c8d1a5c874df2} 
\textbf{ CBlock\+Locator} Read\+Best\+Block (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const}

Read block locator of the chain that the index is in sync with. Note, the returned locator will be empty if no record exists. \index{BaseIndex::DB@{BaseIndex::DB}!WriteBestBlock@{WriteBestBlock}}
\index{WriteBestBlock@{WriteBestBlock}!BaseIndex::DB@{BaseIndex::DB}}
\doxysubsubsection{WriteBestBlock()}
{\footnotesize\ttfamily \label{class_base_index_1_1_d_b_a08b038bb83177e37126b79ac8830ff90} 
void Write\+Best\+Block (\begin{DoxyParamCaption}\item[{\textbf{ CDBBatch} \&}]{batch}{, }\item[{const \textbf{ CBlock\+Locator} \&}]{locator}{}\end{DoxyParamCaption})}



Write block locator of the chain that the index is in sync with. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/index/\textbf{ base.\+h}\item 
src/index/\textbf{ base.\+cpp}\end{DoxyCompactItemize}
