\doxysection{src/rpc/rawtransaction\+\_\+util.h File Reference}
\label{rawtransaction__util_8h}\index{src/rpc/rawtransaction\_util.h@{src/rpc/rawtransaction\_util.h}}
{\ttfamily \#include $<$addresstype.\+h$>$}\newline
{\ttfamily \#include $<$consensus/amount.\+h$>$}\newline
{\ttfamily \#include $<$rpc/util.\+h$>$}\newline
{\ttfamily \#include $<$map$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$optional$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \textbf{ Sign\+Transaction} (\textbf{ CMutable\+Transaction} \&mtx, const \textbf{ Signing\+Provider} $\ast$keystore, const std\+::map$<$ \textbf{ COut\+Point}, \textbf{ Coin} $>$ \&coins, const \textbf{ Uni\+Value} \&hash\+Type, \textbf{ Uni\+Value} \&result)
\item 
void \textbf{ Sign\+Transaction\+Result\+To\+JSON} (\textbf{ CMutable\+Transaction} \&mtx, bool complete, const std\+::map$<$ \textbf{ COut\+Point}, \textbf{ Coin} $>$ \&coins, const std\+::map$<$ int, \textbf{ bilingual\+\_\+str} $>$ \&input\+\_\+errors, \textbf{ Uni\+Value} \&result)
\item 
void \textbf{ Parse\+Prevouts} (const \textbf{ Uni\+Value} \&prev\+Txs\+Unival, \textbf{ Flat\+Signing\+Provider} $\ast$keystore, std\+::map$<$ \textbf{ COut\+Point}, \textbf{ Coin} $>$ \&coins)
\item 
void \textbf{ Add\+Inputs} (\textbf{ CMutable\+Transaction} \&raw\+Tx, const \textbf{ Uni\+Value} \&inputs\+\_\+in, bool rbf)
\item 
\textbf{ Uni\+Value} \textbf{ Normalize\+Outputs} (const \textbf{ Uni\+Value} \&outputs\+\_\+in)
\item 
std\+::vector$<$ std\+::pair$<$ \textbf{ CTx\+Destination}, \textbf{ CAmount} $>$ $>$ \textbf{ Parse\+Outputs} (const \textbf{ Uni\+Value} \&outputs)
\item 
void \textbf{ Add\+Outputs} (\textbf{ CMutable\+Transaction} \&raw\+Tx, const \textbf{ Uni\+Value} \&outputs\+\_\+in)
\item 
\textbf{ CMutable\+Transaction} \textbf{ Construct\+Transaction} (const \textbf{ Uni\+Value} \&inputs\+\_\+in, const \textbf{ Uni\+Value} \&outputs\+\_\+in, const \textbf{ Uni\+Value} \&locktime, std\+::optional$<$ bool $>$ rbf, const uint32\+\_\+t version)
\item 
std\+::vector$<$ \textbf{ RPCResult} $>$ \textbf{ Decode\+Tx\+Doc} (const std\+::string \&txid\+\_\+field\+\_\+doc, bool \textbf{ wallet})
\end{DoxyCompactItemize}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{rawtransaction\_util.h@{rawtransaction\_util.h}!AddInputs@{AddInputs}}
\index{AddInputs@{AddInputs}!rawtransaction\_util.h@{rawtransaction\_util.h}}
\doxysubsubsection{AddInputs()}
{\footnotesize\ttfamily \label{rawtransaction__util_8h_ac7e74a65e0574da6630b508366bde012} 
void Add\+Inputs (\begin{DoxyParamCaption}\item[{\textbf{ CMutable\+Transaction} \&}]{raw\+Tx}{, }\item[{const \textbf{ Uni\+Value} \&}]{inputs\+\_\+in}{, }\item[{bool}]{rbf}{}\end{DoxyParamCaption})}

Normalize univalue-\/represented inputs and add them to the transaction \index{rawtransaction\_util.h@{rawtransaction\_util.h}!AddOutputs@{AddOutputs}}
\index{AddOutputs@{AddOutputs}!rawtransaction\_util.h@{rawtransaction\_util.h}}
\doxysubsubsection{AddOutputs()}
{\footnotesize\ttfamily \label{rawtransaction__util_8h_a5e2b1414241240d855c76536ac6a913a} 
void Add\+Outputs (\begin{DoxyParamCaption}\item[{\textbf{ CMutable\+Transaction} \&}]{raw\+Tx}{, }\item[{const \textbf{ Uni\+Value} \&}]{outputs\+\_\+in}{}\end{DoxyParamCaption})}

Normalize, parse, and add outputs to the transaction \index{rawtransaction\_util.h@{rawtransaction\_util.h}!ConstructTransaction@{ConstructTransaction}}
\index{ConstructTransaction@{ConstructTransaction}!rawtransaction\_util.h@{rawtransaction\_util.h}}
\doxysubsubsection{ConstructTransaction()}
{\footnotesize\ttfamily \label{rawtransaction__util_8h_a5f426eb9604c107b6dba19a993de774f} 
\textbf{ CMutable\+Transaction} Construct\+Transaction (\begin{DoxyParamCaption}\item[{const \textbf{ Uni\+Value} \&}]{inputs\+\_\+in}{, }\item[{const \textbf{ Uni\+Value} \&}]{outputs\+\_\+in}{, }\item[{const \textbf{ Uni\+Value} \&}]{locktime}{, }\item[{std\+::optional$<$ bool $>$}]{rbf}{, }\item[{const uint32\+\_\+t}]{version}{}\end{DoxyParamCaption})}

Create a transaction from univalue parameters \index{rawtransaction\_util.h@{rawtransaction\_util.h}!DecodeTxDoc@{DecodeTxDoc}}
\index{DecodeTxDoc@{DecodeTxDoc}!rawtransaction\_util.h@{rawtransaction\_util.h}}
\doxysubsubsection{DecodeTxDoc()}
{\footnotesize\ttfamily \label{rawtransaction__util_8h_a773f7ce2e0e85add30ce2066c634a91c} 
std\+::vector$<$ \textbf{ RPCResult} $>$ Decode\+Tx\+Doc (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{txid\+\_\+field\+\_\+doc}{, }\item[{bool}]{wallet}{}\end{DoxyParamCaption})}

Explain the \doxyref{Uni\+Value}{p.}{class_uni_value} "{}decoded"{} transaction object, may include extra fields if processed by wallet \index{rawtransaction\_util.h@{rawtransaction\_util.h}!NormalizeOutputs@{NormalizeOutputs}}
\index{NormalizeOutputs@{NormalizeOutputs}!rawtransaction\_util.h@{rawtransaction\_util.h}}
\doxysubsubsection{NormalizeOutputs()}
{\footnotesize\ttfamily \label{rawtransaction__util_8h_ad6410f336b04b79784dd788433157839} 
\textbf{ Uni\+Value} Normalize\+Outputs (\begin{DoxyParamCaption}\item[{const \textbf{ Uni\+Value} \&}]{outputs\+\_\+in}{}\end{DoxyParamCaption})}

Normalize univalue-\/represented outputs \index{rawtransaction\_util.h@{rawtransaction\_util.h}!ParseOutputs@{ParseOutputs}}
\index{ParseOutputs@{ParseOutputs}!rawtransaction\_util.h@{rawtransaction\_util.h}}
\doxysubsubsection{ParseOutputs()}
{\footnotesize\ttfamily \label{rawtransaction__util_8h_abf5190313fd64e43fcf3c4d275e47a6a} 
std\+::vector$<$ std\+::pair$<$ \textbf{ CTx\+Destination}, \textbf{ CAmount} $>$ $>$ Parse\+Outputs (\begin{DoxyParamCaption}\item[{const \textbf{ Uni\+Value} \&}]{outputs}{}\end{DoxyParamCaption})}

Parse normalized outputs into destination, amount tuples \index{rawtransaction\_util.h@{rawtransaction\_util.h}!ParsePrevouts@{ParsePrevouts}}
\index{ParsePrevouts@{ParsePrevouts}!rawtransaction\_util.h@{rawtransaction\_util.h}}
\doxysubsubsection{ParsePrevouts()}
{\footnotesize\ttfamily \label{rawtransaction__util_8h_af5d1dc5b9bfcfa65a9a4f8befa173fd5} 
void Parse\+Prevouts (\begin{DoxyParamCaption}\item[{const \textbf{ Uni\+Value} \&}]{prev\+Txs\+Unival}{, }\item[{\textbf{ Flat\+Signing\+Provider} $\ast$}]{keystore}{, }\item[{std\+::map$<$ \textbf{ COut\+Point}, \textbf{ Coin} $>$ \&}]{coins}{}\end{DoxyParamCaption})}

Parse a prevtxs \doxyref{Uni\+Value}{p.}{class_uni_value} array and get the map of coins from it


\begin{DoxyParams}{Parameters}
{\em prev\+Txs\+Unival} & Array of previous txns outputs that tx depends on but may not yet be in the block chain \\
\hline
{\em keystore} & A pointer to the temporary keystore if there is one \\
\hline
{\em coins} & Map of unspent outputs -\/ coins in mempool and current chain UTXO set, may be extended by previous txns outputs after call \\
\hline
\end{DoxyParams}
\index{rawtransaction\_util.h@{rawtransaction\_util.h}!SignTransaction@{SignTransaction}}
\index{SignTransaction@{SignTransaction}!rawtransaction\_util.h@{rawtransaction\_util.h}}
\doxysubsubsection{SignTransaction()}
{\footnotesize\ttfamily \label{rawtransaction__util_8h_a1b2373525c999707c7fc36594c70dc28} 
void Sign\+Transaction (\begin{DoxyParamCaption}\item[{\textbf{ CMutable\+Transaction} \&}]{mtx}{, }\item[{const \textbf{ Signing\+Provider} $\ast$}]{keystore}{, }\item[{const std\+::map$<$ \textbf{ COut\+Point}, \textbf{ Coin} $>$ \&}]{coins}{, }\item[{const \textbf{ Uni\+Value} \&}]{hash\+Type}{, }\item[{\textbf{ Uni\+Value} \&}]{result}{}\end{DoxyParamCaption})}

Sign a transaction with the given keystore and previous transactions


\begin{DoxyParams}{Parameters}
{\em mtx} & The transaction to-\/be-\/signed \\
\hline
{\em keystore} & Temporary keystore containing signing keys \\
\hline
{\em coins} & Map of unspent outputs \\
\hline
{\em hash\+Type} & The signature hash type \\
\hline
{\em result} & JSON object where signed transaction results accumulate \\
\hline
\end{DoxyParams}
\index{rawtransaction\_util.h@{rawtransaction\_util.h}!SignTransactionResultToJSON@{SignTransactionResultToJSON}}
\index{SignTransactionResultToJSON@{SignTransactionResultToJSON}!rawtransaction\_util.h@{rawtransaction\_util.h}}
\doxysubsubsection{SignTransactionResultToJSON()}
{\footnotesize\ttfamily \label{rawtransaction__util_8h_a02a20b5fe1e810461108a969bd3c5f2d} 
void Sign\+Transaction\+Result\+To\+JSON (\begin{DoxyParamCaption}\item[{\textbf{ CMutable\+Transaction} \&}]{mtx}{, }\item[{bool}]{complete}{, }\item[{const std\+::map$<$ \textbf{ COut\+Point}, \textbf{ Coin} $>$ \&}]{coins}{, }\item[{const std\+::map$<$ int, \textbf{ bilingual\+\_\+str} $>$ \&}]{input\+\_\+errors}{, }\item[{\textbf{ Uni\+Value} \&}]{result}{}\end{DoxyParamCaption})}

