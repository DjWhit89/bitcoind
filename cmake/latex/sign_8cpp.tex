\doxysection{src/script/sign.cpp File Reference}
\label{sign_8cpp}\index{src/script/sign.cpp@{src/script/sign.cpp}}
{\ttfamily \#include $<$script/sign.\+h$>$}\newline
{\ttfamily \#include $<$consensus/amount.\+h$>$}\newline
{\ttfamily \#include $<$key.\+h$>$}\newline
{\ttfamily \#include $<$musig.\+h$>$}\newline
{\ttfamily \#include $<$policy/policy.\+h$>$}\newline
{\ttfamily \#include $<$primitives/transaction.\+h$>$}\newline
{\ttfamily \#include $<$random.\+h$>$}\newline
{\ttfamily \#include $<$script/keyorigin.\+h$>$}\newline
{\ttfamily \#include $<$script/miniscript.\+h$>$}\newline
{\ttfamily \#include $<$script/script.\+h$>$}\newline
{\ttfamily \#include $<$script/signingprovider.\+h$>$}\newline
{\ttfamily \#include $<$script/solver.\+h$>$}\newline
{\ttfamily \#include $<$uint256.\+h$>$}\newline
{\ttfamily \#include $<$util/translation.\+h$>$}\newline
{\ttfamily \#include $<$util/vector.\+h$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \textbf{ Satisfier$<$ Pk $>$}
\item 
struct \textbf{ Wsh\+Satisfier}
\item 
struct \textbf{ Tap\+Satisfier}
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef std\+::vector$<$ unsigned char $>$ \textbf{ valtype}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename M, typename K, typename V$>$ }\\\textbf{ miniscript\+::\+Availability} \textbf{ Ms\+Lookup\+Helper} (const M \&map, const K \&key, V \&value)
\item 
bool \textbf{ Produce\+Signature} (const \textbf{ Signing\+Provider} \&provider, const \textbf{ Base\+Signature\+Creator} \&creator, const \textbf{ CScript} \&from\+Pub\+Key, \textbf{ Signature\+Data} \&sigdata)
\item 
\textbf{ Signature\+Data} \textbf{ Data\+From\+Transaction} (const \textbf{ CMutable\+Transaction} \&tx, unsigned int n\+In, const \textbf{ CTx\+Out} \&txout)
\item 
void \textbf{ Update\+Input} (\textbf{ CTx\+In} \&input, const \textbf{ Signature\+Data} \&data)
\item 
bool \textbf{ Is\+Seg\+Wit\+Output} (const \textbf{ Signing\+Provider} \&provider, const \textbf{ CScript} \&\textbf{ script})
\item 
bool \textbf{ Sign\+Transaction} (\textbf{ CMutable\+Transaction} \&mtx, const \textbf{ Signing\+Provider} $\ast$keystore, const std\+::map$<$ \textbf{ COut\+Point}, \textbf{ Coin} $>$ \&coins, int n\+Hash\+Type, std\+::map$<$ int, \textbf{ bilingual\+\_\+str} $>$ \&input\+\_\+errors)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \textbf{ Base\+Signature\+Checker} \& \textbf{ DUMMY\+\_\+\+CHECKER} = Dummy\+Signature\+Checker()
\item 
const \textbf{ Base\+Signature\+Creator} \& \textbf{ DUMMY\+\_\+\+SIGNATURE\+\_\+\+CREATOR} = Dummy\+Signature\+Creator(32, 32)
\item 
const \textbf{ Base\+Signature\+Creator} \& \textbf{ DUMMY\+\_\+\+MAXIMUM\+\_\+\+SIGNATURE\+\_\+\+CREATOR} = Dummy\+Signature\+Creator(33, 32)
\end{DoxyCompactItemize}


\label{doc-typedef-members}
\doxysubsection{Typedef Documentation}
\index{sign.cpp@{sign.cpp}!valtype@{valtype}}
\index{valtype@{valtype}!sign.cpp@{sign.cpp}}
\doxysubsubsection{valtype}
{\footnotesize\ttfamily \label{sign_8cpp_a893ae190c4461e89b01441657f8975ed} 
typedef std\+::vector$<$unsigned char$>$ \textbf{ valtype}}



\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{sign.cpp@{sign.cpp}!DataFromTransaction@{DataFromTransaction}}
\index{DataFromTransaction@{DataFromTransaction}!sign.cpp@{sign.cpp}}
\doxysubsubsection{DataFromTransaction()}
{\footnotesize\ttfamily \label{sign_8cpp_ac43070bee0b6bc72e2e2a738892dd1f3} 
\textbf{ Signature\+Data} Data\+From\+Transaction (\begin{DoxyParamCaption}\item[{const \textbf{ CMutable\+Transaction} \&}]{tx}{, }\item[{unsigned int}]{n\+In}{, }\item[{const \textbf{ CTx\+Out} \&}]{txout}{}\end{DoxyParamCaption})}

Extract signature data from a transaction input, and insert it. \index{sign.cpp@{sign.cpp}!IsSegWitOutput@{IsSegWitOutput}}
\index{IsSegWitOutput@{IsSegWitOutput}!sign.cpp@{sign.cpp}}
\doxysubsubsection{IsSegWitOutput()}
{\footnotesize\ttfamily \label{sign_8cpp_a234967049e0c0b1a8fcb9e3983f1ae64} 
bool Is\+Seg\+Wit\+Output (\begin{DoxyParamCaption}\item[{const \textbf{ Signing\+Provider} \&}]{provider}{, }\item[{const \textbf{ CScript} \&}]{script}{}\end{DoxyParamCaption})}

Check whether a script\+Pub\+Key is known to be segwit. \index{sign.cpp@{sign.cpp}!MsLookupHelper@{MsLookupHelper}}
\index{MsLookupHelper@{MsLookupHelper}!sign.cpp@{sign.cpp}}
\doxysubsubsection{MsLookupHelper()}
{\footnotesize\ttfamily \label{sign_8cpp_af1a1b251ba23c7ea4c2b29a6ef96cff6} 
template$<$typename M, typename K, typename V$>$ \\
\textbf{ miniscript\+::\+Availability} Ms\+Lookup\+Helper (\begin{DoxyParamCaption}\item[{const M \&}]{map}{, }\item[{const K \&}]{key}{, }\item[{V \&}]{value}{}\end{DoxyParamCaption})}

\index{sign.cpp@{sign.cpp}!ProduceSignature@{ProduceSignature}}
\index{ProduceSignature@{ProduceSignature}!sign.cpp@{sign.cpp}}
\doxysubsubsection{ProduceSignature()}
{\footnotesize\ttfamily \label{sign_8cpp_a0c453416d09212d876bee81dc9353c16} 
bool Produce\+Signature (\begin{DoxyParamCaption}\item[{const \textbf{ Signing\+Provider} \&}]{provider}{, }\item[{const \textbf{ Base\+Signature\+Creator} \&}]{creator}{, }\item[{const \textbf{ CScript} \&}]{script\+Pub\+Key}{, }\item[{\textbf{ Signature\+Data} \&}]{sigdata}{}\end{DoxyParamCaption})}

Produce a script signature using a generic signature creator. \index{sign.cpp@{sign.cpp}!SignTransaction@{SignTransaction}}
\index{SignTransaction@{SignTransaction}!sign.cpp@{sign.cpp}}
\doxysubsubsection{SignTransaction()}
{\footnotesize\ttfamily \label{sign_8cpp_ac7f35d5b9f97114ac2e04834aad42f35} 
bool Sign\+Transaction (\begin{DoxyParamCaption}\item[{\textbf{ CMutable\+Transaction} \&}]{mtx}{, }\item[{const \textbf{ Signing\+Provider} $\ast$}]{provider}{, }\item[{const std\+::map$<$ \textbf{ COut\+Point}, \textbf{ Coin} $>$ \&}]{coins}{, }\item[{int}]{sighash}{, }\item[{std\+::map$<$ int, \textbf{ bilingual\+\_\+str} $>$ \&}]{input\+\_\+errors}{}\end{DoxyParamCaption})}

Sign the \doxyref{CMutable\+Transaction}{p.}{struct_c_mutable_transaction} \index{sign.cpp@{sign.cpp}!UpdateInput@{UpdateInput}}
\index{UpdateInput@{UpdateInput}!sign.cpp@{sign.cpp}}
\doxysubsubsection{UpdateInput()}
{\footnotesize\ttfamily \label{sign_8cpp_a2051a9625f7300cb8ad7fdc1bc06f5c5} 
void Update\+Input (\begin{DoxyParamCaption}\item[{\textbf{ CTx\+In} \&}]{input}{, }\item[{const \textbf{ Signature\+Data} \&}]{data}{}\end{DoxyParamCaption})}



\label{doc-var-members}
\doxysubsection{Variable Documentation}
\index{sign.cpp@{sign.cpp}!DUMMY\_CHECKER@{DUMMY\_CHECKER}}
\index{DUMMY\_CHECKER@{DUMMY\_CHECKER}!sign.cpp@{sign.cpp}}
\doxysubsubsection{DUMMY\_CHECKER}
{\footnotesize\ttfamily \label{sign_8cpp_ac7c8cef845db98e77532b1f1b75d3284} 
const \textbf{ Base\+Signature\+Checker}\& DUMMY\+\_\+\+CHECKER = Dummy\+Signature\+Checker()}

A signature checker that accepts all signatures \index{sign.cpp@{sign.cpp}!DUMMY\_MAXIMUM\_SIGNATURE\_CREATOR@{DUMMY\_MAXIMUM\_SIGNATURE\_CREATOR}}
\index{DUMMY\_MAXIMUM\_SIGNATURE\_CREATOR@{DUMMY\_MAXIMUM\_SIGNATURE\_CREATOR}!sign.cpp@{sign.cpp}}
\doxysubsubsection{DUMMY\_MAXIMUM\_SIGNATURE\_CREATOR}
{\footnotesize\ttfamily \label{sign_8cpp_aa46e7059be2d9fa3dc2f4675704e8218} 
const \textbf{ Base\+Signature\+Creator}\& DUMMY\+\_\+\+MAXIMUM\+\_\+\+SIGNATURE\+\_\+\+CREATOR = Dummy\+Signature\+Creator(33, 32)}

A signature creator that just produces 72-\/byte empty signatures. \index{sign.cpp@{sign.cpp}!DUMMY\_SIGNATURE\_CREATOR@{DUMMY\_SIGNATURE\_CREATOR}}
\index{DUMMY\_SIGNATURE\_CREATOR@{DUMMY\_SIGNATURE\_CREATOR}!sign.cpp@{sign.cpp}}
\doxysubsubsection{DUMMY\_SIGNATURE\_CREATOR}
{\footnotesize\ttfamily \label{sign_8cpp_adeb428a7d137dcfc2a1f29dd1a562ca8} 
const \textbf{ Base\+Signature\+Creator}\& DUMMY\+\_\+\+SIGNATURE\+\_\+\+CREATOR = Dummy\+Signature\+Creator(32, 32)}

A signature creator that just produces 71-\/byte empty signatures. 