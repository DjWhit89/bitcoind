<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bitcoind: TxDownloadManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bitcoin.ico"/></td>
  <td id="projectalign">
   <div id="projectname">bitcoind<span id="projectnumber">&#160;2.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classnode_1_1_tx_download_manager.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">TxDownloadManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="txdownloadman_8h_source.html">txdownloadman.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad745a2efabba7bcfbdac7623042e8ec6" id="r_ad745a2efabba7bcfbdac7623042e8ec6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad745a2efabba7bcfbdac7623042e8ec6">TxDownloadManager</a> (const <a class="el" href="structnode_1_1_tx_download_options.html">TxDownloadOptions</a> &amp;options)</td></tr>
<tr class="memitem:ac0e249b0808680b80fcdbc58d2316221" id="r_ac0e249b0808680b80fcdbc58d2316221"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0e249b0808680b80fcdbc58d2316221">~TxDownloadManager</a> ()</td></tr>
<tr class="memitem:aa5883445f27deba93c352358f9e290c1" id="r_aa5883445f27deba93c352358f9e290c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa5883445f27deba93c352358f9e290c1">ActiveTipChange</a> ()</td></tr>
<tr class="memitem:a53d97beb21a0a0eab363e22fc04fa3d9" id="r_a53d97beb21a0a0eab363e22fc04fa3d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a53d97beb21a0a0eab363e22fc04fa3d9">BlockConnected</a> (const std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; &amp;pblock)</td></tr>
<tr class="memitem:aa9c6b85e663bc605cdef5ea311b1565a" id="r_aa9c6b85e663bc605cdef5ea311b1565a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9c6b85e663bc605cdef5ea311b1565a">BlockDisconnected</a> ()</td></tr>
<tr class="memitem:a44008c3f833e83f33a382c81a842ab7e" id="r_a44008c3f833e83f33a382c81a842ab7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44008c3f833e83f33a382c81a842ab7e">ConnectedPeer</a> (<a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a> nodeid, const <a class="el" href="structnode_1_1_tx_download_connection_info.html">TxDownloadConnectionInfo</a> &amp;info)</td></tr>
<tr class="memitem:a2ddb15d822dd91ef55c56326adf50e4f" id="r_a2ddb15d822dd91ef55c56326adf50e4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ddb15d822dd91ef55c56326adf50e4f">DisconnectedPeer</a> (<a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a> nodeid)</td></tr>
<tr class="memitem:a9ce1df5e1f2436871991def3e2a99198" id="r_a9ce1df5e1f2436871991def3e2a99198"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9ce1df5e1f2436871991def3e2a99198">AddTxAnnouncement</a> (<a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a> peer, const <a class="el" href="class_gen_txid.html">GenTxid</a> &amp;gtxid, std::chrono::microseconds now)</td></tr>
<tr class="memitem:a9657de34ab5c603f7a719005801f44ea" id="r_a9657de34ab5c603f7a719005801f44ea"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="class_gen_txid.html">GenTxid</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9657de34ab5c603f7a719005801f44ea">GetRequestsToSend</a> (<a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a> nodeid, std::chrono::microseconds current_time)</td></tr>
<tr class="memitem:ac3697b6766b4729e5e405ec352a6b9d7" id="r_ac3697b6766b4729e5e405ec352a6b9d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac3697b6766b4729e5e405ec352a6b9d7">ReceivedNotFound</a> (<a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a> nodeid, const std::vector&lt; <a class="el" href="class_gen_txid.html">GenTxid</a> &gt; &amp;gtxids)</td></tr>
<tr class="memitem:ad066c94643d88d8e76932d19ccecb448" id="r_ad066c94643d88d8e76932d19ccecb448"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad066c94643d88d8e76932d19ccecb448">MempoolAcceptedTx</a> (const <a class="el" href="primitives_2transaction_8h.html#ae462b4b8f07705a82bf11cf361959b97">CTransactionRef</a> &amp;tx)</td></tr>
<tr class="memitem:af57da0e97f1ed045176b41e02ce92311" id="r_af57da0e97f1ed045176b41e02ce92311"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnode_1_1_rejected_tx_todo.html">RejectedTxTodo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af57da0e97f1ed045176b41e02ce92311">MempoolRejectedTx</a> (const <a class="el" href="primitives_2transaction_8h.html#ae462b4b8f07705a82bf11cf361959b97">CTransactionRef</a> &amp;ptx, const <a class="el" href="class_tx_validation_state.html">TxValidationState</a> &amp;state, <a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a> nodeid, bool first_time_failure)</td></tr>
<tr class="memitem:a358fdee6fa1c7c99776f1f301baaeafc" id="r_a358fdee6fa1c7c99776f1f301baaeafc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a358fdee6fa1c7c99776f1f301baaeafc">MempoolRejectedPackage</a> (const <a class="el" href="packages_8h.html#a138b5dbe56c4869308e2bc7a28b51d9c">Package</a> &amp;package)</td></tr>
<tr class="memitem:a46fe23e66164805fc7f8a3a7f4e29136" id="r_a46fe23e66164805fc7f8a3a7f4e29136"><td class="memItemLeft" align="right" valign="top">std::pair&lt; bool, std::optional&lt; <a class="el" href="structnode_1_1_package_to_validate.html">PackageToValidate</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a46fe23e66164805fc7f8a3a7f4e29136">ReceivedTx</a> (<a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a> nodeid, const <a class="el" href="primitives_2transaction_8h.html#ae462b4b8f07705a82bf11cf361959b97">CTransactionRef</a> &amp;ptx)</td></tr>
<tr class="memitem:ad360aa1d7499deee26b547de7f4e61e7" id="r_ad360aa1d7499deee26b547de7f4e61e7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad360aa1d7499deee26b547de7f4e61e7">HaveMoreWork</a> (<a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a> nodeid) const</td></tr>
<tr class="memitem:a3069348e7801e72ca8ae455538ba0ee8" id="r_a3069348e7801e72ca8ae455538ba0ee8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="primitives_2transaction_8h.html#ae462b4b8f07705a82bf11cf361959b97">CTransactionRef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3069348e7801e72ca8ae455538ba0ee8">GetTxToReconsider</a> (<a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a> nodeid)</td></tr>
<tr class="memitem:a3ec0a9f6ba5cb4e43267afdacfe63339" id="r_a3ec0a9f6ba5cb4e43267afdacfe63339"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3ec0a9f6ba5cb4e43267afdacfe63339">CheckIsEmpty</a> () const</td></tr>
<tr class="memitem:aa5bb13c4cca9ffa4188056202ccad785" id="r_aa5bb13c4cca9ffa4188056202ccad785"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa5bb13c4cca9ffa4188056202ccad785">CheckIsEmpty</a> (<a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a> nodeid) const</td></tr>
<tr class="memitem:ad103bb6f849e8140f39f4aef19109b9c" id="r_ad103bb6f849e8140f39f4aef19109b9c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structnode_1_1_tx_orphanage_1_1_orphan_info.html">TxOrphanage::OrphanInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad103bb6f849e8140f39f4aef19109b9c">GetOrphanTransactions</a> () const</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class responsible for deciding what transactions to request and, once downloaded, whether and how to validate them. It is also responsible for deciding what transaction packages to validate and how to resolve orphan transactions. Its data structures include <a class="el" href="class_tx_request_tracker.html">TxRequestTracker</a> for scheduling requests, rolling bloom filters for remembering transactions that have already been {accepted, rejected, confirmed}, an orphanage, and a registry of each peer's transaction relay-related information.</p>
<p>Caller needs to interact with <a class="el" href="classnode_1_1_tx_download_manager.html">TxDownloadManager</a>:</p><ul>
<li>ValidationInterface callbacks.</li>
<li>When a potential transaction relay peer connects or disconnects.</li>
<li>When a transaction or package is accepted or rejected from mempool</li>
<li>When a inv, notfound, or tx message is received</li>
<li>To get instructions for which getdata messages to send</li>
</ul>
<p>This class is not thread-safe. Access must be synchronized using an external mutex. </p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad745a2efabba7bcfbdac7623042e8ec6" name="ad745a2efabba7bcfbdac7623042e8ec6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad745a2efabba7bcfbdac7623042e8ec6">&#9670;&#160;</a></span>TxDownloadManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TxDownloadManager </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structnode_1_1_tx_download_options.html">TxDownloadOptions</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>options</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel explicit">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac0e249b0808680b80fcdbc58d2316221" name="ac0e249b0808680b80fcdbc58d2316221"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0e249b0808680b80fcdbc58d2316221">&#9670;&#160;</a></span>~TxDownloadManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="#ad745a2efabba7bcfbdac7623042e8ec6">TxDownloadManager</a> </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel default">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="aa5883445f27deba93c352358f9e290c1" name="aa5883445f27deba93c352358f9e290c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5883445f27deba93c352358f9e290c1">&#9670;&#160;</a></span>ActiveTipChange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ActiveTipChange </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9ce1df5e1f2436871991def3e2a99198" name="a9ce1df5e1f2436871991def3e2a99198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ce1df5e1f2436871991def3e2a99198">&#9670;&#160;</a></span>AddTxAnnouncement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AddTxAnnouncement </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a></td>          <td class="paramname"><span class="paramname"><em>peer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_gen_txid.html">GenTxid</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>gtxid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::microseconds</td>          <td class="paramname"><span class="paramname"><em>now</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Consider adding this tx hash to txrequest. Should be called whenever a new inv has been received. Also called internally when a transaction is missing parents so that we can request them. Returns true if this was a dropped inv (p2p_inv=true and we already have the tx), false otherwise. </p>

</div>
</div>
<a id="a53d97beb21a0a0eab363e22fc04fa3d9" name="a53d97beb21a0a0eab363e22fc04fa3d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53d97beb21a0a0eab363e22fc04fa3d9">&#9670;&#160;</a></span>BlockConnected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlockConnected </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>pblock</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa9c6b85e663bc605cdef5ea311b1565a" name="aa9c6b85e663bc605cdef5ea311b1565a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c6b85e663bc605cdef5ea311b1565a">&#9670;&#160;</a></span>BlockDisconnected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlockDisconnected </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3ec0a9f6ba5cb4e43267afdacfe63339" name="a3ec0a9f6ba5cb4e43267afdacfe63339"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ec0a9f6ba5cb4e43267afdacfe63339">&#9670;&#160;</a></span>CheckIsEmpty() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CheckIsEmpty </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check that all data structures are empty. </p>

</div>
</div>
<a id="aa5bb13c4cca9ffa4188056202ccad785" name="aa5bb13c4cca9ffa4188056202ccad785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5bb13c4cca9ffa4188056202ccad785">&#9670;&#160;</a></span>CheckIsEmpty() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CheckIsEmpty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a></td>          <td class="paramname"><span class="paramname"><em>nodeid</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check that all data structures that track per-peer information have nothing for this peer. </p>

</div>
</div>
<a id="a44008c3f833e83f33a382c81a842ab7e" name="a44008c3f833e83f33a382c81a842ab7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44008c3f833e83f33a382c81a842ab7e">&#9670;&#160;</a></span>ConnectedPeer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ConnectedPeer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a></td>          <td class="paramname"><span class="paramname"><em>nodeid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structnode_1_1_tx_download_connection_info.html">TxDownloadConnectionInfo</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>info</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new PeerInfo. Saves the connection info to calculate tx announcement delays later. </p>

</div>
</div>
<a id="a2ddb15d822dd91ef55c56326adf50e4f" name="a2ddb15d822dd91ef55c56326adf50e4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ddb15d822dd91ef55c56326adf50e4f">&#9670;&#160;</a></span>DisconnectedPeer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DisconnectedPeer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a></td>          <td class="paramname"><span class="paramname"><em>nodeid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes all txrequest announcements and orphans for a given peer. </p>

</div>
</div>
<a id="ad103bb6f849e8140f39f4aef19109b9c" name="ad103bb6f849e8140f39f4aef19109b9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad103bb6f849e8140f39f4aef19109b9c">&#9670;&#160;</a></span>GetOrphanTransactions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structnode_1_1_tx_orphanage_1_1_orphan_info.html">TxOrphanage::OrphanInfo</a> &gt; GetOrphanTransactions </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_wrapper.html">Wrapper</a> for <a class="el" href="classnode_1_1_tx_orphanage.html#af76a7ae7bb57b16ce8866fb918563fcc">TxOrphanage::GetOrphanTransactions</a> </p>

</div>
</div>
<a id="a9657de34ab5c603f7a719005801f44ea" name="a9657de34ab5c603f7a719005801f44ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9657de34ab5c603f7a719005801f44ea">&#9670;&#160;</a></span>GetRequestsToSend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="class_gen_txid.html">GenTxid</a> &gt; GetRequestsToSend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a></td>          <td class="paramname"><span class="paramname"><em>nodeid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::microseconds</td>          <td class="paramname"><span class="paramname"><em>current_time</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get getdata requests to send. </p>

</div>
</div>
<a id="a3069348e7801e72ca8ae455538ba0ee8" name="a3069348e7801e72ca8ae455538ba0ee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3069348e7801e72ca8ae455538ba0ee8">&#9670;&#160;</a></span>GetTxToReconsider()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="primitives_2transaction_8h.html#ae462b4b8f07705a82bf11cf361959b97">CTransactionRef</a> GetTxToReconsider </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a></td>          <td class="paramname"><span class="paramname"><em>nodeid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns next orphan tx to consider, or nullptr if none exist. </p>

</div>
</div>
<a id="ad360aa1d7499deee26b547de7f4e61e7" name="ad360aa1d7499deee26b547de7f4e61e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad360aa1d7499deee26b547de7f4e61e7">&#9670;&#160;</a></span>HaveMoreWork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool HaveMoreWork </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a></td>          <td class="paramname"><span class="paramname"><em>nodeid</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Whether there are any orphans to reconsider for this peer. </p>

</div>
</div>
<a id="ad066c94643d88d8e76932d19ccecb448" name="ad066c94643d88d8e76932d19ccecb448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad066c94643d88d8e76932d19ccecb448">&#9670;&#160;</a></span>MempoolAcceptedTx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MempoolAcceptedTx </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="primitives_2transaction_8h.html#ae462b4b8f07705a82bf11cf361959b97">CTransactionRef</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>tx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Respond to successful transaction submission to mempool </p>

</div>
</div>
<a id="a358fdee6fa1c7c99776f1f301baaeafc" name="a358fdee6fa1c7c99776f1f301baaeafc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a358fdee6fa1c7c99776f1f301baaeafc">&#9670;&#160;</a></span>MempoolRejectedPackage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MempoolRejectedPackage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="packages_8h.html#a138b5dbe56c4869308e2bc7a28b51d9c">Package</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>package</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Respond to package rejected from mempool </p>

</div>
</div>
<a id="af57da0e97f1ed045176b41e02ce92311" name="af57da0e97f1ed045176b41e02ce92311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af57da0e97f1ed045176b41e02ce92311">&#9670;&#160;</a></span>MempoolRejectedTx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnode_1_1_rejected_tx_todo.html">RejectedTxTodo</a> MempoolRejectedTx </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="primitives_2transaction_8h.html#ae462b4b8f07705a82bf11cf361959b97">CTransactionRef</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ptx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_tx_validation_state.html">TxValidationState</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a></td>          <td class="paramname"><span class="paramname"><em>nodeid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>first_time_failure</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Respond to transaction rejected from mempool </p>

</div>
</div>
<a id="ac3697b6766b4729e5e405ec352a6b9d7" name="ac3697b6766b4729e5e405ec352a6b9d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3697b6766b4729e5e405ec352a6b9d7">&#9670;&#160;</a></span>ReceivedNotFound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReceivedNotFound </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a></td>          <td class="paramname"><span class="paramname"><em>nodeid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="class_gen_txid.html">GenTxid</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>gtxids</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Should be called when a notfound for a tx has been received. </p>

</div>
</div>
<a id="a46fe23e66164805fc7f8a3a7f4e29136" name="a46fe23e66164805fc7f8a3a7f4e29136"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46fe23e66164805fc7f8a3a7f4e29136">&#9670;&#160;</a></span>ReceivedTx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; bool, std::optional&lt; <a class="el" href="structnode_1_1_package_to_validate.html">PackageToValidate</a> &gt; &gt; ReceivedTx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="net_8h.html#aa637b11e18b77724b35db2229cd12788">NodeId</a></td>          <td class="paramname"><span class="paramname"><em>nodeid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="primitives_2transaction_8h.html#ae462b4b8f07705a82bf11cf361959b97">CTransactionRef</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ptx</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Marks a tx as ReceivedResponse in txrequest and checks whether AlreadyHaveTx. Return a bool indicating whether this tx should be validated. If false, optionally, a <a class="el" href="structnode_1_1_package_to_validate.html">PackageToValidate</a>. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/node/<a class="el" href="txdownloadman_8h_source.html">txdownloadman.h</a></li>
<li>src/node/<a class="el" href="txdownloadman__impl_8cpp.html">txdownloadman_impl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespacenode.html">node</a></li><li class="navelem"><a href="classnode_1_1_tx_download_manager.html">TxDownloadManager</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
