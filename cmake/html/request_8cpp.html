<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bitcoind: src/rpc/request.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bitcoin.ico"/></td>
  <td id="projectalign">
   <div id="projectname">bitcoind<span id="projectnumber">&#160;2.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('request_8cpp.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">request.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="request_8h_source.html">rpc/request.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="args_8h_source.html">common/args.h</a>&gt;</code><br />
<code>#include &lt;logging.h&gt;</code><br />
<code>#include &lt;random.h&gt;</code><br />
<code>#include &lt;<a class="el" href="rpc_2protocol_8h_source.html">rpc/protocol.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="fs_8h_source.html">util/fs.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="fs__helpers_8h_source.html">util/fs_helpers.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="strencodings_8h_source.html">util/strencodings.h</a>&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;stdexcept&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3adfee54547442fb913d3bd8269a0a49" id="r_a3adfee54547442fb913d3bd8269a0a49"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_uni_value.html">UniValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3adfee54547442fb913d3bd8269a0a49">JSONRPCRequestObj</a> (const std::string &amp;strMethod, const <a class="el" href="class_uni_value.html">UniValue</a> &amp;params, const <a class="el" href="class_uni_value.html">UniValue</a> &amp;id)</td></tr>
<tr class="memitem:a7a5efbb94e314c4adebd44863536c016" id="r_a7a5efbb94e314c4adebd44863536c016"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_uni_value.html">UniValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7a5efbb94e314c4adebd44863536c016">JSONRPCReplyObj</a> (<a class="el" href="class_uni_value.html">UniValue</a> result, <a class="el" href="class_uni_value.html">UniValue</a> error, std::optional&lt; <a class="el" href="class_uni_value.html">UniValue</a> &gt; id, <a class="el" href="request_8h.html#a5c457685541892ee16efcc5fa9cf0bd4">JSONRPCVersion</a> jsonrpc_version)</td></tr>
<tr class="memitem:a40b75d3d265c4a2e1d5fe3e129743884" id="r_a40b75d3d265c4a2e1d5fe3e129743884"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_uni_value.html">UniValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a40b75d3d265c4a2e1d5fe3e129743884">JSONRPCError</a> (int code, const std::string &amp;message)</td></tr>
<tr class="memitem:a005251add6b8b37a1935dfea3967aa76" id="r_a005251add6b8b37a1935dfea3967aa76"><td class="memItemLeft" align="right" valign="top"><a class="el" href="request_8h.html#a6eb6b7c13b727f5a5b3b535313661517">GenerateAuthCookieResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a005251add6b8b37a1935dfea3967aa76">GenerateAuthCookie</a> (const std::optional&lt; fs::perms &gt; &amp;cookie_perms, std::string &amp;user, std::string &amp;pass)</td></tr>
<tr class="memitem:a25c502e3691e714e8a130c2325d40d63" id="r_a25c502e3691e714e8a130c2325d40d63"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a25c502e3691e714e8a130c2325d40d63">GetAuthCookie</a> (std::string *cookie_out)</td></tr>
<tr class="memitem:a9807259ee7b7c4f5445cf54fd23589cb" id="r_a9807259ee7b7c4f5445cf54fd23589cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9807259ee7b7c4f5445cf54fd23589cb">DeleteAuthCookie</a> ()</td></tr>
<tr class="memitem:a05724b070606ec86736bdae1d2de7b3d" id="r_a05724b070606ec86736bdae1d2de7b3d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="class_uni_value.html">UniValue</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a05724b070606ec86736bdae1d2de7b3d">JSONRPCProcessBatchReply</a> (const <a class="el" href="class_uni_value.html">UniValue</a> &amp;in)</td></tr>
</table>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a9807259ee7b7c4f5445cf54fd23589cb" name="a9807259ee7b7c4f5445cf54fd23589cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9807259ee7b7c4f5445cf54fd23589cb">&#9670;&#160;</a></span>DeleteAuthCookie()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DeleteAuthCookie </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete RPC authentication cookie from disk </p>

</div>
</div>
<a id="a005251add6b8b37a1935dfea3967aa76" name="a005251add6b8b37a1935dfea3967aa76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a005251add6b8b37a1935dfea3967aa76">&#9670;&#160;</a></span>GenerateAuthCookie()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="request_8h.html#a6eb6b7c13b727f5a5b3b535313661517">GenerateAuthCookieResult</a> GenerateAuthCookie </td>
          <td>(</td>
          <td class="paramtype">const std::optional&lt; fs::perms &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>cookie_perms</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>user</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>pass</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate a new RPC authentication cookie and write it to disk </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cookie_perms</td><td>Filesystem permissions to use for the cookie file. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">user</td><td>Generated username, only set if <span class="tt">OK</span> is returned. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pass</td><td>Generated password, only set if <span class="tt">OK</span> is returned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="request_8h.html#a6eb6b7c13b727f5a5b3b535313661517a055c1a591abb0e8cd86dc969727bcc0b">GenerateAuthCookieResult::DISABLED</a></td><td>Authentication via cookie is disabled. </td></tr>
    <tr><td class="paramname">GenerateAuthCookieResult::ERROR</td><td>Error occurred, auth data could not be saved to disk. </td></tr>
    <tr><td class="paramname"><a class="el" href="request_8h.html#a6eb6b7c13b727f5a5b3b535313661517ae0aa021e21dddbd6d8cecec71e9cf564">GenerateAuthCookieResult::OK</a></td><td>Auth data was generated, saved to disk and in <span class="tt">user</span> and <span class="tt">pass</span>. </td></tr>
  </table>
  </dd>
</dl>
<p>the umask determines what permissions are used to create this file - these are set to 0077 in <a class="el" href="common_2system_8cpp.html">common/system.cpp</a>.</p>

</div>
</div>
<a id="a25c502e3691e714e8a130c2325d40d63" name="a25c502e3691e714e8a130c2325d40d63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25c502e3691e714e8a130c2325d40d63">&#9670;&#160;</a></span>GetAuthCookie()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GetAuthCookie </td>
          <td>(</td>
          <td class="paramtype">std::string *</td>          <td class="paramname"><span class="paramname"><em>cookie_out</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the RPC authentication cookie from disk </p>

</div>
</div>
<a id="a40b75d3d265c4a2e1d5fe3e129743884" name="a40b75d3d265c4a2e1d5fe3e129743884"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40b75d3d265c4a2e1d5fe3e129743884">&#9670;&#160;</a></span>JSONRPCError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_uni_value.html">UniValue</a> JSONRPCError </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>code</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>message</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a05724b070606ec86736bdae1d2de7b3d" name="a05724b070606ec86736bdae1d2de7b3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05724b070606ec86736bdae1d2de7b3d">&#9670;&#160;</a></span>JSONRPCProcessBatchReply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="class_uni_value.html">UniValue</a> &gt; JSONRPCProcessBatchReply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_uni_value.html">UniValue</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>in</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parse JSON-RPC batch reply into a vector </p>

</div>
</div>
<a id="a7a5efbb94e314c4adebd44863536c016" name="a7a5efbb94e314c4adebd44863536c016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a5efbb94e314c4adebd44863536c016">&#9670;&#160;</a></span>JSONRPCReplyObj()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_uni_value.html">UniValue</a> JSONRPCReplyObj </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_uni_value.html">UniValue</a></td>          <td class="paramname"><span class="paramname"><em>result</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_uni_value.html">UniValue</a></td>          <td class="paramname"><span class="paramname"><em>error</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::optional&lt; <a class="el" href="class_uni_value.html">UniValue</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="request_8h.html#a5c457685541892ee16efcc5fa9cf0bd4">JSONRPCVersion</a></td>          <td class="paramname"><span class="paramname"><em>jsonrpc_version</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3adfee54547442fb913d3bd8269a0a49" name="a3adfee54547442fb913d3bd8269a0a49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3adfee54547442fb913d3bd8269a0a49">&#9670;&#160;</a></span>JSONRPCRequestObj()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_uni_value.html">UniValue</a> JSONRPCRequestObj </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>strMethod</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_uni_value.html">UniValue</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>params</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_uni_value.html">UniValue</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>id</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>JSON-RPC protocol. Bitcoin speaks version 1.0 for maximum compatibility, but uses JSON-RPC 1.1/2.0 standards for parts of the 1.0 standard that were unspecified (HTTP errors and contents of 'error').</p>
<p>1.0 spec: <a href="https://www.jsonrpc.org/specification_v1">https://www.jsonrpc.org/specification_v1</a> 1.2 spec: <a href="https://jsonrpc.org/historical/json-rpc-over-http.html">https://jsonrpc.org/historical/json-rpc-over-http.html</a></p>
<p>If the server receives a request with the JSON-RPC 2.0 marker <span class="tt">{"jsonrpc": "2.0"}</span> then Bitcoin will respond with a strictly specified response. It will only return an HTTP error code if an actual HTTP error is encountered such as the endpoint is not found (404) or the request is not formatted correctly (500). Otherwise the HTTP code is always OK (200) and RPC errors will be included in the response body.</p>
<p>2.0 spec: <a href="https://www.jsonrpc.org/specification">https://www.jsonrpc.org/specification</a></p>
<p>Also see <a href="https://www.simple-is-better.org/rpc/#differences-between-1-0-and-2-0">https://www.simple-is-better.org/rpc/#differences-between-1-0-and-2-0</a> </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="dir_1d8fd1f10602b1b3ec6e7b702d4ec182.html">rpc</a></li><li class="navelem"><a href="request_8cpp.html">request.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
