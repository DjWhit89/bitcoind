<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bitcoind: Release process</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bitcoin.ico"/></td>
  <td id="projectalign">
   <div id="projectname">bitcoind<span id="projectnumber">&#160;2.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md_src_2secp256k1_2doc_2release-process.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Release process </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md198"></a></p>
<p>This document outlines the process for releasing versions of the form <span class="tt">$MAJOR.$MINOR.$PATCH</span>.</p>
<p>We distinguish between two types of releases: <em>regular</em> and <em>maintenance</em> releases. Regular releases are releases of a new major or minor version as well as patches of the most recent release. Maintenance releases, on the other hand, are required for patches of older releases.</p>
<p>You should coordinate with the other maintainers on the release date, if possible. This date will be part of the release entry in <a class="el" href="md_src_2secp256k1_2_c_h_a_n_g_e_l_o_g.html">CHANGELOG.md</a> and it should match the dates of the remaining steps in the release process (including the date of the tag and the GitHub release). It is best if the maintainers are present during the release, so they can help ensure that the process is followed correctly and, in the case of a regular release, they are aware that they should not modify the master branch between merging the PR in step 1 and the PR in step 3.</p>
<p>This process also assumes that there will be no minor releases for old major releases.</p>
<p>We aim to cut a regular release every 3-4 months, approximately twice as frequent as major Bitcoin Core releases. Every second release should be published one month before the feature freeze of the next major Bitcoin Core release, allowing sufficient time to update the library in Core.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md199"></a>
Sanity checks</h1>
<p>Perform these checks when reviewing the release PR (see below):</p>
<ol type="1">
<li>Ensure <span class="tt">make distcheck</span> doesn't fail. <div class="fragment"><div class="line">./autogen.sh &amp;&amp; ./configure --enable-dev-mode &amp;&amp; make distcheck</div>
</div><!-- fragment --></li>
<li>Check installation with autotools: <div class="fragment"><div class="line">dir=$(mktemp -d)</div>
<div class="line">./autogen.sh &amp;&amp; ./configure --prefix=$dir &amp;&amp; make clean &amp;&amp; make install &amp;&amp; ls -RlAh $dir</div>
<div class="line">gcc -o ecdsa examples/ecdsa.c $(PKG_CONFIG_PATH=$dir/lib/pkgconfig pkg-config --cflags --libs libsecp256k1) -Wl,-rpath,&quot;$dir/lib&quot; &amp;&amp; ./ecdsa</div>
</div><!-- fragment --></li>
<li>Check installation with CMake: <div class="fragment"><div class="line">dir=$(mktemp -d)</div>
<div class="line">build=$(mktemp -d)</div>
<div class="line">cmake -B $build -DCMAKE_INSTALL_PREFIX=$dir &amp;&amp; cmake --build $build &amp;&amp; cmake --install $build &amp;&amp; ls -RlAh $dir</div>
<div class="line">gcc -o ecdsa examples/ecdsa.c -I $dir/include -L $dir/lib*/ -l secp256k1 -Wl,-rpath,&quot;$dir/lib&quot;,-rpath,&quot;$dir/lib64&quot; &amp;&amp; ./ecdsa</div>
</div><!-- fragment --></li>
<li>Use the <a href="/tools/check-abi.sh"><span class="tt">check-abi.sh</span></a> tool to verify that there are no unexpected ABI incompatibilities and that the version number and the release notes accurately reflect all potential ABI changes. To run this tool, the <span class="tt">abi-dumper</span> and <span class="tt">abi-compliance-checker</span> packages are required. <div class="fragment"><div class="line">tools/check-abi.sh</div>
</div><!-- fragment --></li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md200"></a>
Regular release</h1>
<ol type="1">
<li>Open a PR to the master branch with a commit (using message <span class="tt">"release: prepare <a class="el" href="arith__uint256__tests_8cpp.html#aec8e239ec13a0a2253be548812b40c53">for</a> $MAJOR.$MINOR.$PATCH"</span>, for example) that<ul>
<li>finalizes the release notes in <a class="el" href="md_src_2secp256k1_2_c_h_a_n_g_e_l_o_g.html">CHANGELOG.md</a> by<ul>
<li>adding a section for the release (make sure that the version number is a link to a diff between the previous and new version),</li>
<li>removing the <span class="tt">[Unreleased]</span> section header,</li>
<li>ensuring that the release notes are not missing entries (check the <span class="tt">needs-changelog</span> label on github), and</li>
<li>including an entry for <span class="tt">### ABI Compatibility</span> if it doesn't exist,</li>
</ul>
</li>
<li>sets <span class="tt">_PKG_VERSION_IS_RELEASE</span> to <span class="tt">true</span> in <span class="tt">configure.ac</span>, and,</li>
<li>if this is not a patch release,<ul>
<li>updates <span class="tt">_PKG_VERSION_*</span> and <span class="tt">_LIB_VERSION_*</span> in <span class="tt">configure.ac</span>, and</li>
<li>updates <span class="tt">project(libsecp256k1 VERSION ...)</span> and <span class="tt">${PROJECT_NAME}_LIB_VERSION_*</span> in <span class="tt">CMakeLists.txt</span>.</li>
</ul>
</li>
</ul>
</li>
<li>Perform the sanity checks on the PR branch.</li>
<li>After the PR is merged, tag the commit, and push the tag: <div class="fragment"><div class="line">RELEASE_COMMIT=&lt;merge commit of step 1&gt;</div>
<div class="line">git tag -s v$MAJOR.$MINOR.$PATCH -m &quot;libsecp256k1 $MAJOR.$MINOR.$PATCH&quot; $RELEASE_COMMIT</div>
<div class="line">git push git@github.com:bitcoin-core/secp256k1.git v$MAJOR.$MINOR.$PATCH</div>
</div><!-- fragment --></li>
<li><p class="startli">Open a PR to the master branch with a commit (using message <span class="tt">"release cleanup: bump version after $MAJOR.$MINOR.$PATCH"</span>, for example) that</p><ul>
<li>sets <span class="tt">_PKG_VERSION_IS_RELEASE</span> to <span class="tt">false</span> and increments <span class="tt">_PKG_VERSION_PATCH</span> and <span class="tt">_LIB_VERSION_REVISION</span> in <span class="tt">configure.ac</span>,</li>
<li>increments the <span class="tt">$PATCH</span> component of <span class="tt">project(libsecp256k1 VERSION ...)</span> and <span class="tt">${PROJECT_NAME}_LIB_VERSION_REVISION</span> in <span class="tt">CMakeLists.txt</span>, and</li>
<li>adds an <span class="tt">[Unreleased]</span> section header to the <a class="el" href="md_src_2secp256k1_2_c_h_a_n_g_e_l_o_g.html">CHANGELOG.md</a>.</li>
</ul>
<p class="startli">If other maintainers are not present to approve the PR, it can be merged without ACKs.</p>
</li>
<li>Create a new GitHub release with a link to the corresponding entry in <a class="el" href="md_src_2secp256k1_2_c_h_a_n_g_e_l_o_g.html">CHANGELOG.md</a>.</li>
<li>Send an announcement email to the bitcoin-dev mailing list.</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md201"></a>
Maintenance release</h1>
<p>Note that bug fixes need to be backported only to releases for which no compatible release without the bug exists.</p>
<ol type="1">
<li>If there's no maintenance branch <span class="tt">$MAJOR.$MINOR</span>, create one: <div class="fragment"><div class="line">git checkout -b $MAJOR.$MINOR v$MAJOR.$MINOR.$((PATCH - 1))</div>
<div class="line">git push git@github.com:bitcoin-core/secp256k1.git $MAJOR.$MINOR</div>
</div><!-- fragment --></li>
<li>Open a pull request to the <span class="tt">$MAJOR.$MINOR</span> branch that<ul>
<li>includes the bug fixes,</li>
<li>finalizes the release notes similar to a regular release,</li>
<li>increments <span class="tt">_PKG_VERSION_PATCH</span> and <span class="tt">_LIB_VERSION_REVISION</span> in <span class="tt">configure.ac</span> and the <span class="tt">$PATCH</span> component of <span class="tt">project(libsecp256k1 VERSION ...)</span> and <span class="tt">${PROJECT_NAME}_LIB_VERSION_REVISION</span> in <span class="tt">CMakeLists.txt</span> (with commit message <span class="tt">"release: bump versions <a class="el" href="arith__uint256__tests_8cpp.html#aec8e239ec13a0a2253be548812b40c53">for</a> $MAJOR.$MINOR.$PATCH"</span>, for example).</li>
</ul>
</li>
<li>Perform the sanity checks on the PR branch.</li>
<li>After the PRs are merged, update the release branch, tag the commit, and push the tag: <div class="fragment"><div class="line">git checkout $MAJOR.$MINOR &amp;&amp; git pull</div>
<div class="line">git tag -s v$MAJOR.$MINOR.$PATCH -m &quot;libsecp256k1 $MAJOR.$MINOR.$PATCH&quot;</div>
<div class="line">git push git@github.com:bitcoin-core/secp256k1.git v$MAJOR.$MINOR.$PATCH</div>
</div><!-- fragment --></li>
<li>Create a new GitHub release with a link to the corresponding entry in <a class="el" href="md_src_2secp256k1_2_c_h_a_n_g_e_l_o_g.html">CHANGELOG.md</a>.</li>
<li>Send an announcement email to the bitcoin-dev mailing list.</li>
<li>Open PR to the master branch that includes a commit (with commit message <span class="tt">"release notes: add $MAJOR.$MINOR.$PATCH"</span>, for example) that adds release notes to <a class="el" href="md_src_2secp256k1_2_c_h_a_n_g_e_l_o_g.html">CHANGELOG.md</a>. </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
