<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bitcoind: SerialTaskRunner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bitcoin.ico"/></td>
  <td id="projectalign">
   <div id="projectname">bitcoind<span id="projectnumber">&#160;2.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_serial_task_runner.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">SerialTaskRunner Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="scheduler_8h_source.html">scheduler.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for SerialTaskRunner:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_serial_task_runner.png" usemap="#SerialTaskRunner_map" alt=""/>
  <map id="SerialTaskRunner_map" name="SerialTaskRunner_map">
<area href="classutil_1_1_task_runner_interface.html" alt="TaskRunnerInterface" shape="rect" coords="0,0,129,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af7f45abc57e073f1878e92f83067e6e8" id="r_af7f45abc57e073f1878e92f83067e6e8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7f45abc57e073f1878e92f83067e6e8">SerialTaskRunner</a> (<a class="el" href="class_c_scheduler.html">CScheduler</a> &amp;scheduler <a class="el" href="attributes_8h.html#a37bc3dacb49779a0d18439d4383e5fd9">LIFETIMEBOUND</a>)</td></tr>
<tr class="memitem:a24b3cba006ccdd9bfa1ea82e55126688" id="r_a24b3cba006ccdd9bfa1ea82e55126688"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a24b3cba006ccdd9bfa1ea82e55126688">insert</a> (std::function&lt; void()&gt; func) override <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(!m_callbacks_mutex)</td></tr>
<tr class="memitem:a12bf766b6af12f2b5b0b8c689428477b" id="r_a12bf766b6af12f2b5b0b8c689428477b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12bf766b6af12f2b5b0b8c689428477b">flush</a> () override <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(!m_callbacks_mutex)</td></tr>
<tr class="memitem:afb6c687105362d1ec6906d7834cccf8f" id="r_afb6c687105362d1ec6906d7834cccf8f"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb6c687105362d1ec6906d7834cccf8f">size</a> () override <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(!m_callbacks_mutex)</td></tr>
<tr class="inherit_header pub_methods_classutil_1_1_task_runner_interface"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classutil_1_1_task_runner_interface')"><span class="dynarrow"><span class="arrowhead closed"></span></span>Public Member Functions inherited from <a class="el" href="classutil_1_1_task_runner_interface.html">TaskRunnerInterface</a></td></tr>
<tr class="memitem:aff8f57e0f902bcda2f2de5f0f1d7a375 inherit pub_methods_classutil_1_1_task_runner_interface" id="r_aff8f57e0f902bcda2f2de5f0f1d7a375"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutil_1_1_task_runner_interface.html#aff8f57e0f902bcda2f2de5f0f1d7a375">~TaskRunnerInterface</a> ()=default</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class used by <a class="el" href="class_c_scheduler.html">CScheduler</a> clients which may schedule multiple jobs which are required to be run serially. Jobs may not be run on the same thread, but no two jobs will be executed at the same time and memory will be release-acquire consistent (the scheduler will internally do an acquire before invoking a callback as well as a release at the end). In practice this means that a callback <a class="el" href="util__tests_8cpp.html#a111da81ae5883147168bbb8366377b10">B()</a> will be able to observe all of the effects of callback A() which executed before it. </p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af7f45abc57e073f1878e92f83067e6e8" name="af7f45abc57e073f1878e92f83067e6e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7f45abc57e073f1878e92f83067e6e8">&#9670;&#160;</a></span>SerialTaskRunner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_serial_task_runner.html">SerialTaskRunner</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_scheduler.html">CScheduler</a> &amp;scheduler</td>          <td class="paramname"><span class="paramname"><em>LIFETIMEBOUND</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel explicit">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a12bf766b6af12f2b5b0b8c689428477b" name="a12bf766b6af12f2b5b0b8c689428477b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12bf766b6af12f2b5b0b8c689428477b">&#9670;&#160;</a></span>flush()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void flush </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Processes all remaining queue members on the calling thread, blocking until queue is empty Must be called after the <a class="el" href="class_c_scheduler.html">CScheduler</a> has no remaining processing threads! </p>

<p>Implements <a class="el" href="classutil_1_1_task_runner_interface.html#a50ab71f4bc571f6e246b20db4b3dd131">TaskRunnerInterface</a>.</p>

</div>
</div>
<a id="a24b3cba006ccdd9bfa1ea82e55126688" name="a24b3cba006ccdd9bfa1ea82e55126688"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24b3cba006ccdd9bfa1ea82e55126688">&#9670;&#160;</a></span>insert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void insert </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; void()&gt;</td>          <td class="paramname"><span class="paramname"><em>func</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add a callback to be executed. Callbacks are executed serially and memory is release-acquire consistent between callback executions. Practically, this means that callbacks can behave as if they are executed in order by a single thread. </p>

<p>Implements <a class="el" href="classutil_1_1_task_runner_interface.html#a6eb0f1e7bed3d6832bf23c68138c6956">TaskRunnerInterface</a>.</p>

</div>
</div>
<a id="afb6c687105362d1ec6906d7834cccf8f" name="afb6c687105362d1ec6906d7834cccf8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb6c687105362d1ec6906d7834cccf8f">&#9670;&#160;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t size </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of currently pending events. </p>

<p>Implements <a class="el" href="classutil_1_1_task_runner_interface.html#a56d807462b9d24ed3ac7ff22a5418953">TaskRunnerInterface</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="scheduler_8h_source.html">scheduler.h</a></li>
<li>src/<a class="el" href="scheduler_8cpp.html">scheduler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_serial_task_runner.html">SerialTaskRunner</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
