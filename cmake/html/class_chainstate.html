<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bitcoind: Chainstate Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bitcoin.ico"/></td>
  <td id="projectalign">
   <div id="projectname">bitcoind<span id="projectnumber">&#160;2.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_chainstate.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Chainstate Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="validation_8h_source.html">validation.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Chainstate:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_chainstate.png" usemap="#Chainstate_map" alt=""/>
  <map id="Chainstate_map" name="Chainstate_map">
<area href="class_dummy_chain_state.html" alt="DummyChainState" shape="rect" coords="0,56,114,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a70b163a8bca70b51736e75cf3f6282f0" id="r_a70b163a8bca70b51736e75cf3f6282f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a70b163a8bca70b51736e75cf3f6282f0">Chainstate</a> (<a class="el" href="class_c_tx_mem_pool.html">CTxMemPool</a> *mempool, <a class="el" href="classnode_1_1_block_manager.html">node::BlockManager</a> &amp;blockman, <a class="el" href="class_chainstate_manager.html">ChainstateManager</a> &amp;chainman, std::optional&lt; <a class="el" href="classuint256.html">uint256</a> &gt; from_snapshot_blockhash=std::nullopt)</td></tr>
<tr class="memitem:a4afdb9493bd2ee94b23c7b5dd6c51bbc" id="r_a4afdb9493bd2ee94b23c7b5dd6c51bbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfs_1_1path.html">fs::path</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4afdb9493bd2ee94b23c7b5dd6c51bbc">StoragePath</a> () const</td></tr>
<tr class="memdesc:a4afdb9493bd2ee94b23c7b5dd6c51bbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return path to chainstate leveldb directory.  <br /></td></tr>
<tr class="memitem:a870d55495c6a85e99afda4b4788d77e7" id="r_a870d55495c6a85e99afda4b4788d77e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structkernel_1_1_chainstate_role.html">kernel::ChainstateRole</a> GetRole() const <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a870d55495c6a85e99afda4b4788d77e7">InitCoinsDB</a> (size_t cache_size_bytes, bool in_memory, bool should_wipe)</td></tr>
<tr class="memitem:a0d01ef96f22f8aaf273e8e03d993e30a" id="r_a0d01ef96f22f8aaf273e8e03d993e30a"><td class="memItemLeft" align="right" valign="top">void InitCoinsCache(size_t cache_size_bytes) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0d01ef96f22f8aaf273e8e03d993e30a">CanFlushToDisk</a> () const <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(</td></tr>
<tr class="memitem:aaffd71a7e774d677fb4cd31eddd20820" id="r_aaffd71a7e774d677fb4cd31eddd20820"><td class="memItemLeft" align="right" valign="top"><a class="el" href="validation_8h.html#a6b7ed8f1aa31880e0db11fd5d379152d">Assumeutxo</a> m_assumeutxo&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaffd71a7e774d677fb4cd31eddd20820">GUARDED_BY</a> (<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a>)</td></tr>
<tr class="memitem:a75c70a29f731e16a8a0c7447bac1615a" id="r_a75c70a29f731e16a8a0c7447bac1615a"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="classuint256.html">uint256</a> &gt; m_target_blockhash&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a75c70a29f731e16a8a0c7447bac1615a">GUARDED_BY</a> (<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a>)</td></tr>
<tr class="memitem:a2252973decf90457e41f70caba718ec0" id="r_a2252973decf90457e41f70caba718ec0"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="struct_assumeutxo_hash.html">AssumeutxoHash</a> &gt; m_target_utxohash&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2252973decf90457e41f70caba718ec0">GUARDED_BY</a> (<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a>)</td></tr>
<tr class="memitem:a9dce5b2ccab7cbd5ea485e13491bcdef" id="r_a9dce5b2ccab7cbd5ea485e13491bcdef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9dce5b2ccab7cbd5ea485e13491bcdef">CoinsTip</a> () <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(</td></tr>
<tr class="memitem:ad876ac510821396146002e921946e008" id="r_ad876ac510821396146002e921946e008"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_coins_view_d_b.html">CCoinsViewDB</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad876ac510821396146002e921946e008">CoinsDB</a> () <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(</td></tr>
<tr class="memitem:ac2dc9bde2175dbfb05382c6e8033db28" id="r_ac2dc9bde2175dbfb05382c6e8033db28"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_tx_mem_pool.html">CTxMemPool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac2dc9bde2175dbfb05382c6e8033db28">GetMempool</a> ()</td></tr>
<tr class="memitem:aee503ee1391fbb6fba220881c203510a" id="r_aee503ee1391fbb6fba220881c203510a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_coins_view_error_catcher.html">CCoinsViewErrorCatcher</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aee503ee1391fbb6fba220881c203510a">CoinsErrorCatcher</a> () <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(</td></tr>
<tr class="memitem:a0ba91dec9c233f4e0deda06285b6bbbe" id="r_a0ba91dec9c233f4e0deda06285b6bbbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0ba91dec9c233f4e0deda06285b6bbbe">ResetCoinsViews</a> ()</td></tr>
<tr class="memdesc:a0ba91dec9c233f4e0deda06285b6bbbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructs all objects related to accessing the UTXO set.  <br /></td></tr>
<tr class="memitem:a0f9f0cdb703638cb9818a9b41158ac6a" id="r_a0f9f0cdb703638cb9818a9b41158ac6a"><td class="memItemLeft" align="right" valign="top">bool ResizeCoinsCaches(size_t coinstip_size, size_t coinsdb_size) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0f9f0cdb703638cb9818a9b41158ac6a">FlushStateToDisk</a> (<a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;state, <a class="el" href="validation_8h.html#ab30a99e75e9dc44356d1ad6bdd184ae0">FlushStateMode</a> mode, int nManualPruneHeight=0)</td></tr>
<tr class="memitem:a7c77d9ae490826de80fea16e44c5e97f" id="r_a7c77d9ae490826de80fea16e44c5e97f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7c77d9ae490826de80fea16e44c5e97f">ForceFlushStateToDisk</a> ()</td></tr>
<tr class="memdesc:a7c77d9ae490826de80fea16e44c5e97f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unconditionally flush all changes to disk.  <br /></td></tr>
<tr class="memitem:afccc404d3f648d7834ee7522ca348b41" id="r_afccc404d3f648d7834ee7522ca348b41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afccc404d3f648d7834ee7522ca348b41">PruneAndFlush</a> ()</td></tr>
<tr class="memitem:a5286c896c77d30226698c47b3f2dfc33" id="r_a5286c896c77d30226698c47b3f2dfc33"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5286c896c77d30226698c47b3f2dfc33">DisconnectTip</a> (<a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;state, <a class="el" href="class_disconnected_block_transactions.html">DisconnectedBlockTransactions</a> *disconnectpool) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a></td></tr>
<tr class="memitem:abfebdf0f5e72069d4dfc2486fc590e08" id="r_abfebdf0f5e72069d4dfc2486fc590e08"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abfebdf0f5e72069d4dfc2486fc590e08">ReplayBlocks</a> ()</td></tr>
<tr class="memitem:a2e0fcf64c918330f1f0ca3be2a117da2" id="r_a2e0fcf64c918330f1f0ca3be2a117da2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e0fcf64c918330f1f0ca3be2a117da2">NeedsRedownload</a> () const <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memitem:a1012305331357fcebb918b4e55b92448" id="r_a1012305331357fcebb918b4e55b92448"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1012305331357fcebb918b4e55b92448">LoadGenesisBlock</a> ()</td></tr>
<tr class="memitem:ab86ef2ab974ae064997b910e161c4849" id="r_ab86ef2ab974ae064997b910e161c4849"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab86ef2ab974ae064997b910e161c4849">TryAddBlockIndexCandidate</a> (<a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memitem:ab1a46f0614b890eb2be89745e2526b7c" id="r_ab1a46f0614b890eb2be89745e2526b7c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1a46f0614b890eb2be89745e2526b7c">PruneBlockIndexCandidates</a> ()</td></tr>
<tr class="memitem:a06368acc383ffa8737427c7279e7d8ac" id="r_a06368acc383ffa8737427c7279e7d8ac"><td class="memItemLeft" align="right" valign="top">void ClearBlockIndexCandidates() <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a06368acc383ffa8737427c7279e7d8ac">FindForkInGlobalIndex</a> (const <a class="el" href="struct_c_block_locator.html">CBlockLocator</a> &amp;locator) const <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memitem:a1ea13869144ef7ef6c69114ce9834a70" id="r_a1ea13869144ef7ef6c69114ce9834a70"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ea13869144ef7ef6c69114ce9834a70">LoadChainTip</a> () <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memitem:a52cbd849b01fb79124389f885da05779" id="r_a52cbd849b01fb79124389f885da05779"><td class="memItemLeft" align="right" valign="top"><a class="el" href="validation_8h.html#ab8482b5889c2dd7bcef2c3a0523d3def">CoinsCacheSizeState</a> GetCoinsCacheSizeState() <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="validation_8h.html#ab8482b5889c2dd7bcef2c3a0523d3def">CoinsCacheSizeState</a> GetCoinsCacheSizeState(size_t max_coins_cache_size_bytes, size_t max_mempool_size_bytes) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(std::string <a class="el" href="bitcoin-cli_8cpp.html#aec2c30b1707eac00ff7e4fb5b3f7a92d">ToString</a>() <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="sync_8h.html#a5d71768bc9626b7482055d56d4e2c533">RecursiveMutex</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a52cbd849b01fb79124389f885da05779">MempoolMutex</a> () const <a class="el" href="thread__annotations_8h.html#ab355c21df501f97a4a5e63a868373c4f">LOCK_RETURNED</a>(<a class="el" href="#a0391c777447c32c2e0d8cfc900a822ca">m_mempool</a> -&gt; <a class="el" href="#addd1f086c79ae3b4f737851aaa60b861">cs</a>)</td></tr>
<tr class="memdesc:a52cbd849b01fb79124389f885da05779"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indirection necessary to make lock annotations work with an optional mempool.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-attribs" class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:ae4a76e5b8e269dba63add5f28146fbee" id="r_ae4a76e5b8e269dba63add5f28146fbee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classnode_1_1_block_manager.html">node::BlockManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae4a76e5b8e269dba63add5f28146fbee">m_blockman</a></td></tr>
<tr class="memitem:a849eb656e60bb05783801b88ea02c020" id="r_a849eb656e60bb05783801b88ea02c020"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_chainstate_manager.html">ChainstateManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a849eb656e60bb05783801b88ea02c020">m_chainman</a></td></tr>
<tr class="memitem:ad041fc477f2d0f0774b264bf6f371810" id="r_ad041fc477f2d0f0774b264bf6f371810"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_chain.html">CChain</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad041fc477f2d0f0774b264bf6f371810">m_chain</a></td></tr>
<tr class="memitem:a37f0e70024a7d2d694ae27d34609de0e" id="r_a37f0e70024a7d2d694ae27d34609de0e"><td class="memItemLeft" align="right" valign="top">const std::optional&lt; <a class="el" href="classuint256.html">uint256</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a37f0e70024a7d2d694ae27d34609de0e">m_from_snapshot_blockhash</a></td></tr>
<tr class="memitem:a13f930c315cbf69ccbac5e6187ea5150" id="r_a13f930c315cbf69ccbac5e6187ea5150"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *SnapshotBase() const <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *TargetBlock() const <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(void SetTargetBlock(<a class="el" href="class_c_block_index.html">CBlockIndex</a> *block) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(void SetTargetBlockHash(<a class="el" href="classuint256.html">uint256</a> block_hash) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(boo&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a13f930c315cbf69ccbac5e6187ea5150">ReachedTarget</a> )() const <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(</td></tr>
<tr class="memdesc:a13f930c315cbf69ccbac5e6187ea5150"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if chainstate reached target block.  <br /></td></tr>
<tr class="memitem:ab431e79e9a33a0a82cc611f3f8684917" id="r_ab431e79e9a33a0a82cc611f3f8684917"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="class_c_block_index.html">CBlockIndex</a> *, <a class="el" href="structnode_1_1_c_block_index_work_comparator.html">node::CBlockIndexWorkComparator</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab431e79e9a33a0a82cc611f3f8684917">setBlockIndexCandidates</a></td></tr>
<tr class="memitem:a209fef4fed4aee7188492631ecc6a782" id="r_a209fef4fed4aee7188492631ecc6a782"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a209fef4fed4aee7188492631ecc6a782">m_coinsdb_cache_size_bytes</a> {0}</td></tr>
<tr class="memdesc:a209fef4fed4aee7188492631ecc6a782"><td class="mdescLeft">&#160;</td><td class="mdescRight">The cache size of the on-disk coins view.  <br /></td></tr>
<tr class="memitem:a9f27f82f81429b6be783bb2ba38a7383" id="r_a9f27f82f81429b6be783bb2ba38a7383"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f27f82f81429b6be783bb2ba38a7383">m_coinstip_cache_size_bytes</a> {0}</td></tr>
<tr class="memdesc:a9f27f82f81429b6be783bb2ba38a7383"><td class="mdescLeft">&#160;</td><td class="mdescRight">The cache size of the in-memory coins view.  <br /></td></tr>
<tr class="memitem:a0487c7fe4cdc89e309556f86c2988c80" id="r_a0487c7fe4cdc89e309556f86c2988c80"><td class="memItemLeft" align="right" valign="top">bool ActivateBestChain(<a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;state, std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; pblock=nullptr) <a class="el" href="thread__annotations_8h.html#a6bb97382864d0bd2cd4dd5191bb03f6c">LOCKS_EXCLUDED</a>(<a class="el" href="validation_8h.html#aeaef80b01ee5387f474a63ed23c9cc50">DisconnectResult</a> DisconnectBlock(const <a class="el" href="class_c_block.html">CBlock</a> &amp;block, const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex, <a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;view) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(boo&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0487c7fe4cdc89e309556f86c2988c80">ConnectBlock</a> )(const <a class="el" href="class_c_block.html">CBlock</a> &amp;block, <a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;state, <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex, <a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;view, bool fJustCheck=false) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memitem:addd1f086c79ae3b4f737851aaa60b861" id="r_addd1f086c79ae3b4f737851aaa60b861"><td class="memItemLeft" align="right" valign="top">bool <a class="el" href="#a0391c777447c32c2e0d8cfc900a822ca">m_mempool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#addd1f086c79ae3b4f737851aaa60b861">cs</a></td></tr>
<tr class="memitem:aaa64fbfbe0e25889388c2782592a42ba" id="r_aaa64fbfbe0e25889388c2782592a42ba"><td class="memItemLeft" align="right" valign="top">bool PreciousBlock(<a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;state, <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex) <a class="el" href="thread__annotations_8h.html#a6bb97382864d0bd2cd4dd5191bb03f6c">LOCKS_EXCLUDED</a>(bool <a class="el" href="blockchain_8cpp.html#a71686ebfe61025c0c683b6658b7e0def">InvalidateBlock</a>(<a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;state, <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex) <a class="el" href="thread__annotations_8h.html#a6bb97382864d0bd2cd4dd5191bb03f6c">LOCKS_EXCLUDED</a>(void SetBlockFailureFlags(<a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(voi&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa64fbfbe0e25889388c2782592a42ba">ResetBlockFailureFlags</a> )(<a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pro-methods" class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a8aaacc9cef5aac71f39b45631ec5ea74" id="r_a8aaacc9cef5aac71f39b45631ec5ea74"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *m_cached_snapshot_base&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8aaacc9cef5aac71f39b45631ec5ea74">GUARDED_BY</a> (<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a>)</td></tr>
<tr class="memdesc:a8aaacc9cef5aac71f39b45631ec5ea74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cached result of LookupBlockIndex(*m_from_snapshot_blockhash).  <br /></td></tr>
<tr class="memitem:a1bcb4b2d2398c9de8483f02ef338d0f6" id="r_a1bcb4b2d2398c9de8483f02ef338d0f6"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *m_cached_target_block&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1bcb4b2d2398c9de8483f02ef338d0f6">GUARDED_BY</a> (<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a>)</td></tr>
<tr class="memdesc:a1bcb4b2d2398c9de8483f02ef338d0f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cached result of LookupBlockIndex(*m_target_blockhash).  <br /></td></tr>
<tr class="memitem:a034d8773d61b4257a107dac0e83c0bff" id="r_a034d8773d61b4257a107dac0e83c0bff"><td class="memItemLeft" align="right" valign="top">std::optional&lt; const char * &gt; m_last_script_check_reason_logged&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a034d8773d61b4257a107dac0e83c0bff">GUARDED_BY</a> (<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a>)</td></tr>
<tr class="memitem:a3c22f6ca5579e8366c312e116064b283" id="r_a3c22f6ca5579e8366c312e116064b283"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c22f6ca5579e8366c312e116064b283">ActivateBestChainStep</a> (<a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;state, <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindexMostWork, const std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; &amp;pblock, bool &amp;fInvalidFound, <a class="el" href="class_connect_trace.html">ConnectTrace</a> &amp;connectTrace) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a></td></tr>
<tr class="memitem:a5d8f3346d9afde7670582ba7270f65c0" id="r_a5d8f3346d9afde7670582ba7270f65c0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5d8f3346d9afde7670582ba7270f65c0">ConnectTip</a> (<a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;state, <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindexNew, std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; block_to_connect, <a class="el" href="class_connect_trace.html">ConnectTrace</a> &amp;connectTrace, <a class="el" href="class_disconnected_block_transactions.html">DisconnectedBlockTransactions</a> &amp;disconnectpool) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a></td></tr>
<tr class="memitem:a9c5078a4a04331cc35d986500a8b30b1" id="r_a9c5078a4a04331cc35d986500a8b30b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9c5078a4a04331cc35d986500a8b30b1">InvalidBlockFound</a> (<a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex, const <a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;state) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memitem:aa9ca3194eec690da7453dfb54549f554" id="r_aa9ca3194eec690da7453dfb54549f554"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9ca3194eec690da7453dfb54549f554">FindMostWorkChain</a> () <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memitem:a3a178fcf153b41445571e1153d23707c" id="r_a3a178fcf153b41445571e1153d23707c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3a178fcf153b41445571e1153d23707c">RollforwardBlock</a> (const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex, <a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;inputs) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memitem:a7d3637ae43c319b91b55b43ff1dc0a37" id="r_a7d3637ae43c319b91b55b43ff1dc0a37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d3637ae43c319b91b55b43ff1dc0a37">CheckForkWarningConditions</a> () <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memitem:acd1f6fc8d7b53d55405ed6107ef693ad" id="r_acd1f6fc8d7b53d55405ed6107ef693ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acd1f6fc8d7b53d55405ed6107ef693ad">InvalidChainFound</a> (<a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindexNew) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memitem:a6382a5c89f0cc48c00603fdfb6426caa" id="r_a6382a5c89f0cc48c00603fdfb6426caa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6382a5c89f0cc48c00603fdfb6426caa">MaybeUpdateMempoolForReorg</a> (<a class="el" href="class_disconnected_block_transactions.html">DisconnectedBlockTransactions</a> &amp;disconnectpool, bool fAddToMempool) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pro-attribs" class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a395a52bbdb9bd9589970a6b5c574eb1e" id="r_a395a52bbdb9bd9589970a6b5c574eb1e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sync_8h.html#a326d1d46ce05b5316d8ebe2694a10a6e">Mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a395a52bbdb9bd9589970a6b5c574eb1e">m_chainstate_mutex</a></td></tr>
<tr class="memitem:a0391c777447c32c2e0d8cfc900a822ca" id="r_a0391c777447c32c2e0d8cfc900a822ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_tx_mem_pool.html">CTxMemPool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0391c777447c32c2e0d8cfc900a822ca">m_mempool</a></td></tr>
<tr class="memitem:a33c67fb1b900add3e05efd125faaae85" id="r_a33c67fb1b900add3e05efd125faaae85"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="class_coins_views.html">CoinsViews</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a33c67fb1b900add3e05efd125faaae85">m_coins_views</a></td></tr>
<tr class="memdesc:a33c67fb1b900add3e05efd125faaae85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manages the UTXO set, which is a reflection of the contents of <span class="tt"><a class="el" href="#ad041fc477f2d0f0774b264bf6f371810">m_chain</a></span>.  <br /></td></tr>
<tr class="memitem:ac3ab13da2b6eca22b0e0c031835f12a7" id="r_ac3ab13da2b6eca22b0e0c031835f12a7"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="#a0391c777447c32c2e0d8cfc900a822ca">m_mempool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac3ab13da2b6eca22b0e0c031835f12a7">cs</a></td></tr>
<tr class="memitem:abb0a9547287e409bbd307dd312b87651" id="r_abb0a9547287e409bbd307dd312b87651"><td class="memItemLeft" align="right" valign="top">void UpdateTip(const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindexNew) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(NodeClock::time_poin&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb0a9547287e409bbd307dd312b87651">m_next_write</a> ) {NodeClock::time_point::max()}</td></tr>
<tr class="memitem:a9bdf1e9f55692f36e65e35912baa05b5" id="r_a9bdf1e9f55692f36e65e35912baa05b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classutil_1_1_result.html">util::Result</a>&lt; void &gt; InvalidateCoinsDBOnDisk() <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(friend&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9bdf1e9f55692f36e65e35912baa05b5">ChainstateManager</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_chainstate.html">Chainstate</a> stores and provides an API to update our local knowledge of the current best chain.</p>
<p>Eventually, the API here is targeted at being exposed externally as a consumable library, so any functions added must only call other class member functions, pure functions in other parts of the consensus library, callbacks via the validation interface, or read/write-to-disk functions (eventually this will also be via callbacks).</p>
<p>Anything that is contingent on the current tip of the chain is stored here, whereas block information and metadata independent of the current tip is kept in <span class="tt"><a class="el" href="class_block_manager.html">BlockManager</a></span>. </p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a70b163a8bca70b51736e75cf3f6282f0" name="a70b163a8bca70b51736e75cf3f6282f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70b163a8bca70b51736e75cf3f6282f0">&#9670;&#160;</a></span>Chainstate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_chainstate.html">Chainstate</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_tx_mem_pool.html">CTxMemPool</a> *</td>          <td class="paramname"><span class="paramname"><em>mempool</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classnode_1_1_block_manager.html">node::BlockManager</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blockman</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_chainstate_manager.html">ChainstateManager</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>chainman</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::optional&lt; <a class="el" href="classuint256.html">uint256</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>from_snapshot_blockhash</em></span><span class="paramdefsep"> = </span><span class="paramdefval">std::nullopt</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel explicit">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a3c22f6ca5579e8366c312e116064b283" name="a3c22f6ca5579e8366c312e116064b283"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c22f6ca5579e8366c312e116064b283">&#9670;&#160;</a></span>ActivateBestChainStep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ActivateBestChainStep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *</td>          <td class="paramname"><span class="paramname"><em>pindexMostWork</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>pblock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;</td>          <td class="paramname"><span class="paramname"><em>fInvalidFound</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_connect_trace.html">ConnectTrace</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>connectTrace</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the [start, end] (inclusive) of block heights we can prune.</p>
<p>start &gt; end is possible, meaning no blocks can be pruned.</p>
<p>Try to make some progress towards making pindexMostWork the active block. pblock is either nullptr or a pointer to a <a class="el" href="class_c_block.html">CBlock</a> corresponding to pindexMostWork.</p>
<dl class="section return"><dt>Returns</dt><dd>true unless a system error occurred </dd></dl>

</div>
</div>
<a id="a0d01ef96f22f8aaf273e8e03d993e30a" name="a0d01ef96f22f8aaf273e8e03d993e30a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d01ef96f22f8aaf273e8e03d993e30a">&#9670;&#160;</a></span>CanFlushToDisk()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void InitCoinsCache(size_t cache_size_bytes) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(bool CanFlushToDisk </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize the in-memory coins cache (to be done after the health of the on-disk database is verified).</p>
<dl class="section return"><dt>Returns</dt><dd>whether or not the <a class="el" href="class_coins_views.html">CoinsViews</a> object has been fully initialized and we can safely flush this object to disk. </dd></dl>

</div>
</div>
<a id="a7d3637ae43c319b91b55b43ff1dc0a37" name="a7d3637ae43c319b91b55b43ff1dc0a37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d3637ae43c319b91b55b43ff1dc0a37">&#9670;&#160;</a></span>CheckForkWarningConditions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CheckForkWarningConditions </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad876ac510821396146002e921946e008" name="ad876ac510821396146002e921946e008"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad876ac510821396146002e921946e008">&#9670;&#160;</a></span>CoinsDB()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_coins_view_d_b.html">CCoinsViewDB</a> &amp; CoinsDB </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>A reference to the on-disk UTXO set database. </dd></dl>

</div>
</div>
<a id="aee503ee1391fbb6fba220881c203510a" name="aee503ee1391fbb6fba220881c203510a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee503ee1391fbb6fba220881c203510a">&#9670;&#160;</a></span>CoinsErrorCatcher()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_coins_view_error_catcher.html">CCoinsViewErrorCatcher</a> &amp; CoinsErrorCatcher </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>A reference to a wrapped view of the in-memory UTXO set that handles disk read errors gracefully. </dd></dl>

</div>
</div>
<a id="a9dce5b2ccab7cbd5ea485e13491bcdef" name="a9dce5b2ccab7cbd5ea485e13491bcdef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dce5b2ccab7cbd5ea485e13491bcdef">&#9670;&#160;</a></span>CoinsTip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp; CoinsTip </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>A reference to the in-memory cache of the UTXO set. </dd></dl>

</div>
</div>
<a id="a5d8f3346d9afde7670582ba7270f65c0" name="a5d8f3346d9afde7670582ba7270f65c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d8f3346d9afde7670582ba7270f65c0">&#9670;&#160;</a></span>ConnectTip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ConnectTip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *</td>          <td class="paramname"><span class="paramname"><em>pindexNew</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>block_to_connect</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_connect_trace.html">ConnectTrace</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>connectTrace</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_disconnected_block_transactions.html">DisconnectedBlockTransactions</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>disconnectpool</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Connect a new block to m_chain. block_to_connect is either nullptr or a pointer to a <a class="el" href="class_c_block.html">CBlock</a> corresponding to pindexNew, to bypass loading it again from disk.</p>
<p>The block is added to connectTrace if connection succeeds. </p>

</div>
</div>
<a id="a5286c896c77d30226698c47b3f2dfc33" name="a5286c896c77d30226698c47b3f2dfc33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5286c896c77d30226698c47b3f2dfc33">&#9670;&#160;</a></span>DisconnectTip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DisconnectTip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_disconnected_block_transactions.html">DisconnectedBlockTransactions</a> *</td>          <td class="paramname"><span class="paramname"><em>disconnectpool</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disconnect m_chain's tip. After calling, the mempool will be in an inconsistent state, with transactions from disconnected blocks being added to disconnectpool. You should make the mempool consistent again by calling MaybeUpdateMempoolForReorg. with cs_main held.</p>
<p>If disconnectpool is nullptr, then no disconnected transactions are added to disconnectpool (note that the caller is responsible for mempool consistency in any case). </p>

</div>
</div>
<a id="a06368acc383ffa8737427c7279e7d8ac" name="a06368acc383ffa8737427c7279e7d8ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06368acc383ffa8737427c7279e7d8ac">&#9670;&#160;</a></span>FindForkInGlobalIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_c_block_index.html">CBlockIndex</a> * FindForkInGlobalIndex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_c_block_locator.html">CBlockLocator</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>locator</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find the last common block of this chain and a locator. </p>

</div>
</div>
<a id="aa9ca3194eec690da7453dfb54549f554" name="aa9ca3194eec690da7453dfb54549f554"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9ca3194eec690da7453dfb54549f554">&#9670;&#160;</a></span>FindMostWorkChain()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_block_index.html">CBlockIndex</a> * FindMostWorkChain </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the tip of the chain with the most work in it, that isn't known to be invalid (it's however far from certain to be valid). </p>

</div>
</div>
<a id="a0f9f0cdb703638cb9818a9b41158ac6a" name="a0f9f0cdb703638cb9818a9b41158ac6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f9f0cdb703638cb9818a9b41158ac6a">&#9670;&#160;</a></span>FlushStateToDisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FlushStateToDisk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="validation_8h.html#ab30a99e75e9dc44356d1ad6bdd184ae0">FlushStateMode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>nManualPruneHeight</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resize the <a class="el" href="class_coins_views.html">CoinsViews</a> caches dynamically and flush state to disk. </p><dl class="section return"><dt>Returns</dt><dd>true unless an error occurred during the flush. Update the on-disk chain state. The caches and indexes are flushed depending on the mode we're called with if they're too large, if it's been a while since the last write, or always and in all cases if we're in prune mode and are deleting files.</dd></dl>
<p>If <a class="el" href="validation_8h.html#ab30a99e75e9dc44356d1ad6bdd184ae0ab50339a10e1de285ac99d4c3990b8693">FlushStateMode::NONE</a> is used, then FlushStateToDisk(...) won't do anything besides checking if we need to prune.</p>
<dl class="section return"><dt>Returns</dt><dd>true unless a system error occurred </dd></dl>

</div>
</div>
<a id="a7c77d9ae490826de80fea16e44c5e97f" name="a7c77d9ae490826de80fea16e44c5e97f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c77d9ae490826de80fea16e44c5e97f">&#9670;&#160;</a></span>ForceFlushStateToDisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ForceFlushStateToDisk </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unconditionally flush all changes to disk. </p>

</div>
</div>
<a id="ac2dc9bde2175dbfb05382c6e8033db28" name="ac2dc9bde2175dbfb05382c6e8033db28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2dc9bde2175dbfb05382c6e8033db28">&#9670;&#160;</a></span>GetMempool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_tx_mem_pool.html">CTxMemPool</a> * GetMempool </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>A pointer to the mempool. </dd></dl>

</div>
</div>
<a id="a2252973decf90457e41f70caba718ec0" name="a2252973decf90457e41f70caba718ec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2252973decf90457e41f70caba718ec0">&#9670;&#160;</a></span>GUARDED_BY() <span class="overload">[1/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="struct_assumeutxo_hash.html">AssumeutxoHash</a> &gt; m_target_utxohash GUARDED_BY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a></td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hash of the UTXO set at the target block, computed when the chainstate reaches the target block, and null before then. </p>

</div>
</div>
<a id="a75c70a29f731e16a8a0c7447bac1615a" name="a75c70a29f731e16a8a0c7447bac1615a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75c70a29f731e16a8a0c7447bac1615a">&#9670;&#160;</a></span>GUARDED_BY() <span class="overload">[2/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="classuint256.html">uint256</a> &gt; m_target_blockhash GUARDED_BY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a></td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Target block for this chainstate. If this is not set, chainstate will target the most-work, valid block. If this is set, <a class="el" href="class_chainstate_manager.html">ChainstateManager</a> considers this a "historical" chainstate since it will only contain old blocks up to the target block, not newer blocks. </p>

</div>
</div>
<a id="aaffd71a7e774d677fb4cd31eddd20820" name="aaffd71a7e774d677fb4cd31eddd20820"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaffd71a7e774d677fb4cd31eddd20820">&#9670;&#160;</a></span>GUARDED_BY() <span class="overload">[3/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="validation_8h.html#a6b7ed8f1aa31880e0db11fd5d379152d">Assumeutxo</a> m_assumeutxo GUARDED_BY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a></td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="validation_8h.html#a6b7ed8f1aa31880e0db11fd5d379152d" title="Chainstate assumeutxo validity.">Assumeutxo</a> state indicating whether all blocks in the chain were validated, or if the chainstate is based on an assumeutxo snapshot and the snapshot has not been validated. </p>

</div>
</div>
<a id="a034d8773d61b4257a107dac0e83c0bff" name="a034d8773d61b4257a107dac0e83c0bff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a034d8773d61b4257a107dac0e83c0bff">&#9670;&#160;</a></span>GUARDED_BY() <span class="overload">[4/6]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; const char * &gt; m_last_script_check_reason_logged GUARDED_BY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a></td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1bcb4b2d2398c9de8483f02ef338d0f6" name="a1bcb4b2d2398c9de8483f02ef338d0f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bcb4b2d2398c9de8483f02ef338d0f6">&#9670;&#160;</a></span>GUARDED_BY() <span class="overload">[5/6]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *m_cached_target_block GUARDED_BY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a></td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel mutable">mutable</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cached result of LookupBlockIndex(*m_target_blockhash). </p>

</div>
</div>
<a id="a8aaacc9cef5aac71f39b45631ec5ea74" name="a8aaacc9cef5aac71f39b45631ec5ea74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aaacc9cef5aac71f39b45631ec5ea74">&#9670;&#160;</a></span>GUARDED_BY() <span class="overload">[6/6]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *m_cached_snapshot_base GUARDED_BY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">::cs_main</a></td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel mutable">mutable</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cached result of LookupBlockIndex(*m_from_snapshot_blockhash). </p>

</div>
</div>
<a id="a870d55495c6a85e99afda4b4788d77e7" name="a870d55495c6a85e99afda4b4788d77e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a870d55495c6a85e99afda4b4788d77e7">&#9670;&#160;</a></span>InitCoinsDB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitCoinsDB </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>cache_size_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>in_memory</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>should_wipe</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the current role of the chainstate. See <span class="tt"><a class="el" href="class_chainstate_manager.html">ChainstateManager</a></span> documentation for a description of the different types of chainstates.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="struct_chainstate_role.html" title="Information about chainstate that notifications are sent from.">ChainstateRole</a> Initialize the <a class="el" href="class_coins_views.html">CoinsViews</a> UTXO set database management data structures. The in-memory cache is initialized separately.</dd></dl>
<p>All parameters forwarded to <a class="el" href="class_coins_views.html">CoinsViews</a>. </p>

</div>
</div>
<a id="a9c5078a4a04331cc35d986500a8b30b1" name="a9c5078a4a04331cc35d986500a8b30b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c5078a4a04331cc35d986500a8b30b1">&#9670;&#160;</a></span>InvalidBlockFound()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void InvalidBlockFound </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *</td>          <td class="paramname"><span class="paramname"><em>pindex</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_block_validation_state.html">BlockValidationState</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>state</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="acd1f6fc8d7b53d55405ed6107ef693ad" name="acd1f6fc8d7b53d55405ed6107ef693ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd1f6fc8d7b53d55405ed6107ef693ad">&#9670;&#160;</a></span>InvalidChainFound()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void InvalidChainFound </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *</td>          <td class="paramname"><span class="paramname"><em>pindexNew</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1ea13869144ef7ef6c69114ce9834a70" name="a1ea13869144ef7ef6c69114ce9834a70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ea13869144ef7ef6c69114ce9834a70">&#9670;&#160;</a></span>LoadChainTip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LoadChainTip </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update the chain tip based on database information, i.e. <a class="el" href="#a9dce5b2ccab7cbd5ea485e13491bcdef">CoinsTip()</a>'s best block. </p>

</div>
</div>
<a id="a1012305331357fcebb918b4e55b92448" name="a1012305331357fcebb918b4e55b92448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1012305331357fcebb918b4e55b92448">&#9670;&#160;</a></span>LoadGenesisBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LoadGenesisBlock </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures we have a genesis block in the block tree, possibly writing one to disk. </p>

</div>
</div>
<a id="a6382a5c89f0cc48c00603fdfb6426caa" name="a6382a5c89f0cc48c00603fdfb6426caa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6382a5c89f0cc48c00603fdfb6426caa">&#9670;&#160;</a></span>MaybeUpdateMempoolForReorg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MaybeUpdateMempoolForReorg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_disconnected_block_transactions.html">DisconnectedBlockTransactions</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>disconnectpool</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>fAddToMempool</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Make mempool consistent after a reorg, by re-adding or recursively erasing disconnected block transactions from the mempool, and also removing any other transactions from the mempool that are no longer valid given the new tip/height.</p>
<p>Note: we assume that disconnectpool only contains transactions that are NOT confirmed in the current chain nor already in the mempool (otherwise, in-mempool descendants of such transactions would be removed).</p>
<p>Passing fAddToMempool=false will skip trying to add the transactions back, and instead just erase from the mempool as needed. </p>

</div>
</div>
<a id="a52cbd849b01fb79124389f885da05779" name="a52cbd849b01fb79124389f885da05779"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52cbd849b01fb79124389f885da05779">&#9670;&#160;</a></span>MempoolMutex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="validation_8h.html#ab8482b5889c2dd7bcef2c3a0523d3def">CoinsCacheSizeState</a> GetCoinsCacheSizeState() <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="validation_8h.html#ab8482b5889c2dd7bcef2c3a0523d3def">CoinsCacheSizeState</a> GetCoinsCacheSizeState(size_t max_coins_cache_size_bytes, size_t max_mempool_size_bytes) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(std::string <a class="el" href="bitcoin-cli_8cpp.html#aec2c30b1707eac00ff7e4fb5b3f7a92d">ToString</a>() <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="sync_8h.html#a5d71768bc9626b7482055d56d4e2c533">RecursiveMutex</a> * MempoolMutex </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const-&gt;<a class="el" href="#addd1f086c79ae3b4f737851aaa60b861">cs</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indirection necessary to make lock annotations work with an optional mempool. </p>
<p>Dictates whether we need to flush the cache to disk or not.</p>
<dl class="section return"><dt>Returns</dt><dd>the state of the size of the coins cache. </dd></dl>

</div>
</div>
<a id="a2e0fcf64c918330f1f0ca3be2a117da2" name="a2e0fcf64c918330f1f0ca3be2a117da2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e0fcf64c918330f1f0ca3be2a117da2">&#9670;&#160;</a></span>NeedsRedownload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool NeedsRedownload </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Whether the chain state needs to be redownloaded due to lack of witness data </p>

</div>
</div>
<a id="afccc404d3f648d7834ee7522ca348b41" name="afccc404d3f648d7834ee7522ca348b41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afccc404d3f648d7834ee7522ca348b41">&#9670;&#160;</a></span>PruneAndFlush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PruneAndFlush </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prune blockfiles from the disk if necessary and then flush chainstate changes if we pruned. </p>

</div>
</div>
<a id="ab1a46f0614b890eb2be89745e2526b7c" name="ab1a46f0614b890eb2be89745e2526b7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1a46f0614b890eb2be89745e2526b7c">&#9670;&#160;</a></span>PruneBlockIndexCandidates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PruneBlockIndexCandidates </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete all entries in setBlockIndexCandidates that are worse than the current tip. </p>

</div>
</div>
<a id="abfebdf0f5e72069d4dfc2486fc590e08" name="abfebdf0f5e72069d4dfc2486fc590e08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfebdf0f5e72069d4dfc2486fc590e08">&#9670;&#160;</a></span>ReplayBlocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ReplayBlocks </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Replay blocks that aren't fully applied to the database. </p>

</div>
</div>
<a id="a0ba91dec9c233f4e0deda06285b6bbbe" name="a0ba91dec9c233f4e0deda06285b6bbbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ba91dec9c233f4e0deda06285b6bbbe">&#9670;&#160;</a></span>ResetCoinsViews()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ResetCoinsViews </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructs all objects related to accessing the UTXO set. </p>

</div>
</div>
<a id="a3a178fcf153b41445571e1153d23707c" name="a3a178fcf153b41445571e1153d23707c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a178fcf153b41445571e1153d23707c">&#9670;&#160;</a></span>RollforwardBlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool RollforwardBlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *</td>          <td class="paramname"><span class="paramname"><em>pindex</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>inputs</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Apply the effects of a block on the utxo cache, ignoring that it may already have been applied. </p>

</div>
</div>
<a id="a4afdb9493bd2ee94b23c7b5dd6c51bbc" name="a4afdb9493bd2ee94b23c7b5dd6c51bbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4afdb9493bd2ee94b23c7b5dd6c51bbc">&#9670;&#160;</a></span>StoragePath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfs_1_1path.html">fs::path</a> StoragePath </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return path to chainstate leveldb directory. </p>

</div>
</div>
<a id="ab86ef2ab974ae064997b910e161c4849" name="ab86ef2ab974ae064997b910e161c4849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab86ef2ab974ae064997b910e161c4849">&#9670;&#160;</a></span>TryAddBlockIndexCandidate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TryAddBlockIndexCandidate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *</td>          <td class="paramname"><span class="paramname"><em>pindex</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Field Documentation</h2>
<a id="a9bdf1e9f55692f36e65e35912baa05b5" name="a9bdf1e9f55692f36e65e35912baa05b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bdf1e9f55692f36e65e35912baa05b5">&#9670;&#160;</a></span>ChainstateManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classutil_1_1_result.html">util::Result</a>&lt;void&gt; InvalidateCoinsDBOnDisk () <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>( friend <a class="el" href="class_chainstate_manager.html">ChainstateManager</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>In case of an invalid snapshot, rename the coins leveldb directory so that it can be examined for issue diagnosis. </p>

</div>
</div>
<a id="a0487c7fe4cdc89e309556f86c2988c80" name="a0487c7fe4cdc89e309556f86c2988c80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0487c7fe4cdc89e309556f86c2988c80">&#9670;&#160;</a></span>ConnectBlock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ConnectBlock</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find the best known block, and make it the tip of the block chain. The result is either failure or an activated best chain. pblock is either nullptr or a pointer to a block that is already loaded (to avoid loading it again from disk).</p>
<p>ActivateBestChain is split into steps (see ActivateBestChainStep) so that we avoid holding cs_main for an extended period of time; the length of this call may be quite long during reindexing or a substantial reorg.</p>
<p>May not be called with cs_main held. May not be called in a validationinterface callback.</p>
<p>Note that if this is called while a snapshot chainstate is active, and if it is called on a validated chainstate whose tip has reached the base block of the snapshot, its execution will take <em>MINUTES</em> while it hashes the UTXO set to verify the assumeutxo value the snapshot was activated with. <span class="tt"><a class="el" href="cs__main_8cpp.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a></span> will be held during this time.</p>
<dl class="section return"><dt>Returns</dt><dd>true unless a system error occurred</dd></dl>
<p>Apply the effects of this block (with given index) on the UTXO set represented by coins. Validity checks that depend on the UTXO set are also done; <a class="el" href="#a0487c7fe4cdc89e309556f86c2988c80">ConnectBlock()</a> can fail if those validity checks fail (among other reasons). </p>

</div>
</div>
<a id="ac3ab13da2b6eca22b0e0c031835f12a7" name="ac3ab13da2b6eca22b0e0c031835f12a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3ab13da2b6eca22b0e0c031835f12a7">&#9670;&#160;</a></span>cs <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="#a0391c777447c32c2e0d8cfc900a822ca">m_mempool</a> cs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="addd1f086c79ae3b4f737851aaa60b861" name="addd1f086c79ae3b4f737851aaa60b861"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addd1f086c79ae3b4f737851aaa60b861">&#9670;&#160;</a></span>cs <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="#a0391c777447c32c2e0d8cfc900a822ca">m_mempool</a> cs</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae4a76e5b8e269dba63add5f28146fbee" name="ae4a76e5b8e269dba63add5f28146fbee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4a76e5b8e269dba63add5f28146fbee">&#9670;&#160;</a></span>m_blockman</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classnode_1_1_block_manager.html">node::BlockManager</a>&amp; m_blockman</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reference to a <a class="el" href="class_block_manager.html">BlockManager</a> instance which itself is shared across all <a class="el" href="class_chainstate.html">Chainstate</a> instances. </p>

</div>
</div>
<a id="ad041fc477f2d0f0774b264bf6f371810" name="ad041fc477f2d0f0774b264bf6f371810"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad041fc477f2d0f0774b264bf6f371810">&#9670;&#160;</a></span>m_chain</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_chain.html">CChain</a> m_chain</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The current chain of blockheaders we consult and build on. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="class_c_chain.html">CChain</a>, <a class="el" href="class_c_block_index.html">CBlockIndex</a>. </dd></dl>

</div>
</div>
<a id="a849eb656e60bb05783801b88ea02c020" name="a849eb656e60bb05783801b88ea02c020"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a849eb656e60bb05783801b88ea02c020">&#9670;&#160;</a></span>m_chainman</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_chainstate_manager.html">ChainstateManager</a>&amp; m_chainman</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The chainstate manager that owns this chainstate. The reference is necessary so that this instance can check whether it is the active chainstate within deeply nested method calls. </p>

</div>
</div>
<a id="a395a52bbdb9bd9589970a6b5c574eb1e" name="a395a52bbdb9bd9589970a6b5c574eb1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a395a52bbdb9bd9589970a6b5c574eb1e">&#9670;&#160;</a></span>m_chainstate_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sync_8h.html#a326d1d46ce05b5316d8ebe2694a10a6e">Mutex</a> m_chainstate_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The ChainState <a class="el" href="sync_8h.html#a326d1d46ce05b5316d8ebe2694a10a6e">Mutex</a> A lock that must be held when modifying this ChainState - held in ActivateBestChain() and <a class="el" href="blockchain_8cpp.html#a71686ebfe61025c0c683b6658b7e0def">InvalidateBlock()</a> </p>

</div>
</div>
<a id="a33c67fb1b900add3e05efd125faaae85" name="a33c67fb1b900add3e05efd125faaae85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33c67fb1b900add3e05efd125faaae85">&#9670;&#160;</a></span>m_coins_views</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="class_coins_views.html">CoinsViews</a>&gt; m_coins_views</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Manages the UTXO set, which is a reflection of the contents of <span class="tt"><a class="el" href="#ad041fc477f2d0f0774b264bf6f371810">m_chain</a></span>. </p>

</div>
</div>
<a id="a209fef4fed4aee7188492631ecc6a782" name="a209fef4fed4aee7188492631ecc6a782"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a209fef4fed4aee7188492631ecc6a782">&#9670;&#160;</a></span>m_coinsdb_cache_size_bytes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t m_coinsdb_cache_size_bytes {0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The cache size of the on-disk coins view. </p>

</div>
</div>
<a id="a9f27f82f81429b6be783bb2ba38a7383" name="a9f27f82f81429b6be783bb2ba38a7383"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f27f82f81429b6be783bb2ba38a7383">&#9670;&#160;</a></span>m_coinstip_cache_size_bytes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t m_coinstip_cache_size_bytes {0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The cache size of the in-memory coins view. </p>

</div>
</div>
<a id="a37f0e70024a7d2d694ae27d34609de0e" name="a37f0e70024a7d2d694ae27d34609de0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37f0e70024a7d2d694ae27d34609de0e">&#9670;&#160;</a></span>m_from_snapshot_blockhash</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::optional&lt;<a class="el" href="classuint256.html">uint256</a>&gt; m_from_snapshot_blockhash</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The blockhash which is the base of the snapshot this chainstate was created from.</p>
<p>std::nullopt if this chainstate was not created from a snapshot. </p>

</div>
</div>
<a id="a0391c777447c32c2e0d8cfc900a822ca" name="a0391c777447c32c2e0d8cfc900a822ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0391c777447c32c2e0d8cfc900a822ca">&#9670;&#160;</a></span>m_mempool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_tx_mem_pool.html">CTxMemPool</a>* m_mempool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Optional mempool that is kept in sync with the chain. Only the active chainstate has a mempool. </p>

</div>
</div>
<a id="abb0a9547287e409bbd307dd312b87651" name="abb0a9547287e409bbd307dd312b87651"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb0a9547287e409bbd307dd312b87651">&#9670;&#160;</a></span>m_next_write</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UpdateTip (const <a class="el" href="class_c_block_index.html">CBlockIndex</a>* pindexNew) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>( NodeClock::time_poin m_next_write)  {NodeClock::time_point::max()}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check warning conditions and do some notifications on new chain tip set. </p>

</div>
</div>
<a id="a13f930c315cbf69ccbac5e6187ea5150" name="a13f930c315cbf69ccbac5e6187ea5150"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13f930c315cbf69ccbac5e6187ea5150">&#9670;&#160;</a></span>ReachedTarget</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *SnapshotBase() const <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *TargetBlock() const <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(void SetTargetBlock(<a class="el" href="class_c_block_index.html">CBlockIndex</a> *block) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(void SetTargetBlockHash(<a class="el" href="classuint256.html">uint256</a> block_hash) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(boo ReachedTarget) () const <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if chainstate reached target block. </p>
<p>The base of the snapshot this chainstate was created from.</p>
<p>nullptr if this chainstate was not created from a snapshot.</p>
<p>Return target block which chainstate tip is expected to reach, if this is a historic chainstate being used to validate a snapshot, or null if chainstate targets the most-work block.</p>
<p>Set target block for this chainstate. If null, chainstate will target the most-work valid block. If non-null chainstate will be a historic chainstate and target the specified block.</p>
<p>Set target block for this chainstate using just a block hash. Useful when the block database has not been loaded yet. </p>

</div>
</div>
<a id="aaa64fbfbe0e25889388c2782592a42ba" name="aaa64fbfbe0e25889388c2782592a42ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa64fbfbe0e25889388c2782592a42ba">&#9670;&#160;</a></span>ResetBlockFailureFlags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ResetBlockFailureFlags</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mark a block as precious and reorganize.</p>
<p>May not be called in a validationinterface callback. Mark a block as invalid. Set invalidity status to all descendants of a block Remove invalidity status from a block, its descendants and ancestors and reconsider them for activation </p>

</div>
</div>
<a id="ab431e79e9a33a0a82cc611f3f8684917" name="ab431e79e9a33a0a82cc611f3f8684917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab431e79e9a33a0a82cc611f3f8684917">&#9670;&#160;</a></span>setBlockIndexCandidates</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="class_c_block_index.html">CBlockIndex</a>*, <a class="el" href="structnode_1_1_c_block_index_work_comparator.html">node::CBlockIndexWorkComparator</a>&gt; setBlockIndexCandidates</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The set of all <a class="el" href="class_c_block_index.html">CBlockIndex</a> entries that have as much work as our current tip or more, and transaction data needed to be validated (with BLOCK_VALID_TRANSACTIONS for each block and its parents back to the genesis block or an assumeutxo snapshot block). Entries may be failed, though, and pruning nodes may be missing the data for the block. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="validation_8h_source.html">validation.h</a></li>
<li>src/<a class="el" href="validation_8cpp.html">validation.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_chainstate.html">Chainstate</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
