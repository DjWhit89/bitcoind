<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bitcoind: src/script/descriptor.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bitcoin.ico"/></td>
  <td id="projectalign">
   <div id="projectname">bitcoind<span id="projectnumber">&#160;2.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('script_2descriptor_8cpp.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">descriptor.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="script_2descriptor_8h_source.html">script/descriptor.h</a>&gt;</code><br />
<code>#include &lt;hash.h&gt;</code><br />
<code>#include &lt;<a class="el" href="key__io_8h_source.html">key_io.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="pubkey_8h_source.html">pubkey.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="musig_8h_source.html">musig.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="miniscript_8h_source.html">script/miniscript.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="parsing_8h_source.html">script/parsing.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="script_2script_8h_source.html">script/script.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="signingprovider_8h_source.html">script/signingprovider.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="solver_8h_source.html">script/solver.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="uint256_8h_source.html">uint256.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="args_8h_source.html">common/args.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="span_8h_source.html">span.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="bip32_8h_source.html">util/bip32.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="check_8h_source.html">util/check.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="strencodings_8h_source.html">util/strencodings.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="vector_8h_source.html">util/vector.h</a>&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;numeric&gt;</code><br />
<code>#include &lt;optional&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a96c70a3a367b9b75d7dd3ccc121e21a6" id="r_a96c70a3a367b9b75d7dd3ccc121e21a6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96c70a3a367b9b75d7dd3ccc121e21a6">CheckChecksum</a> (std::span&lt; const char &gt; &amp;sp, bool require_checksum, std::string &amp;error, std::string *out_checksum=nullptr)</td></tr>
<tr class="memitem:aa72a50fdea67f724a5c35f0b41561296" id="r_aa72a50fdea67f724a5c35f0b41561296"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::unique_ptr&lt; <a class="el" href="struct_descriptor.html">Descriptor</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa72a50fdea67f724a5c35f0b41561296">Parse</a> (std::string_view descriptor, <a class="el" href="struct_flat_signing_provider.html">FlatSigningProvider</a> &amp;out, std::string &amp;error, bool require_checksum)</td></tr>
<tr class="memitem:aa9437a14bddb1c03bad468216020dcac" id="r_aa9437a14bddb1c03bad468216020dcac"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9437a14bddb1c03bad468216020dcac">GetDescriptorChecksum</a> (const std::string &amp;descriptor)</td></tr>
<tr class="memitem:a496a25c1d88122782c2a426d38394f0a" id="r_a496a25c1d88122782c2a426d38394f0a"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="struct_descriptor.html">Descriptor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a496a25c1d88122782c2a426d38394f0a">InferDescriptor</a> (const <a class="el" href="class_c_script.html">CScript</a> &amp;<a class="el" href="namespacescript.html">script</a>, const <a class="el" href="class_signing_provider.html">SigningProvider</a> &amp;provider)</td></tr>
<tr class="memitem:a701ef30b0fb75c016e64d898db1e6ae2" id="r_a701ef30b0fb75c016e64d898db1e6ae2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classuint256.html">uint256</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a701ef30b0fb75c016e64d898db1e6ae2">DescriptorID</a> (const <a class="el" href="struct_descriptor.html">Descriptor</a> &amp;desc)</td></tr>
</table>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a96c70a3a367b9b75d7dd3ccc121e21a6" name="a96c70a3a367b9b75d7dd3ccc121e21a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96c70a3a367b9b75d7dd3ccc121e21a6">&#9670;&#160;</a></span>CheckChecksum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CheckChecksum </td>
          <td>(</td>
          <td class="paramtype">std::span&lt; const char &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>sp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>require_checksum</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>error</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string *</td>          <td class="paramname"><span class="paramname"><em>out_checksum</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check a descriptor checksum, and update desc to be the checksum-less part. </p>

</div>
</div>
<a id="a701ef30b0fb75c016e64d898db1e6ae2" name="a701ef30b0fb75c016e64d898db1e6ae2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a701ef30b0fb75c016e64d898db1e6ae2">&#9670;&#160;</a></span>DescriptorID()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classuint256.html">uint256</a> DescriptorID </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_descriptor.html">Descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>desc</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unique identifier that may not change over time, unless explicitly marked as not backwards compatible. This is not part of BIP 380, not guaranteed to be interoperable and should not be exposed to the user. </p>

</div>
</div>
<a id="aa9437a14bddb1c03bad468216020dcac" name="aa9437a14bddb1c03bad468216020dcac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9437a14bddb1c03bad468216020dcac">&#9670;&#160;</a></span>GetDescriptorChecksum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string GetDescriptorChecksum </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>descriptor</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the checksum for a <span class="tt">descriptor</span>.</p>
<ul>
<li>If it already has one, and it is correct, return the checksum in the input.</li>
<li>If it already has one that is wrong, return "".</li>
<li>If it does not already have one, return the checksum that would need to be added. </li>
</ul>

</div>
</div>
<a id="a496a25c1d88122782c2a426d38394f0a" name="a496a25c1d88122782c2a426d38394f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a496a25c1d88122782c2a426d38394f0a">&#9670;&#160;</a></span>InferDescriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="struct_descriptor.html">Descriptor</a> &gt; InferDescriptor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_script.html">CScript</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>script</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_signing_provider.html">SigningProvider</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>provider</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find a descriptor for the specified <span class="tt"><a class="el" href="namespacescript.html">script</a></span>, using information from <span class="tt">provider</span> where possible.</p>
<p>A non-ranged descriptor which only generates the specified script will be returned in all circumstances.</p>
<p>For public keys with key origin information, this information will be preserved in the returned descriptor.</p>
<ul>
<li>If all information for solving <span class="tt"><a class="el" href="namespacescript.html">script</a></span> is present in <span class="tt">provider</span>, a descriptor will be returned which is IsSolvable() and encapsulates said information.</li>
<li>Failing that, if <span class="tt"><a class="el" href="namespacescript.html">script</a></span> corresponds to a known address type, an "addr()" descriptor will be returned (which is not IsSolvable()).</li>
<li>Failing that, a "raw()" descriptor is returned. </li>
</ul>

</div>
</div>
<a id="aa72a50fdea67f724a5c35f0b41561296" name="aa72a50fdea67f724a5c35f0b41561296"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa72a50fdea67f724a5c35f0b41561296">&#9670;&#160;</a></span>Parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::unique_ptr&lt; <a class="el" href="struct_descriptor.html">Descriptor</a> &gt; &gt; Parse </td>
          <td>(</td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>descriptor</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_flat_signing_provider.html">FlatSigningProvider</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>error</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>require_checksum</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parse a <span class="tt">descriptor</span> string. Included private keys are put in <span class="tt">out</span>.</p>
<p>If the descriptor has a checksum, it must be valid. If <span class="tt">require_checksum</span> is set, the checksum is mandatory - otherwise it is optional.</p>
<p>If a parse error occurs, or the checksum is missing/invalid, or anything else is wrong, an empty vector is returned. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="dir_fe414d616bd0c4668e6515f48824338f.html">script</a></li><li class="navelem"><a href="script_2descriptor_8cpp.html">descriptor.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
