<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bitcoind: Session Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bitcoin.ico"/></td>
  <td id="projectalign">
   <div id="projectname">bitcoind<span id="projectnumber">&#160;2.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classi2p_1_1sam_1_1_session.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Session Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="i2p_8h_source.html">i2p.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a85658cb9a754d70a1fe1ce0d645625c1" id="r_a85658cb9a754d70a1fe1ce0d645625c1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a85658cb9a754d70a1fe1ce0d645625c1">Session</a> (const <a class="el" href="classfs_1_1path.html">fs::path</a> &amp;private_key_file, const <a class="el" href="class_proxy.html">Proxy</a> &amp;control_host, std::shared_ptr&lt; <a class="el" href="class_c_thread_interrupt.html">CThreadInterrupt</a> &gt; interrupt)</td></tr>
<tr class="memitem:a814a19231bc9101a3be5e3dad542333f" id="r_a814a19231bc9101a3be5e3dad542333f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a814a19231bc9101a3be5e3dad542333f">Session</a> (const <a class="el" href="class_proxy.html">Proxy</a> &amp;control_host, std::shared_ptr&lt; <a class="el" href="class_c_thread_interrupt.html">CThreadInterrupt</a> &gt; interrupt)</td></tr>
<tr class="memitem:a12455f5db8475fe429d3ebf3aa84d7eb" id="r_a12455f5db8475fe429d3ebf3aa84d7eb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12455f5db8475fe429d3ebf3aa84d7eb">~Session</a> ()</td></tr>
<tr class="memitem:a96bbb63bd36a0974e6cbf9777b11520e" id="r_a96bbb63bd36a0974e6cbf9777b11520e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96bbb63bd36a0974e6cbf9777b11520e">Listen</a> (<a class="el" href="structi2p_1_1_connection.html">Connection</a> &amp;conn) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(!m_mutex)</td></tr>
<tr class="memitem:a374ecfa4bb67dfadeeec44e8c1481766" id="r_a374ecfa4bb67dfadeeec44e8c1481766"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a374ecfa4bb67dfadeeec44e8c1481766">Accept</a> (<a class="el" href="structi2p_1_1_connection.html">Connection</a> &amp;conn) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(!m_mutex)</td></tr>
<tr class="memitem:a89c66ea021e473f04482e4871d9e9bf9" id="r_a89c66ea021e473f04482e4871d9e9bf9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89c66ea021e473f04482e4871d9e9bf9">Connect</a> (const <a class="el" href="class_c_service.html">CService</a> &amp;to, <a class="el" href="structi2p_1_1_connection.html">Connection</a> &amp;conn, bool &amp;proxy_error) <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(!m_mutex)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>I2P SAM session. </p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a85658cb9a754d70a1fe1ce0d645625c1" name="a85658cb9a754d70a1fe1ce0d645625c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85658cb9a754d70a1fe1ce0d645625c1">&#9670;&#160;</a></span>Session() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Session </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfs_1_1path.html">fs::path</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>private_key_file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_proxy.html">Proxy</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>control_host</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="class_c_thread_interrupt.html">CThreadInterrupt</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>interrupt</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct a session. This will not initiate any IO, the session will be lazily created later when first used. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">private_key_file</td><td>Path to a private key file. If the file does not exist then the private key will be generated and saved into the file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">control_host</td><td>Location of the SAM proxy. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">interrupt</td><td>If this is signaled then all operations are canceled as soon as possible and executing methods throw an exception. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a814a19231bc9101a3be5e3dad542333f" name="a814a19231bc9101a3be5e3dad542333f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a814a19231bc9101a3be5e3dad542333f">&#9670;&#160;</a></span>Session() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Session </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_proxy.html">Proxy</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>control_host</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="class_c_thread_interrupt.html">CThreadInterrupt</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>interrupt</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct a transient session which will generate its own I2P private key rather than read the one from disk (it will not be saved on disk either and will be lost once this object is destroyed). This will not initiate any IO, the session will be lazily created later when first used. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">control_host</td><td>Location of the SAM proxy. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">interrupt</td><td>If this is signaled then all operations are canceled as soon as possible and executing methods throw an exception. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a12455f5db8475fe429d3ebf3aa84d7eb" name="a12455f5db8475fe429d3ebf3aa84d7eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12455f5db8475fe429d3ebf3aa84d7eb">&#9670;&#160;</a></span>~Session()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="#a85658cb9a754d70a1fe1ce0d645625c1">Session</a> </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy the session, closing the internally used sockets. The sockets that have been returned by <span class="tt"><a class="el" href="#a374ecfa4bb67dfadeeec44e8c1481766">Accept()</a></span> or <span class="tt"><a class="el" href="#a89c66ea021e473f04482e4871d9e9bf9">Connect()</a></span> will not be closed, but they will be closed by the SAM proxy because the session is destroyed. So they will return an error next time we try to read or write to them. </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a374ecfa4bb67dfadeeec44e8c1481766" name="a374ecfa4bb67dfadeeec44e8c1481766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a374ecfa4bb67dfadeeec44e8c1481766">&#9670;&#160;</a></span>Accept()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Accept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structi2p_1_1_connection.html">Connection</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>conn</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait for and accept a new incoming connection. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">conn</td><td>The <span class="tt">sock</span> member is used for waiting and accepting. Upon successful completion the <span class="tt">peer</span> member will be set to the address of the incoming peer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

</div>
</div>
<a id="a89c66ea021e473f04482e4871d9e9bf9" name="a89c66ea021e473f04482e4871d9e9bf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89c66ea021e473f04482e4871d9e9bf9">&#9670;&#160;</a></span>Connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Connect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_service.html">CService</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>to</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structi2p_1_1_connection.html">Connection</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>conn</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;</td>          <td class="paramname"><span class="paramname"><em>proxy_error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Connect to an I2P peer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>Peer to connect to. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">conn</td><td>Established connection. Only set if <span class="tt">true</span> is returned. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">proxy_error</td><td>If an error occurs due to proxy or general network failure, then this is set to <span class="tt">true</span>. If an error occurs due to unreachable peer (likely peer is down), then it is set to <span class="tt">false</span>. Only set if <span class="tt">false</span> is returned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

</div>
</div>
<a id="a96bbb63bd36a0974e6cbf9777b11520e" name="a96bbb63bd36a0974e6cbf9777b11520e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96bbb63bd36a0974e6cbf9777b11520e">&#9670;&#160;</a></span>Listen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Listen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structi2p_1_1_connection.html">Connection</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>conn</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start listening for an incoming connection. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">conn</td><td>Upon successful completion the <span class="tt">sock</span> and <span class="tt">me</span> members will be set to the listening socket and address. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="i2p_8h_source.html">i2p.h</a></li>
<li>src/<a class="el" href="i2p_8cpp.html">i2p.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespacei2p.html">i2p</a></li><li class="navelem"><a href="namespacei2p_1_1sam.html">sam</a></li><li class="navelem"><a href="classi2p_1_1sam_1_1_session.html">Session</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
