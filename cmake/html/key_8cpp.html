<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bitcoind: src/key.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bitcoin.ico"/></td>
  <td id="projectalign">
   <div id="projectname">bitcoind<span id="projectnumber">&#160;2.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('key_8cpp.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">key.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="key_8h_source.html">key.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="crypto_2common_8h_source.html">crypto/common.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="hmac__sha512_8h_source.html">crypto/hmac_sha512.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="hash_8h_source.html">hash.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="random_8h_source.html">random.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="secp256k1_8h_source.html">secp256k1.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="secp256k1__ellswift_8h_source.html">secp256k1_ellswift.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="secp256k1__extrakeys_8h_source.html">secp256k1_extrakeys.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="secp256k1__musig_8h_source.html">secp256k1_musig.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="secp256k1__recovery_8h_source.html">secp256k1_recovery.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="secp256k1__schnorrsig_8h_source.html">secp256k1_schnorrsig.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acb3e61a21bab4d7e4f38985463982b73" id="r_acb3e61a21bab4d7e4f38985463982b73"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb3e61a21bab4d7e4f38985463982b73">ec_seckey_import_der</a> (const <a class="el" href="secp256k1_8h.html#a282ec9e6dfec8c35955c3eb2f7476e5e">secp256k1_context</a> *ctx, unsigned char *out32, const unsigned char *seckey, size_t seckeylen)</td></tr>
<tr class="memitem:a8dfc834bbe7d6fb7715c07826c1b1507" id="r_a8dfc834bbe7d6fb7715c07826c1b1507"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8dfc834bbe7d6fb7715c07826c1b1507">ec_seckey_export_der</a> (const <a class="el" href="secp256k1_8h.html#a282ec9e6dfec8c35955c3eb2f7476e5e">secp256k1_context</a> *ctx, unsigned char *seckey, size_t *seckeylen, const unsigned char *key32, bool compressed)</td></tr>
<tr class="memitem:ac9ec599027c6b68a87ebd788be2a611c" id="r_ac9ec599027c6b68a87ebd788be2a611c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac9ec599027c6b68a87ebd788be2a611c">SigHasLowR</a> (const <a class="el" href="structsecp256k1__ecdsa__signature.html">secp256k1_ecdsa_signature</a> *sig)</td></tr>
<tr class="memitem:aeb5c90c6e6a817f5ed4876d9722ae37f" id="r_aeb5c90c6e6a817f5ed4876d9722ae37f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_key.html">CKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeb5c90c6e6a817f5ed4876d9722ae37f">GenerateRandomKey</a> (bool compressed) noexcept</td></tr>
<tr class="memitem:adc8d142f5bcd2ca6646462fb45a7945d" id="r_adc8d142f5bcd2ca6646462fb45a7945d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adc8d142f5bcd2ca6646462fb45a7945d">ECC_InitSanityCheck</a> ()</td></tr>
</table>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a8dfc834bbe7d6fb7715c07826c1b1507" name="a8dfc834bbe7d6fb7715c07826c1b1507"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dfc834bbe7d6fb7715c07826c1b1507">&#9670;&#160;</a></span>ec_seckey_export_der()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_seckey_export_der </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="secp256k1_8h.html#a282ec9e6dfec8c35955c3eb2f7476e5e">secp256k1_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>seckey</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>seckeylen</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *</td>          <td class="paramname"><span class="paramname"><em>key32</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>compressed</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This serializes to a DER encoding of the ECPrivateKey type from section C.4 of SEC 1 <a href="https://www.secg.org/sec1-v2.pdf">https://www.secg.org/sec1-v2.pdf</a>. The optional parameters and publicKey fields are included.</p>
<p>seckey must point to an output buffer of length at least <a class="el" href="class_c_key.html#a0760cd6fcc3f45a64b0402a4cc9b9ce3">CKey::SIZE</a> bytes. seckeylen must initially be set to the size of the seckey buffer. Upon return it will be set to the number of bytes used in the buffer. key32 must point to a 32-byte raw private key. </p>

</div>
</div>
<a id="acb3e61a21bab4d7e4f38985463982b73" name="acb3e61a21bab4d7e4f38985463982b73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb3e61a21bab4d7e4f38985463982b73">&#9670;&#160;</a></span>ec_seckey_import_der()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_seckey_import_der </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="secp256k1_8h.html#a282ec9e6dfec8c35955c3eb2f7476e5e">secp256k1_context</a> *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>out32</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *</td>          <td class="paramname"><span class="paramname"><em>seckey</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>seckeylen</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>These functions are taken from the libsecp256k1 distribution and are very ugly. This parses a format loosely based on a DER encoding of the ECPrivateKey type from section C.4 of SEC 1 <a href="https://www.secg.org/sec1-v2.pdf">https://www.secg.org/sec1-v2.pdf</a>, with the following caveats:</p>
<ul>
<li>The octet-length of the SEQUENCE must be encoded as 1 or 2 octets. It is not required to be encoded as one octet if it is less than 256, as DER would require.</li>
<li>The octet-length of the SEQUENCE must not be greater than the remaining length of the key encoding, but need not match it (i.e. the encoding may contain junk after the encoded SEQUENCE).</li>
<li>The privateKey OCTET STRING is zero-filled on the left to 32 octets.</li>
<li>Anything after the encoding of the privateKey OCTET STRING is ignored, whether or not it is validly encoded DER.</li>
</ul>
<p>out32 must point to an output buffer of length at least 32 bytes. </p>

</div>
</div>
<a id="adc8d142f5bcd2ca6646462fb45a7945d" name="adc8d142f5bcd2ca6646462fb45a7945d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc8d142f5bcd2ca6646462fb45a7945d">&#9670;&#160;</a></span>ECC_InitSanityCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ECC_InitSanityCheck </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check that required EC support is available at runtime. </p>

</div>
</div>
<a id="aeb5c90c6e6a817f5ed4876d9722ae37f" name="aeb5c90c6e6a817f5ed4876d9722ae37f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb5c90c6e6a817f5ed4876d9722ae37f">&#9670;&#160;</a></span>GenerateRandomKey()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_key.html">CKey</a> GenerateRandomKey </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>compressed</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac9ec599027c6b68a87ebd788be2a611c" name="ac9ec599027c6b68a87ebd788be2a611c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9ec599027c6b68a87ebd788be2a611c">&#9670;&#160;</a></span>SigHasLowR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SigHasLowR </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsecp256k1__ecdsa__signature.html">secp256k1_ecdsa_signature</a> *</td>          <td class="paramname"><span class="paramname"><em>sig</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="key_8cpp.html">key.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
