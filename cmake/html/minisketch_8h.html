<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bitcoind: src/minisketch/include/minisketch.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bitcoin.ico"/></td>
  <td id="projectalign">
   <div id="projectname">bitcoind<span id="projectnumber">&#160;2.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('minisketch_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">minisketch.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
</div>
<p><a href="minisketch_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3aba271c6880fbb225d20ea2401b36e2" id="r_a3aba271c6880fbb225d20ea2401b36e2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:adffb4f5b48fcdd25b57ae22f5b2147f4" id="r_adffb4f5b48fcdd25b57ae22f5b2147f4"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a26c0c0816ad7a3391b5b99031e4c0afe" id="r_a26c0c0816ad7a3391b5b99031e4c0afe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a26c0c0816ad7a3391b5b99031e4c0afe">minisketch_bits_supported</a> (uint32_t bits)</td></tr>
<tr class="memitem:a5d058c77ef55e6b12400cedf1d386738" id="r_a5d058c77ef55e6b12400cedf1d386738"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5d058c77ef55e6b12400cedf1d386738">minisketch_implementation_max</a> (void)</td></tr>
<tr class="memitem:ae8a257aa605e2ac449cfdac20125063a" id="r_ae8a257aa605e2ac449cfdac20125063a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae8a257aa605e2ac449cfdac20125063a">minisketch_implementation_supported</a> (uint32_t bits, uint32_t implementation)</td></tr>
<tr class="memitem:a4d39dce1593d829c3fde622807fda244" id="r_a4d39dce1593d829c3fde622807fda244"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4d39dce1593d829c3fde622807fda244">minisketch_create</a> (uint32_t bits, uint32_t implementation, size_t capacity)</td></tr>
<tr class="memitem:a9b51a3ccbee98114e71b0190b2f6a106" id="r_a9b51a3ccbee98114e71b0190b2f6a106"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9b51a3ccbee98114e71b0190b2f6a106">minisketch_bits</a> (const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch)</td></tr>
<tr class="memitem:a1335977c31b55fce5ccac936a9a7fc98" id="r_a1335977c31b55fce5ccac936a9a7fc98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1335977c31b55fce5ccac936a9a7fc98">minisketch_capacity</a> (const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch)</td></tr>
<tr class="memitem:a0bd6796b10a3b8d64877c6c16166e029" id="r_a0bd6796b10a3b8d64877c6c16166e029"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0bd6796b10a3b8d64877c6c16166e029">minisketch_implementation</a> (const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch)</td></tr>
<tr class="memitem:a0a5456c8994b584c548128154c264637" id="r_a0a5456c8994b584c548128154c264637"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0a5456c8994b584c548128154c264637">minisketch_set_seed</a> (<a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch, uint64_t seed)</td></tr>
<tr class="memitem:a85a63f2f6c0f6fc7346da4bf961ff557" id="r_a85a63f2f6c0f6fc7346da4bf961ff557"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a85a63f2f6c0f6fc7346da4bf961ff557">minisketch_clone</a> (const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch)</td></tr>
<tr class="memitem:ad603da5dcb6bfe0dd3bbe4b03895c73b" id="r_ad603da5dcb6bfe0dd3bbe4b03895c73b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad603da5dcb6bfe0dd3bbe4b03895c73b">minisketch_destroy</a> (<a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch)</td></tr>
<tr class="memitem:a3ab706ecc86c75ca06651ecc62024a23" id="r_a3ab706ecc86c75ca06651ecc62024a23"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3ab706ecc86c75ca06651ecc62024a23">minisketch_serialized_size</a> (const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch)</td></tr>
<tr class="memitem:a03a014a1f2885b473c14f6aa24de24f4" id="r_a03a014a1f2885b473c14f6aa24de24f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a03a014a1f2885b473c14f6aa24de24f4">minisketch_serialize</a> (const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch, unsigned char *output)</td></tr>
<tr class="memitem:ad283ad30bb9ac697a42d81ca2796414b" id="r_ad283ad30bb9ac697a42d81ca2796414b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad283ad30bb9ac697a42d81ca2796414b">minisketch_deserialize</a> (<a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch, const unsigned char *input)</td></tr>
<tr class="memitem:a6e0d272f72df96765d9041f859324880" id="r_a6e0d272f72df96765d9041f859324880"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6e0d272f72df96765d9041f859324880">minisketch_add_uint64</a> (<a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch, uint64_t element)</td></tr>
<tr class="memitem:a33e9c31b9b1ec357f85ba05c4d6724a2" id="r_a33e9c31b9b1ec357f85ba05c4d6724a2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a33e9c31b9b1ec357f85ba05c4d6724a2">minisketch_merge</a> (<a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch, const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *other_sketch)</td></tr>
<tr class="memitem:a20adb9ea07329cdceb1f7254aee870b0" id="r_a20adb9ea07329cdceb1f7254aee870b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20adb9ea07329cdceb1f7254aee870b0">minisketch_decode</a> (const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *sketch, size_t max_elements, uint64_t *output)</td></tr>
<tr class="memitem:a1f58897ab5be5c6fd5bc5d64e9866ea3" id="r_a1f58897ab5be5c6fd5bc5d64e9866ea3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f58897ab5be5c6fd5bc5d64e9866ea3">minisketch_compute_capacity</a> (uint32_t bits, size_t max_elements, uint32_t fpbits)</td></tr>
<tr class="memitem:aa92ef4871e3bbcd0e1a740923e22c87b" id="r_aa92ef4871e3bbcd0e1a740923e22c87b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa92ef4871e3bbcd0e1a740923e22c87b">minisketch_compute_max_elements</a> (uint32_t bits, size_t capacity, uint32_t fpbits)</td></tr>
</table>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="a3aba271c6880fbb225d20ea2401b36e2" name="a3aba271c6880fbb225d20ea2401b36e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aba271c6880fbb225d20ea2401b36e2">&#9670;&#160;</a></span>MINISKETCH_API</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MINISKETCH_API</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-typedef-members" id="doc-typedef-members"></a><h2 id="header-doc-typedef-members" class="groupheader">Typedef Documentation</h2>
<a id="adffb4f5b48fcdd25b57ae22f5b2147f4" name="adffb4f5b48fcdd25b57ae22f5b2147f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adffb4f5b48fcdd25b57ae22f5b2147f4">&#9670;&#160;</a></span>minisketch</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opaque type for decoded sketches. </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a6e0d272f72df96765d9041f859324880" name="a6e0d272f72df96765d9041f859324880"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e0d272f72df96765d9041f859324880">&#9670;&#160;</a></span>minisketch_add_uint64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> void minisketch_add_uint64 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>element</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add an element to a sketch.</p>
<p>If the element to be added is too large for the sketch, the most significant bits of the element are dropped. More precisely, if the element size of <span class="tt">sketch</span> is b bits, then this function adds the unsigned integer represented by the b least significant bits of <span class="tt">element</span> to <span class="tt">sketch</span>.</p>
<p>If the element to be added is 0 (after potentially dropping the most significant bits), then this function is a no-op. Sketches cannot contain an element with the value 0.</p>
<p>Note that adding the same element a second time removes it again. </p>

</div>
</div>
<a id="a9b51a3ccbee98114e71b0190b2f6a106" name="a9b51a3ccbee98114e71b0190b2f6a106"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b51a3ccbee98114e71b0190b2f6a106">&#9670;&#160;</a></span>minisketch_bits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> uint32_t minisketch_bits </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the element size of a sketch in bits. </p>

</div>
</div>
<a id="a26c0c0816ad7a3391b5b99031e4c0afe" name="a26c0c0816ad7a3391b5b99031e4c0afe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26c0c0816ad7a3391b5b99031e4c0afe">&#9670;&#160;</a></span>minisketch_bits_supported()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> int minisketch_bits_supported </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>bits</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine whether support for elements of <span class="tt">bits</span> bits was compiled in. </p>

</div>
</div>
<a id="a1335977c31b55fce5ccac936a9a7fc98" name="a1335977c31b55fce5ccac936a9a7fc98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1335977c31b55fce5ccac936a9a7fc98">&#9670;&#160;</a></span>minisketch_capacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> size_t minisketch_capacity </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the capacity of a sketch. </p>

</div>
</div>
<a id="a85a63f2f6c0f6fc7346da4bf961ff557" name="a85a63f2f6c0f6fc7346da4bf961ff557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85a63f2f6c0f6fc7346da4bf961ff557">&#9670;&#160;</a></span>minisketch_clone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> * minisketch_clone </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clone a sketch.</p>
<p>The result must be destroyed using minisketch_destroy. </p>

</div>
</div>
<a id="a1f58897ab5be5c6fd5bc5d64e9866ea3" name="a1f58897ab5be5c6fd5bc5d64e9866ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f58897ab5be5c6fd5bc5d64e9866ea3">&#9670;&#160;</a></span>minisketch_compute_capacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> size_t minisketch_compute_capacity </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>bits</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>max_elements</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>fpbits</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute the capacity needed to achieve a certain rate of false positives.</p>
<p>A sketch with capacity c and no more than c elements can always be decoded correctly. However, if it has more than c elements, or contains just random bytes, it is possible that it will still decode, but the result will be nonsense. This can be counteracted by increasing the capacity slightly.</p>
<p>Given a field size bits, an intended number of elements that can be decoded max_elements, and a false positive probability of 1 in 2**fpbits, this function computes the necessary capacity. It is only guaranteed to be accurate up to fpbits=256. </p>

</div>
</div>
<a id="aa92ef4871e3bbcd0e1a740923e22c87b" name="aa92ef4871e3bbcd0e1a740923e22c87b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa92ef4871e3bbcd0e1a740923e22c87b">&#9670;&#160;</a></span>minisketch_compute_max_elements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> size_t minisketch_compute_max_elements </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>bits</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>capacity</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>fpbits</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute what max_elements can be decoded for a certain rate of false positives.</p>
<p>This is the inverse operation of minisketch_compute_capacity. It determines, given a field size bits, a capacity of a sketch, and an acceptable false positive probability of 1 in 2**fpbits, what the maximum allowed max_elements value is. If no value of max_elements would give the desired false positive probability, 0 is returned.</p>
<p>Note that this is not an exact inverse of minisketch_compute_capacity. For example, with bits=32, fpbits=16, and max_elements=8, minisketch_compute_capacity will return 9, as capacity 8 would only have a false positive chance of 1 in 2^15.3. Increasing the capacity to 9 however decreases the fp chance to 1 in 2^47.3, enough for max_elements=9 (with fp chance of 1 in 2^18.5). Therefore, minisketch_compute_max_elements with capacity=9 will return 9. </p>

</div>
</div>
<a id="a4d39dce1593d829c3fde622807fda244" name="a4d39dce1593d829c3fde622807fda244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d39dce1593d829c3fde622807fda244">&#9670;&#160;</a></span>minisketch_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> * minisketch_create </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>bits</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>implementation</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>capacity</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct a sketch for a given element size, implementation and capacity.</p>
<p>If the combination of <span class="tt">bits</span> and <span class="tt">implementation</span> is unavailable, or when OOM occurs, NULL is returned. If minisketch_implementation_supported returns 1 for the specified bits and implementation, this will always succeed (except when allocation fails).</p>
<p>If the result is not NULL, it must be destroyed using minisketch_destroy. </p>

</div>
</div>
<a id="a20adb9ea07329cdceb1f7254aee870b0" name="a20adb9ea07329cdceb1f7254aee870b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20adb9ea07329cdceb1f7254aee870b0">&#9670;&#160;</a></span>minisketch_decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> ssize_t minisketch_decode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>max_elements</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *</td>          <td class="paramname"><span class="paramname"><em>output</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decode a sketch.</p>
<p><span class="tt">output</span> is a pointer to an array of <span class="tt">max_element</span> uint64_t's, which will be filled with the elements in this sketch.</p>
<p>The return value is the number of decoded elements, or -1 if decoding failed. </p>

</div>
</div>
<a id="ad283ad30bb9ac697a42d81ca2796414b" name="ad283ad30bb9ac697a42d81ca2796414b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad283ad30bb9ac697a42d81ca2796414b">&#9670;&#160;</a></span>minisketch_deserialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> void minisketch_deserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *</td>          <td class="paramname"><span class="paramname"><em>input</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deserialize a sketch from bytes. </p>

</div>
</div>
<a id="ad603da5dcb6bfe0dd3bbe4b03895c73b" name="ad603da5dcb6bfe0dd3bbe4b03895c73b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad603da5dcb6bfe0dd3bbe4b03895c73b">&#9670;&#160;</a></span>minisketch_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> void minisketch_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy a sketch.</p>
<p>The pointer that was passed in may not be used anymore afterwards. </p>

</div>
</div>
<a id="a0bd6796b10a3b8d64877c6c16166e029" name="a0bd6796b10a3b8d64877c6c16166e029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bd6796b10a3b8d64877c6c16166e029">&#9670;&#160;</a></span>minisketch_implementation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> uint32_t minisketch_implementation </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the implementation of a sketch. </p>

</div>
</div>
<a id="a5d058c77ef55e6b12400cedf1d386738" name="a5d058c77ef55e6b12400cedf1d386738"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d058c77ef55e6b12400cedf1d386738">&#9670;&#160;</a></span>minisketch_implementation_max()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> uint32_t minisketch_implementation_max </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine the maximum number of implementations available.</p>
<p>Multiple implementations may be available for a given element size, with different performance characteristics on different hardware.</p>
<p>Each implementation is identified by a number from 0 to the output of this function call, inclusive. Note that not every combination of implementation and element size may exist (see further). </p>

</div>
</div>
<a id="ae8a257aa605e2ac449cfdac20125063a" name="ae8a257aa605e2ac449cfdac20125063a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8a257aa605e2ac449cfdac20125063a">&#9670;&#160;</a></span>minisketch_implementation_supported()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> int minisketch_implementation_supported </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>bits</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>implementation</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine if the a combination of bits and implementation number is available.</p>
<p>Returns 1 if it is, 0 otherwise. </p>

</div>
</div>
<a id="a33e9c31b9b1ec357f85ba05c4d6724a2" name="a33e9c31b9b1ec357f85ba05c4d6724a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33e9c31b9b1ec357f85ba05c4d6724a2">&#9670;&#160;</a></span>minisketch_merge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> size_t minisketch_merge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>other_sketch</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Merge the elements of another sketch into this sketch.</p>
<p>After merging, <span class="tt">sketch</span> will contain every element that existed in one but not both of the input sketches. It can be seen as an exclusive or operation on the set elements. If the capacity of <span class="tt">other_sketch</span> is lower than <span class="tt">sketch</span>'s, merging reduces the capacity of <span class="tt">sketch</span> to that of <span class="tt">other_sketch</span>.</p>
<p>This function returns the capacity of <span class="tt">sketch</span> after merging has been performed (where this capacity is at least 1), or 0 to indicate that merging has failed because the two input sketches differ in their element size or implementation. If 0 is returned, <span class="tt">sketch</span> (and its capacity) have not been modified.</p>
<p>It is also possible to perform this operation directly on the serializations of two sketches with the same element size and capacity by performing a bitwise XOR of the serializations. </p>

</div>
</div>
<a id="a03a014a1f2885b473c14f6aa24de24f4" name="a03a014a1f2885b473c14f6aa24de24f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03a014a1f2885b473c14f6aa24de24f4">&#9670;&#160;</a></span>minisketch_serialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> void minisketch_serialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *</td>          <td class="paramname"><span class="paramname"><em>output</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Serialize a sketch to bytes. </p>

</div>
</div>
<a id="a3ab706ecc86c75ca06651ecc62024a23" name="a3ab706ecc86c75ca06651ecc62024a23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ab706ecc86c75ca06651ecc62024a23">&#9670;&#160;</a></span>minisketch_serialized_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> size_t minisketch_serialized_size </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute the size in bytes for serializing a given sketch. </p>

</div>
</div>
<a id="a0a5456c8994b584c548128154c264637" name="a0a5456c8994b584c548128154c264637"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a5456c8994b584c548128154c264637">&#9670;&#160;</a></span>minisketch_set_seed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3aba271c6880fbb225d20ea2401b36e2">MINISKETCH_API</a> void minisketch_set_seed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#adffb4f5b48fcdd25b57ae22f5b2147f4">minisketch</a> *</td>          <td class="paramname"><span class="paramname"><em>sketch</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>seed</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the seed for randomizing algorithm choices to a fixed value.</p>
<p>By default, sketches are initialized with a random seed. This is important to avoid scenarios where an attacker could force worst-case behavior.</p>
<p>This function initializes the seed to a user-provided value (any 64-bit integer is acceptable, regardless of field size).</p>
<p>When seed is -1, a fixed internal value with predictable behavior is used. It is only intended for testing. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="dir_70099abe5db258d8b2b1561b8813f7f0.html">minisketch</a></li><li class="navelem"><a href="dir_e4bd1dc231b7eb1532b49bf0356c9b1e.html">include</a></li><li class="navelem"><a href="minisketch_8h.html">minisketch.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
