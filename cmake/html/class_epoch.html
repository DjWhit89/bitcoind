<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bitcoind: Epoch Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bitcoin.ico"/></td>
  <td id="projectalign">
   <div id="projectname">bitcoind<span id="projectnumber">&#160;2.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_epoch.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Epoch Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="epochguard_8h_source.html">epochguard.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:Marker" id="r_Marker"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch_1_1_marker.html">Marker</a></td></tr>
<tr class="memitem:Guard" id="r_Guard"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch_1_1_guard.html">Guard</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0f329154e2f4b4821fc8ac27b71249ae" id="r_a0f329154e2f4b4821fc8ac27b71249ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0f329154e2f4b4821fc8ac27b71249ae">Epoch</a> ()=default</td></tr>
<tr class="memitem:afa3d238e46b911a1710736f8cf612615" id="r_afa3d238e46b911a1710736f8cf612615"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa3d238e46b911a1710736f8cf612615">Epoch</a> (const <a class="el" href="class_epoch.html">Epoch</a> &amp;)=delete</td></tr>
<tr class="memitem:a2d6696c6a404aa0224e5397e8419598d" id="r_a2d6696c6a404aa0224e5397e8419598d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_epoch.html">Epoch</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2d6696c6a404aa0224e5397e8419598d">operator=</a> (const <a class="el" href="class_epoch.html">Epoch</a> &amp;)=delete</td></tr>
<tr class="memitem:a4f183e31420f79483f73d1cbd93d9b97" id="r_a4f183e31420f79483f73d1cbd93d9b97"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f183e31420f79483f73d1cbd93d9b97">Epoch</a> (<a class="el" href="class_epoch.html">Epoch</a> &amp;&amp;)=delete</td></tr>
<tr class="memitem:a0226b23515def2c858b112f34b7fc4f3" id="r_a0226b23515def2c858b112f34b7fc4f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_epoch.html">Epoch</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0226b23515def2c858b112f34b7fc4f3">operator=</a> (<a class="el" href="class_epoch.html">Epoch</a> &amp;&amp;)=delete</td></tr>
<tr class="memitem:aaa5e2d8414ef0c7e3c5fa0b8598a2004" id="r_aaa5e2d8414ef0c7e3c5fa0b8598a2004"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa5e2d8414ef0c7e3c5fa0b8598a2004">~Epoch</a> ()=default</td></tr>
<tr class="memitem:a06d58f7eb6c0fc1043d1e9a6e5a61bdd" id="r_a06d58f7eb6c0fc1043d1e9a6e5a61bdd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a06d58f7eb6c0fc1043d1e9a6e5a61bdd">guarded</a> () const</td></tr>
<tr class="memitem:affd9150d452a9950db12318be619dd1a" id="r_affd9150d452a9950db12318be619dd1a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#affd9150d452a9950db12318be619dd1a">visited</a> (<a class="el" href="class_epoch_1_1_marker.html">Marker</a> &amp;marker) const <a class="el" href="thread__annotations_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(*this)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_epoch.html">Epoch</a>: RAII-style guard for using epoch-based graph traversal algorithms. When walking ancestors or descendants, we generally want to avoid visiting the same transactions twice. Some traversal algorithms use std::set (or setEntries) to deduplicate the transaction we visit. However, use of std::set is algorithmically undesirable because it both adds an asymptotic factor of O(log n) to traversals cost and triggers O(n) more dynamic memory allocations. In many algorithms we can replace std::set with an internal mempool counter to track the time (or, "epoch") that we began a traversal, and check + update a per-transaction epoch for each transaction we look at to determine if that transaction has not yet been visited during the current traversal's epoch. Algorithms using std::set can be replaced on a one by one basis. Both techniques are not fundamentally incompatible across the codebase. Generally speaking, however, the remaining use of std::set for mempool traversal should be viewed as a TODO for replacement with an epoch based traversal, rather than a preference for std::set over epochs in that algorithm. </p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0f329154e2f4b4821fc8ac27b71249ae" name="a0f329154e2f4b4821fc8ac27b71249ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f329154e2f4b4821fc8ac27b71249ae">&#9670;&#160;</a></span>Epoch() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_epoch.html">Epoch</a> </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel default">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afa3d238e46b911a1710736f8cf612615" name="afa3d238e46b911a1710736f8cf612615"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa3d238e46b911a1710736f8cf612615">&#9670;&#160;</a></span>Epoch() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_epoch.html">Epoch</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_epoch.html">Epoch</a> &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel delete">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4f183e31420f79483f73d1cbd93d9b97" name="a4f183e31420f79483f73d1cbd93d9b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f183e31420f79483f73d1cbd93d9b97">&#9670;&#160;</a></span>Epoch() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_epoch.html">Epoch</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_epoch.html">Epoch</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel delete">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aaa5e2d8414ef0c7e3c5fa0b8598a2004" name="aaa5e2d8414ef0c7e3c5fa0b8598a2004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa5e2d8414ef0c7e3c5fa0b8598a2004">&#9670;&#160;</a></span>~Epoch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="class_epoch.html">Epoch</a> </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel default">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a06d58f7eb6c0fc1043d1e9a6e5a61bdd" name="a06d58f7eb6c0fc1043d1e9a6e5a61bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06d58f7eb6c0fc1043d1e9a6e5a61bdd">&#9670;&#160;</a></span>guarded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool guarded </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2d6696c6a404aa0224e5397e8419598d" name="a2d6696c6a404aa0224e5397e8419598d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d6696c6a404aa0224e5397e8419598d">&#9670;&#160;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_epoch.html">Epoch</a> &amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_epoch.html">Epoch</a> &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel delete">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0226b23515def2c858b112f34b7fc4f3" name="a0226b23515def2c858b112f34b7fc4f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0226b23515def2c858b112f34b7fc4f3">&#9670;&#160;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_epoch.html">Epoch</a> &amp; operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_epoch.html">Epoch</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel delete">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="affd9150d452a9950db12318be619dd1a" name="affd9150d452a9950db12318be619dd1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affd9150d452a9950db12318be619dd1a">&#9670;&#160;</a></span>visited()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool visited </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_epoch_1_1_marker.html">Marker</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>marker</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/util/<a class="el" href="epochguard_8h_source.html">epochguard.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_epoch.html">Epoch</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
